import{r as Ly,g as vd,a as Ob,b as qy}from"./react-vendor-ByR4cYxz.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function s(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(o){if(o.ep)return;o.ep=!0;const l=s(o);fetch(o.href,l)}})();var Mu={exports:{}},to={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dp;function Lb(){if(Dp)return to;Dp=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function s(a,o,l){var d=null;if(l!==void 0&&(d=""+l),o.key!==void 0&&(d=""+o.key),"key"in o){l={};for(var f in o)f!=="key"&&(l[f]=o[f])}else l=o;return o=l.ref,{$$typeof:n,type:a,key:d,ref:o!==void 0?o:null,props:l}}return to.Fragment=e,to.jsx=s,to.jsxs=s,to}var Pp;function qb(){return Pp||(Pp=1,Mu.exports=Lb()),Mu.exports}var c=qb(),G=Ly();const $e=vd(G);var Iu={exports:{}},no={},Uu={exports:{}},Du={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Op;function Bb(){return Op||(Op=1,(function(n){function e(D,Q){var de=D.length;D.push(Q);e:for(;0<de;){var Oe=de-1>>>1,Me=D[Oe];if(0<o(Me,Q))D[Oe]=Q,D[de]=Me,de=Oe;else break e}}function s(D){return D.length===0?null:D[0]}function a(D){if(D.length===0)return null;var Q=D[0],de=D.pop();if(de!==Q){D[0]=de;e:for(var Oe=0,Me=D.length,dt=Me>>>1;Oe<dt;){var Be=2*(Oe+1)-1,Ne=D[Be],Qe=Be+1,Gt=D[Qe];if(0>o(Ne,de))Qe<Me&&0>o(Gt,Ne)?(D[Oe]=Gt,D[Qe]=de,Oe=Qe):(D[Oe]=Ne,D[Be]=de,Oe=Be);else if(Qe<Me&&0>o(Gt,de))D[Oe]=Gt,D[Qe]=de,Oe=Qe;else break e}}return Q}function o(D,Q){var de=D.sortIndex-Q.sortIndex;return de!==0?de:D.id-Q.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var d=Date,f=d.now();n.unstable_now=function(){return d.now()-f}}var m=[],p=[],x=1,b=null,w=3,_=!1,N=!1,C=!1,E=!1,R=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function U(D){for(var Q=s(p);Q!==null;){if(Q.callback===null)a(p);else if(Q.startTime<=D)a(p),Q.sortIndex=Q.expirationTime,e(m,Q);else break;Q=s(p)}}function V(D){if(C=!1,U(D),!N)if(s(m)!==null)N=!0,B||(B=!0,X());else{var Q=s(p);Q!==null&&oe(V,Q.startTime-D)}}var B=!1,H=-1,W=5,Y=-1;function J(){return E?!0:!(n.unstable_now()-Y<W)}function Z(){if(E=!1,B){var D=n.unstable_now();Y=D;var Q=!0;try{e:{N=!1,C&&(C=!1,A(H),H=-1),_=!0;var de=w;try{t:{for(U(D),b=s(m);b!==null&&!(b.expirationTime>D&&J());){var Oe=b.callback;if(typeof Oe=="function"){b.callback=null,w=b.priorityLevel;var Me=Oe(b.expirationTime<=D);if(D=n.unstable_now(),typeof Me=="function"){b.callback=Me,U(D),Q=!0;break t}b===s(m)&&a(m),U(D)}else a(m);b=s(m)}if(b!==null)Q=!0;else{var dt=s(p);dt!==null&&oe(V,dt.startTime-D),Q=!1}}break e}finally{b=null,w=de,_=!1}Q=void 0}}finally{Q?X():B=!1}}}var X;if(typeof k=="function")X=function(){k(Z)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,ke=pe.port2;pe.port1.onmessage=Z,X=function(){ke.postMessage(null)}}else X=function(){R(Z,0)};function oe(D,Q){H=R(function(){D(n.unstable_now())},Q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_forceFrameRate=function(D){0>D||125<D||(W=0<D?Math.floor(1e3/D):5)},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_next=function(D){switch(w){case 1:case 2:case 3:var Q=3;break;default:Q=w}var de=w;w=Q;try{return D()}finally{w=de}},n.unstable_requestPaint=function(){E=!0},n.unstable_runWithPriority=function(D,Q){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var de=w;w=D;try{return Q()}finally{w=de}},n.unstable_scheduleCallback=function(D,Q,de){var Oe=n.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?Oe+de:Oe):de=Oe,D){case 1:var Me=-1;break;case 2:Me=250;break;case 5:Me=1073741823;break;case 4:Me=1e4;break;default:Me=5e3}return Me=de+Me,D={id:x++,callback:Q,priorityLevel:D,startTime:de,expirationTime:Me,sortIndex:-1},de>Oe?(D.sortIndex=de,e(p,D),s(m)===null&&D===s(p)&&(C?(A(H),H=-1):C=!0,oe(V,de-Oe))):(D.sortIndex=Me,e(m,D),N||_||(N=!0,B||(B=!0,X()))),D},n.unstable_shouldYield=J,n.unstable_wrapCallback=function(D){var Q=w;return function(){var de=w;w=Q;try{return D.apply(this,arguments)}finally{w=de}}}})(Du)),Du}var Lp;function Vb(){return Lp||(Lp=1,Uu.exports=Bb()),Uu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qp;function Hb(){if(qp)return no;qp=1;var n=Vb(),e=Ly(),s=Ob();function a(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)i+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function l(t){var i=t,r=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(r=i.return),t=i.return;while(t)}return i.tag===3?r:null}function d(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function f(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function m(t){if(l(t)!==t)throw Error(a(188))}function p(t){var i=t.alternate;if(!i){if(i=l(t),i===null)throw Error(a(188));return i!==t?null:t}for(var r=t,u=i;;){var g=r.return;if(g===null)break;var v=g.alternate;if(v===null){if(u=g.return,u!==null){r=u;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===r)return m(g),t;if(v===u)return m(g),i;v=v.sibling}throw Error(a(188))}if(r.return!==u.return)r=g,u=v;else{for(var S=!1,T=g.child;T;){if(T===r){S=!0,r=g,u=v;break}if(T===u){S=!0,u=g,r=v;break}T=T.sibling}if(!S){for(T=v.child;T;){if(T===r){S=!0,r=v,u=g;break}if(T===u){S=!0,u=v,r=g;break}T=T.sibling}if(!S)throw Error(a(189))}}if(r.alternate!==u)throw Error(a(190))}if(r.tag!==3)throw Error(a(188));return r.stateNode.current===r?t:i}function x(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=x(t),i!==null)return i;t=t.sibling}return null}var b=Object.assign,w=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),A=Symbol.for("react.consumer"),k=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),Y=Symbol.for("react.activity"),J=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function X(t){return t===null||typeof t!="object"?null:(t=Z&&t[Z]||t["@@iterator"],typeof t=="function"?t:null)}var pe=Symbol.for("react.client.reference");function ke(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===pe?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case C:return"Fragment";case R:return"Profiler";case E:return"StrictMode";case V:return"Suspense";case B:return"SuspenseList";case Y:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case N:return"Portal";case k:return t.displayName||"Context";case A:return(t._context.displayName||"Context")+".Consumer";case U:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case H:return i=t.displayName||null,i!==null?i:ke(t.type)||"Memo";case W:i=t._payload,t=t._init;try{return ke(t(i))}catch{}}return null}var oe=Array.isArray,D=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},Oe=[],Me=-1;function dt(t){return{current:t}}function Be(t){0>Me||(t.current=Oe[Me],Oe[Me]=null,Me--)}function Ne(t,i){Me++,Oe[Me]=t.current,t.current=i}var Qe=dt(null),Gt=dt(null),nn=dt(null),sn=dt(null);function Ys(t,i){switch(Ne(nn,i),Ne(Gt,t),Ne(Qe,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?ip(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=ip(i),t=ap(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Be(Qe),Ne(Qe,t)}function an(){Be(Qe),Be(Gt),Be(nn)}function ot(t){t.memoizedState!==null&&Ne(sn,t);var i=Qe.current,r=ap(i,t.type);i!==r&&(Ne(Gt,t),Ne(Qe,r))}function Ks(t){Gt.current===t&&(Be(Qe),Be(Gt)),sn.current===t&&(Be(sn),Xa._currentValue=de)}var xs,Qs;function on(t){if(xs===void 0)try{throw Error()}catch(r){var i=r.stack.trim().match(/\n( *(at )?)/);xs=i&&i[1]||"",Qs=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xs+t+Qs}var Xs=!1;function ra(t,i){if(!t||Xs)return"";Xs=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(q){var L=q}Reflect.construct(t,[],$)}else{try{$.call()}catch(q){L=q}t.call($.prototype)}}else{try{throw Error()}catch(q){L=q}($=t())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(q){if(q&&L&&typeof q.stack=="string")return[q.stack,L.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=u.DetermineComponentFrameRoot(),S=v[0],T=v[1];if(S&&T){var j=S.split(`
`),O=T.split(`
`);for(g=u=0;u<j.length&&!j[u].includes("DetermineComponentFrameRoot");)u++;for(;g<O.length&&!O[g].includes("DetermineComponentFrameRoot");)g++;if(u===j.length||g===O.length)for(u=j.length-1,g=O.length-1;1<=u&&0<=g&&j[u]!==O[g];)g--;for(;1<=u&&0<=g;u--,g--)if(j[u]!==O[g]){if(u!==1||g!==1)do if(u--,g--,0>g||j[u]!==O[g]){var z=`
`+j[u].replace(" at new "," at ");return t.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",t.displayName)),z}while(1<=u&&0<=g);break}}}finally{Xs=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?on(r):""}function yl(t,i){switch(t.tag){case 26:case 27:case 5:return on(t.type);case 16:return on("Lazy");case 13:return t.child!==i&&i!==null?on("Suspense Fallback"):on("Suspense");case 19:return on("SuspenseList");case 0:case 15:return ra(t.type,!1);case 11:return ra(t.type.render,!1);case 1:return ra(t.type,!0);case 31:return on("Activity");default:return""}}function Ie(t){try{var i="",r=null;do i+=yl(t,r),r=t,t=t.return;while(t);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var la=Object.prototype.hasOwnProperty,Ws=n.unstable_scheduleCallback,ca=n.unstable_cancelCallback,bo=n.unstable_shouldYield,vl=n.unstable_requestPaint,xt=n.unstable_now,xl=n.unstable_getCurrentPriorityLevel,wo=n.unstable_ImmediatePriority,_o=n.unstable_UserBlockingPriority,Zs=n.unstable_NormalPriority,K=n.unstable_LowPriority,re=n.unstable_IdlePriority,te=n.log,et=n.unstable_setDisableYieldValue,me=null,fe=null;function St(t){if(typeof te=="function"&&et(t),fe&&typeof fe.setStrictMode=="function")try{fe.setStrictMode(me,t)}catch{}}var Le=Math.clz32?Math.clz32:Sv,wv=Math.log,_v=Math.LN2;function Sv(t){return t>>>=0,t===0?32:31-(wv(t)/_v|0)|0}var So=256,No=262144,Co=4194304;function bs(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function To(t,i,r){var u=t.pendingLanes;if(u===0)return 0;var g=0,v=t.suspendedLanes,S=t.pingedLanes;t=t.warmLanes;var T=u&134217727;return T!==0?(u=T&~v,u!==0?g=bs(u):(S&=T,S!==0?g=bs(S):r||(r=T&~t,r!==0&&(g=bs(r))))):(T=u&~v,T!==0?g=bs(T):S!==0?g=bs(S):r||(r=u&~t,r!==0&&(g=bs(r)))),g===0?0:i!==0&&i!==g&&(i&v)===0&&(v=g&-g,r=i&-i,v>=r||v===32&&(r&4194048)!==0)?i:g}function ua(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Nv(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ld(){var t=Co;return Co<<=1,(Co&62914560)===0&&(Co=4194304),t}function bl(t){for(var i=[],r=0;31>r;r++)i.push(t);return i}function da(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Cv(t,i,r,u,g,v){var S=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var T=t.entanglements,j=t.expirationTimes,O=t.hiddenUpdates;for(r=S&~r;0<r;){var z=31-Le(r),$=1<<z;T[z]=0,j[z]=-1;var L=O[z];if(L!==null)for(O[z]=null,z=0;z<L.length;z++){var q=L[z];q!==null&&(q.lane&=-536870913)}r&=~$}u!==0&&qd(t,u,0),v!==0&&g===0&&t.tag!==0&&(t.suspendedLanes|=v&~(S&~i))}function qd(t,i,r){t.pendingLanes|=i,t.suspendedLanes&=~i;var u=31-Le(i);t.entangledLanes|=i,t.entanglements[u]=t.entanglements[u]|1073741824|r&261930}function Bd(t,i){var r=t.entangledLanes|=i;for(t=t.entanglements;r;){var u=31-Le(r),g=1<<u;g&i|t[u]&i&&(t[u]|=i),r&=~g}}function Vd(t,i){var r=i&-i;return r=(r&42)!==0?1:wl(r),(r&(t.suspendedLanes|i))!==0?0:r}function wl(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function _l(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Hd(){var t=Q.p;return t!==0?t:(t=window.event,t===void 0?32:Ap(t.type))}function Gd(t,i){var r=Q.p;try{return Q.p=t,i()}finally{Q.p=r}}var Vn=Math.random().toString(36).slice(2),ft="__reactFiber$"+Vn,Nt="__reactProps$"+Vn,ei="__reactContainer$"+Vn,Sl="__reactEvents$"+Vn,Tv="__reactListeners$"+Vn,Ev="__reactHandles$"+Vn,zd="__reactResources$"+Vn,fa="__reactMarker$"+Vn;function Nl(t){delete t[ft],delete t[Nt],delete t[Sl],delete t[Tv],delete t[Ev]}function ti(t){var i=t[ft];if(i)return i;for(var r=t.parentNode;r;){if(i=r[ei]||r[ft]){if(r=i.alternate,i.child!==null||r!==null&&r.child!==null)for(t=fp(t);t!==null;){if(r=t[ft])return r;t=fp(t)}return i}t=r,r=t.parentNode}return null}function ni(t){if(t=t[ft]||t[ei]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function ha(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(a(33))}function si(t){var i=t[zd];return i||(i=t[zd]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ct(t){t[fa]=!0}var Fd=new Set,$d={};function ws(t,i){ii(t,i),ii(t+"Capture",i)}function ii(t,i){for($d[t]=i,t=0;t<i.length;t++)Fd.add(i[t])}var Av=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Jd={},Yd={};function kv(t){return la.call(Yd,t)?!0:la.call(Jd,t)?!1:Av.test(t)?Yd[t]=!0:(Jd[t]=!0,!1)}function Eo(t,i,r){if(kv(i))if(r===null)t.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+r)}}function Ao(t,i,r){if(r===null)t.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+r)}}function xn(t,i,r,u){if(u===null)t.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(i,r,""+u)}}function zt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Kd(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function jv(t,i,r){var u=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,v=u.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return g.call(this)},set:function(S){r=""+S,v.call(this,S)}}),Object.defineProperty(t,i,{enumerable:u.enumerable}),{getValue:function(){return r},setValue:function(S){r=""+S},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Cl(t){if(!t._valueTracker){var i=Kd(t)?"checked":"value";t._valueTracker=jv(t,i,""+t[i])}}function Qd(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var r=i.getValue(),u="";return t&&(u=Kd(t)?t.checked?"true":"false":t.value),t=u,t!==r?(i.setValue(t),!0):!1}function ko(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Rv=/[\n"\\]/g;function Ft(t){return t.replace(Rv,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Tl(t,i,r,u,g,v,S,T){t.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.type=S:t.removeAttribute("type"),i!=null?S==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+zt(i)):t.value!==""+zt(i)&&(t.value=""+zt(i)):S!=="submit"&&S!=="reset"||t.removeAttribute("value"),i!=null?El(t,S,zt(i)):r!=null?El(t,S,zt(r)):u!=null&&t.removeAttribute("value"),g==null&&v!=null&&(t.defaultChecked=!!v),g!=null&&(t.checked=g&&typeof g!="function"&&typeof g!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+zt(T):t.removeAttribute("name")}function Xd(t,i,r,u,g,v,S,T){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.type=v),i!=null||r!=null){if(!(v!=="submit"&&v!=="reset"||i!=null)){Cl(t);return}r=r!=null?""+zt(r):"",i=i!=null?""+zt(i):r,T||i===t.value||(t.value=i),t.defaultValue=i}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,t.checked=T?t.checked:!!u,t.defaultChecked=!!u,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(t.name=S),Cl(t)}function El(t,i,r){i==="number"&&ko(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function ai(t,i,r,u){if(t=t.options,i){i={};for(var g=0;g<r.length;g++)i["$"+r[g]]=!0;for(r=0;r<t.length;r++)g=i.hasOwnProperty("$"+t[r].value),t[r].selected!==g&&(t[r].selected=g),g&&u&&(t[r].defaultSelected=!0)}else{for(r=""+zt(r),i=null,g=0;g<t.length;g++){if(t[g].value===r){t[g].selected=!0,u&&(t[g].defaultSelected=!0);return}i!==null||t[g].disabled||(i=t[g])}i!==null&&(i.selected=!0)}}function Wd(t,i,r){if(i!=null&&(i=""+zt(i),i!==t.value&&(t.value=i),r==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=r!=null?""+zt(r):""}function Zd(t,i,r,u){if(i==null){if(u!=null){if(r!=null)throw Error(a(92));if(oe(u)){if(1<u.length)throw Error(a(93));u=u[0]}r=u}r==null&&(r=""),i=r}r=zt(i),t.defaultValue=r,u=t.textContent,u===r&&u!==""&&u!==null&&(t.value=u),Cl(t)}function oi(t,i){if(i){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=i;return}}t.textContent=i}var Mv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ef(t,i,r){var u=i.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?u?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":u?t.setProperty(i,r):typeof r!="number"||r===0||Mv.has(i)?i==="float"?t.cssFloat=r:t[i]=(""+r).trim():t[i]=r+"px"}function tf(t,i,r){if(i!=null&&typeof i!="object")throw Error(a(62));if(t=t.style,r!=null){for(var u in r)!r.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?t.setProperty(u,""):u==="float"?t.cssFloat="":t[u]="");for(var g in i)u=i[g],i.hasOwnProperty(g)&&r[g]!==u&&ef(t,g,u)}else for(var v in i)i.hasOwnProperty(v)&&ef(t,v,i[v])}function Al(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Iv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Uv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function jo(t){return Uv.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function bn(){}var kl=null;function jl(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ri=null,li=null;function nf(t){var i=ni(t);if(i&&(t=i.stateNode)){var r=t[Nt]||null;e:switch(t=i.stateNode,i.type){case"input":if(Tl(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),i=r.name,r.type==="radio"&&i!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Ft(""+i)+'"][type="radio"]'),i=0;i<r.length;i++){var u=r[i];if(u!==t&&u.form===t.form){var g=u[Nt]||null;if(!g)throw Error(a(90));Tl(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(i=0;i<r.length;i++)u=r[i],u.form===t.form&&Qd(u)}break e;case"textarea":Wd(t,r.value,r.defaultValue);break e;case"select":i=r.value,i!=null&&ai(t,!!r.multiple,i,!1)}}}var Rl=!1;function sf(t,i,r){if(Rl)return t(i,r);Rl=!0;try{var u=t(i);return u}finally{if(Rl=!1,(ri!==null||li!==null)&&(yr(),ri&&(i=ri,t=li,li=ri=null,nf(i),t)))for(i=0;i<t.length;i++)nf(t[i])}}function ma(t,i){var r=t.stateNode;if(r===null)return null;var u=r[Nt]||null;if(u===null)return null;r=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(a(231,i,typeof r));return r}var wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ml=!1;if(wn)try{var pa={};Object.defineProperty(pa,"passive",{get:function(){Ml=!0}}),window.addEventListener("test",pa,pa),window.removeEventListener("test",pa,pa)}catch{Ml=!1}var Hn=null,Il=null,Ro=null;function af(){if(Ro)return Ro;var t,i=Il,r=i.length,u,g="value"in Hn?Hn.value:Hn.textContent,v=g.length;for(t=0;t<r&&i[t]===g[t];t++);var S=r-t;for(u=1;u<=S&&i[r-u]===g[v-u];u++);return Ro=g.slice(t,1<u?1-u:void 0)}function Mo(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Io(){return!0}function of(){return!1}function Ct(t){function i(r,u,g,v,S){this._reactName=r,this._targetInst=g,this.type=u,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(r=t[T],this[T]=r?r(v):v[T]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Io:of,this.isPropagationStopped=of,this}return b(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Io)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Io)},persist:function(){},isPersistent:Io}),i}var _s={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uo=Ct(_s),ga=b({},_s,{view:0,detail:0}),Dv=Ct(ga),Ul,Dl,ya,Do=b({},ga,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ol,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ya&&(ya&&t.type==="mousemove"?(Ul=t.screenX-ya.screenX,Dl=t.screenY-ya.screenY):Dl=Ul=0,ya=t),Ul)},movementY:function(t){return"movementY"in t?t.movementY:Dl}}),rf=Ct(Do),Pv=b({},Do,{dataTransfer:0}),Ov=Ct(Pv),Lv=b({},ga,{relatedTarget:0}),Pl=Ct(Lv),qv=b({},_s,{animationName:0,elapsedTime:0,pseudoElement:0}),Bv=Ct(qv),Vv=b({},_s,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Hv=Ct(Vv),Gv=b({},_s,{data:0}),lf=Ct(Gv),zv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$v={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jv(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=$v[t])?!!i[t]:!1}function Ol(){return Jv}var Yv=b({},ga,{key:function(t){if(t.key){var i=zv[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Mo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Fv[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ol,charCode:function(t){return t.type==="keypress"?Mo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Mo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Kv=Ct(Yv),Qv=b({},Do,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cf=Ct(Qv),Xv=b({},ga,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ol}),Wv=Ct(Xv),Zv=b({},_s,{propertyName:0,elapsedTime:0,pseudoElement:0}),ex=Ct(Zv),tx=b({},Do,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),nx=Ct(tx),sx=b({},_s,{newState:0,oldState:0}),ix=Ct(sx),ax=[9,13,27,32],Ll=wn&&"CompositionEvent"in window,va=null;wn&&"documentMode"in document&&(va=document.documentMode);var ox=wn&&"TextEvent"in window&&!va,uf=wn&&(!Ll||va&&8<va&&11>=va),df=" ",ff=!1;function hf(t,i){switch(t){case"keyup":return ax.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ci=!1;function rx(t,i){switch(t){case"compositionend":return mf(i);case"keypress":return i.which!==32?null:(ff=!0,df);case"textInput":return t=i.data,t===df&&ff?null:t;default:return null}}function lx(t,i){if(ci)return t==="compositionend"||!Ll&&hf(t,i)?(t=af(),Ro=Il=Hn=null,ci=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return uf&&i.locale!=="ko"?null:i.data;default:return null}}var cx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pf(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!cx[t.type]:i==="textarea"}function gf(t,i,r,u){ri?li?li.push(u):li=[u]:ri=u,i=Nr(i,"onChange"),0<i.length&&(r=new Uo("onChange","change",null,r,u),t.push({event:r,listeners:i}))}var xa=null,ba=null;function ux(t){Wm(t,0)}function Po(t){var i=ha(t);if(Qd(i))return t}function yf(t,i){if(t==="change")return i}var vf=!1;if(wn){var ql;if(wn){var Bl="oninput"in document;if(!Bl){var xf=document.createElement("div");xf.setAttribute("oninput","return;"),Bl=typeof xf.oninput=="function"}ql=Bl}else ql=!1;vf=ql&&(!document.documentMode||9<document.documentMode)}function bf(){xa&&(xa.detachEvent("onpropertychange",wf),ba=xa=null)}function wf(t){if(t.propertyName==="value"&&Po(ba)){var i=[];gf(i,ba,t,jl(t)),sf(ux,i)}}function dx(t,i,r){t==="focusin"?(bf(),xa=i,ba=r,xa.attachEvent("onpropertychange",wf)):t==="focusout"&&bf()}function fx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Po(ba)}function hx(t,i){if(t==="click")return Po(i)}function mx(t,i){if(t==="input"||t==="change")return Po(i)}function px(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Mt=typeof Object.is=="function"?Object.is:px;function wa(t,i){if(Mt(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var r=Object.keys(t),u=Object.keys(i);if(r.length!==u.length)return!1;for(u=0;u<r.length;u++){var g=r[u];if(!la.call(i,g)||!Mt(t[g],i[g]))return!1}return!0}function _f(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Sf(t,i){var r=_f(t);t=0;for(var u;r;){if(r.nodeType===3){if(u=t+r.textContent.length,t<=i&&u>=i)return{node:r,offset:i-t};t=u}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=_f(r)}}function Nf(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Nf(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Cf(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=ko(t.document);i instanceof t.HTMLIFrameElement;){try{var r=typeof i.contentWindow.location.href=="string"}catch{r=!1}if(r)t=i.contentWindow;else break;i=ko(t.document)}return i}function Vl(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var gx=wn&&"documentMode"in document&&11>=document.documentMode,ui=null,Hl=null,_a=null,Gl=!1;function Tf(t,i,r){var u=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Gl||ui==null||ui!==ko(u)||(u=ui,"selectionStart"in u&&Vl(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),_a&&wa(_a,u)||(_a=u,u=Nr(Hl,"onSelect"),0<u.length&&(i=new Uo("onSelect","select",null,i,r),t.push({event:i,listeners:u}),i.target=ui)))}function Ss(t,i){var r={};return r[t.toLowerCase()]=i.toLowerCase(),r["Webkit"+t]="webkit"+i,r["Moz"+t]="moz"+i,r}var di={animationend:Ss("Animation","AnimationEnd"),animationiteration:Ss("Animation","AnimationIteration"),animationstart:Ss("Animation","AnimationStart"),transitionrun:Ss("Transition","TransitionRun"),transitionstart:Ss("Transition","TransitionStart"),transitioncancel:Ss("Transition","TransitionCancel"),transitionend:Ss("Transition","TransitionEnd")},zl={},Ef={};wn&&(Ef=document.createElement("div").style,"AnimationEvent"in window||(delete di.animationend.animation,delete di.animationiteration.animation,delete di.animationstart.animation),"TransitionEvent"in window||delete di.transitionend.transition);function Ns(t){if(zl[t])return zl[t];if(!di[t])return t;var i=di[t],r;for(r in i)if(i.hasOwnProperty(r)&&r in Ef)return zl[t]=i[r];return t}var Af=Ns("animationend"),kf=Ns("animationiteration"),jf=Ns("animationstart"),yx=Ns("transitionrun"),vx=Ns("transitionstart"),xx=Ns("transitioncancel"),Rf=Ns("transitionend"),Mf=new Map,Fl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fl.push("scrollEnd");function rn(t,i){Mf.set(t,i),ws(i,[t])}var Oo=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}},$t=[],fi=0,$l=0;function Lo(){for(var t=fi,i=$l=fi=0;i<t;){var r=$t[i];$t[i++]=null;var u=$t[i];$t[i++]=null;var g=$t[i];$t[i++]=null;var v=$t[i];if($t[i++]=null,u!==null&&g!==null){var S=u.pending;S===null?g.next=g:(g.next=S.next,S.next=g),u.pending=g}v!==0&&If(r,g,v)}}function qo(t,i,r,u){$t[fi++]=t,$t[fi++]=i,$t[fi++]=r,$t[fi++]=u,$l|=u,t.lanes|=u,t=t.alternate,t!==null&&(t.lanes|=u)}function Jl(t,i,r,u){return qo(t,i,r,u),Bo(t)}function Cs(t,i){return qo(t,null,null,i),Bo(t)}function If(t,i,r){t.lanes|=r;var u=t.alternate;u!==null&&(u.lanes|=r);for(var g=!1,v=t.return;v!==null;)v.childLanes|=r,u=v.alternate,u!==null&&(u.childLanes|=r),v.tag===22&&(t=v.stateNode,t===null||t._visibility&1||(g=!0)),t=v,v=v.return;return t.tag===3?(v=t.stateNode,g&&i!==null&&(g=31-Le(r),t=v.hiddenUpdates,u=t[g],u===null?t[g]=[i]:u.push(i),i.lane=r|536870912),v):null}function Bo(t){if(50<za)throw za=0,nu=null,Error(a(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var hi={};function bx(t,i,r,u){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function It(t,i,r,u){return new bx(t,i,r,u)}function Yl(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _n(t,i){var r=t.alternate;return r===null?(r=It(t.tag,i,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=i,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,i=t.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function Uf(t,i){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,i=r.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Vo(t,i,r,u,g,v){var S=0;if(u=t,typeof t=="function")Yl(t)&&(S=1);else if(typeof t=="string")S=Cb(t,r,Qe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Y:return t=It(31,r,i,g),t.elementType=Y,t.lanes=v,t;case C:return Ts(r.children,g,v,i);case E:S=8,g|=24;break;case R:return t=It(12,r,i,g|2),t.elementType=R,t.lanes=v,t;case V:return t=It(13,r,i,g),t.elementType=V,t.lanes=v,t;case B:return t=It(19,r,i,g),t.elementType=B,t.lanes=v,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case k:S=10;break e;case A:S=9;break e;case U:S=11;break e;case H:S=14;break e;case W:S=16,u=null;break e}S=29,r=Error(a(130,t===null?"null":typeof t,"")),u=null}return i=It(S,r,i,g),i.elementType=t,i.type=u,i.lanes=v,i}function Ts(t,i,r,u){return t=It(7,t,u,i),t.lanes=r,t}function Kl(t,i,r){return t=It(6,t,null,i),t.lanes=r,t}function Df(t){var i=It(18,null,null,0);return i.stateNode=t,i}function Ql(t,i,r){return i=It(4,t.children!==null?t.children:[],t.key,i),i.lanes=r,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Pf=new WeakMap;function Jt(t,i){if(typeof t=="object"&&t!==null){var r=Pf.get(t);return r!==void 0?r:(i={value:t,source:i,stack:Ie(i)},Pf.set(t,i),i)}return{value:t,source:i,stack:Ie(i)}}var mi=[],pi=0,Ho=null,Sa=0,Yt=[],Kt=0,Gn=null,mn=1,pn="";function Sn(t,i){mi[pi++]=Sa,mi[pi++]=Ho,Ho=t,Sa=i}function Of(t,i,r){Yt[Kt++]=mn,Yt[Kt++]=pn,Yt[Kt++]=Gn,Gn=t;var u=mn;t=pn;var g=32-Le(u)-1;u&=~(1<<g),r+=1;var v=32-Le(i)+g;if(30<v){var S=g-g%5;v=(u&(1<<S)-1).toString(32),u>>=S,g-=S,mn=1<<32-Le(i)+g|r<<g|u,pn=v+t}else mn=1<<v|r<<g|u,pn=t}function Xl(t){t.return!==null&&(Sn(t,1),Of(t,1,0))}function Wl(t){for(;t===Ho;)Ho=mi[--pi],mi[pi]=null,Sa=mi[--pi],mi[pi]=null;for(;t===Gn;)Gn=Yt[--Kt],Yt[Kt]=null,pn=Yt[--Kt],Yt[Kt]=null,mn=Yt[--Kt],Yt[Kt]=null}function Lf(t,i){Yt[Kt++]=mn,Yt[Kt++]=pn,Yt[Kt++]=Gn,mn=i.id,pn=i.overflow,Gn=t}var ht=null,He=null,Se=!1,zn=null,Qt=!1,Zl=Error(a(519));function Fn(t){var i=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Na(Jt(i,t)),Zl}function qf(t){var i=t.stateNode,r=t.type,u=t.memoizedProps;switch(i[ft]=t,i[Nt]=u,r){case"dialog":xe("cancel",i),xe("close",i);break;case"iframe":case"object":case"embed":xe("load",i);break;case"video":case"audio":for(r=0;r<$a.length;r++)xe($a[r],i);break;case"source":xe("error",i);break;case"img":case"image":case"link":xe("error",i),xe("load",i);break;case"details":xe("toggle",i);break;case"input":xe("invalid",i),Xd(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":xe("invalid",i);break;case"textarea":xe("invalid",i),Zd(i,u.value,u.defaultValue,u.children)}r=u.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||i.textContent===""+r||u.suppressHydrationWarning===!0||np(i.textContent,r)?(u.popover!=null&&(xe("beforetoggle",i),xe("toggle",i)),u.onScroll!=null&&xe("scroll",i),u.onScrollEnd!=null&&xe("scrollend",i),u.onClick!=null&&(i.onclick=bn),i=!0):i=!1,i||Fn(t,!0)}function Bf(t){for(ht=t.return;ht;)switch(ht.tag){case 5:case 31:case 13:Qt=!1;return;case 27:case 3:Qt=!0;return;default:ht=ht.return}}function gi(t){if(t!==ht)return!1;if(!Se)return Bf(t),Se=!0,!1;var i=t.tag,r;if((r=i!==3&&i!==27)&&((r=i===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||yu(t.type,t.memoizedProps)),r=!r),r&&He&&Fn(t),Bf(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));He=dp(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));He=dp(t)}else i===27?(i=He,as(t.type)?(t=_u,_u=null,He=t):He=i):He=ht?Wt(t.stateNode.nextSibling):null;return!0}function Es(){He=ht=null,Se=!1}function ec(){var t=zn;return t!==null&&(kt===null?kt=t:kt.push.apply(kt,t),zn=null),t}function Na(t){zn===null?zn=[t]:zn.push(t)}var tc=dt(null),As=null,Nn=null;function $n(t,i,r){Ne(tc,i._currentValue),i._currentValue=r}function Cn(t){t._currentValue=tc.current,Be(tc)}function nc(t,i,r){for(;t!==null;){var u=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),t===r)break;t=t.return}}function sc(t,i,r,u){var g=t.child;for(g!==null&&(g.return=t);g!==null;){var v=g.dependencies;if(v!==null){var S=g.child;v=v.firstContext;e:for(;v!==null;){var T=v;v=g;for(var j=0;j<i.length;j++)if(T.context===i[j]){v.lanes|=r,T=v.alternate,T!==null&&(T.lanes|=r),nc(v.return,r,t),u||(S=null);break e}v=T.next}}else if(g.tag===18){if(S=g.return,S===null)throw Error(a(341));S.lanes|=r,v=S.alternate,v!==null&&(v.lanes|=r),nc(S,r,t),S=null}else S=g.child;if(S!==null)S.return=g;else for(S=g;S!==null;){if(S===t){S=null;break}if(g=S.sibling,g!==null){g.return=S.return,S=g;break}S=S.return}g=S}}function yi(t,i,r,u){t=null;for(var g=i,v=!1;g!==null;){if(!v){if((g.flags&524288)!==0)v=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var S=g.alternate;if(S===null)throw Error(a(387));if(S=S.memoizedProps,S!==null){var T=g.type;Mt(g.pendingProps.value,S.value)||(t!==null?t.push(T):t=[T])}}else if(g===sn.current){if(S=g.alternate,S===null)throw Error(a(387));S.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(t!==null?t.push(Xa):t=[Xa])}g=g.return}t!==null&&sc(i,t,r,u),i.flags|=262144}function Go(t){for(t=t.firstContext;t!==null;){if(!Mt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ks(t){As=t,Nn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function mt(t){return Vf(As,t)}function zo(t,i){return As===null&&ks(t),Vf(t,i)}function Vf(t,i){var r=i._currentValue;if(i={context:i,memoizedValue:r,next:null},Nn===null){if(t===null)throw Error(a(308));Nn=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Nn=Nn.next=i;return r}var wx=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(r,u){t.push(u)}};this.abort=function(){i.aborted=!0,t.forEach(function(r){return r()})}},_x=n.unstable_scheduleCallback,Sx=n.unstable_NormalPriority,tt={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ic(){return{controller:new wx,data:new Map,refCount:0}}function Ca(t){t.refCount--,t.refCount===0&&_x(Sx,function(){t.controller.abort()})}var Ta=null,ac=0,vi=0,xi=null;function Nx(t,i){if(Ta===null){var r=Ta=[];ac=0,vi=lu(),xi={status:"pending",value:void 0,then:function(u){r.push(u)}}}return ac++,i.then(Hf,Hf),i}function Hf(){if(--ac===0&&Ta!==null){xi!==null&&(xi.status="fulfilled");var t=Ta;Ta=null,vi=0,xi=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function Cx(t,i){var r=[],u={status:"pending",value:null,reason:null,then:function(g){r.push(g)}};return t.then(function(){u.status="fulfilled",u.value=i;for(var g=0;g<r.length;g++)(0,r[g])(i)},function(g){for(u.status="rejected",u.reason=g,g=0;g<r.length;g++)(0,r[g])(void 0)}),u}var Gf=D.S;D.S=function(t,i){Tm=xt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Nx(t,i),Gf!==null&&Gf(t,i)};var js=dt(null);function oc(){var t=js.current;return t!==null?t:qe.pooledCache}function Fo(t,i){i===null?Ne(js,js.current):Ne(js,i.pool)}function zf(){var t=oc();return t===null?null:{parent:tt._currentValue,pool:t}}var bi=Error(a(460)),rc=Error(a(474)),$o=Error(a(542)),Jo={then:function(){}};function Ff(t){return t=t.status,t==="fulfilled"||t==="rejected"}function $f(t,i,r){switch(r=t[r],r===void 0?t.push(i):r!==i&&(i.then(bn,bn),i=r),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Yf(t),t;default:if(typeof i.status=="string")i.then(bn,bn);else{if(t=qe,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=i,t.status="pending",t.then(function(u){if(i.status==="pending"){var g=i;g.status="fulfilled",g.value=u}},function(u){if(i.status==="pending"){var g=i;g.status="rejected",g.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Yf(t),t}throw Ms=i,bi}}function Rs(t){try{var i=t._init;return i(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Ms=r,bi):r}}var Ms=null;function Jf(){if(Ms===null)throw Error(a(459));var t=Ms;return Ms=null,t}function Yf(t){if(t===bi||t===$o)throw Error(a(483))}var wi=null,Ea=0;function Yo(t){var i=Ea;return Ea+=1,wi===null&&(wi=[]),$f(wi,t,i)}function Aa(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Ko(t,i){throw i.$$typeof===w?Error(a(525)):(t=Object.prototype.toString.call(i),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Kf(t){function i(I,M){if(t){var P=I.deletions;P===null?(I.deletions=[M],I.flags|=16):P.push(M)}}function r(I,M){if(!t)return null;for(;M!==null;)i(I,M),M=M.sibling;return null}function u(I){for(var M=new Map;I!==null;)I.key!==null?M.set(I.key,I):M.set(I.index,I),I=I.sibling;return M}function g(I,M){return I=_n(I,M),I.index=0,I.sibling=null,I}function v(I,M,P){return I.index=P,t?(P=I.alternate,P!==null?(P=P.index,P<M?(I.flags|=67108866,M):P):(I.flags|=67108866,M)):(I.flags|=1048576,M)}function S(I){return t&&I.alternate===null&&(I.flags|=67108866),I}function T(I,M,P,F){return M===null||M.tag!==6?(M=Kl(P,I.mode,F),M.return=I,M):(M=g(M,P),M.return=I,M)}function j(I,M,P,F){var le=P.type;return le===C?z(I,M,P.props.children,F,P.key):M!==null&&(M.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===W&&Rs(le)===M.type)?(M=g(M,P.props),Aa(M,P),M.return=I,M):(M=Vo(P.type,P.key,P.props,null,I.mode,F),Aa(M,P),M.return=I,M)}function O(I,M,P,F){return M===null||M.tag!==4||M.stateNode.containerInfo!==P.containerInfo||M.stateNode.implementation!==P.implementation?(M=Ql(P,I.mode,F),M.return=I,M):(M=g(M,P.children||[]),M.return=I,M)}function z(I,M,P,F,le){return M===null||M.tag!==7?(M=Ts(P,I.mode,F,le),M.return=I,M):(M=g(M,P),M.return=I,M)}function $(I,M,P){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=Kl(""+M,I.mode,P),M.return=I,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case _:return P=Vo(M.type,M.key,M.props,null,I.mode,P),Aa(P,M),P.return=I,P;case N:return M=Ql(M,I.mode,P),M.return=I,M;case W:return M=Rs(M),$(I,M,P)}if(oe(M)||X(M))return M=Ts(M,I.mode,P,null),M.return=I,M;if(typeof M.then=="function")return $(I,Yo(M),P);if(M.$$typeof===k)return $(I,zo(I,M),P);Ko(I,M)}return null}function L(I,M,P,F){var le=M!==null?M.key:null;if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return le!==null?null:T(I,M,""+P,F);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case _:return P.key===le?j(I,M,P,F):null;case N:return P.key===le?O(I,M,P,F):null;case W:return P=Rs(P),L(I,M,P,F)}if(oe(P)||X(P))return le!==null?null:z(I,M,P,F,null);if(typeof P.then=="function")return L(I,M,Yo(P),F);if(P.$$typeof===k)return L(I,M,zo(I,P),F);Ko(I,P)}return null}function q(I,M,P,F,le){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return I=I.get(P)||null,T(M,I,""+F,le);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case _:return I=I.get(F.key===null?P:F.key)||null,j(M,I,F,le);case N:return I=I.get(F.key===null?P:F.key)||null,O(M,I,F,le);case W:return F=Rs(F),q(I,M,P,F,le)}if(oe(F)||X(F))return I=I.get(P)||null,z(M,I,F,le,null);if(typeof F.then=="function")return q(I,M,P,Yo(F),le);if(F.$$typeof===k)return q(I,M,P,zo(M,F),le);Ko(M,F)}return null}function ne(I,M,P,F){for(var le=null,Ce=null,ie=M,ye=M=0,we=null;ie!==null&&ye<P.length;ye++){ie.index>ye?(we=ie,ie=null):we=ie.sibling;var Te=L(I,ie,P[ye],F);if(Te===null){ie===null&&(ie=we);break}t&&ie&&Te.alternate===null&&i(I,ie),M=v(Te,M,ye),Ce===null?le=Te:Ce.sibling=Te,Ce=Te,ie=we}if(ye===P.length)return r(I,ie),Se&&Sn(I,ye),le;if(ie===null){for(;ye<P.length;ye++)ie=$(I,P[ye],F),ie!==null&&(M=v(ie,M,ye),Ce===null?le=ie:Ce.sibling=ie,Ce=ie);return Se&&Sn(I,ye),le}for(ie=u(ie);ye<P.length;ye++)we=q(ie,I,ye,P[ye],F),we!==null&&(t&&we.alternate!==null&&ie.delete(we.key===null?ye:we.key),M=v(we,M,ye),Ce===null?le=we:Ce.sibling=we,Ce=we);return t&&ie.forEach(function(us){return i(I,us)}),Se&&Sn(I,ye),le}function ue(I,M,P,F){if(P==null)throw Error(a(151));for(var le=null,Ce=null,ie=M,ye=M=0,we=null,Te=P.next();ie!==null&&!Te.done;ye++,Te=P.next()){ie.index>ye?(we=ie,ie=null):we=ie.sibling;var us=L(I,ie,Te.value,F);if(us===null){ie===null&&(ie=we);break}t&&ie&&us.alternate===null&&i(I,ie),M=v(us,M,ye),Ce===null?le=us:Ce.sibling=us,Ce=us,ie=we}if(Te.done)return r(I,ie),Se&&Sn(I,ye),le;if(ie===null){for(;!Te.done;ye++,Te=P.next())Te=$(I,Te.value,F),Te!==null&&(M=v(Te,M,ye),Ce===null?le=Te:Ce.sibling=Te,Ce=Te);return Se&&Sn(I,ye),le}for(ie=u(ie);!Te.done;ye++,Te=P.next())Te=q(ie,I,ye,Te.value,F),Te!==null&&(t&&Te.alternate!==null&&ie.delete(Te.key===null?ye:Te.key),M=v(Te,M,ye),Ce===null?le=Te:Ce.sibling=Te,Ce=Te);return t&&ie.forEach(function(Pb){return i(I,Pb)}),Se&&Sn(I,ye),le}function Pe(I,M,P,F){if(typeof P=="object"&&P!==null&&P.type===C&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case _:e:{for(var le=P.key;M!==null;){if(M.key===le){if(le=P.type,le===C){if(M.tag===7){r(I,M.sibling),F=g(M,P.props.children),F.return=I,I=F;break e}}else if(M.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===W&&Rs(le)===M.type){r(I,M.sibling),F=g(M,P.props),Aa(F,P),F.return=I,I=F;break e}r(I,M);break}else i(I,M);M=M.sibling}P.type===C?(F=Ts(P.props.children,I.mode,F,P.key),F.return=I,I=F):(F=Vo(P.type,P.key,P.props,null,I.mode,F),Aa(F,P),F.return=I,I=F)}return S(I);case N:e:{for(le=P.key;M!==null;){if(M.key===le)if(M.tag===4&&M.stateNode.containerInfo===P.containerInfo&&M.stateNode.implementation===P.implementation){r(I,M.sibling),F=g(M,P.children||[]),F.return=I,I=F;break e}else{r(I,M);break}else i(I,M);M=M.sibling}F=Ql(P,I.mode,F),F.return=I,I=F}return S(I);case W:return P=Rs(P),Pe(I,M,P,F)}if(oe(P))return ne(I,M,P,F);if(X(P)){if(le=X(P),typeof le!="function")throw Error(a(150));return P=le.call(P),ue(I,M,P,F)}if(typeof P.then=="function")return Pe(I,M,Yo(P),F);if(P.$$typeof===k)return Pe(I,M,zo(I,P),F);Ko(I,P)}return typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint"?(P=""+P,M!==null&&M.tag===6?(r(I,M.sibling),F=g(M,P),F.return=I,I=F):(r(I,M),F=Kl(P,I.mode,F),F.return=I,I=F),S(I)):r(I,M)}return function(I,M,P,F){try{Ea=0;var le=Pe(I,M,P,F);return wi=null,le}catch(ie){if(ie===bi||ie===$o)throw ie;var Ce=It(29,ie,null,I.mode);return Ce.lanes=F,Ce.return=I,Ce}finally{}}}var Is=Kf(!0),Qf=Kf(!1),Jn=!1;function lc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cc(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Yn(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Kn(t,i,r){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(Ae&2)!==0){var g=u.pending;return g===null?i.next=i:(i.next=g.next,g.next=i),u.pending=i,i=Bo(t),If(t,null,r),i}return qo(t,u,i,r),Bo(t)}function ka(t,i,r){if(i=i.updateQueue,i!==null&&(i=i.shared,(r&4194048)!==0)){var u=i.lanes;u&=t.pendingLanes,r|=u,i.lanes=r,Bd(t,r)}}function uc(t,i){var r=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,r===u)){var g=null,v=null;if(r=r.firstBaseUpdate,r!==null){do{var S={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};v===null?g=v=S:v=v.next=S,r=r.next}while(r!==null);v===null?g=v=i:v=v.next=i}else g=v=i;r={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:u.shared,callbacks:u.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=i:t.next=i,r.lastBaseUpdate=i}var dc=!1;function ja(){if(dc){var t=xi;if(t!==null)throw t}}function Ra(t,i,r,u){dc=!1;var g=t.updateQueue;Jn=!1;var v=g.firstBaseUpdate,S=g.lastBaseUpdate,T=g.shared.pending;if(T!==null){g.shared.pending=null;var j=T,O=j.next;j.next=null,S===null?v=O:S.next=O,S=j;var z=t.alternate;z!==null&&(z=z.updateQueue,T=z.lastBaseUpdate,T!==S&&(T===null?z.firstBaseUpdate=O:T.next=O,z.lastBaseUpdate=j))}if(v!==null){var $=g.baseState;S=0,z=O=j=null,T=v;do{var L=T.lane&-536870913,q=L!==T.lane;if(q?(be&L)===L:(u&L)===L){L!==0&&L===vi&&(dc=!0),z!==null&&(z=z.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var ne=t,ue=T;L=i;var Pe=r;switch(ue.tag){case 1:if(ne=ue.payload,typeof ne=="function"){$=ne.call(Pe,$,L);break e}$=ne;break e;case 3:ne.flags=ne.flags&-65537|128;case 0:if(ne=ue.payload,L=typeof ne=="function"?ne.call(Pe,$,L):ne,L==null)break e;$=b({},$,L);break e;case 2:Jn=!0}}L=T.callback,L!==null&&(t.flags|=64,q&&(t.flags|=8192),q=g.callbacks,q===null?g.callbacks=[L]:q.push(L))}else q={lane:L,tag:T.tag,payload:T.payload,callback:T.callback,next:null},z===null?(O=z=q,j=$):z=z.next=q,S|=L;if(T=T.next,T===null){if(T=g.shared.pending,T===null)break;q=T,T=q.next,q.next=null,g.lastBaseUpdate=q,g.shared.pending=null}}while(!0);z===null&&(j=$),g.baseState=j,g.firstBaseUpdate=O,g.lastBaseUpdate=z,v===null&&(g.shared.lanes=0),es|=S,t.lanes=S,t.memoizedState=$}}function Xf(t,i){if(typeof t!="function")throw Error(a(191,t));t.call(i)}function Wf(t,i){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)Xf(r[t],i)}var _i=dt(null),Qo=dt(0);function Zf(t,i){t=Un,Ne(Qo,t),Ne(_i,i),Un=t|i.baseLanes}function fc(){Ne(Qo,Un),Ne(_i,_i.current)}function hc(){Un=Qo.current,Be(_i),Be(Qo)}var Ut=dt(null),Xt=null;function Qn(t){var i=t.alternate;Ne(Xe,Xe.current&1),Ne(Ut,t),Xt===null&&(i===null||_i.current!==null||i.memoizedState!==null)&&(Xt=t)}function mc(t){Ne(Xe,Xe.current),Ne(Ut,t),Xt===null&&(Xt=t)}function eh(t){t.tag===22?(Ne(Xe,Xe.current),Ne(Ut,t),Xt===null&&(Xt=t)):Xn()}function Xn(){Ne(Xe,Xe.current),Ne(Ut,Ut.current)}function Dt(t){Be(Ut),Xt===t&&(Xt=null),Be(Xe)}var Xe=dt(0);function Xo(t){for(var i=t;i!==null;){if(i.tag===13){var r=i.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||bu(r)||wu(r)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Tn=0,ge=null,Ue=null,nt=null,Wo=!1,Si=!1,Us=!1,Zo=0,Ma=0,Ni=null,Tx=0;function Ye(){throw Error(a(321))}function pc(t,i){if(i===null)return!1;for(var r=0;r<i.length&&r<t.length;r++)if(!Mt(t[r],i[r]))return!1;return!0}function gc(t,i,r,u,g,v){return Tn=v,ge=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,D.H=t===null||t.memoizedState===null?Oh:Rc,Us=!1,v=r(u,g),Us=!1,Si&&(v=nh(i,r,u,g)),th(t),v}function th(t){D.H=Da;var i=Ue!==null&&Ue.next!==null;if(Tn=0,nt=Ue=ge=null,Wo=!1,Ma=0,Ni=null,i)throw Error(a(300));t===null||st||(t=t.dependencies,t!==null&&Go(t)&&(st=!0))}function nh(t,i,r,u){ge=t;var g=0;do{if(Si&&(Ni=null),Ma=0,Si=!1,25<=g)throw Error(a(301));if(g+=1,nt=Ue=null,t.updateQueue!=null){var v=t.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}D.H=Lh,v=i(r,u)}while(Si);return v}function Ex(){var t=D.H,i=t.useState()[0];return i=typeof i.then=="function"?Ia(i):i,t=t.useState()[0],(Ue!==null?Ue.memoizedState:null)!==t&&(ge.flags|=1024),i}function yc(){var t=Zo!==0;return Zo=0,t}function vc(t,i,r){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~r}function xc(t){if(Wo){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Wo=!1}Tn=0,nt=Ue=ge=null,Si=!1,Ma=Zo=0,Ni=null}function _t(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nt===null?ge.memoizedState=nt=t:nt=nt.next=t,nt}function We(){if(Ue===null){var t=ge.alternate;t=t!==null?t.memoizedState:null}else t=Ue.next;var i=nt===null?ge.memoizedState:nt.next;if(i!==null)nt=i,Ue=t;else{if(t===null)throw ge.alternate===null?Error(a(467)):Error(a(310));Ue=t,t={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},nt===null?ge.memoizedState=nt=t:nt=nt.next=t}return nt}function er(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ia(t){var i=Ma;return Ma+=1,Ni===null&&(Ni=[]),t=$f(Ni,t,i),i=ge,(nt===null?i.memoizedState:nt.next)===null&&(i=i.alternate,D.H=i===null||i.memoizedState===null?Oh:Rc),t}function tr(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Ia(t);if(t.$$typeof===k)return mt(t)}throw Error(a(438,String(t)))}function bc(t){var i=null,r=ge.updateQueue;if(r!==null&&(i=r.memoCache),i==null){var u=ge.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(g){return g.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),r===null&&(r=er(),ge.updateQueue=r),r.memoCache=i,r=i.data[i.index],r===void 0)for(r=i.data[i.index]=Array(t),u=0;u<t;u++)r[u]=J;return i.index++,r}function En(t,i){return typeof i=="function"?i(t):i}function nr(t){var i=We();return wc(i,Ue,t)}function wc(t,i,r){var u=t.queue;if(u===null)throw Error(a(311));u.lastRenderedReducer=r;var g=t.baseQueue,v=u.pending;if(v!==null){if(g!==null){var S=g.next;g.next=v.next,v.next=S}i.baseQueue=g=v,u.pending=null}if(v=t.baseState,g===null)t.memoizedState=v;else{i=g.next;var T=S=null,j=null,O=i,z=!1;do{var $=O.lane&-536870913;if($!==O.lane?(be&$)===$:(Tn&$)===$){var L=O.revertLane;if(L===0)j!==null&&(j=j.next={lane:0,revertLane:0,gesture:null,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),$===vi&&(z=!0);else if((Tn&L)===L){O=O.next,L===vi&&(z=!0);continue}else $={lane:0,revertLane:O.revertLane,gesture:null,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},j===null?(T=j=$,S=v):j=j.next=$,ge.lanes|=L,es|=L;$=O.action,Us&&r(v,$),v=O.hasEagerState?O.eagerState:r(v,$)}else L={lane:$,revertLane:O.revertLane,gesture:O.gesture,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},j===null?(T=j=L,S=v):j=j.next=L,ge.lanes|=$,es|=$;O=O.next}while(O!==null&&O!==i);if(j===null?S=v:j.next=T,!Mt(v,t.memoizedState)&&(st=!0,z&&(r=xi,r!==null)))throw r;t.memoizedState=v,t.baseState=S,t.baseQueue=j,u.lastRenderedState=v}return g===null&&(u.lanes=0),[t.memoizedState,u.dispatch]}function _c(t){var i=We(),r=i.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=t;var u=r.dispatch,g=r.pending,v=i.memoizedState;if(g!==null){r.pending=null;var S=g=g.next;do v=t(v,S.action),S=S.next;while(S!==g);Mt(v,i.memoizedState)||(st=!0),i.memoizedState=v,i.baseQueue===null&&(i.baseState=v),r.lastRenderedState=v}return[v,u]}function sh(t,i,r){var u=ge,g=We(),v=Se;if(v){if(r===void 0)throw Error(a(407));r=r()}else r=i();var S=!Mt((Ue||g).memoizedState,r);if(S&&(g.memoizedState=r,st=!0),g=g.queue,Cc(oh.bind(null,u,g,t),[t]),g.getSnapshot!==i||S||nt!==null&&nt.memoizedState.tag&1){if(u.flags|=2048,Ci(9,{destroy:void 0},ah.bind(null,u,g,r,i),null),qe===null)throw Error(a(349));v||(Tn&127)!==0||ih(u,i,r)}return r}function ih(t,i,r){t.flags|=16384,t={getSnapshot:i,value:r},i=ge.updateQueue,i===null?(i=er(),ge.updateQueue=i,i.stores=[t]):(r=i.stores,r===null?i.stores=[t]:r.push(t))}function ah(t,i,r,u){i.value=r,i.getSnapshot=u,rh(i)&&lh(t)}function oh(t,i,r){return r(function(){rh(i)&&lh(t)})}function rh(t){var i=t.getSnapshot;t=t.value;try{var r=i();return!Mt(t,r)}catch{return!0}}function lh(t){var i=Cs(t,2);i!==null&&jt(i,t,2)}function Sc(t){var i=_t();if(typeof t=="function"){var r=t;if(t=r(),Us){St(!0);try{r()}finally{St(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:En,lastRenderedState:t},i}function ch(t,i,r,u){return t.baseState=r,wc(t,Ue,typeof u=="function"?u:En)}function Ax(t,i,r,u,g){if(ar(t))throw Error(a(485));if(t=i.action,t!==null){var v={payload:g,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){v.listeners.push(S)}};D.T!==null?r(!0):v.isTransition=!1,u(v),r=i.pending,r===null?(v.next=i.pending=v,uh(i,v)):(v.next=r.next,i.pending=r.next=v)}}function uh(t,i){var r=i.action,u=i.payload,g=t.state;if(i.isTransition){var v=D.T,S={};D.T=S;try{var T=r(g,u),j=D.S;j!==null&&j(S,T),dh(t,i,T)}catch(O){Nc(t,i,O)}finally{v!==null&&S.types!==null&&(v.types=S.types),D.T=v}}else try{v=r(g,u),dh(t,i,v)}catch(O){Nc(t,i,O)}}function dh(t,i,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(u){fh(t,i,u)},function(u){return Nc(t,i,u)}):fh(t,i,r)}function fh(t,i,r){i.status="fulfilled",i.value=r,hh(i),t.state=r,i=t.pending,i!==null&&(r=i.next,r===i?t.pending=null:(r=r.next,i.next=r,uh(t,r)))}function Nc(t,i,r){var u=t.pending;if(t.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=r,hh(i),i=i.next;while(i!==u)}t.action=null}function hh(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function mh(t,i){return i}function ph(t,i){if(Se){var r=qe.formState;if(r!==null){e:{var u=ge;if(Se){if(He){t:{for(var g=He,v=Qt;g.nodeType!==8;){if(!v){g=null;break t}if(g=Wt(g.nextSibling),g===null){g=null;break t}}v=g.data,g=v==="F!"||v==="F"?g:null}if(g){He=Wt(g.nextSibling),u=g.data==="F!";break e}}Fn(u)}u=!1}u&&(i=r[0])}}return r=_t(),r.memoizedState=r.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mh,lastRenderedState:i},r.queue=u,r=Uh.bind(null,ge,u),u.dispatch=r,u=Sc(!1),v=jc.bind(null,ge,!1,u.queue),u=_t(),g={state:i,dispatch:null,action:t,pending:null},u.queue=g,r=Ax.bind(null,ge,g,v,r),g.dispatch=r,u.memoizedState=t,[i,r,!1]}function gh(t){var i=We();return yh(i,Ue,t)}function yh(t,i,r){if(i=wc(t,i,mh)[0],t=nr(En)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=Ia(i)}catch(S){throw S===bi?$o:S}else u=i;i=We();var g=i.queue,v=g.dispatch;return r!==i.memoizedState&&(ge.flags|=2048,Ci(9,{destroy:void 0},kx.bind(null,g,r),null)),[u,v,t]}function kx(t,i){t.action=i}function vh(t){var i=We(),r=Ue;if(r!==null)return yh(i,r,t);We(),i=i.memoizedState,r=We();var u=r.queue.dispatch;return r.memoizedState=t,[i,u,!1]}function Ci(t,i,r,u){return t={tag:t,create:r,deps:u,inst:i,next:null},i=ge.updateQueue,i===null&&(i=er(),ge.updateQueue=i),r=i.lastEffect,r===null?i.lastEffect=t.next=t:(u=r.next,r.next=t,t.next=u,i.lastEffect=t),t}function xh(){return We().memoizedState}function sr(t,i,r,u){var g=_t();ge.flags|=t,g.memoizedState=Ci(1|i,{destroy:void 0},r,u===void 0?null:u)}function ir(t,i,r,u){var g=We();u=u===void 0?null:u;var v=g.memoizedState.inst;Ue!==null&&u!==null&&pc(u,Ue.memoizedState.deps)?g.memoizedState=Ci(i,v,r,u):(ge.flags|=t,g.memoizedState=Ci(1|i,v,r,u))}function bh(t,i){sr(8390656,8,t,i)}function Cc(t,i){ir(2048,8,t,i)}function jx(t){ge.flags|=4;var i=ge.updateQueue;if(i===null)i=er(),ge.updateQueue=i,i.events=[t];else{var r=i.events;r===null?i.events=[t]:r.push(t)}}function wh(t){var i=We().memoizedState;return jx({ref:i,nextImpl:t}),function(){if((Ae&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}function _h(t,i){return ir(4,2,t,i)}function Sh(t,i){return ir(4,4,t,i)}function Nh(t,i){if(typeof i=="function"){t=t();var r=i(t);return function(){typeof r=="function"?r():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Ch(t,i,r){r=r!=null?r.concat([t]):null,ir(4,4,Nh.bind(null,i,t),r)}function Tc(){}function Th(t,i){var r=We();i=i===void 0?null:i;var u=r.memoizedState;return i!==null&&pc(i,u[1])?u[0]:(r.memoizedState=[t,i],t)}function Eh(t,i){var r=We();i=i===void 0?null:i;var u=r.memoizedState;if(i!==null&&pc(i,u[1]))return u[0];if(u=t(),Us){St(!0);try{t()}finally{St(!1)}}return r.memoizedState=[u,i],u}function Ec(t,i,r){return r===void 0||(Tn&1073741824)!==0&&(be&261930)===0?t.memoizedState=i:(t.memoizedState=r,t=Am(),ge.lanes|=t,es|=t,r)}function Ah(t,i,r,u){return Mt(r,i)?r:_i.current!==null?(t=Ec(t,r,u),Mt(t,i)||(st=!0),t):(Tn&42)===0||(Tn&1073741824)!==0&&(be&261930)===0?(st=!0,t.memoizedState=r):(t=Am(),ge.lanes|=t,es|=t,i)}function kh(t,i,r,u,g){var v=Q.p;Q.p=v!==0&&8>v?v:8;var S=D.T,T={};D.T=T,jc(t,!1,i,r);try{var j=g(),O=D.S;if(O!==null&&O(T,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var z=Cx(j,u);Ua(t,i,z,Lt(t))}else Ua(t,i,u,Lt(t))}catch($){Ua(t,i,{then:function(){},status:"rejected",reason:$},Lt())}finally{Q.p=v,S!==null&&T.types!==null&&(S.types=T.types),D.T=S}}function Rx(){}function Ac(t,i,r,u){if(t.tag!==5)throw Error(a(476));var g=jh(t).queue;kh(t,g,i,de,r===null?Rx:function(){return Rh(t),r(u)})}function jh(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:En,lastRenderedState:de},next:null};var r={};return i.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:En,lastRenderedState:r},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Rh(t){var i=jh(t);i.next===null&&(i=t.alternate.memoizedState),Ua(t,i.next.queue,{},Lt())}function kc(){return mt(Xa)}function Mh(){return We().memoizedState}function Ih(){return We().memoizedState}function Mx(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var r=Lt();t=Yn(r);var u=Kn(i,t,r);u!==null&&(jt(u,i,r),ka(u,i,r)),i={cache:ic()},t.payload=i;return}i=i.return}}function Ix(t,i,r){var u=Lt();r={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},ar(t)?Dh(i,r):(r=Jl(t,i,r,u),r!==null&&(jt(r,t,u),Ph(r,i,u)))}function Uh(t,i,r){var u=Lt();Ua(t,i,r,u)}function Ua(t,i,r,u){var g={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(ar(t))Dh(i,g);else{var v=t.alternate;if(t.lanes===0&&(v===null||v.lanes===0)&&(v=i.lastRenderedReducer,v!==null))try{var S=i.lastRenderedState,T=v(S,r);if(g.hasEagerState=!0,g.eagerState=T,Mt(T,S))return qo(t,i,g,0),qe===null&&Lo(),!1}catch{}finally{}if(r=Jl(t,i,g,u),r!==null)return jt(r,t,u),Ph(r,i,u),!0}return!1}function jc(t,i,r,u){if(u={lane:2,revertLane:lu(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},ar(t)){if(i)throw Error(a(479))}else i=Jl(t,r,u,2),i!==null&&jt(i,t,2)}function ar(t){var i=t.alternate;return t===ge||i!==null&&i===ge}function Dh(t,i){Si=Wo=!0;var r=t.pending;r===null?i.next=i:(i.next=r.next,r.next=i),t.pending=i}function Ph(t,i,r){if((r&4194048)!==0){var u=i.lanes;u&=t.pendingLanes,r|=u,i.lanes=r,Bd(t,r)}}var Da={readContext:mt,use:tr,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useLayoutEffect:Ye,useInsertionEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useSyncExternalStore:Ye,useId:Ye,useHostTransitionStatus:Ye,useFormState:Ye,useActionState:Ye,useOptimistic:Ye,useMemoCache:Ye,useCacheRefresh:Ye};Da.useEffectEvent=Ye;var Oh={readContext:mt,use:tr,useCallback:function(t,i){return _t().memoizedState=[t,i===void 0?null:i],t},useContext:mt,useEffect:bh,useImperativeHandle:function(t,i,r){r=r!=null?r.concat([t]):null,sr(4194308,4,Nh.bind(null,i,t),r)},useLayoutEffect:function(t,i){return sr(4194308,4,t,i)},useInsertionEffect:function(t,i){sr(4,2,t,i)},useMemo:function(t,i){var r=_t();i=i===void 0?null:i;var u=t();if(Us){St(!0);try{t()}finally{St(!1)}}return r.memoizedState=[u,i],u},useReducer:function(t,i,r){var u=_t();if(r!==void 0){var g=r(i);if(Us){St(!0);try{r(i)}finally{St(!1)}}}else g=i;return u.memoizedState=u.baseState=g,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:g},u.queue=t,t=t.dispatch=Ix.bind(null,ge,t),[u.memoizedState,t]},useRef:function(t){var i=_t();return t={current:t},i.memoizedState=t},useState:function(t){t=Sc(t);var i=t.queue,r=Uh.bind(null,ge,i);return i.dispatch=r,[t.memoizedState,r]},useDebugValue:Tc,useDeferredValue:function(t,i){var r=_t();return Ec(r,t,i)},useTransition:function(){var t=Sc(!1);return t=kh.bind(null,ge,t.queue,!0,!1),_t().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,r){var u=ge,g=_t();if(Se){if(r===void 0)throw Error(a(407));r=r()}else{if(r=i(),qe===null)throw Error(a(349));(be&127)!==0||ih(u,i,r)}g.memoizedState=r;var v={value:r,getSnapshot:i};return g.queue=v,bh(oh.bind(null,u,v,t),[t]),u.flags|=2048,Ci(9,{destroy:void 0},ah.bind(null,u,v,r,i),null),r},useId:function(){var t=_t(),i=qe.identifierPrefix;if(Se){var r=pn,u=mn;r=(u&~(1<<32-Le(u)-1)).toString(32)+r,i="_"+i+"R_"+r,r=Zo++,0<r&&(i+="H"+r.toString(32)),i+="_"}else r=Tx++,i="_"+i+"r_"+r.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:kc,useFormState:ph,useActionState:ph,useOptimistic:function(t){var i=_t();i.memoizedState=i.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=r,i=jc.bind(null,ge,!0,r),r.dispatch=i,[t,i]},useMemoCache:bc,useCacheRefresh:function(){return _t().memoizedState=Mx.bind(null,ge)},useEffectEvent:function(t){var i=_t(),r={impl:t};return i.memoizedState=r,function(){if((Ae&2)!==0)throw Error(a(440));return r.impl.apply(void 0,arguments)}}},Rc={readContext:mt,use:tr,useCallback:Th,useContext:mt,useEffect:Cc,useImperativeHandle:Ch,useInsertionEffect:_h,useLayoutEffect:Sh,useMemo:Eh,useReducer:nr,useRef:xh,useState:function(){return nr(En)},useDebugValue:Tc,useDeferredValue:function(t,i){var r=We();return Ah(r,Ue.memoizedState,t,i)},useTransition:function(){var t=nr(En)[0],i=We().memoizedState;return[typeof t=="boolean"?t:Ia(t),i]},useSyncExternalStore:sh,useId:Mh,useHostTransitionStatus:kc,useFormState:gh,useActionState:gh,useOptimistic:function(t,i){var r=We();return ch(r,Ue,t,i)},useMemoCache:bc,useCacheRefresh:Ih};Rc.useEffectEvent=wh;var Lh={readContext:mt,use:tr,useCallback:Th,useContext:mt,useEffect:Cc,useImperativeHandle:Ch,useInsertionEffect:_h,useLayoutEffect:Sh,useMemo:Eh,useReducer:_c,useRef:xh,useState:function(){return _c(En)},useDebugValue:Tc,useDeferredValue:function(t,i){var r=We();return Ue===null?Ec(r,t,i):Ah(r,Ue.memoizedState,t,i)},useTransition:function(){var t=_c(En)[0],i=We().memoizedState;return[typeof t=="boolean"?t:Ia(t),i]},useSyncExternalStore:sh,useId:Mh,useHostTransitionStatus:kc,useFormState:vh,useActionState:vh,useOptimistic:function(t,i){var r=We();return Ue!==null?ch(r,Ue,t,i):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:bc,useCacheRefresh:Ih};Lh.useEffectEvent=wh;function Mc(t,i,r,u){i=t.memoizedState,r=r(u,i),r=r==null?i:b({},i,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Ic={enqueueSetState:function(t,i,r){t=t._reactInternals;var u=Lt(),g=Yn(u);g.payload=i,r!=null&&(g.callback=r),i=Kn(t,g,u),i!==null&&(jt(i,t,u),ka(i,t,u))},enqueueReplaceState:function(t,i,r){t=t._reactInternals;var u=Lt(),g=Yn(u);g.tag=1,g.payload=i,r!=null&&(g.callback=r),i=Kn(t,g,u),i!==null&&(jt(i,t,u),ka(i,t,u))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var r=Lt(),u=Yn(r);u.tag=2,i!=null&&(u.callback=i),i=Kn(t,u,r),i!==null&&(jt(i,t,r),ka(i,t,r))}};function qh(t,i,r,u,g,v,S){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,v,S):i.prototype&&i.prototype.isPureReactComponent?!wa(r,u)||!wa(g,v):!0}function Bh(t,i,r,u){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(r,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(r,u),i.state!==t&&Ic.enqueueReplaceState(i,i.state,null)}function Ds(t,i){var r=i;if("ref"in i){r={};for(var u in i)u!=="ref"&&(r[u]=i[u])}if(t=t.defaultProps){r===i&&(r=b({},r));for(var g in t)r[g]===void 0&&(r[g]=t[g])}return r}function Vh(t){Oo(t)}function Hh(t){}function Gh(t){Oo(t)}function or(t,i){try{var r=t.onUncaughtError;r(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function zh(t,i,r){try{var u=t.onCaughtError;u(r.value,{componentStack:r.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Uc(t,i,r){return r=Yn(r),r.tag=3,r.payload={element:null},r.callback=function(){or(t,i)},r}function Fh(t){return t=Yn(t),t.tag=3,t}function $h(t,i,r,u){var g=r.type.getDerivedStateFromError;if(typeof g=="function"){var v=u.value;t.payload=function(){return g(v)},t.callback=function(){zh(i,r,u)}}var S=r.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(t.callback=function(){zh(i,r,u),typeof g!="function"&&(ts===null?ts=new Set([this]):ts.add(this));var T=u.stack;this.componentDidCatch(u.value,{componentStack:T!==null?T:""})})}function Ux(t,i,r,u,g){if(r.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=r.alternate,i!==null&&yi(i,r,g,!0),r=Ut.current,r!==null){switch(r.tag){case 31:case 13:return Xt===null?vr():r.alternate===null&&Ke===0&&(Ke=3),r.flags&=-257,r.flags|=65536,r.lanes=g,u===Jo?r.flags|=16384:(i=r.updateQueue,i===null?r.updateQueue=new Set([u]):i.add(u),au(t,u,g)),!1;case 22:return r.flags|=65536,u===Jo?r.flags|=16384:(i=r.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},r.updateQueue=i):(r=i.retryQueue,r===null?i.retryQueue=new Set([u]):r.add(u)),au(t,u,g)),!1}throw Error(a(435,r.tag))}return au(t,u,g),vr(),!1}if(Se)return i=Ut.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=g,u!==Zl&&(t=Error(a(422),{cause:u}),Na(Jt(t,r)))):(u!==Zl&&(i=Error(a(423),{cause:u}),Na(Jt(i,r))),t=t.current.alternate,t.flags|=65536,g&=-g,t.lanes|=g,u=Jt(u,r),g=Uc(t.stateNode,u,g),uc(t,g),Ke!==4&&(Ke=2)),!1;var v=Error(a(520),{cause:u});if(v=Jt(v,r),Ga===null?Ga=[v]:Ga.push(v),Ke!==4&&(Ke=2),i===null)return!0;u=Jt(u,r),r=i;do{switch(r.tag){case 3:return r.flags|=65536,t=g&-g,r.lanes|=t,t=Uc(r.stateNode,u,t),uc(r,t),!1;case 1:if(i=r.type,v=r.stateNode,(r.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(ts===null||!ts.has(v))))return r.flags|=65536,g&=-g,r.lanes|=g,g=Fh(g),$h(g,t,r,u),uc(r,g),!1}r=r.return}while(r!==null);return!1}var Dc=Error(a(461)),st=!1;function pt(t,i,r,u){i.child=t===null?Qf(i,null,r,u):Is(i,t.child,r,u)}function Jh(t,i,r,u,g){r=r.render;var v=i.ref;if("ref"in u){var S={};for(var T in u)T!=="ref"&&(S[T]=u[T])}else S=u;return ks(i),u=gc(t,i,r,S,v,g),T=yc(),t!==null&&!st?(vc(t,i,g),An(t,i,g)):(Se&&T&&Xl(i),i.flags|=1,pt(t,i,u,g),i.child)}function Yh(t,i,r,u,g){if(t===null){var v=r.type;return typeof v=="function"&&!Yl(v)&&v.defaultProps===void 0&&r.compare===null?(i.tag=15,i.type=v,Kh(t,i,v,u,g)):(t=Vo(r.type,null,u,i,i.mode,g),t.ref=i.ref,t.return=i,i.child=t)}if(v=t.child,!Gc(t,g)){var S=v.memoizedProps;if(r=r.compare,r=r!==null?r:wa,r(S,u)&&t.ref===i.ref)return An(t,i,g)}return i.flags|=1,t=_n(v,u),t.ref=i.ref,t.return=i,i.child=t}function Kh(t,i,r,u,g){if(t!==null){var v=t.memoizedProps;if(wa(v,u)&&t.ref===i.ref)if(st=!1,i.pendingProps=u=v,Gc(t,g))(t.flags&131072)!==0&&(st=!0);else return i.lanes=t.lanes,An(t,i,g)}return Pc(t,i,r,u,g)}function Qh(t,i,r,u){var g=u.children,v=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(v=v!==null?v.baseLanes|r:r,t!==null){for(u=i.child=t.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~v}else u=0,i.child=null;return Xh(t,i,v,r,u)}if((r&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Fo(i,v!==null?v.cachePool:null),v!==null?Zf(i,v):fc(),eh(i);else return u=i.lanes=536870912,Xh(t,i,v!==null?v.baseLanes|r:r,r,u)}else v!==null?(Fo(i,v.cachePool),Zf(i,v),Xn(),i.memoizedState=null):(t!==null&&Fo(i,null),fc(),Xn());return pt(t,i,g,r),i.child}function Pa(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Xh(t,i,r,u,g){var v=oc();return v=v===null?null:{parent:tt._currentValue,pool:v},i.memoizedState={baseLanes:r,cachePool:v},t!==null&&Fo(i,null),fc(),eh(i),t!==null&&yi(t,i,u,!0),i.childLanes=g,null}function rr(t,i){return i=cr({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function Wh(t,i,r){return Is(i,t.child,null,r),t=rr(i,i.pendingProps),t.flags|=2,Dt(i),i.memoizedState=null,t}function Dx(t,i,r){var u=i.pendingProps,g=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(Se){if(u.mode==="hidden")return t=rr(i,u),i.lanes=536870912,Pa(null,t);if(mc(i),(t=He)?(t=up(t,Qt),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Gn!==null?{id:mn,overflow:pn}:null,retryLane:536870912,hydrationErrors:null},r=Df(t),r.return=i,i.child=r,ht=i,He=null)):t=null,t===null)throw Fn(i);return i.lanes=536870912,null}return rr(i,u)}var v=t.memoizedState;if(v!==null){var S=v.dehydrated;if(mc(i),g)if(i.flags&256)i.flags&=-257,i=Wh(t,i,r);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(a(558));else if(st||yi(t,i,r,!1),g=(r&t.childLanes)!==0,st||g){if(u=qe,u!==null&&(S=Vd(u,r),S!==0&&S!==v.retryLane))throw v.retryLane=S,Cs(t,S),jt(u,t,S),Dc;vr(),i=Wh(t,i,r)}else t=v.treeContext,He=Wt(S.nextSibling),ht=i,Se=!0,zn=null,Qt=!1,t!==null&&Lf(i,t),i=rr(i,u),i.flags|=4096;return i}return t=_n(t.child,{mode:u.mode,children:u.children}),t.ref=i.ref,i.child=t,t.return=i,t}function lr(t,i){var r=i.ref;if(r===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(a(284));(t===null||t.ref!==r)&&(i.flags|=4194816)}}function Pc(t,i,r,u,g){return ks(i),r=gc(t,i,r,u,void 0,g),u=yc(),t!==null&&!st?(vc(t,i,g),An(t,i,g)):(Se&&u&&Xl(i),i.flags|=1,pt(t,i,r,g),i.child)}function Zh(t,i,r,u,g,v){return ks(i),i.updateQueue=null,r=nh(i,u,r,g),th(t),u=yc(),t!==null&&!st?(vc(t,i,v),An(t,i,v)):(Se&&u&&Xl(i),i.flags|=1,pt(t,i,r,v),i.child)}function em(t,i,r,u,g){if(ks(i),i.stateNode===null){var v=hi,S=r.contextType;typeof S=="object"&&S!==null&&(v=mt(S)),v=new r(u,v),i.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Ic,i.stateNode=v,v._reactInternals=i,v=i.stateNode,v.props=u,v.state=i.memoizedState,v.refs={},lc(i),S=r.contextType,v.context=typeof S=="object"&&S!==null?mt(S):hi,v.state=i.memoizedState,S=r.getDerivedStateFromProps,typeof S=="function"&&(Mc(i,r,S,u),v.state=i.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(S=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),S!==v.state&&Ic.enqueueReplaceState(v,v.state,null),Ra(i,u,v,g),ja(),v.state=i.memoizedState),typeof v.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(t===null){v=i.stateNode;var T=i.memoizedProps,j=Ds(r,T);v.props=j;var O=v.context,z=r.contextType;S=hi,typeof z=="object"&&z!==null&&(S=mt(z));var $=r.getDerivedStateFromProps;z=typeof $=="function"||typeof v.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,z||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(T||O!==S)&&Bh(i,v,u,S),Jn=!1;var L=i.memoizedState;v.state=L,Ra(i,u,v,g),ja(),O=i.memoizedState,T||L!==O||Jn?(typeof $=="function"&&(Mc(i,r,$,u),O=i.memoizedState),(j=Jn||qh(i,r,j,u,L,O,S))?(z||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(i.flags|=4194308)):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=O),v.props=u,v.state=O,v.context=S,u=j):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{v=i.stateNode,cc(t,i),S=i.memoizedProps,z=Ds(r,S),v.props=z,$=i.pendingProps,L=v.context,O=r.contextType,j=hi,typeof O=="object"&&O!==null&&(j=mt(O)),T=r.getDerivedStateFromProps,(O=typeof T=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==$||L!==j)&&Bh(i,v,u,j),Jn=!1,L=i.memoizedState,v.state=L,Ra(i,u,v,g),ja();var q=i.memoizedState;S!==$||L!==q||Jn||t!==null&&t.dependencies!==null&&Go(t.dependencies)?(typeof T=="function"&&(Mc(i,r,T,u),q=i.memoizedState),(z=Jn||qh(i,r,z,u,L,q,j)||t!==null&&t.dependencies!==null&&Go(t.dependencies))?(O||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,q,j),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,q,j)),typeof v.componentDidUpdate=="function"&&(i.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===t.memoizedProps&&L===t.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&L===t.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=q),v.props=u,v.state=q,v.context=j,u=z):(typeof v.componentDidUpdate!="function"||S===t.memoizedProps&&L===t.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&L===t.memoizedState||(i.flags|=1024),u=!1)}return v=u,lr(t,i),u=(i.flags&128)!==0,v||u?(v=i.stateNode,r=u&&typeof r.getDerivedStateFromError!="function"?null:v.render(),i.flags|=1,t!==null&&u?(i.child=Is(i,t.child,null,g),i.child=Is(i,null,r,g)):pt(t,i,r,g),i.memoizedState=v.state,t=i.child):t=An(t,i,g),t}function tm(t,i,r,u){return Es(),i.flags|=256,pt(t,i,r,u),i.child}var Oc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Lc(t){return{baseLanes:t,cachePool:zf()}}function qc(t,i,r){return t=t!==null?t.childLanes&~r:0,i&&(t|=Ot),t}function nm(t,i,r){var u=i.pendingProps,g=!1,v=(i.flags&128)!==0,S;if((S=v)||(S=t!==null&&t.memoizedState===null?!1:(Xe.current&2)!==0),S&&(g=!0,i.flags&=-129),S=(i.flags&32)!==0,i.flags&=-33,t===null){if(Se){if(g?Qn(i):Xn(),(t=He)?(t=up(t,Qt),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Gn!==null?{id:mn,overflow:pn}:null,retryLane:536870912,hydrationErrors:null},r=Df(t),r.return=i,i.child=r,ht=i,He=null)):t=null,t===null)throw Fn(i);return wu(t)?i.lanes=32:i.lanes=536870912,null}var T=u.children;return u=u.fallback,g?(Xn(),g=i.mode,T=cr({mode:"hidden",children:T},g),u=Ts(u,g,r,null),T.return=i,u.return=i,T.sibling=u,i.child=T,u=i.child,u.memoizedState=Lc(r),u.childLanes=qc(t,S,r),i.memoizedState=Oc,Pa(null,u)):(Qn(i),Bc(i,T))}var j=t.memoizedState;if(j!==null&&(T=j.dehydrated,T!==null)){if(v)i.flags&256?(Qn(i),i.flags&=-257,i=Vc(t,i,r)):i.memoizedState!==null?(Xn(),i.child=t.child,i.flags|=128,i=null):(Xn(),T=u.fallback,g=i.mode,u=cr({mode:"visible",children:u.children},g),T=Ts(T,g,r,null),T.flags|=2,u.return=i,T.return=i,u.sibling=T,i.child=u,Is(i,t.child,null,r),u=i.child,u.memoizedState=Lc(r),u.childLanes=qc(t,S,r),i.memoizedState=Oc,i=Pa(null,u));else if(Qn(i),wu(T)){if(S=T.nextSibling&&T.nextSibling.dataset,S)var O=S.dgst;S=O,u=Error(a(419)),u.stack="",u.digest=S,Na({value:u,source:null,stack:null}),i=Vc(t,i,r)}else if(st||yi(t,i,r,!1),S=(r&t.childLanes)!==0,st||S){if(S=qe,S!==null&&(u=Vd(S,r),u!==0&&u!==j.retryLane))throw j.retryLane=u,Cs(t,u),jt(S,t,u),Dc;bu(T)||vr(),i=Vc(t,i,r)}else bu(T)?(i.flags|=192,i.child=t.child,i=null):(t=j.treeContext,He=Wt(T.nextSibling),ht=i,Se=!0,zn=null,Qt=!1,t!==null&&Lf(i,t),i=Bc(i,u.children),i.flags|=4096);return i}return g?(Xn(),T=u.fallback,g=i.mode,j=t.child,O=j.sibling,u=_n(j,{mode:"hidden",children:u.children}),u.subtreeFlags=j.subtreeFlags&65011712,O!==null?T=_n(O,T):(T=Ts(T,g,r,null),T.flags|=2),T.return=i,u.return=i,u.sibling=T,i.child=u,Pa(null,u),u=i.child,T=t.child.memoizedState,T===null?T=Lc(r):(g=T.cachePool,g!==null?(j=tt._currentValue,g=g.parent!==j?{parent:j,pool:j}:g):g=zf(),T={baseLanes:T.baseLanes|r,cachePool:g}),u.memoizedState=T,u.childLanes=qc(t,S,r),i.memoizedState=Oc,Pa(t.child,u)):(Qn(i),r=t.child,t=r.sibling,r=_n(r,{mode:"visible",children:u.children}),r.return=i,r.sibling=null,t!==null&&(S=i.deletions,S===null?(i.deletions=[t],i.flags|=16):S.push(t)),i.child=r,i.memoizedState=null,r)}function Bc(t,i){return i=cr({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function cr(t,i){return t=It(22,t,null,i),t.lanes=0,t}function Vc(t,i,r){return Is(i,t.child,null,r),t=Bc(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function sm(t,i,r){t.lanes|=i;var u=t.alternate;u!==null&&(u.lanes|=i),nc(t.return,i,r)}function Hc(t,i,r,u,g,v){var S=t.memoizedState;S===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:r,tailMode:g,treeForkCount:v}:(S.isBackwards=i,S.rendering=null,S.renderingStartTime=0,S.last=u,S.tail=r,S.tailMode=g,S.treeForkCount=v)}function im(t,i,r){var u=i.pendingProps,g=u.revealOrder,v=u.tail;u=u.children;var S=Xe.current,T=(S&2)!==0;if(T?(S=S&1|2,i.flags|=128):S&=1,Ne(Xe,S),pt(t,i,u,r),u=Se?Sa:0,!T&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&sm(t,r,i);else if(t.tag===19)sm(t,r,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(g){case"forwards":for(r=i.child,g=null;r!==null;)t=r.alternate,t!==null&&Xo(t)===null&&(g=r),r=r.sibling;r=g,r===null?(g=i.child,i.child=null):(g=r.sibling,r.sibling=null),Hc(i,!1,g,r,v,u);break;case"backwards":case"unstable_legacy-backwards":for(r=null,g=i.child,i.child=null;g!==null;){if(t=g.alternate,t!==null&&Xo(t)===null){i.child=g;break}t=g.sibling,g.sibling=r,r=g,g=t}Hc(i,!0,r,null,v,u);break;case"together":Hc(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function An(t,i,r){if(t!==null&&(i.dependencies=t.dependencies),es|=i.lanes,(r&i.childLanes)===0)if(t!==null){if(yi(t,i,r,!1),(r&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(a(153));if(i.child!==null){for(t=i.child,r=_n(t,t.pendingProps),i.child=r,r.return=i;t.sibling!==null;)t=t.sibling,r=r.sibling=_n(t,t.pendingProps),r.return=i;r.sibling=null}return i.child}function Gc(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Go(t)))}function Px(t,i,r){switch(i.tag){case 3:Ys(i,i.stateNode.containerInfo),$n(i,tt,t.memoizedState.cache),Es();break;case 27:case 5:ot(i);break;case 4:Ys(i,i.stateNode.containerInfo);break;case 10:$n(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,mc(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Qn(i),i.flags|=128,null):(r&i.child.childLanes)!==0?nm(t,i,r):(Qn(i),t=An(t,i,r),t!==null?t.sibling:null);Qn(i);break;case 19:var g=(t.flags&128)!==0;if(u=(r&i.childLanes)!==0,u||(yi(t,i,r,!1),u=(r&i.childLanes)!==0),g){if(u)return im(t,i,r);i.flags|=128}if(g=i.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Ne(Xe,Xe.current),u)break;return null;case 22:return i.lanes=0,Qh(t,i,r,i.pendingProps);case 24:$n(i,tt,t.memoizedState.cache)}return An(t,i,r)}function am(t,i,r){if(t!==null)if(t.memoizedProps!==i.pendingProps)st=!0;else{if(!Gc(t,r)&&(i.flags&128)===0)return st=!1,Px(t,i,r);st=(t.flags&131072)!==0}else st=!1,Se&&(i.flags&1048576)!==0&&Of(i,Sa,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(t=Rs(i.elementType),i.type=t,typeof t=="function")Yl(t)?(u=Ds(t,u),i.tag=1,i=em(null,i,t,u,r)):(i.tag=0,i=Pc(null,i,t,u,r));else{if(t!=null){var g=t.$$typeof;if(g===U){i.tag=11,i=Jh(null,i,t,u,r);break e}else if(g===H){i.tag=14,i=Yh(null,i,t,u,r);break e}}throw i=ke(t)||t,Error(a(306,i,""))}}return i;case 0:return Pc(t,i,i.type,i.pendingProps,r);case 1:return u=i.type,g=Ds(u,i.pendingProps),em(t,i,u,g,r);case 3:e:{if(Ys(i,i.stateNode.containerInfo),t===null)throw Error(a(387));u=i.pendingProps;var v=i.memoizedState;g=v.element,cc(t,i),Ra(i,u,null,r);var S=i.memoizedState;if(u=S.cache,$n(i,tt,u),u!==v.cache&&sc(i,[tt],r,!0),ja(),u=S.element,v.isDehydrated)if(v={element:u,isDehydrated:!1,cache:S.cache},i.updateQueue.baseState=v,i.memoizedState=v,i.flags&256){i=tm(t,i,u,r);break e}else if(u!==g){g=Jt(Error(a(424)),i),Na(g),i=tm(t,i,u,r);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(He=Wt(t.firstChild),ht=i,Se=!0,zn=null,Qt=!0,r=Qf(i,null,u,r),i.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Es(),u===g){i=An(t,i,r);break e}pt(t,i,u,r)}i=i.child}return i;case 26:return lr(t,i),t===null?(r=gp(i.type,null,i.pendingProps,null))?i.memoizedState=r:Se||(r=i.type,t=i.pendingProps,u=Cr(nn.current).createElement(r),u[ft]=i,u[Nt]=t,gt(u,r,t),ct(u),i.stateNode=u):i.memoizedState=gp(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return ot(i),t===null&&Se&&(u=i.stateNode=hp(i.type,i.pendingProps,nn.current),ht=i,Qt=!0,g=He,as(i.type)?(_u=g,He=Wt(u.firstChild)):He=g),pt(t,i,i.pendingProps.children,r),lr(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Se&&((g=u=He)&&(u=fb(u,i.type,i.pendingProps,Qt),u!==null?(i.stateNode=u,ht=i,He=Wt(u.firstChild),Qt=!1,g=!0):g=!1),g||Fn(i)),ot(i),g=i.type,v=i.pendingProps,S=t!==null?t.memoizedProps:null,u=v.children,yu(g,v)?u=null:S!==null&&yu(g,S)&&(i.flags|=32),i.memoizedState!==null&&(g=gc(t,i,Ex,null,null,r),Xa._currentValue=g),lr(t,i),pt(t,i,u,r),i.child;case 6:return t===null&&Se&&((t=r=He)&&(r=hb(r,i.pendingProps,Qt),r!==null?(i.stateNode=r,ht=i,He=null,t=!0):t=!1),t||Fn(i)),null;case 13:return nm(t,i,r);case 4:return Ys(i,i.stateNode.containerInfo),u=i.pendingProps,t===null?i.child=Is(i,null,u,r):pt(t,i,u,r),i.child;case 11:return Jh(t,i,i.type,i.pendingProps,r);case 7:return pt(t,i,i.pendingProps,r),i.child;case 8:return pt(t,i,i.pendingProps.children,r),i.child;case 12:return pt(t,i,i.pendingProps.children,r),i.child;case 10:return u=i.pendingProps,$n(i,i.type,u.value),pt(t,i,u.children,r),i.child;case 9:return g=i.type._context,u=i.pendingProps.children,ks(i),g=mt(g),u=u(g),i.flags|=1,pt(t,i,u,r),i.child;case 14:return Yh(t,i,i.type,i.pendingProps,r);case 15:return Kh(t,i,i.type,i.pendingProps,r);case 19:return im(t,i,r);case 31:return Dx(t,i,r);case 22:return Qh(t,i,r,i.pendingProps);case 24:return ks(i),u=mt(tt),t===null?(g=oc(),g===null&&(g=qe,v=ic(),g.pooledCache=v,v.refCount++,v!==null&&(g.pooledCacheLanes|=r),g=v),i.memoizedState={parent:u,cache:g},lc(i),$n(i,tt,g)):((t.lanes&r)!==0&&(cc(t,i),Ra(i,null,null,r),ja()),g=t.memoizedState,v=i.memoizedState,g.parent!==u?(g={parent:u,cache:u},i.memoizedState=g,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=g),$n(i,tt,u)):(u=v.cache,$n(i,tt,u),u!==g.cache&&sc(i,[tt],r,!0))),pt(t,i,i.pendingProps.children,r),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function kn(t){t.flags|=4}function zc(t,i,r,u,g){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(g&335544128)===g)if(t.stateNode.complete)t.flags|=8192;else if(Mm())t.flags|=8192;else throw Ms=Jo,rc}else t.flags&=-16777217}function om(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!wp(i))if(Mm())t.flags|=8192;else throw Ms=Jo,rc}function ur(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Ld():536870912,t.lanes|=i,ki|=i)}function Oa(t,i){if(!Se)switch(t.tailMode){case"hidden":i=t.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var u=null;r!==null;)r.alternate!==null&&(u=r),r=r.sibling;u===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function Ge(t){var i=t.alternate!==null&&t.alternate.child===t.child,r=0,u=0;if(i)for(var g=t.child;g!==null;)r|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=t,g=g.sibling;else for(g=t.child;g!==null;)r|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=t,g=g.sibling;return t.subtreeFlags|=u,t.childLanes=r,i}function Ox(t,i,r){var u=i.pendingProps;switch(Wl(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ge(i),null;case 1:return Ge(i),null;case 3:return r=i.stateNode,u=null,t!==null&&(u=t.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),Cn(tt),an(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(gi(i)?kn(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,ec())),Ge(i),null;case 26:var g=i.type,v=i.memoizedState;return t===null?(kn(i),v!==null?(Ge(i),om(i,v)):(Ge(i),zc(i,g,null,u,r))):v?v!==t.memoizedState?(kn(i),Ge(i),om(i,v)):(Ge(i),i.flags&=-16777217):(t=t.memoizedProps,t!==u&&kn(i),Ge(i),zc(i,g,t,u,r)),null;case 27:if(Ks(i),r=nn.current,g=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==u&&kn(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return Ge(i),null}t=Qe.current,gi(i)?qf(i):(t=hp(g,u,r),i.stateNode=t,kn(i))}return Ge(i),null;case 5:if(Ks(i),g=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==u&&kn(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return Ge(i),null}if(v=Qe.current,gi(i))qf(i);else{var S=Cr(nn.current);switch(v){case 1:v=S.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:v=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":v=S.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":v=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":v=S.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof u.is=="string"?S.createElement("select",{is:u.is}):S.createElement("select"),u.multiple?v.multiple=!0:u.size&&(v.size=u.size);break;default:v=typeof u.is=="string"?S.createElement(g,{is:u.is}):S.createElement(g)}}v[ft]=i,v[Nt]=u;e:for(S=i.child;S!==null;){if(S.tag===5||S.tag===6)v.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===i)break e;for(;S.sibling===null;){if(S.return===null||S.return===i)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}i.stateNode=v;e:switch(gt(v,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&kn(i)}}return Ge(i),zc(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,r),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==u&&kn(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(a(166));if(t=nn.current,gi(i)){if(t=i.stateNode,r=i.memoizedProps,u=null,g=ht,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}t[ft]=i,t=!!(t.nodeValue===r||u!==null&&u.suppressHydrationWarning===!0||np(t.nodeValue,r)),t||Fn(i,!0)}else t=Cr(t).createTextNode(u),t[ft]=i,i.stateNode=t}return Ge(i),null;case 31:if(r=i.memoizedState,t===null||t.memoizedState!==null){if(u=gi(i),r!==null){if(t===null){if(!u)throw Error(a(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(557));t[ft]=i}else Es(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ge(i),t=!1}else r=ec(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return i.flags&256?(Dt(i),i):(Dt(i),null);if((i.flags&128)!==0)throw Error(a(558))}return Ge(i),null;case 13:if(u=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(g=gi(i),u!==null&&u.dehydrated!==null){if(t===null){if(!g)throw Error(a(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(a(317));g[ft]=i}else Es(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ge(i),g=!1}else g=ec(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=g),g=!0;if(!g)return i.flags&256?(Dt(i),i):(Dt(i),null)}return Dt(i),(i.flags&128)!==0?(i.lanes=r,i):(r=u!==null,t=t!==null&&t.memoizedState!==null,r&&(u=i.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),v=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(v=u.memoizedState.cachePool.pool),v!==g&&(u.flags|=2048)),r!==t&&r&&(i.child.flags|=8192),ur(i,i.updateQueue),Ge(i),null);case 4:return an(),t===null&&fu(i.stateNode.containerInfo),Ge(i),null;case 10:return Cn(i.type),Ge(i),null;case 19:if(Be(Xe),u=i.memoizedState,u===null)return Ge(i),null;if(g=(i.flags&128)!==0,v=u.rendering,v===null)if(g)Oa(u,!1);else{if(Ke!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(v=Xo(t),v!==null){for(i.flags|=128,Oa(u,!1),t=v.updateQueue,i.updateQueue=t,ur(i,t),i.subtreeFlags=0,t=r,r=i.child;r!==null;)Uf(r,t),r=r.sibling;return Ne(Xe,Xe.current&1|2),Se&&Sn(i,u.treeForkCount),i.child}t=t.sibling}u.tail!==null&&xt()>pr&&(i.flags|=128,g=!0,Oa(u,!1),i.lanes=4194304)}else{if(!g)if(t=Xo(v),t!==null){if(i.flags|=128,g=!0,t=t.updateQueue,i.updateQueue=t,ur(i,t),Oa(u,!0),u.tail===null&&u.tailMode==="hidden"&&!v.alternate&&!Se)return Ge(i),null}else 2*xt()-u.renderingStartTime>pr&&r!==536870912&&(i.flags|=128,g=!0,Oa(u,!1),i.lanes=4194304);u.isBackwards?(v.sibling=i.child,i.child=v):(t=u.last,t!==null?t.sibling=v:i.child=v,u.last=v)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=xt(),t.sibling=null,r=Xe.current,Ne(Xe,g?r&1|2:r&1),Se&&Sn(i,u.treeForkCount),t):(Ge(i),null);case 22:case 23:return Dt(i),hc(),u=i.memoizedState!==null,t!==null?t.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(r&536870912)!==0&&(i.flags&128)===0&&(Ge(i),i.subtreeFlags&6&&(i.flags|=8192)):Ge(i),r=i.updateQueue,r!==null&&ur(i,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==r&&(i.flags|=2048),t!==null&&Be(js),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),i.memoizedState.cache!==r&&(i.flags|=2048),Cn(tt),Ge(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function Lx(t,i){switch(Wl(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Cn(tt),an(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Ks(i),null;case 31:if(i.memoizedState!==null){if(Dt(i),i.alternate===null)throw Error(a(340));Es()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(Dt(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(a(340));Es()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return Be(Xe),null;case 4:return an(),null;case 10:return Cn(i.type),null;case 22:case 23:return Dt(i),hc(),t!==null&&Be(js),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Cn(tt),null;case 25:return null;default:return null}}function rm(t,i){switch(Wl(i),i.tag){case 3:Cn(tt),an();break;case 26:case 27:case 5:Ks(i);break;case 4:an();break;case 31:i.memoizedState!==null&&Dt(i);break;case 13:Dt(i);break;case 19:Be(Xe);break;case 10:Cn(i.type);break;case 22:case 23:Dt(i),hc(),t!==null&&Be(js);break;case 24:Cn(tt)}}function La(t,i){try{var r=i.updateQueue,u=r!==null?r.lastEffect:null;if(u!==null){var g=u.next;r=g;do{if((r.tag&t)===t){u=void 0;var v=r.create,S=r.inst;u=v(),S.destroy=u}r=r.next}while(r!==g)}}catch(T){Re(i,i.return,T)}}function Wn(t,i,r){try{var u=i.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var v=g.next;u=v;do{if((u.tag&t)===t){var S=u.inst,T=S.destroy;if(T!==void 0){S.destroy=void 0,g=i;var j=r,O=T;try{O()}catch(z){Re(g,j,z)}}}u=u.next}while(u!==v)}}catch(z){Re(i,i.return,z)}}function lm(t){var i=t.updateQueue;if(i!==null){var r=t.stateNode;try{Wf(i,r)}catch(u){Re(t,t.return,u)}}}function cm(t,i,r){r.props=Ds(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(u){Re(t,i,u)}}function qa(t,i){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var u=t.stateNode;break;case 30:u=t.stateNode;break;default:u=t.stateNode}typeof r=="function"?t.refCleanup=r(u):r.current=u}}catch(g){Re(t,i,g)}}function gn(t,i){var r=t.ref,u=t.refCleanup;if(r!==null)if(typeof u=="function")try{u()}catch(g){Re(t,i,g)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(g){Re(t,i,g)}else r.current=null}function um(t){var i=t.type,r=t.memoizedProps,u=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":r.autoFocus&&u.focus();break e;case"img":r.src?u.src=r.src:r.srcSet&&(u.srcset=r.srcSet)}}catch(g){Re(t,t.return,g)}}function Fc(t,i,r){try{var u=t.stateNode;ob(u,t.type,r,i),u[Nt]=i}catch(g){Re(t,t.return,g)}}function dm(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&as(t.type)||t.tag===4}function $c(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||dm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&as(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Jc(t,i,r){var u=t.tag;if(u===5||u===6)t=t.stateNode,i?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,i):(i=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,i.appendChild(t),r=r._reactRootContainer,r!=null||i.onclick!==null||(i.onclick=bn));else if(u!==4&&(u===27&&as(t.type)&&(r=t.stateNode,i=null),t=t.child,t!==null))for(Jc(t,i,r),t=t.sibling;t!==null;)Jc(t,i,r),t=t.sibling}function dr(t,i,r){var u=t.tag;if(u===5||u===6)t=t.stateNode,i?r.insertBefore(t,i):r.appendChild(t);else if(u!==4&&(u===27&&as(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(dr(t,i,r),t=t.sibling;t!==null;)dr(t,i,r),t=t.sibling}function fm(t){var i=t.stateNode,r=t.memoizedProps;try{for(var u=t.type,g=i.attributes;g.length;)i.removeAttributeNode(g[0]);gt(i,u,r),i[ft]=t,i[Nt]=r}catch(v){Re(t,t.return,v)}}var jn=!1,it=!1,Yc=!1,hm=typeof WeakSet=="function"?WeakSet:Set,ut=null;function qx(t,i){if(t=t.containerInfo,pu=Mr,t=Cf(t),Vl(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var u=r.getSelection&&r.getSelection();if(u&&u.rangeCount!==0){r=u.anchorNode;var g=u.anchorOffset,v=u.focusNode;u=u.focusOffset;try{r.nodeType,v.nodeType}catch{r=null;break e}var S=0,T=-1,j=-1,O=0,z=0,$=t,L=null;t:for(;;){for(var q;$!==r||g!==0&&$.nodeType!==3||(T=S+g),$!==v||u!==0&&$.nodeType!==3||(j=S+u),$.nodeType===3&&(S+=$.nodeValue.length),(q=$.firstChild)!==null;)L=$,$=q;for(;;){if($===t)break t;if(L===r&&++O===g&&(T=S),L===v&&++z===u&&(j=S),(q=$.nextSibling)!==null)break;$=L,L=$.parentNode}$=q}r=T===-1||j===-1?null:{start:T,end:j}}else r=null}r=r||{start:0,end:0}}else r=null;for(gu={focusedElem:t,selectionRange:r},Mr=!1,ut=i;ut!==null;)if(i=ut,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,ut=t;else for(;ut!==null;){switch(i=ut,v=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)g=t[r],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&v!==null){t=void 0,r=i,g=v.memoizedProps,v=v.memoizedState,u=r.stateNode;try{var ne=Ds(r.type,g);t=u.getSnapshotBeforeUpdate(ne,v),u.__reactInternalSnapshotBeforeUpdate=t}catch(ue){Re(r,r.return,ue)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,r=t.nodeType,r===9)xu(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":xu(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=i.sibling,t!==null){t.return=i.return,ut=t;break}ut=i.return}}function mm(t,i,r){var u=r.flags;switch(r.tag){case 0:case 11:case 15:Mn(t,r),u&4&&La(5,r);break;case 1:if(Mn(t,r),u&4)if(t=r.stateNode,i===null)try{t.componentDidMount()}catch(S){Re(r,r.return,S)}else{var g=Ds(r.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(g,i,t.__reactInternalSnapshotBeforeUpdate)}catch(S){Re(r,r.return,S)}}u&64&&lm(r),u&512&&qa(r,r.return);break;case 3:if(Mn(t,r),u&64&&(t=r.updateQueue,t!==null)){if(i=null,r.child!==null)switch(r.child.tag){case 27:case 5:i=r.child.stateNode;break;case 1:i=r.child.stateNode}try{Wf(t,i)}catch(S){Re(r,r.return,S)}}break;case 27:i===null&&u&4&&fm(r);case 26:case 5:Mn(t,r),i===null&&u&4&&um(r),u&512&&qa(r,r.return);break;case 12:Mn(t,r);break;case 31:Mn(t,r),u&4&&ym(t,r);break;case 13:Mn(t,r),u&4&&vm(t,r),u&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=Yx.bind(null,r),mb(t,r))));break;case 22:if(u=r.memoizedState!==null||jn,!u){i=i!==null&&i.memoizedState!==null||it,g=jn;var v=it;jn=u,(it=i)&&!v?In(t,r,(r.subtreeFlags&8772)!==0):Mn(t,r),jn=g,it=v}break;case 30:break;default:Mn(t,r)}}function pm(t){var i=t.alternate;i!==null&&(t.alternate=null,pm(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Nl(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Fe=null,Tt=!1;function Rn(t,i,r){for(r=r.child;r!==null;)gm(t,i,r),r=r.sibling}function gm(t,i,r){if(fe&&typeof fe.onCommitFiberUnmount=="function")try{fe.onCommitFiberUnmount(me,r)}catch{}switch(r.tag){case 26:it||gn(r,i),Rn(t,i,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:it||gn(r,i);var u=Fe,g=Tt;as(r.type)&&(Fe=r.stateNode,Tt=!1),Rn(t,i,r),Ya(r.stateNode),Fe=u,Tt=g;break;case 5:it||gn(r,i);case 6:if(u=Fe,g=Tt,Fe=null,Rn(t,i,r),Fe=u,Tt=g,Fe!==null)if(Tt)try{(Fe.nodeType===9?Fe.body:Fe.nodeName==="HTML"?Fe.ownerDocument.body:Fe).removeChild(r.stateNode)}catch(v){Re(r,i,v)}else try{Fe.removeChild(r.stateNode)}catch(v){Re(r,i,v)}break;case 18:Fe!==null&&(Tt?(t=Fe,lp(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),Oi(t)):lp(Fe,r.stateNode));break;case 4:u=Fe,g=Tt,Fe=r.stateNode.containerInfo,Tt=!0,Rn(t,i,r),Fe=u,Tt=g;break;case 0:case 11:case 14:case 15:Wn(2,r,i),it||Wn(4,r,i),Rn(t,i,r);break;case 1:it||(gn(r,i),u=r.stateNode,typeof u.componentWillUnmount=="function"&&cm(r,i,u)),Rn(t,i,r);break;case 21:Rn(t,i,r);break;case 22:it=(u=it)||r.memoizedState!==null,Rn(t,i,r),it=u;break;default:Rn(t,i,r)}}function ym(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Oi(t)}catch(r){Re(i,i.return,r)}}}function vm(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Oi(t)}catch(r){Re(i,i.return,r)}}function Bx(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new hm),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new hm),i;default:throw Error(a(435,t.tag))}}function fr(t,i){var r=Bx(t);i.forEach(function(u){if(!r.has(u)){r.add(u);var g=Kx.bind(null,t,u);u.then(g,g)}})}function Et(t,i){var r=i.deletions;if(r!==null)for(var u=0;u<r.length;u++){var g=r[u],v=t,S=i,T=S;e:for(;T!==null;){switch(T.tag){case 27:if(as(T.type)){Fe=T.stateNode,Tt=!1;break e}break;case 5:Fe=T.stateNode,Tt=!1;break e;case 3:case 4:Fe=T.stateNode.containerInfo,Tt=!0;break e}T=T.return}if(Fe===null)throw Error(a(160));gm(v,S,g),Fe=null,Tt=!1,v=g.alternate,v!==null&&(v.return=null),g.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)xm(i,t),i=i.sibling}var ln=null;function xm(t,i){var r=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Et(i,t),At(t),u&4&&(Wn(3,t,t.return),La(3,t),Wn(5,t,t.return));break;case 1:Et(i,t),At(t),u&512&&(it||r===null||gn(r,r.return)),u&64&&jn&&(t=t.updateQueue,t!==null&&(u=t.callbacks,u!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?u:r.concat(u))));break;case 26:var g=ln;if(Et(i,t),At(t),u&512&&(it||r===null||gn(r,r.return)),u&4){var v=r!==null?r.memoizedState:null;if(u=t.memoizedState,r===null)if(u===null)if(t.stateNode===null){e:{u=t.type,r=t.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":v=g.getElementsByTagName("title")[0],(!v||v[fa]||v[ft]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=g.createElement(u),g.head.insertBefore(v,g.querySelector("head > title"))),gt(v,u,r),v[ft]=t,ct(v),u=v;break e;case"link":var S=xp("link","href",g).get(u+(r.href||""));if(S){for(var T=0;T<S.length;T++)if(v=S[T],v.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&v.getAttribute("rel")===(r.rel==null?null:r.rel)&&v.getAttribute("title")===(r.title==null?null:r.title)&&v.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){S.splice(T,1);break t}}v=g.createElement(u),gt(v,u,r),g.head.appendChild(v);break;case"meta":if(S=xp("meta","content",g).get(u+(r.content||""))){for(T=0;T<S.length;T++)if(v=S[T],v.getAttribute("content")===(r.content==null?null:""+r.content)&&v.getAttribute("name")===(r.name==null?null:r.name)&&v.getAttribute("property")===(r.property==null?null:r.property)&&v.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&v.getAttribute("charset")===(r.charSet==null?null:r.charSet)){S.splice(T,1);break t}}v=g.createElement(u),gt(v,u,r),g.head.appendChild(v);break;default:throw Error(a(468,u))}v[ft]=t,ct(v),u=v}t.stateNode=u}else bp(g,t.type,t.stateNode);else t.stateNode=vp(g,u,t.memoizedProps);else v!==u?(v===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):v.count--,u===null?bp(g,t.type,t.stateNode):vp(g,u,t.memoizedProps)):u===null&&t.stateNode!==null&&Fc(t,t.memoizedProps,r.memoizedProps)}break;case 27:Et(i,t),At(t),u&512&&(it||r===null||gn(r,r.return)),r!==null&&u&4&&Fc(t,t.memoizedProps,r.memoizedProps);break;case 5:if(Et(i,t),At(t),u&512&&(it||r===null||gn(r,r.return)),t.flags&32){g=t.stateNode;try{oi(g,"")}catch(ne){Re(t,t.return,ne)}}u&4&&t.stateNode!=null&&(g=t.memoizedProps,Fc(t,g,r!==null?r.memoizedProps:g)),u&1024&&(Yc=!0);break;case 6:if(Et(i,t),At(t),u&4){if(t.stateNode===null)throw Error(a(162));u=t.memoizedProps,r=t.stateNode;try{r.nodeValue=u}catch(ne){Re(t,t.return,ne)}}break;case 3:if(Ar=null,g=ln,ln=Tr(i.containerInfo),Et(i,t),ln=g,At(t),u&4&&r!==null&&r.memoizedState.isDehydrated)try{Oi(i.containerInfo)}catch(ne){Re(t,t.return,ne)}Yc&&(Yc=!1,bm(t));break;case 4:u=ln,ln=Tr(t.stateNode.containerInfo),Et(i,t),At(t),ln=u;break;case 12:Et(i,t),At(t);break;case 31:Et(i,t),At(t),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,fr(t,u)));break;case 13:Et(i,t),At(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(mr=xt()),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,fr(t,u)));break;case 22:g=t.memoizedState!==null;var j=r!==null&&r.memoizedState!==null,O=jn,z=it;if(jn=O||g,it=z||j,Et(i,t),it=z,jn=O,At(t),u&8192)e:for(i=t.stateNode,i._visibility=g?i._visibility&-2:i._visibility|1,g&&(r===null||j||jn||it||Ps(t)),r=null,i=t;;){if(i.tag===5||i.tag===26){if(r===null){j=r=i;try{if(v=j.stateNode,g)S=v.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{T=j.stateNode;var $=j.memoizedProps.style,L=$!=null&&$.hasOwnProperty("display")?$.display:null;T.style.display=L==null||typeof L=="boolean"?"":(""+L).trim()}}catch(ne){Re(j,j.return,ne)}}}else if(i.tag===6){if(r===null){j=i;try{j.stateNode.nodeValue=g?"":j.memoizedProps}catch(ne){Re(j,j.return,ne)}}}else if(i.tag===18){if(r===null){j=i;try{var q=j.stateNode;g?cp(q,!0):cp(j.stateNode,!1)}catch(ne){Re(j,j.return,ne)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;r===i&&(r=null),i=i.return}r===i&&(r=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=t.updateQueue,u!==null&&(r=u.retryQueue,r!==null&&(u.retryQueue=null,fr(t,r))));break;case 19:Et(i,t),At(t),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,fr(t,u)));break;case 30:break;case 21:break;default:Et(i,t),At(t)}}function At(t){var i=t.flags;if(i&2){try{for(var r,u=t.return;u!==null;){if(dm(u)){r=u;break}u=u.return}if(r==null)throw Error(a(160));switch(r.tag){case 27:var g=r.stateNode,v=$c(t);dr(t,v,g);break;case 5:var S=r.stateNode;r.flags&32&&(oi(S,""),r.flags&=-33);var T=$c(t);dr(t,T,S);break;case 3:case 4:var j=r.stateNode.containerInfo,O=$c(t);Jc(t,O,j);break;default:throw Error(a(161))}}catch(z){Re(t,t.return,z)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function bm(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;bm(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Mn(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)mm(t,i.alternate,i),i=i.sibling}function Ps(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Wn(4,i,i.return),Ps(i);break;case 1:gn(i,i.return);var r=i.stateNode;typeof r.componentWillUnmount=="function"&&cm(i,i.return,r),Ps(i);break;case 27:Ya(i.stateNode);case 26:case 5:gn(i,i.return),Ps(i);break;case 22:i.memoizedState===null&&Ps(i);break;case 30:Ps(i);break;default:Ps(i)}t=t.sibling}}function In(t,i,r){for(r=r&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,g=t,v=i,S=v.flags;switch(v.tag){case 0:case 11:case 15:In(g,v,r),La(4,v);break;case 1:if(In(g,v,r),u=v,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(O){Re(u,u.return,O)}if(u=v,g=u.updateQueue,g!==null){var T=u.stateNode;try{var j=g.shared.hiddenCallbacks;if(j!==null)for(g.shared.hiddenCallbacks=null,g=0;g<j.length;g++)Xf(j[g],T)}catch(O){Re(u,u.return,O)}}r&&S&64&&lm(v),qa(v,v.return);break;case 27:fm(v);case 26:case 5:In(g,v,r),r&&u===null&&S&4&&um(v),qa(v,v.return);break;case 12:In(g,v,r);break;case 31:In(g,v,r),r&&S&4&&ym(g,v);break;case 13:In(g,v,r),r&&S&4&&vm(g,v);break;case 22:v.memoizedState===null&&In(g,v,r),qa(v,v.return);break;case 30:break;default:In(g,v,r)}i=i.sibling}}function Kc(t,i){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&Ca(r))}function Qc(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Ca(t))}function cn(t,i,r,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)wm(t,i,r,u),i=i.sibling}function wm(t,i,r,u){var g=i.flags;switch(i.tag){case 0:case 11:case 15:cn(t,i,r,u),g&2048&&La(9,i);break;case 1:cn(t,i,r,u);break;case 3:cn(t,i,r,u),g&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Ca(t)));break;case 12:if(g&2048){cn(t,i,r,u),t=i.stateNode;try{var v=i.memoizedProps,S=v.id,T=v.onPostCommit;typeof T=="function"&&T(S,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(j){Re(i,i.return,j)}}else cn(t,i,r,u);break;case 31:cn(t,i,r,u);break;case 13:cn(t,i,r,u);break;case 23:break;case 22:v=i.stateNode,S=i.alternate,i.memoizedState!==null?v._visibility&2?cn(t,i,r,u):Ba(t,i):v._visibility&2?cn(t,i,r,u):(v._visibility|=2,Ti(t,i,r,u,(i.subtreeFlags&10256)!==0||!1)),g&2048&&Kc(S,i);break;case 24:cn(t,i,r,u),g&2048&&Qc(i.alternate,i);break;default:cn(t,i,r,u)}}function Ti(t,i,r,u,g){for(g=g&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var v=t,S=i,T=r,j=u,O=S.flags;switch(S.tag){case 0:case 11:case 15:Ti(v,S,T,j,g),La(8,S);break;case 23:break;case 22:var z=S.stateNode;S.memoizedState!==null?z._visibility&2?Ti(v,S,T,j,g):Ba(v,S):(z._visibility|=2,Ti(v,S,T,j,g)),g&&O&2048&&Kc(S.alternate,S);break;case 24:Ti(v,S,T,j,g),g&&O&2048&&Qc(S.alternate,S);break;default:Ti(v,S,T,j,g)}i=i.sibling}}function Ba(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var r=t,u=i,g=u.flags;switch(u.tag){case 22:Ba(r,u),g&2048&&Kc(u.alternate,u);break;case 24:Ba(r,u),g&2048&&Qc(u.alternate,u);break;default:Ba(r,u)}i=i.sibling}}var Va=8192;function Ei(t,i,r){if(t.subtreeFlags&Va)for(t=t.child;t!==null;)_m(t,i,r),t=t.sibling}function _m(t,i,r){switch(t.tag){case 26:Ei(t,i,r),t.flags&Va&&t.memoizedState!==null&&Tb(r,ln,t.memoizedState,t.memoizedProps);break;case 5:Ei(t,i,r);break;case 3:case 4:var u=ln;ln=Tr(t.stateNode.containerInfo),Ei(t,i,r),ln=u;break;case 22:t.memoizedState===null&&(u=t.alternate,u!==null&&u.memoizedState!==null?(u=Va,Va=16777216,Ei(t,i,r),Va=u):Ei(t,i,r));break;default:Ei(t,i,r)}}function Sm(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function Ha(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var u=i[r];ut=u,Cm(u,t)}Sm(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Nm(t),t=t.sibling}function Nm(t){switch(t.tag){case 0:case 11:case 15:Ha(t),t.flags&2048&&Wn(9,t,t.return);break;case 3:Ha(t);break;case 12:Ha(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,hr(t)):Ha(t);break;default:Ha(t)}}function hr(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var u=i[r];ut=u,Cm(u,t)}Sm(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Wn(8,i,i.return),hr(i);break;case 22:r=i.stateNode,r._visibility&2&&(r._visibility&=-3,hr(i));break;default:hr(i)}t=t.sibling}}function Cm(t,i){for(;ut!==null;){var r=ut;switch(r.tag){case 0:case 11:case 15:Wn(8,r,i);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var u=r.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Ca(r.memoizedState.cache)}if(u=r.child,u!==null)u.return=r,ut=u;else e:for(r=t;ut!==null;){u=ut;var g=u.sibling,v=u.return;if(pm(u),u===r){ut=null;break e}if(g!==null){g.return=v,ut=g;break e}ut=v}}}var Vx={getCacheForType:function(t){var i=mt(tt),r=i.data.get(t);return r===void 0&&(r=t(),i.data.set(t,r)),r},cacheSignal:function(){return mt(tt).controller.signal}},Hx=typeof WeakMap=="function"?WeakMap:Map,Ae=0,qe=null,ve=null,be=0,je=0,Pt=null,Zn=!1,Ai=!1,Xc=!1,Un=0,Ke=0,es=0,Os=0,Wc=0,Ot=0,ki=0,Ga=null,kt=null,Zc=!1,mr=0,Tm=0,pr=1/0,gr=null,ts=null,rt=0,ns=null,ji=null,Dn=0,eu=0,tu=null,Em=null,za=0,nu=null;function Lt(){return(Ae&2)!==0&&be!==0?be&-be:D.T!==null?lu():Hd()}function Am(){if(Ot===0)if((be&536870912)===0||Se){var t=No;No<<=1,(No&3932160)===0&&(No=262144),Ot=t}else Ot=536870912;return t=Ut.current,t!==null&&(t.flags|=32),Ot}function jt(t,i,r){(t===qe&&(je===2||je===9)||t.cancelPendingCommit!==null)&&(Ri(t,0),ss(t,be,Ot,!1)),da(t,r),((Ae&2)===0||t!==qe)&&(t===qe&&((Ae&2)===0&&(Os|=r),Ke===4&&ss(t,be,Ot,!1)),yn(t))}function km(t,i,r){if((Ae&6)!==0)throw Error(a(327));var u=!r&&(i&127)===0&&(i&t.expiredLanes)===0||ua(t,i),g=u?Fx(t,i):iu(t,i,!0),v=u;do{if(g===0){Ai&&!u&&ss(t,i,0,!1);break}else{if(r=t.current.alternate,v&&!Gx(r)){g=iu(t,i,!1),v=!1;continue}if(g===2){if(v=i,t.errorRecoveryDisabledLanes&v)var S=0;else S=t.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){i=S;e:{var T=t;g=Ga;var j=T.current.memoizedState.isDehydrated;if(j&&(Ri(T,S).flags|=256),S=iu(T,S,!1),S!==2){if(Xc&&!j){T.errorRecoveryDisabledLanes|=v,Os|=v,g=4;break e}v=kt,kt=g,v!==null&&(kt===null?kt=v:kt.push.apply(kt,v))}g=S}if(v=!1,g!==2)continue}}if(g===1){Ri(t,0),ss(t,i,0,!0);break}e:{switch(u=t,v=g,v){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:ss(u,i,Ot,!Zn);break e;case 2:kt=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(g=mr+300-xt(),10<g)){if(ss(u,i,Ot,!Zn),To(u,0,!0)!==0)break e;Dn=i,u.timeoutHandle=op(jm.bind(null,u,r,kt,gr,Zc,i,Ot,Os,ki,Zn,v,"Throttled",-0,0),g);break e}jm(u,r,kt,gr,Zc,i,Ot,Os,ki,Zn,v,null,-0,0)}}break}while(!0);yn(t)}function jm(t,i,r,u,g,v,S,T,j,O,z,$,L,q){if(t.timeoutHandle=-1,$=i.subtreeFlags,$&8192||($&16785408)===16785408){$={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:bn},_m(i,v,$);var ne=(v&62914560)===v?mr-xt():(v&4194048)===v?Tm-xt():0;if(ne=Eb($,ne),ne!==null){Dn=v,t.cancelPendingCommit=ne(Lm.bind(null,t,i,v,r,u,g,S,T,j,z,$,null,L,q)),ss(t,v,S,!O);return}}Lm(t,i,v,r,u,g,S,T,j)}function Gx(t){for(var i=t;;){var r=i.tag;if((r===0||r===11||r===15)&&i.flags&16384&&(r=i.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var u=0;u<r.length;u++){var g=r[u],v=g.getSnapshot;g=g.value;try{if(!Mt(v(),g))return!1}catch{return!1}}if(r=i.child,i.subtreeFlags&16384&&r!==null)r.return=i,i=r;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ss(t,i,r,u){i&=~Wc,i&=~Os,t.suspendedLanes|=i,t.pingedLanes&=~i,u&&(t.warmLanes|=i),u=t.expirationTimes;for(var g=i;0<g;){var v=31-Le(g),S=1<<v;u[v]=-1,g&=~S}r!==0&&qd(t,r,i)}function yr(){return(Ae&6)===0?(Fa(0),!1):!0}function su(){if(ve!==null){if(je===0)var t=ve.return;else t=ve,Nn=As=null,xc(t),wi=null,Ea=0,t=ve;for(;t!==null;)rm(t.alternate,t),t=t.return;ve=null}}function Ri(t,i){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,cb(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),Dn=0,su(),qe=t,ve=r=_n(t.current,null),be=i,je=0,Pt=null,Zn=!1,Ai=ua(t,i),Xc=!1,ki=Ot=Wc=Os=es=Ke=0,kt=Ga=null,Zc=!1,(i&8)!==0&&(i|=i&32);var u=t.entangledLanes;if(u!==0)for(t=t.entanglements,u&=i;0<u;){var g=31-Le(u),v=1<<g;i|=t[g],u&=~v}return Un=i,Lo(),r}function Rm(t,i){ge=null,D.H=Da,i===bi||i===$o?(i=Jf(),je=3):i===rc?(i=Jf(),je=4):je=i===Dc?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Pt=i,ve===null&&(Ke=1,or(t,Jt(i,t.current)))}function Mm(){var t=Ut.current;return t===null?!0:(be&4194048)===be?Xt===null:(be&62914560)===be||(be&536870912)!==0?t===Xt:!1}function Im(){var t=D.H;return D.H=Da,t===null?Da:t}function Um(){var t=D.A;return D.A=Vx,t}function vr(){Ke=4,Zn||(be&4194048)!==be&&Ut.current!==null||(Ai=!0),(es&134217727)===0&&(Os&134217727)===0||qe===null||ss(qe,be,Ot,!1)}function iu(t,i,r){var u=Ae;Ae|=2;var g=Im(),v=Um();(qe!==t||be!==i)&&(gr=null,Ri(t,i)),i=!1;var S=Ke;e:do try{if(je!==0&&ve!==null){var T=ve,j=Pt;switch(je){case 8:su(),S=6;break e;case 3:case 2:case 9:case 6:Ut.current===null&&(i=!0);var O=je;if(je=0,Pt=null,Mi(t,T,j,O),r&&Ai){S=0;break e}break;default:O=je,je=0,Pt=null,Mi(t,T,j,O)}}zx(),S=Ke;break}catch(z){Rm(t,z)}while(!0);return i&&t.shellSuspendCounter++,Nn=As=null,Ae=u,D.H=g,D.A=v,ve===null&&(qe=null,be=0,Lo()),S}function zx(){for(;ve!==null;)Dm(ve)}function Fx(t,i){var r=Ae;Ae|=2;var u=Im(),g=Um();qe!==t||be!==i?(gr=null,pr=xt()+500,Ri(t,i)):Ai=ua(t,i);e:do try{if(je!==0&&ve!==null){i=ve;var v=Pt;t:switch(je){case 1:je=0,Pt=null,Mi(t,i,v,1);break;case 2:case 9:if(Ff(v)){je=0,Pt=null,Pm(i);break}i=function(){je!==2&&je!==9||qe!==t||(je=7),yn(t)},v.then(i,i);break e;case 3:je=7;break e;case 4:je=5;break e;case 7:Ff(v)?(je=0,Pt=null,Pm(i)):(je=0,Pt=null,Mi(t,i,v,7));break;case 5:var S=null;switch(ve.tag){case 26:S=ve.memoizedState;case 5:case 27:var T=ve;if(S?wp(S):T.stateNode.complete){je=0,Pt=null;var j=T.sibling;if(j!==null)ve=j;else{var O=T.return;O!==null?(ve=O,xr(O)):ve=null}break t}}je=0,Pt=null,Mi(t,i,v,5);break;case 6:je=0,Pt=null,Mi(t,i,v,6);break;case 8:su(),Ke=6;break e;default:throw Error(a(462))}}$x();break}catch(z){Rm(t,z)}while(!0);return Nn=As=null,D.H=u,D.A=g,Ae=r,ve!==null?0:(qe=null,be=0,Lo(),Ke)}function $x(){for(;ve!==null&&!bo();)Dm(ve)}function Dm(t){var i=am(t.alternate,t,Un);t.memoizedProps=t.pendingProps,i===null?xr(t):ve=i}function Pm(t){var i=t,r=i.alternate;switch(i.tag){case 15:case 0:i=Zh(r,i,i.pendingProps,i.type,void 0,be);break;case 11:i=Zh(r,i,i.pendingProps,i.type.render,i.ref,be);break;case 5:xc(i);default:rm(r,i),i=ve=Uf(i,Un),i=am(r,i,Un)}t.memoizedProps=t.pendingProps,i===null?xr(t):ve=i}function Mi(t,i,r,u){Nn=As=null,xc(i),wi=null,Ea=0;var g=i.return;try{if(Ux(t,g,i,r,be)){Ke=1,or(t,Jt(r,t.current)),ve=null;return}}catch(v){if(g!==null)throw ve=g,v;Ke=1,or(t,Jt(r,t.current)),ve=null;return}i.flags&32768?(Se||u===1?t=!0:Ai||(be&536870912)!==0?t=!1:(Zn=t=!0,(u===2||u===9||u===3||u===6)&&(u=Ut.current,u!==null&&u.tag===13&&(u.flags|=16384))),Om(i,t)):xr(i)}function xr(t){var i=t;do{if((i.flags&32768)!==0){Om(i,Zn);return}t=i.return;var r=Ox(i.alternate,i,Un);if(r!==null){ve=r;return}if(i=i.sibling,i!==null){ve=i;return}ve=i=t}while(i!==null);Ke===0&&(Ke=5)}function Om(t,i){do{var r=Lx(t.alternate,t);if(r!==null){r.flags&=32767,ve=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!i&&(t=t.sibling,t!==null)){ve=t;return}ve=t=r}while(t!==null);Ke=6,ve=null}function Lm(t,i,r,u,g,v,S,T,j){t.cancelPendingCommit=null;do br();while(rt!==0);if((Ae&6)!==0)throw Error(a(327));if(i!==null){if(i===t.current)throw Error(a(177));if(v=i.lanes|i.childLanes,v|=$l,Cv(t,r,v,S,T,j),t===qe&&(ve=qe=null,be=0),ji=i,ns=t,Dn=r,eu=v,tu=g,Em=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Qx(Zs,function(){return Gm(),null})):(t.callbackNode=null,t.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=D.T,D.T=null,g=Q.p,Q.p=2,S=Ae,Ae|=4;try{qx(t,i,r)}finally{Ae=S,Q.p=g,D.T=u}}rt=1,qm(),Bm(),Vm()}}function qm(){if(rt===1){rt=0;var t=ns,i=ji,r=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||r){r=D.T,D.T=null;var u=Q.p;Q.p=2;var g=Ae;Ae|=4;try{xm(i,t);var v=gu,S=Cf(t.containerInfo),T=v.focusedElem,j=v.selectionRange;if(S!==T&&T&&T.ownerDocument&&Nf(T.ownerDocument.documentElement,T)){if(j!==null&&Vl(T)){var O=j.start,z=j.end;if(z===void 0&&(z=O),"selectionStart"in T)T.selectionStart=O,T.selectionEnd=Math.min(z,T.value.length);else{var $=T.ownerDocument||document,L=$&&$.defaultView||window;if(L.getSelection){var q=L.getSelection(),ne=T.textContent.length,ue=Math.min(j.start,ne),Pe=j.end===void 0?ue:Math.min(j.end,ne);!q.extend&&ue>Pe&&(S=Pe,Pe=ue,ue=S);var I=Sf(T,ue),M=Sf(T,Pe);if(I&&M&&(q.rangeCount!==1||q.anchorNode!==I.node||q.anchorOffset!==I.offset||q.focusNode!==M.node||q.focusOffset!==M.offset)){var P=$.createRange();P.setStart(I.node,I.offset),q.removeAllRanges(),ue>Pe?(q.addRange(P),q.extend(M.node,M.offset)):(P.setEnd(M.node,M.offset),q.addRange(P))}}}}for($=[],q=T;q=q.parentNode;)q.nodeType===1&&$.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<$.length;T++){var F=$[T];F.element.scrollLeft=F.left,F.element.scrollTop=F.top}}Mr=!!pu,gu=pu=null}finally{Ae=g,Q.p=u,D.T=r}}t.current=i,rt=2}}function Bm(){if(rt===2){rt=0;var t=ns,i=ji,r=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||r){r=D.T,D.T=null;var u=Q.p;Q.p=2;var g=Ae;Ae|=4;try{mm(t,i.alternate,i)}finally{Ae=g,Q.p=u,D.T=r}}rt=3}}function Vm(){if(rt===4||rt===3){rt=0,vl();var t=ns,i=ji,r=Dn,u=Em;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?rt=5:(rt=0,ji=ns=null,Hm(t,t.pendingLanes));var g=t.pendingLanes;if(g===0&&(ts=null),_l(r),i=i.stateNode,fe&&typeof fe.onCommitFiberRoot=="function")try{fe.onCommitFiberRoot(me,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=D.T,g=Q.p,Q.p=2,D.T=null;try{for(var v=t.onRecoverableError,S=0;S<u.length;S++){var T=u[S];v(T.value,{componentStack:T.stack})}}finally{D.T=i,Q.p=g}}(Dn&3)!==0&&br(),yn(t),g=t.pendingLanes,(r&261930)!==0&&(g&42)!==0?t===nu?za++:(za=0,nu=t):za=0,Fa(0)}}function Hm(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Ca(i)))}function br(){return qm(),Bm(),Vm(),Gm()}function Gm(){if(rt!==5)return!1;var t=ns,i=eu;eu=0;var r=_l(Dn),u=D.T,g=Q.p;try{Q.p=32>r?32:r,D.T=null,r=tu,tu=null;var v=ns,S=Dn;if(rt=0,ji=ns=null,Dn=0,(Ae&6)!==0)throw Error(a(331));var T=Ae;if(Ae|=4,Nm(v.current),wm(v,v.current,S,r),Ae=T,Fa(0,!1),fe&&typeof fe.onPostCommitFiberRoot=="function")try{fe.onPostCommitFiberRoot(me,v)}catch{}return!0}finally{Q.p=g,D.T=u,Hm(t,i)}}function zm(t,i,r){i=Jt(r,i),i=Uc(t.stateNode,i,2),t=Kn(t,i,2),t!==null&&(da(t,2),yn(t))}function Re(t,i,r){if(t.tag===3)zm(t,t,r);else for(;i!==null;){if(i.tag===3){zm(i,t,r);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ts===null||!ts.has(u))){t=Jt(r,t),r=Fh(2),u=Kn(i,r,2),u!==null&&($h(r,u,i,t),da(u,2),yn(u));break}}i=i.return}}function au(t,i,r){var u=t.pingCache;if(u===null){u=t.pingCache=new Hx;var g=new Set;u.set(i,g)}else g=u.get(i),g===void 0&&(g=new Set,u.set(i,g));g.has(r)||(Xc=!0,g.add(r),t=Jx.bind(null,t,i,r),i.then(t,t))}function Jx(t,i,r){var u=t.pingCache;u!==null&&u.delete(i),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,qe===t&&(be&r)===r&&(Ke===4||Ke===3&&(be&62914560)===be&&300>xt()-mr?(Ae&2)===0&&Ri(t,0):Wc|=r,ki===be&&(ki=0)),yn(t)}function Fm(t,i){i===0&&(i=Ld()),t=Cs(t,i),t!==null&&(da(t,i),yn(t))}function Yx(t){var i=t.memoizedState,r=0;i!==null&&(r=i.retryLane),Fm(t,r)}function Kx(t,i){var r=0;switch(t.tag){case 31:case 13:var u=t.stateNode,g=t.memoizedState;g!==null&&(r=g.retryLane);break;case 19:u=t.stateNode;break;case 22:u=t.stateNode._retryCache;break;default:throw Error(a(314))}u!==null&&u.delete(i),Fm(t,r)}function Qx(t,i){return Ws(t,i)}var wr=null,Ii=null,ou=!1,_r=!1,ru=!1,is=0;function yn(t){t!==Ii&&t.next===null&&(Ii===null?wr=Ii=t:Ii=Ii.next=t),_r=!0,ou||(ou=!0,Wx())}function Fa(t,i){if(!ru&&_r){ru=!0;do for(var r=!1,u=wr;u!==null;){if(t!==0){var g=u.pendingLanes;if(g===0)var v=0;else{var S=u.suspendedLanes,T=u.pingedLanes;v=(1<<31-Le(42|t)+1)-1,v&=g&~(S&~T),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(r=!0,Km(u,v))}else v=be,v=To(u,u===qe?v:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(v&3)===0||ua(u,v)||(r=!0,Km(u,v));u=u.next}while(r);ru=!1}}function Xx(){$m()}function $m(){_r=ou=!1;var t=0;is!==0&&lb()&&(t=is);for(var i=xt(),r=null,u=wr;u!==null;){var g=u.next,v=Jm(u,i);v===0?(u.next=null,r===null?wr=g:r.next=g,g===null&&(Ii=r)):(r=u,(t!==0||(v&3)!==0)&&(_r=!0)),u=g}rt!==0&&rt!==5||Fa(t),is!==0&&(is=0)}function Jm(t,i){for(var r=t.suspendedLanes,u=t.pingedLanes,g=t.expirationTimes,v=t.pendingLanes&-62914561;0<v;){var S=31-Le(v),T=1<<S,j=g[S];j===-1?((T&r)===0||(T&u)!==0)&&(g[S]=Nv(T,i)):j<=i&&(t.expiredLanes|=T),v&=~T}if(i=qe,r=be,r=To(t,t===i?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u=t.callbackNode,r===0||t===i&&(je===2||je===9)||t.cancelPendingCommit!==null)return u!==null&&u!==null&&ca(u),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||ua(t,r)){if(i=r&-r,i===t.callbackPriority)return i;switch(u!==null&&ca(u),_l(r)){case 2:case 8:r=_o;break;case 32:r=Zs;break;case 268435456:r=re;break;default:r=Zs}return u=Ym.bind(null,t),r=Ws(r,u),t.callbackPriority=i,t.callbackNode=r,i}return u!==null&&u!==null&&ca(u),t.callbackPriority=2,t.callbackNode=null,2}function Ym(t,i){if(rt!==0&&rt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(br()&&t.callbackNode!==r)return null;var u=be;return u=To(t,t===qe?u:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u===0?null:(km(t,u,i),Jm(t,xt()),t.callbackNode!=null&&t.callbackNode===r?Ym.bind(null,t):null)}function Km(t,i){if(br())return null;km(t,i,!0)}function Wx(){ub(function(){(Ae&6)!==0?Ws(wo,Xx):$m()})}function lu(){if(is===0){var t=vi;t===0&&(t=So,So<<=1,(So&261888)===0&&(So=256)),is=t}return is}function Qm(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:jo(""+t)}function Xm(t,i){var r=i.ownerDocument.createElement("input");return r.name=i.name,r.value=i.value,t.id&&r.setAttribute("form",t.id),i.parentNode.insertBefore(r,i),t=new FormData(t),r.parentNode.removeChild(r),t}function Zx(t,i,r,u,g){if(i==="submit"&&r&&r.stateNode===g){var v=Qm((g[Nt]||null).action),S=u.submitter;S&&(i=(i=S[Nt]||null)?Qm(i.formAction):S.getAttribute("formAction"),i!==null&&(v=i,S=null));var T=new Uo("action","action",null,u,g);t.push({event:T,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(is!==0){var j=S?Xm(g,S):new FormData(g);Ac(r,{pending:!0,data:j,method:g.method,action:v},null,j)}}else typeof v=="function"&&(T.preventDefault(),j=S?Xm(g,S):new FormData(g),Ac(r,{pending:!0,data:j,method:g.method,action:v},v,j))},currentTarget:g}]})}}for(var cu=0;cu<Fl.length;cu++){var uu=Fl[cu],eb=uu.toLowerCase(),tb=uu[0].toUpperCase()+uu.slice(1);rn(eb,"on"+tb)}rn(Af,"onAnimationEnd"),rn(kf,"onAnimationIteration"),rn(jf,"onAnimationStart"),rn("dblclick","onDoubleClick"),rn("focusin","onFocus"),rn("focusout","onBlur"),rn(yx,"onTransitionRun"),rn(vx,"onTransitionStart"),rn(xx,"onTransitionCancel"),rn(Rf,"onTransitionEnd"),ii("onMouseEnter",["mouseout","mouseover"]),ii("onMouseLeave",["mouseout","mouseover"]),ii("onPointerEnter",["pointerout","pointerover"]),ii("onPointerLeave",["pointerout","pointerover"]),ws("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ws("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ws("onBeforeInput",["compositionend","keypress","textInput","paste"]),ws("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ws("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ws("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $a="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($a));function Wm(t,i){i=(i&4)!==0;for(var r=0;r<t.length;r++){var u=t[r],g=u.event;u=u.listeners;e:{var v=void 0;if(i)for(var S=u.length-1;0<=S;S--){var T=u[S],j=T.instance,O=T.currentTarget;if(T=T.listener,j!==v&&g.isPropagationStopped())break e;v=T,g.currentTarget=O;try{v(g)}catch(z){Oo(z)}g.currentTarget=null,v=j}else for(S=0;S<u.length;S++){if(T=u[S],j=T.instance,O=T.currentTarget,T=T.listener,j!==v&&g.isPropagationStopped())break e;v=T,g.currentTarget=O;try{v(g)}catch(z){Oo(z)}g.currentTarget=null,v=j}}}}function xe(t,i){var r=i[Sl];r===void 0&&(r=i[Sl]=new Set);var u=t+"__bubble";r.has(u)||(Zm(i,t,2,!1),r.add(u))}function du(t,i,r){var u=0;i&&(u|=4),Zm(r,t,u,i)}var Sr="_reactListening"+Math.random().toString(36).slice(2);function fu(t){if(!t[Sr]){t[Sr]=!0,Fd.forEach(function(r){r!=="selectionchange"&&(nb.has(r)||du(r,!1,t),du(r,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Sr]||(i[Sr]=!0,du("selectionchange",!1,i))}}function Zm(t,i,r,u){switch(Ap(i)){case 2:var g=jb;break;case 8:g=Rb;break;default:g=Eu}r=g.bind(null,i,r,t),g=void 0,!Ml||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(g=!0),u?g!==void 0?t.addEventListener(i,r,{capture:!0,passive:g}):t.addEventListener(i,r,!0):g!==void 0?t.addEventListener(i,r,{passive:g}):t.addEventListener(i,r,!1)}function hu(t,i,r,u,g){var v=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var T=u.stateNode.containerInfo;if(T===g)break;if(S===4)for(S=u.return;S!==null;){var j=S.tag;if((j===3||j===4)&&S.stateNode.containerInfo===g)return;S=S.return}for(;T!==null;){if(S=ti(T),S===null)return;if(j=S.tag,j===5||j===6||j===26||j===27){u=v=S;continue e}T=T.parentNode}}u=u.return}sf(function(){var O=v,z=jl(r),$=[];e:{var L=Mf.get(t);if(L!==void 0){var q=Uo,ne=t;switch(t){case"keypress":if(Mo(r)===0)break e;case"keydown":case"keyup":q=Kv;break;case"focusin":ne="focus",q=Pl;break;case"focusout":ne="blur",q=Pl;break;case"beforeblur":case"afterblur":q=Pl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=rf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=Ov;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=Wv;break;case Af:case kf:case jf:q=Bv;break;case Rf:q=ex;break;case"scroll":case"scrollend":q=Dv;break;case"wheel":q=nx;break;case"copy":case"cut":case"paste":q=Hv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=cf;break;case"toggle":case"beforetoggle":q=ix}var ue=(i&4)!==0,Pe=!ue&&(t==="scroll"||t==="scrollend"),I=ue?L!==null?L+"Capture":null:L;ue=[];for(var M=O,P;M!==null;){var F=M;if(P=F.stateNode,F=F.tag,F!==5&&F!==26&&F!==27||P===null||I===null||(F=ma(M,I),F!=null&&ue.push(Ja(M,F,P))),Pe)break;M=M.return}0<ue.length&&(L=new q(L,ne,null,r,z),$.push({event:L,listeners:ue}))}}if((i&7)===0){e:{if(L=t==="mouseover"||t==="pointerover",q=t==="mouseout"||t==="pointerout",L&&r!==kl&&(ne=r.relatedTarget||r.fromElement)&&(ti(ne)||ne[ei]))break e;if((q||L)&&(L=z.window===z?z:(L=z.ownerDocument)?L.defaultView||L.parentWindow:window,q?(ne=r.relatedTarget||r.toElement,q=O,ne=ne?ti(ne):null,ne!==null&&(Pe=l(ne),ue=ne.tag,ne!==Pe||ue!==5&&ue!==27&&ue!==6)&&(ne=null)):(q=null,ne=O),q!==ne)){if(ue=rf,F="onMouseLeave",I="onMouseEnter",M="mouse",(t==="pointerout"||t==="pointerover")&&(ue=cf,F="onPointerLeave",I="onPointerEnter",M="pointer"),Pe=q==null?L:ha(q),P=ne==null?L:ha(ne),L=new ue(F,M+"leave",q,r,z),L.target=Pe,L.relatedTarget=P,F=null,ti(z)===O&&(ue=new ue(I,M+"enter",ne,r,z),ue.target=P,ue.relatedTarget=Pe,F=ue),Pe=F,q&&ne)t:{for(ue=sb,I=q,M=ne,P=0,F=I;F;F=ue(F))P++;F=0;for(var le=M;le;le=ue(le))F++;for(;0<P-F;)I=ue(I),P--;for(;0<F-P;)M=ue(M),F--;for(;P--;){if(I===M||M!==null&&I===M.alternate){ue=I;break t}I=ue(I),M=ue(M)}ue=null}else ue=null;q!==null&&ep($,L,q,ue,!1),ne!==null&&Pe!==null&&ep($,Pe,ne,ue,!0)}}e:{if(L=O?ha(O):window,q=L.nodeName&&L.nodeName.toLowerCase(),q==="select"||q==="input"&&L.type==="file")var Ce=yf;else if(pf(L))if(vf)Ce=mx;else{Ce=fx;var ie=dx}else q=L.nodeName,!q||q.toLowerCase()!=="input"||L.type!=="checkbox"&&L.type!=="radio"?O&&Al(O.elementType)&&(Ce=yf):Ce=hx;if(Ce&&(Ce=Ce(t,O))){gf($,Ce,r,z);break e}ie&&ie(t,L,O),t==="focusout"&&O&&L.type==="number"&&O.memoizedProps.value!=null&&El(L,"number",L.value)}switch(ie=O?ha(O):window,t){case"focusin":(pf(ie)||ie.contentEditable==="true")&&(ui=ie,Hl=O,_a=null);break;case"focusout":_a=Hl=ui=null;break;case"mousedown":Gl=!0;break;case"contextmenu":case"mouseup":case"dragend":Gl=!1,Tf($,r,z);break;case"selectionchange":if(gx)break;case"keydown":case"keyup":Tf($,r,z)}var ye;if(Ll)e:{switch(t){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else ci?hf(t,r)&&(we="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(we="onCompositionStart");we&&(uf&&r.locale!=="ko"&&(ci||we!=="onCompositionStart"?we==="onCompositionEnd"&&ci&&(ye=af()):(Hn=z,Il="value"in Hn?Hn.value:Hn.textContent,ci=!0)),ie=Nr(O,we),0<ie.length&&(we=new lf(we,t,null,r,z),$.push({event:we,listeners:ie}),ye?we.data=ye:(ye=mf(r),ye!==null&&(we.data=ye)))),(ye=ox?rx(t,r):lx(t,r))&&(we=Nr(O,"onBeforeInput"),0<we.length&&(ie=new lf("onBeforeInput","beforeinput",null,r,z),$.push({event:ie,listeners:we}),ie.data=ye)),Zx($,t,O,r,z)}Wm($,i)})}function Ja(t,i,r){return{instance:t,listener:i,currentTarget:r}}function Nr(t,i){for(var r=i+"Capture",u=[];t!==null;){var g=t,v=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||v===null||(g=ma(t,r),g!=null&&u.unshift(Ja(t,g,v)),g=ma(t,i),g!=null&&u.push(Ja(t,g,v))),t.tag===3)return u;t=t.return}return[]}function sb(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function ep(t,i,r,u,g){for(var v=i._reactName,S=[];r!==null&&r!==u;){var T=r,j=T.alternate,O=T.stateNode;if(T=T.tag,j!==null&&j===u)break;T!==5&&T!==26&&T!==27||O===null||(j=O,g?(O=ma(r,v),O!=null&&S.unshift(Ja(r,O,j))):g||(O=ma(r,v),O!=null&&S.push(Ja(r,O,j)))),r=r.return}S.length!==0&&t.push({event:i,listeners:S})}var ib=/\r\n?/g,ab=/\u0000|\uFFFD/g;function tp(t){return(typeof t=="string"?t:""+t).replace(ib,`
`).replace(ab,"")}function np(t,i){return i=tp(i),tp(t)===i}function De(t,i,r,u,g,v){switch(r){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||oi(t,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&oi(t,""+u);break;case"className":Ao(t,"class",u);break;case"tabIndex":Ao(t,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Ao(t,r,u);break;case"style":tf(t,u,v);break;case"data":if(i!=="object"){Ao(t,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||r!=="href")){t.removeAttribute(r);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(r);break}u=jo(""+u),t.setAttribute(r,u);break;case"action":case"formAction":if(typeof u=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(r==="formAction"?(i!=="input"&&De(t,i,"name",g.name,g,null),De(t,i,"formEncType",g.formEncType,g,null),De(t,i,"formMethod",g.formMethod,g,null),De(t,i,"formTarget",g.formTarget,g,null)):(De(t,i,"encType",g.encType,g,null),De(t,i,"method",g.method,g,null),De(t,i,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(r);break}u=jo(""+u),t.setAttribute(r,u);break;case"onClick":u!=null&&(t.onclick=bn);break;case"onScroll":u!=null&&xe("scroll",t);break;case"onScrollEnd":u!=null&&xe("scrollend",t);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(r=u.__html,r!=null){if(g.children!=null)throw Error(a(60));t.innerHTML=r}}break;case"multiple":t.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":t.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){t.removeAttribute("xlink:href");break}r=jo(""+u),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(r,""+u):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":u===!0?t.setAttribute(r,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(r,u):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?t.setAttribute(r,u):t.removeAttribute(r);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?t.removeAttribute(r):t.setAttribute(r,u);break;case"popover":xe("beforetoggle",t),xe("toggle",t),Eo(t,"popover",u);break;case"xlinkActuate":xn(t,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":xn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":xn(t,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":xn(t,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":xn(t,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":xn(t,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":xn(t,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":xn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":xn(t,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Eo(t,"is",u);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Iv.get(r)||r,Eo(t,r,u))}}function mu(t,i,r,u,g,v){switch(r){case"style":tf(t,u,v);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(r=u.__html,r!=null){if(g.children!=null)throw Error(a(60));t.innerHTML=r}}break;case"children":typeof u=="string"?oi(t,u):(typeof u=="number"||typeof u=="bigint")&&oi(t,""+u);break;case"onScroll":u!=null&&xe("scroll",t);break;case"onScrollEnd":u!=null&&xe("scrollend",t);break;case"onClick":u!=null&&(t.onclick=bn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$d.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(g=r.endsWith("Capture"),i=r.slice(2,g?r.length-7:void 0),v=t[Nt]||null,v=v!=null?v[r]:null,typeof v=="function"&&t.removeEventListener(i,v,g),typeof u=="function")){typeof v!="function"&&v!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(i,u,g);break e}r in t?t[r]=u:u===!0?t.setAttribute(r,""):Eo(t,r,u)}}}function gt(t,i,r){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xe("error",t),xe("load",t);var u=!1,g=!1,v;for(v in r)if(r.hasOwnProperty(v)){var S=r[v];if(S!=null)switch(v){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:De(t,i,v,S,r,null)}}g&&De(t,i,"srcSet",r.srcSet,r,null),u&&De(t,i,"src",r.src,r,null);return;case"input":xe("invalid",t);var T=v=S=g=null,j=null,O=null;for(u in r)if(r.hasOwnProperty(u)){var z=r[u];if(z!=null)switch(u){case"name":g=z;break;case"type":S=z;break;case"checked":j=z;break;case"defaultChecked":O=z;break;case"value":v=z;break;case"defaultValue":T=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(a(137,i));break;default:De(t,i,u,z,r,null)}}Xd(t,v,T,j,O,S,g,!1);return;case"select":xe("invalid",t),u=S=v=null;for(g in r)if(r.hasOwnProperty(g)&&(T=r[g],T!=null))switch(g){case"value":v=T;break;case"defaultValue":S=T;break;case"multiple":u=T;default:De(t,i,g,T,r,null)}i=v,r=S,t.multiple=!!u,i!=null?ai(t,!!u,i,!1):r!=null&&ai(t,!!u,r,!0);return;case"textarea":xe("invalid",t),v=g=u=null;for(S in r)if(r.hasOwnProperty(S)&&(T=r[S],T!=null))switch(S){case"value":u=T;break;case"defaultValue":g=T;break;case"children":v=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(a(91));break;default:De(t,i,S,T,r,null)}Zd(t,u,g,v);return;case"option":for(j in r)if(r.hasOwnProperty(j)&&(u=r[j],u!=null))switch(j){case"selected":t.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:De(t,i,j,u,r,null)}return;case"dialog":xe("beforetoggle",t),xe("toggle",t),xe("cancel",t),xe("close",t);break;case"iframe":case"object":xe("load",t);break;case"video":case"audio":for(u=0;u<$a.length;u++)xe($a[u],t);break;case"image":xe("error",t),xe("load",t);break;case"details":xe("toggle",t);break;case"embed":case"source":case"link":xe("error",t),xe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(O in r)if(r.hasOwnProperty(O)&&(u=r[O],u!=null))switch(O){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:De(t,i,O,u,r,null)}return;default:if(Al(i)){for(z in r)r.hasOwnProperty(z)&&(u=r[z],u!==void 0&&mu(t,i,z,u,r,void 0));return}}for(T in r)r.hasOwnProperty(T)&&(u=r[T],u!=null&&De(t,i,T,u,r,null))}function ob(t,i,r,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,v=null,S=null,T=null,j=null,O=null,z=null;for(q in r){var $=r[q];if(r.hasOwnProperty(q)&&$!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":j=$;default:u.hasOwnProperty(q)||De(t,i,q,null,u,$)}}for(var L in u){var q=u[L];if($=r[L],u.hasOwnProperty(L)&&(q!=null||$!=null))switch(L){case"type":v=q;break;case"name":g=q;break;case"checked":O=q;break;case"defaultChecked":z=q;break;case"value":S=q;break;case"defaultValue":T=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(a(137,i));break;default:q!==$&&De(t,i,L,q,u,$)}}Tl(t,S,T,j,O,z,v,g);return;case"select":q=S=T=L=null;for(v in r)if(j=r[v],r.hasOwnProperty(v)&&j!=null)switch(v){case"value":break;case"multiple":q=j;default:u.hasOwnProperty(v)||De(t,i,v,null,u,j)}for(g in u)if(v=u[g],j=r[g],u.hasOwnProperty(g)&&(v!=null||j!=null))switch(g){case"value":L=v;break;case"defaultValue":T=v;break;case"multiple":S=v;default:v!==j&&De(t,i,g,v,u,j)}i=T,r=S,u=q,L!=null?ai(t,!!r,L,!1):!!u!=!!r&&(i!=null?ai(t,!!r,i,!0):ai(t,!!r,r?[]:"",!1));return;case"textarea":q=L=null;for(T in r)if(g=r[T],r.hasOwnProperty(T)&&g!=null&&!u.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:De(t,i,T,null,u,g)}for(S in u)if(g=u[S],v=r[S],u.hasOwnProperty(S)&&(g!=null||v!=null))switch(S){case"value":L=g;break;case"defaultValue":q=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(a(91));break;default:g!==v&&De(t,i,S,g,u,v)}Wd(t,L,q);return;case"option":for(var ne in r)if(L=r[ne],r.hasOwnProperty(ne)&&L!=null&&!u.hasOwnProperty(ne))switch(ne){case"selected":t.selected=!1;break;default:De(t,i,ne,null,u,L)}for(j in u)if(L=u[j],q=r[j],u.hasOwnProperty(j)&&L!==q&&(L!=null||q!=null))switch(j){case"selected":t.selected=L&&typeof L!="function"&&typeof L!="symbol";break;default:De(t,i,j,L,u,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ue in r)L=r[ue],r.hasOwnProperty(ue)&&L!=null&&!u.hasOwnProperty(ue)&&De(t,i,ue,null,u,L);for(O in u)if(L=u[O],q=r[O],u.hasOwnProperty(O)&&L!==q&&(L!=null||q!=null))switch(O){case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(a(137,i));break;default:De(t,i,O,L,u,q)}return;default:if(Al(i)){for(var Pe in r)L=r[Pe],r.hasOwnProperty(Pe)&&L!==void 0&&!u.hasOwnProperty(Pe)&&mu(t,i,Pe,void 0,u,L);for(z in u)L=u[z],q=r[z],!u.hasOwnProperty(z)||L===q||L===void 0&&q===void 0||mu(t,i,z,L,u,q);return}}for(var I in r)L=r[I],r.hasOwnProperty(I)&&L!=null&&!u.hasOwnProperty(I)&&De(t,i,I,null,u,L);for($ in u)L=u[$],q=r[$],!u.hasOwnProperty($)||L===q||L==null&&q==null||De(t,i,$,L,u,q)}function sp(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function rb(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,r=performance.getEntriesByType("resource"),u=0;u<r.length;u++){var g=r[u],v=g.transferSize,S=g.initiatorType,T=g.duration;if(v&&T&&sp(S)){for(S=0,T=g.responseEnd,u+=1;u<r.length;u++){var j=r[u],O=j.startTime;if(O>T)break;var z=j.transferSize,$=j.initiatorType;z&&sp($)&&(j=j.responseEnd,S+=z*(j<T?1:(T-O)/(j-O)))}if(--u,i+=8*(v+S)/(g.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var pu=null,gu=null;function Cr(t){return t.nodeType===9?t:t.ownerDocument}function ip(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ap(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function yu(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var vu=null;function lb(){var t=window.event;return t&&t.type==="popstate"?t===vu?!1:(vu=t,!0):(vu=null,!1)}var op=typeof setTimeout=="function"?setTimeout:void 0,cb=typeof clearTimeout=="function"?clearTimeout:void 0,rp=typeof Promise=="function"?Promise:void 0,ub=typeof queueMicrotask=="function"?queueMicrotask:typeof rp<"u"?function(t){return rp.resolve(null).then(t).catch(db)}:op;function db(t){setTimeout(function(){throw t})}function as(t){return t==="head"}function lp(t,i){var r=i,u=0;do{var g=r.nextSibling;if(t.removeChild(r),g&&g.nodeType===8)if(r=g.data,r==="/$"||r==="/&"){if(u===0){t.removeChild(g),Oi(i);return}u--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")u++;else if(r==="html")Ya(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,Ya(r);for(var v=r.firstChild;v;){var S=v.nextSibling,T=v.nodeName;v[fa]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&v.rel.toLowerCase()==="stylesheet"||r.removeChild(v),v=S}}else r==="body"&&Ya(t.ownerDocument.body);r=g}while(r);Oi(i)}function cp(t,i){var r=t;t=0;do{var u=r.nextSibling;if(r.nodeType===1?i?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(i?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),u&&u.nodeType===8)if(r=u.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=u}while(r)}function xu(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var r=i;switch(i=i.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":xu(r),Nl(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function fb(t,i,r,u){for(;t.nodeType===1;){var g=r;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(u){if(!t[fa])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(v=t.getAttribute("rel"),v==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(v!==g.rel||t.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||t.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||t.getAttribute("title")!==(g.title==null?null:g.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(v=t.getAttribute("src"),(v!==(g.src==null?null:g.src)||t.getAttribute("type")!==(g.type==null?null:g.type)||t.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&v&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var v=g.name==null?null:""+g.name;if(g.type==="hidden"&&t.getAttribute("name")===v)return t}else return t;if(t=Wt(t.nextSibling),t===null)break}return null}function hb(t,i,r){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Wt(t.nextSibling),t===null))return null;return t}function up(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=Wt(t.nextSibling),t===null))return null;return t}function bu(t){return t.data==="$?"||t.data==="$~"}function wu(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function mb(t,i){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||r.readyState!=="loading")i();else{var u=function(){i(),r.removeEventListener("DOMContentLoaded",u)};r.addEventListener("DOMContentLoaded",u),t._reactRetry=u}}function Wt(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var _u=null;function dp(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(i===0)return Wt(t.nextSibling);i--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||i++}t=t.nextSibling}return null}function fp(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(i===0)return t;i--}else r!=="/$"&&r!=="/&"||i++}t=t.previousSibling}return null}function hp(t,i,r){switch(i=Cr(r),t){case"html":if(t=i.documentElement,!t)throw Error(a(452));return t;case"head":if(t=i.head,!t)throw Error(a(453));return t;case"body":if(t=i.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function Ya(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Nl(t)}var Zt=new Map,mp=new Set;function Tr(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Pn=Q.d;Q.d={f:pb,r:gb,D:yb,C:vb,L:xb,m:bb,X:_b,S:wb,M:Sb};function pb(){var t=Pn.f(),i=yr();return t||i}function gb(t){var i=ni(t);i!==null&&i.tag===5&&i.type==="form"?Rh(i):Pn.r(t)}var Ui=typeof document>"u"?null:document;function pp(t,i,r){var u=Ui;if(u&&typeof i=="string"&&i){var g=Ft(i);g='link[rel="'+t+'"][href="'+g+'"]',typeof r=="string"&&(g+='[crossorigin="'+r+'"]'),mp.has(g)||(mp.add(g),t={rel:t,crossOrigin:r,href:i},u.querySelector(g)===null&&(i=u.createElement("link"),gt(i,"link",t),ct(i),u.head.appendChild(i)))}}function yb(t){Pn.D(t),pp("dns-prefetch",t,null)}function vb(t,i){Pn.C(t,i),pp("preconnect",t,i)}function xb(t,i,r){Pn.L(t,i,r);var u=Ui;if(u&&t&&i){var g='link[rel="preload"][as="'+Ft(i)+'"]';i==="image"&&r&&r.imageSrcSet?(g+='[imagesrcset="'+Ft(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(g+='[imagesizes="'+Ft(r.imageSizes)+'"]')):g+='[href="'+Ft(t)+'"]';var v=g;switch(i){case"style":v=Di(t);break;case"script":v=Pi(t)}Zt.has(v)||(t=b({rel:"preload",href:i==="image"&&r&&r.imageSrcSet?void 0:t,as:i},r),Zt.set(v,t),u.querySelector(g)!==null||i==="style"&&u.querySelector(Ka(v))||i==="script"&&u.querySelector(Qa(v))||(i=u.createElement("link"),gt(i,"link",t),ct(i),u.head.appendChild(i)))}}function bb(t,i){Pn.m(t,i);var r=Ui;if(r&&t){var u=i&&typeof i.as=="string"?i.as:"script",g='link[rel="modulepreload"][as="'+Ft(u)+'"][href="'+Ft(t)+'"]',v=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Pi(t)}if(!Zt.has(v)&&(t=b({rel:"modulepreload",href:t},i),Zt.set(v,t),r.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Qa(v)))return}u=r.createElement("link"),gt(u,"link",t),ct(u),r.head.appendChild(u)}}}function wb(t,i,r){Pn.S(t,i,r);var u=Ui;if(u&&t){var g=si(u).hoistableStyles,v=Di(t);i=i||"default";var S=g.get(v);if(!S){var T={loading:0,preload:null};if(S=u.querySelector(Ka(v)))T.loading=5;else{t=b({rel:"stylesheet",href:t,"data-precedence":i},r),(r=Zt.get(v))&&Su(t,r);var j=S=u.createElement("link");ct(j),gt(j,"link",t),j._p=new Promise(function(O,z){j.onload=O,j.onerror=z}),j.addEventListener("load",function(){T.loading|=1}),j.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Er(S,i,u)}S={type:"stylesheet",instance:S,count:1,state:T},g.set(v,S)}}}function _b(t,i){Pn.X(t,i);var r=Ui;if(r&&t){var u=si(r).hoistableScripts,g=Pi(t),v=u.get(g);v||(v=r.querySelector(Qa(g)),v||(t=b({src:t,async:!0},i),(i=Zt.get(g))&&Nu(t,i),v=r.createElement("script"),ct(v),gt(v,"link",t),r.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},u.set(g,v))}}function Sb(t,i){Pn.M(t,i);var r=Ui;if(r&&t){var u=si(r).hoistableScripts,g=Pi(t),v=u.get(g);v||(v=r.querySelector(Qa(g)),v||(t=b({src:t,async:!0,type:"module"},i),(i=Zt.get(g))&&Nu(t,i),v=r.createElement("script"),ct(v),gt(v,"link",t),r.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},u.set(g,v))}}function gp(t,i,r,u){var g=(g=nn.current)?Tr(g):null;if(!g)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(i=Di(r.href),r=si(g).hoistableStyles,u=r.get(i),u||(u={type:"style",instance:null,count:0,state:null},r.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=Di(r.href);var v=si(g).hoistableStyles,S=v.get(t);if(S||(g=g.ownerDocument||g,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(t,S),(v=g.querySelector(Ka(t)))&&!v._p&&(S.instance=v,S.state.loading=5),Zt.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Zt.set(t,r),v||Nb(g,t,r,S.state))),i&&u===null)throw Error(a(528,""));return S}if(i&&u!==null)throw Error(a(529,""));return null;case"script":return i=r.async,r=r.src,typeof r=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Pi(r),r=si(g).hoistableScripts,u=r.get(i),u||(u={type:"script",instance:null,count:0,state:null},r.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function Di(t){return'href="'+Ft(t)+'"'}function Ka(t){return'link[rel="stylesheet"]['+t+"]"}function yp(t){return b({},t,{"data-precedence":t.precedence,precedence:null})}function Nb(t,i,r,u){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=t.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),gt(i,"link",r),ct(i),t.head.appendChild(i))}function Pi(t){return'[src="'+Ft(t)+'"]'}function Qa(t){return"script[async]"+t}function vp(t,i,r){if(i.count++,i.instance===null)switch(i.type){case"style":var u=t.querySelector('style[data-href~="'+Ft(r.href)+'"]');if(u)return i.instance=u,ct(u),u;var g=b({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return u=(t.ownerDocument||t).createElement("style"),ct(u),gt(u,"style",g),Er(u,r.precedence,t),i.instance=u;case"stylesheet":g=Di(r.href);var v=t.querySelector(Ka(g));if(v)return i.state.loading|=4,i.instance=v,ct(v),v;u=yp(r),(g=Zt.get(g))&&Su(u,g),v=(t.ownerDocument||t).createElement("link"),ct(v);var S=v;return S._p=new Promise(function(T,j){S.onload=T,S.onerror=j}),gt(v,"link",u),i.state.loading|=4,Er(v,r.precedence,t),i.instance=v;case"script":return v=Pi(r.src),(g=t.querySelector(Qa(v)))?(i.instance=g,ct(g),g):(u=r,(g=Zt.get(v))&&(u=b({},r),Nu(u,g)),t=t.ownerDocument||t,g=t.createElement("script"),ct(g),gt(g,"link",u),t.head.appendChild(g),i.instance=g);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Er(u,r.precedence,t));return i.instance}function Er(t,i,r){for(var u=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,v=g,S=0;S<u.length;S++){var T=u[S];if(T.dataset.precedence===i)v=T;else if(v!==g)break}v?v.parentNode.insertBefore(t,v.nextSibling):(i=r.nodeType===9?r.head:r,i.insertBefore(t,i.firstChild))}function Su(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Nu(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Ar=null;function xp(t,i,r){if(Ar===null){var u=new Map,g=Ar=new Map;g.set(r,u)}else g=Ar,u=g.get(r),u||(u=new Map,g.set(r,u));if(u.has(t))return u;for(u.set(t,null),r=r.getElementsByTagName(t),g=0;g<r.length;g++){var v=r[g];if(!(v[fa]||v[ft]||t==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var S=v.getAttribute(i)||"";S=t+S;var T=u.get(S);T?T.push(v):u.set(S,[v])}}return u}function bp(t,i,r){t=t.ownerDocument||t,t.head.insertBefore(r,i==="title"?t.querySelector("head > title"):null)}function Cb(t,i,r){if(r===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function wp(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Tb(t,i,r,u){if(r.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var g=Di(u.href),v=i.querySelector(Ka(g));if(v){i=v._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=kr.bind(t),i.then(t,t)),r.state.loading|=4,r.instance=v,ct(v);return}v=i.ownerDocument||i,u=yp(u),(g=Zt.get(g))&&Su(u,g),v=v.createElement("link"),ct(v);var S=v;S._p=new Promise(function(T,j){S.onload=T,S.onerror=j}),gt(v,"link",u),r.instance=v}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,i),(i=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=kr.bind(t),i.addEventListener("load",r),i.addEventListener("error",r))}}var Cu=0;function Eb(t,i){return t.stylesheets&&t.count===0&&Rr(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var u=setTimeout(function(){if(t.stylesheets&&Rr(t,t.stylesheets),t.unsuspend){var v=t.unsuspend;t.unsuspend=null,v()}},6e4+i);0<t.imgBytes&&Cu===0&&(Cu=62500*rb());var g=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Rr(t,t.stylesheets),t.unsuspend)){var v=t.unsuspend;t.unsuspend=null,v()}},(t.imgBytes>Cu?50:800)+i);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function kr(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Rr(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var jr=null;function Rr(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,jr=new Map,i.forEach(Ab,t),jr=null,kr.call(t))}function Ab(t,i){if(!(i.state.loading&4)){var r=jr.get(t);if(r)var u=r.get(null);else{r=new Map,jr.set(t,r);for(var g=t.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<g.length;v++){var S=g[v];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(r.set(S.dataset.precedence,S),u=S)}u&&r.set(null,u)}g=i.instance,S=g.getAttribute("data-precedence"),v=r.get(S)||u,v===u&&r.set(null,g),r.set(S,g),this.count++,u=kr.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),v?v.parentNode.insertBefore(g,v.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(g,t.firstChild)),i.state.loading|=4}}var Xa={$$typeof:k,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function kb(t,i,r,u,g,v,S,T,j){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bl(0),this.hiddenUpdates=bl(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=v,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function _p(t,i,r,u,g,v,S,T,j,O,z,$){return t=new kb(t,i,r,S,j,O,z,$,T),i=1,v===!0&&(i|=24),v=It(3,null,null,i),t.current=v,v.stateNode=t,i=ic(),i.refCount++,t.pooledCache=i,i.refCount++,v.memoizedState={element:u,isDehydrated:r,cache:i},lc(v),t}function Sp(t){return t?(t=hi,t):hi}function Np(t,i,r,u,g,v){g=Sp(g),u.context===null?u.context=g:u.pendingContext=g,u=Yn(i),u.payload={element:r},v=v===void 0?null:v,v!==null&&(u.callback=v),r=Kn(t,u,i),r!==null&&(jt(r,t,i),ka(r,t,i))}function Cp(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<i?r:i}}function Tu(t,i){Cp(t,i),(t=t.alternate)&&Cp(t,i)}function Tp(t){if(t.tag===13||t.tag===31){var i=Cs(t,67108864);i!==null&&jt(i,t,67108864),Tu(t,67108864)}}function Ep(t){if(t.tag===13||t.tag===31){var i=Lt();i=wl(i);var r=Cs(t,i);r!==null&&jt(r,t,i),Tu(t,i)}}var Mr=!0;function jb(t,i,r,u){var g=D.T;D.T=null;var v=Q.p;try{Q.p=2,Eu(t,i,r,u)}finally{Q.p=v,D.T=g}}function Rb(t,i,r,u){var g=D.T;D.T=null;var v=Q.p;try{Q.p=8,Eu(t,i,r,u)}finally{Q.p=v,D.T=g}}function Eu(t,i,r,u){if(Mr){var g=Au(u);if(g===null)hu(t,i,u,Ir,r),kp(t,u);else if(Ib(g,t,i,r,u))u.stopPropagation();else if(kp(t,u),i&4&&-1<Mb.indexOf(t)){for(;g!==null;){var v=ni(g);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var S=bs(v.pendingLanes);if(S!==0){var T=v;for(T.pendingLanes|=2,T.entangledLanes|=2;S;){var j=1<<31-Le(S);T.entanglements[1]|=j,S&=~j}yn(v),(Ae&6)===0&&(pr=xt()+500,Fa(0))}}break;case 31:case 13:T=Cs(v,2),T!==null&&jt(T,v,2),yr(),Tu(v,2)}if(v=Au(u),v===null&&hu(t,i,u,Ir,r),v===g)break;g=v}g!==null&&u.stopPropagation()}else hu(t,i,u,null,r)}}function Au(t){return t=jl(t),ku(t)}var Ir=null;function ku(t){if(Ir=null,t=ti(t),t!==null){var i=l(t);if(i===null)t=null;else{var r=i.tag;if(r===13){if(t=d(i),t!==null)return t;t=null}else if(r===31){if(t=f(i),t!==null)return t;t=null}else if(r===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Ir=t,null}function Ap(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xl()){case wo:return 2;case _o:return 8;case Zs:case K:return 32;case re:return 268435456;default:return 32}default:return 32}}var ju=!1,os=null,rs=null,ls=null,Wa=new Map,Za=new Map,cs=[],Mb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function kp(t,i){switch(t){case"focusin":case"focusout":os=null;break;case"dragenter":case"dragleave":rs=null;break;case"mouseover":case"mouseout":ls=null;break;case"pointerover":case"pointerout":Wa.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Za.delete(i.pointerId)}}function eo(t,i,r,u,g,v){return t===null||t.nativeEvent!==v?(t={blockedOn:i,domEventName:r,eventSystemFlags:u,nativeEvent:v,targetContainers:[g]},i!==null&&(i=ni(i),i!==null&&Tp(i)),t):(t.eventSystemFlags|=u,i=t.targetContainers,g!==null&&i.indexOf(g)===-1&&i.push(g),t)}function Ib(t,i,r,u,g){switch(i){case"focusin":return os=eo(os,t,i,r,u,g),!0;case"dragenter":return rs=eo(rs,t,i,r,u,g),!0;case"mouseover":return ls=eo(ls,t,i,r,u,g),!0;case"pointerover":var v=g.pointerId;return Wa.set(v,eo(Wa.get(v)||null,t,i,r,u,g)),!0;case"gotpointercapture":return v=g.pointerId,Za.set(v,eo(Za.get(v)||null,t,i,r,u,g)),!0}return!1}function jp(t){var i=ti(t.target);if(i!==null){var r=l(i);if(r!==null){if(i=r.tag,i===13){if(i=d(r),i!==null){t.blockedOn=i,Gd(t.priority,function(){Ep(r)});return}}else if(i===31){if(i=f(r),i!==null){t.blockedOn=i,Gd(t.priority,function(){Ep(r)});return}}else if(i===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ur(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var r=Au(t.nativeEvent);if(r===null){r=t.nativeEvent;var u=new r.constructor(r.type,r);kl=u,r.target.dispatchEvent(u),kl=null}else return i=ni(r),i!==null&&Tp(i),t.blockedOn=r,!1;i.shift()}return!0}function Rp(t,i,r){Ur(t)&&r.delete(i)}function Ub(){ju=!1,os!==null&&Ur(os)&&(os=null),rs!==null&&Ur(rs)&&(rs=null),ls!==null&&Ur(ls)&&(ls=null),Wa.forEach(Rp),Za.forEach(Rp)}function Dr(t,i){t.blockedOn===i&&(t.blockedOn=null,ju||(ju=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Ub)))}var Pr=null;function Mp(t){Pr!==t&&(Pr=t,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Pr===t&&(Pr=null);for(var i=0;i<t.length;i+=3){var r=t[i],u=t[i+1],g=t[i+2];if(typeof u!="function"){if(ku(u||r)===null)continue;break}var v=ni(r);v!==null&&(t.splice(i,3),i-=3,Ac(v,{pending:!0,data:g,method:r.method,action:u},u,g))}}))}function Oi(t){function i(j){return Dr(j,t)}os!==null&&Dr(os,t),rs!==null&&Dr(rs,t),ls!==null&&Dr(ls,t),Wa.forEach(i),Za.forEach(i);for(var r=0;r<cs.length;r++){var u=cs[r];u.blockedOn===t&&(u.blockedOn=null)}for(;0<cs.length&&(r=cs[0],r.blockedOn===null);)jp(r),r.blockedOn===null&&cs.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(u=0;u<r.length;u+=3){var g=r[u],v=r[u+1],S=g[Nt]||null;if(typeof v=="function")S||Mp(r);else if(S){var T=null;if(v&&v.hasAttribute("formAction")){if(g=v,S=v[Nt]||null)T=S.formAction;else if(ku(g)!==null)continue}else T=S.action;typeof T=="function"?r[u+1]=T:(r.splice(u,3),u-=3),Mp(r)}}}function Ip(){function t(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(S){return g=S})},focusReset:"manual",scroll:"manual"})}function i(){g!==null&&(g(),g=null),u||setTimeout(r,20)}function r(){if(!u&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(r,100),function(){u=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),g!==null&&(g(),g=null)}}}function Ru(t){this._internalRoot=t}Or.prototype.render=Ru.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(a(409));var r=i.current,u=Lt();Np(r,u,t,i,null,null)},Or.prototype.unmount=Ru.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;Np(t.current,2,null,t,null,null),yr(),i[ei]=null}};function Or(t){this._internalRoot=t}Or.prototype.unstable_scheduleHydration=function(t){if(t){var i=Hd();t={blockedOn:null,target:t,priority:i};for(var r=0;r<cs.length&&i!==0&&i<cs[r].priority;r++);cs.splice(r,0,t),r===0&&jp(t)}};var Up=e.version;if(Up!=="19.2.0")throw Error(a(527,Up,"19.2.0"));Q.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=p(i),t=t!==null?x(t):null,t=t===null?null:t.stateNode,t};var Db={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lr.isDisabled&&Lr.supportsFiber)try{me=Lr.inject(Db),fe=Lr}catch{}}return no.createRoot=function(t,i){if(!o(t))throw Error(a(299));var r=!1,u="",g=Vh,v=Hh,S=Gh;return i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(g=i.onUncaughtError),i.onCaughtError!==void 0&&(v=i.onCaughtError),i.onRecoverableError!==void 0&&(S=i.onRecoverableError)),i=_p(t,1,!1,null,null,r,u,null,g,v,S,Ip),t[ei]=i.current,fu(t),new Ru(i)},no.hydrateRoot=function(t,i,r){if(!o(t))throw Error(a(299));var u=!1,g="",v=Vh,S=Hh,T=Gh,j=null;return r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(g=r.identifierPrefix),r.onUncaughtError!==void 0&&(v=r.onUncaughtError),r.onCaughtError!==void 0&&(S=r.onCaughtError),r.onRecoverableError!==void 0&&(T=r.onRecoverableError),r.formState!==void 0&&(j=r.formState)),i=_p(t,1,!0,i,r??null,u,g,j,v,S,T,Ip),i.context=Sp(null),r=i.current,u=Lt(),u=wl(u),g=Yn(u),g.callback=null,Kn(r,g,u),r=u,i.current.lanes=r,da(i,r),yn(i),t[ei]=i.current,fu(t),new Or(i)},no.version="19.2.0",no}var Bp;function Gb(){if(Bp)return Iu.exports;Bp=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch{}}return n(),Iu.exports=Hb(),Iu.exports}var zb=Gb();const Fb=vd(zb);var Vp={},$b="@vercel/analytics",Jb="1.5.0",Yb=()=>{window.va||(window.va=function(...e){(window.vaq=window.vaq||[]).push(e)})};function By(){return typeof window<"u"}function Vy(){try{const n="production"}catch{}return"production"}function Kb(n="auto"){if(n==="auto"){window.vam=Vy();return}window.vam=n}function Qb(){return(By()?window.vam:Vy())||"production"}function Ju(){return Qb()==="development"}function Xb(n){return n.scriptSrc?n.scriptSrc:Ju()?"https://va.vercel-scripts.com/v1/script.debug.js":n.basePath?`${n.basePath}/insights/script.js`:"/_vercel/insights/script.js"}function Wb(n={debug:!0}){var e;if(!By())return;Kb(n.mode),Yb(),n.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",n.beforeSend));const s=Xb(n);if(document.head.querySelector(`script[src*="${s}"]`))return;const a=document.createElement("script");a.src=s,a.defer=!0,a.dataset.sdkn=$b+(n.framework?`/${n.framework}`:""),a.dataset.sdkv=Jb,n.disableAutoTrack&&(a.dataset.disableAutoTrack="1"),n.endpoint?a.dataset.endpoint=n.endpoint:n.basePath&&(a.dataset.endpoint=`${n.basePath}/insights`),n.dsn&&(a.dataset.dsn=n.dsn),a.onerror=()=>{const o=Ju()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information."},Ju()&&n.debug===!1&&(a.dataset.debug="false"),document.head.appendChild(a)}function Zb({route:n,path:e}){var s;(s=window.va)==null||s.call(window,"pageview",{route:n,path:e})}function ew(){if(!(typeof process>"u"||typeof Vp>"u"))return Vp.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function tw(n){return G.useEffect(()=>{var e;n.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",n.beforeSend))},[n.beforeSend]),G.useEffect(()=>{Wb({framework:n.framework||"react",basePath:n.basePath??ew(),...n.route!==void 0&&{disableAutoTrack:!0},...n})},[]),G.useEffect(()=>{n.route&&n.path&&Zb({route:n.route,path:n.path})},[n.route,n.path]),null}const nw=n=>{const e=Math.floor((new Date().getTime()-n.getTime())/1e3);let s=e/31536e3;return s>1?Math.floor(s)+"y ago":(s=e/2592e3,s>1?Math.floor(s)+"mo ago":(s=e/86400,s>1?Math.floor(s)+"d ago":(s=e/3600,s>1?Math.floor(s)+"h ago":(s=e/60,s>1?Math.floor(s)+"m ago":Math.floor(e)+"s ago"))))},sw=({notifications:n,onMarkAsRead:e,user:s,onNavigate:a})=>{const[o,l]=G.useState(!1),d=G.useRef(null),f=s?n.some(x=>!x.read):!1;G.useEffect(()=>{const x=b=>{d.current&&!d.current.contains(b.target)&&l(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const m=()=>{s?(!o&&f&&e(),l(x=>!x)):a("auth")},p={news:"fa-newspaper",job:"fa-briefcase",hostel:"fa-hotel",roommate:"fa-users"};return c.jsxs("div",{className:"relative",ref:d,children:[c.jsxs("button",{onClick:m,className:"relative text-2xl text-white hover:text-unistay-yellow transition-colors","aria-label":"Notifications",children:[c.jsx("i",{className:"fas fa-bell"}),f&&c.jsx("span",{className:"absolute top-0 right-0 block h-2.5 w-2.5 rounded-full bg-red-500 ring-2 ring-unistay-navy","aria-hidden":"true"})]}),o&&s&&c.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-md shadow-lg text-unistay-navy z-50 overflow-hidden animate-slide-in-down",style:{animationDuration:"0.3s"},children:[c.jsx("div",{className:"p-3 font-bold border-b text-sm",children:"Notifications"}),n.length>0?c.jsx("div",{className:"max-h-96 overflow-y-auto no-scrollbar",children:n.map(x=>c.jsxs("div",{className:"flex items-start gap-3 p-3 border-b last:border-b-0 hover:bg-gray-50 transition-colors",children:[c.jsx("div",{className:"w-8 flex justify-center pt-1",children:c.jsx("i",{className:`fas ${p[x.type]} text-unistay-navy/60`})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm leading-snug",children:x.message}),c.jsx("p",{className:"text-xs text-gray-400 mt-1",children:nw(x.timestamp)})]})]},x.id))}):c.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No new notifications."})]})]})},iw=({user:n,isAdmin:e,onLogout:s,onNavigate:a})=>{const[o,l]=G.useState(!1),d=G.useRef(null);G.useEffect(()=>{const m=p=>{d.current&&!d.current.contains(p.target)&&l(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]);const f=m=>{l(!1),a(m)};return c.jsxs("div",{className:"relative",ref:d,children:[c.jsx("button",{onClick:()=>l(!o),className:"flex items-center gap-2","aria-label":"Open user menu",children:c.jsx("div",{className:"w-10 h-10 rounded-full bg-unistay-yellow flex items-center justify-center font-bold text-unistay-navy text-xl",children:n?.name?.charAt(0).toUpperCase()})}),o&&c.jsxs("div",{className:"absolute right-0 mt-3 w-48 bg-white rounded-md shadow-lg py-1 text-unistay-navy z-50 animate-slide-in-down",style:{animationDuration:"0.3s"},children:[c.jsx("div",{className:"px-4 py-2 border-b",children:c.jsx("p",{className:"text-sm font-semibold truncate",children:n.name})}),c.jsx("button",{onClick:()=>f("profile"),className:"w-full text-left block px-4 py-2 text-sm hover:bg-gray-100 font-medium",children:"My Profile"}),e&&c.jsx("button",{onClick:()=>f("admin"),className:"w-full text-left block px-4 py-2 text-sm hover:bg-gray-100",children:"Admin Dashboard"}),c.jsx("button",{onClick:s,className:"w-full text-left block px-4 py-2 text-sm hover:bg-gray-100 text-red-600",children:"Logout"})]})]})},aw=({onNavigate:n,currentView:e,user:s,isAdmin:a,onLogout:o,notifications:l,onMarkNotificationsAsRead:d,onScrollToContact:f,onScrollToSpotlight:m,onScrollToServices:p})=>{const[x,b]=G.useState(!1),w=[{text:"Hostels",view:"main"},{text:"Roommates",action:()=>n("roommateMatch")},{text:"Services",action:p},{text:"Spotlight",action:m},{text:"Contact Us",action:f}],_=E=>e==="main"&&E==="main"?!0:e===E,N=E=>{n(E),b(!1)},C=e==="main";return e==="admin"||e==="auth"||e==="profile"?null:c.jsxs("header",{className:`bg-unistay-navy text-white shadow-lg ${C?"fixed":"sticky"} top-0 left-0 right-0 z-50`,children:[c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex items-center justify-between h-20",children:[c.jsx("div",{className:"flex items-center",children:c.jsx("button",{onClick:()=>n("main"),className:"flex items-center select-none","aria-label":"Go to homepage",children:c.jsx("img",{src:"/images/hostels/unistay.png",alt:"UniStay Logo",className:"h-10"})})}),c.jsx("nav",{className:"hidden md:flex items-center space-x-6",children:w.map(E=>c.jsx("button",{onClick:()=>E.action?E.action():E.view&&n(E.view),className:`font-medium transition-all duration-200 px-1 pb-2 pt-1 border-b-2 ${E.view&&_(E.view)?"text-unistay-yellow border-unistay-yellow":"border-transparent hover:text-unistay-yellow"}`,children:E.text},E.text))}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx(sw,{notifications:l,onMarkAsRead:d,user:s,onNavigate:n}),s?c.jsx(iw,{user:s,isAdmin:a,onLogout:o,onNavigate:n}):c.jsx("button",{onClick:()=>n("auth"),className:"hidden md:block bg-unistay-yellow text-unistay-navy font-bold py-2 px-6 rounded-full hover:bg-yellow-400 transition-colors",children:"Login"}),c.jsx("button",{onClick:()=>b(!x),className:"md:hidden text-white text-2xl focus:outline-none","aria-label":"Open menu","aria-expanded":x,children:c.jsx("i",{className:`fas ${x?"fa-times":"fa-bars"}`})})]})]})}),c.jsxs("div",{className:"md:hidden",children:[c.jsx("div",{className:`fixed inset-0 bg-black/50 z-40 transition-opacity duration-300 ${x?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:()=>b(!1),"aria-hidden":!x}),c.jsx("aside",{className:`fixed top-0 right-0 h-full w-4/5 max-w-xs bg-unistay-navy text-white z-50 transform transition-transform duration-300 ease-out ${x?"translate-x-0":"translate-x-full"}`,role:"dialog","aria-modal":"true","aria-hidden":!x,children:c.jsxs("div",{className:"p-4 h-full flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("div",{}),c.jsx("button",{onClick:()=>b(!1),className:"text-white text-2xl p-2","aria-label":"Close menu",children:c.jsx("i",{className:"fas fa-times"})})]}),c.jsxs("nav",{className:"flex flex-col gap-4 mt-2",children:[w.map(E=>c.jsx("button",{onClick:()=>E.action?(E.action(),b(!1)):N(E.view),className:`w-full text-left font-medium text-lg px-2 py-3 rounded-md transition-colors ${E.view&&_(E.view)?"text-unistay-yellow":"text-white hover:text-unistay-yellow"}`,children:E.text},E.text)),!s&&c.jsx("button",{onClick:()=>{N("auth")},className:"mt-4 bg-unistay-yellow text-unistay-navy font-bold py-2 px-6 rounded-full w-full",children:"Login"})]}),c.jsx("div",{className:"mt-auto"})]})})]})]})},Wi=()=>{const n=G.useRef(null),[e,s]=G.useState(!1);return G.useEffect(()=>{const a=new IntersectionObserver(([l])=>{l.isIntersecting&&(s(!0),a.unobserve(l.target))},{rootMargin:"0px 0px -100px 0px",threshold:.1}),o=n.current;return o&&a.observe(o),()=>{o&&a.unobserve(o)}},[]),[n,e]},Ze=({size:n="md",color:e="navy",className:s=""})=>{const a={sm:"h-4 w-4",md:"h-5 w-5",lg:"h-8 w-8"},o={white:"text-white",navy:"text-unistay-navy"};return c.jsxs("svg",{className:`animate-spin ${a[n]} ${o[e]} ${s}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})},ow=({hostels:n,onHostelSelect:e})=>{const[s,a]=Wi(),[o,l]=G.useState(!1),[d,f]=G.useState(""),[m,p]=G.useState([]),[x,b]=G.useState(!1),w=()=>{if(!d.trim())return;l(!0),b(!0);const N=n.filter(C=>{const E=d.toLowerCase().split(" "),R=`${C.name} ${C.location}`.toLowerCase();return E.every(A=>R.includes(A))});setTimeout(()=>{p(N),l(!1)},500)};G.useEffect(()=>{const N=C=>{const E=document.getElementById("search-container");E&&!E.contains(C.target)&&b(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]);const _=N=>{N.key==="Enter"&&w()};return c.jsxs("section",{ref:s,className:"relative bg-cover bg-center h-[60vh] min-h-[400px] flex items-center justify-center",style:{backgroundImage:"url('/images/hostels/akamweesi3.jpg')"},children:[c.jsx("div",{className:"absolute inset-0 bg-unistay-navy bg-opacity-60"}),c.jsxs("div",{className:`relative z-10 text-center text-white px-4 transition-all duration-1000 ${a?"opacity-100 translate-y-0":"opacity-0 translate-y-5"}`,children:[c.jsx("h1",{className:"text-4xl md:text-6xl font-extrabold tracking-tight mb-4",children:"Find Your Perfect Student Home"}),c.jsx("p",{className:"max-w-2xl mx-auto text-lg md:text-xl text-gray-200 mb-8",children:"Discover the best hostels near your university with all the amenities you need for a great student life."}),c.jsx("div",{className:"max-w-2xl mx-auto",children:c.jsxs("div",{id:"search-container",className:"relative",children:[c.jsx("input",{type:"text",placeholder:"Search by hostel name or location...",className:"w-full p-4 pl-12 rounded-full border-2 border-transparent focus:ring-4 focus:ring-unistay-yellow focus:border-unistay-yellow text-gray-800 text-lg shadow-2xl transition",disabled:o,value:d,onChange:N=>f(N.target.value),onKeyPress:_}),c.jsx("i",{className:"fas fa-search absolute left-5 top-1/2 -translate-y-1/2 text-gray-400 text-xl"}),c.jsx("button",{onClick:w,disabled:o,className:"absolute right-2 top-1/2 -translate-y-1/2 bg-unistay-navy hover:bg-opacity-90 text-white font-bold py-2.5 px-8 rounded-full transition-all duration-300 flex items-center justify-center w-[120px] disabled:bg-opacity-70",children:o?c.jsx(Ze,{color:"white",size:"sm"}):"Search"}),x&&c.jsx("div",{className:"absolute mt-2 w-full bg-white rounded-xl shadow-2xl overflow-hidden z-20 transition-all duration-300",children:o?c.jsx("div",{className:"p-4 text-center",children:c.jsx(Ze,{size:"lg"})}):m.length>0?c.jsx("div",{className:"max-h-96 overflow-y-auto",children:m.map(N=>c.jsxs("div",{onClick:()=>{e(N),b(!1),f("")},className:"flex items-center gap-4 p-4 hover:bg-gray-50 cursor-pointer border-b last:border-b-0 transition-colors",children:[c.jsx("div",{className:"w-16 h-16 flex-shrink-0",children:c.jsx("img",{src:N.imageUrl,alt:N.name,className:"w-full h-full object-cover rounded-lg"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-semibold text-unistay-navy",children:N.name}),c.jsxs("p",{className:"text-sm text-gray-500",children:[c.jsx("i",{className:"fas fa-map-marker-alt text-unistay-yellow mr-2"}),N.location]}),c.jsxs("p",{className:"text-sm text-gray-500",children:[c.jsx("i",{className:"fas fa-tag text-unistay-yellow mr-2"}),N.priceRange]})]}),N.isRecommended&&c.jsx("span",{className:"text-unistay-yellow",children:c.jsx("i",{className:"fas fa-star"})})]},N.id))}):d&&c.jsxs("div",{className:"p-8 text-center",children:[c.jsx("i",{className:"fas fa-home text-4xl text-gray-300 mb-4"}),c.jsxs("p",{className:"text-gray-500",children:['No hostels found matching "',d,'"']})]})})]})})]})]})},Pu={rootMargin:"50px",threshold:.01},ul=()=>typeof window<"u"&&"IntersectionObserver"in window,rw=(n=Pu)=>ul()?new IntersectionObserver(e=>{e.forEach(s=>{if(s.isIntersecting){const a=s.target,o=a.dataset.src,l=a.dataset.srcset;o&&!a.src&&(a.src=o),l&&!a.srcSet&&(a.srcSet=l),a.classList.remove("lazy"),a.classList.add("lazy-loaded"),ho.unobserve(a)}})},{rootMargin:n.rootMargin||Pu.rootMargin,threshold:n.threshold!==void 0?n.threshold:Pu.threshold}):null;let ho=null;const lw=n=>{ul()&&(ho||(ho=rw(n)))},cw=n=>{if(ho&&ul())ho.observe(n);else{const e=n.dataset.src,s=n.dataset.srcset;e&&(n.src=e),s&&(n.srcSet=s)}},uw=(n=10,e=10,s="#e0e0e0")=>`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 ${n} ${e}'%3E%3Crect fill='${encodeURIComponent(s)}' width='${n}' height='${e}'/%3E%3C/svg%3E`,vn=({src:n,alt:e,className:s="",width:a,height:o,placeholder:l,onLoad:d,onError:f,srcSet:m,sizes:p,loading:x="lazy",decoding:b="async"})=>{const w=G.useRef(null),[_,N]=G.useState(!1),[C,E]=G.useState(!1);G.useEffect(()=>{const A=w.current;if(!A)return;x==="lazy"&&"loading"in A?(A.loading="lazy",A.src=n,m&&(A.srcSet=m),p&&(A.sizes=p)):ul()?(A.dataset.src=n,m&&(A.dataset.srcset=m),A.classList.add("lazy"),cw(A)):(A.src=n,m&&(A.srcSet=m));const k=()=>{N(!0),A.classList.add("lazy-loaded"),A.classList.remove("lazy"),d?.()},U=()=>{E(!0),A.classList.remove("lazy"),f?.()};return A.addEventListener("load",k),A.addEventListener("error",U),()=>{A.removeEventListener("load",k),A.removeEventListener("error",U)}},[n,m,p,x,d,f]);const R=l||uw(a||10,o||10);return c.jsx("img",{ref:w,src:x==="eager"?n:R,alt:e,className:`${s} ${_?"lazy-loaded":"lazy"} ${C?"opacity-50":""}`,width:a,height:o,decoding:b,style:{opacity:_?1:0,transition:"opacity 0.3s ease-in-out"}})},Hy=({hostel:n,onViewHostel:e,onSaveToggle:s,isSaved:a})=>c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden group transform hover:-translate-y-2 transition-all duration-300 h-full flex flex-col",children:[c.jsxs("div",{className:"relative",children:[c.jsx(vn,{src:n.imageUrl,alt:n.name,className:"h-56 w-full object-cover",loading:"lazy"}),c.jsx("button",{onClick:o=>{o.stopPropagation(),s(n.id)},className:"absolute top-4 left-4 bg-black/40 text-white rounded-full h-10 w-10 flex items-center justify-center hover:bg-black/60 transition-all duration-200 transform hover:scale-110 z-10","aria-label":a?"Unsave hostel":"Save hostel",children:c.jsx("i",{className:`${a?"fas":"far"} fa-heart ${a?"text-red-500":""} text-lg`})}),c.jsxs("div",{className:"absolute top-4 right-4 bg-white/80 backdrop-blur-sm text-unistay-navy px-3 py-1 rounded-full font-bold flex items-center gap-1",children:[c.jsx("i",{className:"fas fa-star text-unistay-yellow"}),n.rating]})]}),c.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[c.jsx("h3",{className:"text-xl font-bold text-unistay-navy",children:n.name}),c.jsx("p",{className:"text-gray-600 mt-1 flex-grow",children:n.location}),c.jsxs("div",{className:"flex justify-between items-center mt-4",children:[c.jsx("span",{className:"text-lg font-extrabold text-unistay-navy bg-unistay-yellow/20 px-3 py-1 rounded-lg",children:n.priceRange}),c.jsx("button",{onClick:()=>e(n),className:"bg-unistay-navy text-white font-semibold px-5 py-2 rounded-lg transition-transform transform group-hover:scale-105 group-hover:bg-unistay-yellow group-hover:text-unistay-navy",children:"View"})]})]})]}),dw=({universities:n,selectedUniversity:e,onSelect:s})=>{const[a,o]=Wi(),[l,d]=G.useState(!1),f=G.useRef(null);return c.jsxs("div",{ref:a,className:`transition-all duration-700 ${o?"opacity-100 translate-y-0":"opacity-0 translate-y-5"}`,children:[c.jsx("h2",{className:"text-3xl font-bold text-unistay-navy text-center mb-6",children:"Find Hostels At Your University"}),c.jsx("div",{ref:f,className:"flex justify-center flex-wrap gap-4 overflow-hidden transition-all duration-500 ease-in-out",style:{maxHeight:l?`${f.current?.scrollHeight}px`:"70px"},children:n.map(x=>c.jsxs("button",{onClick:()=>s(x),className:`flex items-center gap-3 px-6 py-3 rounded-full text-lg font-semibold border-2 transition-all duration-300 transform hover:scale-105 ${e.id===x.id?"bg-unistay-navy text-white border-unistay-navy shadow-lg":"bg-white text-unistay-navy border-gray-200 hover:border-unistay-navy"}`,children:[c.jsx(vn,{src:x.logoUrl,alt:`${x.name} Logo`,className:"w-7 h-7 rounded-full object-cover",width:28,height:28,loading:"lazy"}),x.name]},x.id))}),n.length>5&&c.jsx("div",{className:"text-center mt-6",children:c.jsxs("button",{onClick:()=>d(!l),className:"font-semibold text-unistay-navy hover:text-unistay-yellow transition-colors flex items-center gap-2 mx-auto","aria-expanded":l,children:[c.jsx("span",{children:l?"Show Less":"Show More"}),c.jsx("i",{className:`fas fa-chevron-down transition-transform duration-300 ${l?"rotate-180":""}`})]})})]})},fw=({hostels:n,universityName:e,onViewHostel:s,savedHostelIds:a,onToggleSave:o,hasActiveFilter:l,initialHostelCount:d})=>{const[f,m]=Wi(),[p,x]=G.useState(!1),b=p?n:n.slice(0,5),w=n.length>5;return d===0?c.jsx("div",{ref:f,className:`mt-16 transition-all duration-700 delay-100 ${m?"opacity-100":"opacity-0"}`,children:c.jsxs("div",{className:"text-center py-8 px-4 bg-unistay-bg rounded-2xl",children:[c.jsx("i",{className:"fas fa-bed text-4xl text-gray-300 mb-4"}),c.jsxs("h3",{className:"text-xl font-semibold text-unistay-navy",children:["No Hostels Found for ",e]}),c.jsxs("p",{className:"text-gray-500 mt-2",children:["We don't have specific listings for this university yet. ",c.jsx("br",{})," Please check our general recommendations below!"]})]})}):n.length===0&&l?c.jsx("div",{ref:f,className:`mt-16 transition-all duration-700 delay-100 ${m?"opacity-100":"opacity-0"}`,children:c.jsxs("div",{className:"text-center py-8 px-4 bg-unistay-bg rounded-2xl",children:[c.jsx("i",{className:"fas fa-filter text-4xl text-gray-300 mb-4"}),c.jsx("h3",{className:"text-xl font-semibold text-unistay-navy",children:"No Hostels Match Your Filters"}),c.jsx("p",{className:"text-gray-500 mt-2",children:"Try removing some amenities to see more results."})]})}):c.jsxs("div",{ref:f,className:`mt-16 transition-all duration-700 delay-100 ${m?"opacity-100":"opacity-0"}`,children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("h2",{className:"text-2xl font-bold text-unistay-navy",children:["Hostels Near ",e]}),w&&!l&&c.jsx("button",{onClick:()=>x(!p),className:"text-unistay-yellow font-semibold hover:underline transition-colors duration-200",children:p?"Show Less":"View All"})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:b.map(_=>c.jsx("div",{children:c.jsx(Hy,{hostel:_,onViewHostel:s,onSaveToggle:o,isSaved:a.has(_.id)})},_.id))}),w&&!p&&!l&&c.jsx("div",{className:"mt-8 text-center",children:c.jsxs("button",{onClick:()=>x(!0),className:"bg-unistay-yellow text-unistay-navy px-6 py-3 rounded-lg font-semibold hover:bg-yellow-400 transition-colors duration-200",children:["Show All ",n.length," Hostels"]})})]})},hw=({hostels:n,onViewHostel:e,savedHostelIds:s,onToggleSave:a})=>{const[o,l]=Wi();return c.jsxs("div",{ref:o,className:`mt-16 transition-all duration-700 delay-200 ${l?"opacity-100":"opacity-0"}`,children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-2xl font-bold text-unistay-navy",children:"Recommended For You"}),c.jsx("a",{href:"#",className:"text-unistay-yellow font-semibold hover:underline",children:"See All"})]}),c.jsx("div",{className:"flex overflow-x-auto space-x-6 pb-4 no-scrollbar scroll-snap-x-mandatory",children:n.map((d,f)=>c.jsx("div",{className:`w-80 md:w-96 flex-shrink-0 scroll-snap-align-start transition-transform duration-500 delay-${f*100} ${l?"translate-y-0":"translate-y-5"}`,children:c.jsx(Hy,{hostel:d,onViewHostel:e,onSaveToggle:a,isSaved:s.has(d.id)})},d.id))})]})},mw=({universities:n,selectedUniversity:e,onSelectUniversity:s,hostels:a,onViewHostel:o,savedHostelIds:l,onToggleSave:d})=>{const f=a.filter(p=>p.universityId===e.id),m=a.filter(p=>p.isRecommended);return c.jsx("section",{className:"bg-white py-16",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsx(dw,{universities:n,selectedUniversity:e,onSelect:s}),c.jsx(fw,{hostels:f,universityName:e.name,onViewHostel:o,savedHostelIds:l,onToggleSave:d,hasActiveFilter:!1,initialHostelCount:f.length}),m.length>0&&c.jsx(hw,{hostels:m,onViewHostel:o,savedHostelIds:l,onToggleSave:d})]})})},Gy=n=>[...n].sort((e,s)=>{const a=new Date(e.timestamp||0);return new Date(s.timestamp||0).getTime()-a.getTime()}),qn=n=>{const e=new Date,s=new Date(n),a=Math.floor((e.getTime()-s.getTime())/1e3),o={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60};if(a<60)return"just now";for(const[l,d]of Object.entries(o)){const f=Math.floor(a/d);if(f>=1)return f===1?`1 ${l} ago`:`${f} ${l}s ago`}return"just now"};var Yu=function(n,e){return Yu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(s[o]=a[o])},Yu(n,e)};function zy(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Yu(n,e);function s(){this.constructor=n}n.prototype=e===null?Object.create(e):(s.prototype=e.prototype,new s)}var el=function(){return el=Object.assign||function(e){for(var s,a=1,o=arguments.length;a<o;a++){s=arguments[a];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(e[l]=s[l])}return e},el.apply(this,arguments)};function Zi(n,e){var s={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&e.indexOf(a)<0&&(s[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)e.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(s[a[o]]=n[a[o]]);return s}function Fy(n,e,s,a){var o=arguments.length,l=o<3?e:a===null?a=Object.getOwnPropertyDescriptor(e,s):a,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(n,e,s,a);else for(var f=n.length-1;f>=0;f--)(d=n[f])&&(l=(o<3?d(l):o>3?d(e,s,l):d(e,s))||l);return o>3&&l&&Object.defineProperty(e,s,l),l}function $y(n,e){return function(s,a){e(s,a,n)}}function Jy(n,e,s,a,o,l){function d(R){if(R!==void 0&&typeof R!="function")throw new TypeError("Function expected");return R}for(var f=a.kind,m=f==="getter"?"get":f==="setter"?"set":"value",p=!e&&n?a.static?n:n.prototype:null,x=e||(p?Object.getOwnPropertyDescriptor(p,a.name):{}),b,w=!1,_=s.length-1;_>=0;_--){var N={};for(var C in a)N[C]=C==="access"?{}:a[C];for(var C in a.access)N.access[C]=a.access[C];N.addInitializer=function(R){if(w)throw new TypeError("Cannot add initializers after decoration has completed");l.push(d(R||null))};var E=(0,s[_])(f==="accessor"?{get:x.get,set:x.set}:x[m],N);if(f==="accessor"){if(E===void 0)continue;if(E===null||typeof E!="object")throw new TypeError("Object expected");(b=d(E.get))&&(x.get=b),(b=d(E.set))&&(x.set=b),(b=d(E.init))&&o.unshift(b)}else(b=d(E))&&(f==="field"?o.unshift(b):x[m]=b)}p&&Object.defineProperty(p,a.name,x),w=!0}function Yy(n,e,s){for(var a=arguments.length>2,o=0;o<e.length;o++)s=a?e[o].call(n,s):e[o].call(n);return a?s:void 0}function Ky(n){return typeof n=="symbol"?n:"".concat(n)}function Qy(n,e,s){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:s?"".concat(s," ",e):e})}function Xy(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function ae(n,e,s,a){function o(l){return l instanceof s?l:new s(function(d){d(l)})}return new(s||(s=Promise))(function(l,d){function f(x){try{p(a.next(x))}catch(b){d(b)}}function m(x){try{p(a.throw(x))}catch(b){d(b)}}function p(x){x.done?l(x.value):o(x.value).then(f,m)}p((a=a.apply(n,e||[])).next())})}function Wy(n,e){var s={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},a,o,l,d=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return d.next=f(0),d.throw=f(1),d.return=f(2),typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function f(p){return function(x){return m([p,x])}}function m(p){if(a)throw new TypeError("Generator is already executing.");for(;d&&(d=0,p[0]&&(s=0)),s;)try{if(a=1,o&&(l=p[0]&2?o.return:p[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,p[1])).done)return l;switch(o=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return s.label++,{value:p[1],done:!1};case 5:s.label++,o=p[1],p=[0];continue;case 7:p=s.ops.pop(),s.trys.pop();continue;default:if(l=s.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){s=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){s.label=p[1];break}if(p[0]===6&&s.label<l[1]){s.label=l[1],l=p;break}if(l&&s.label<l[2]){s.label=l[2],s.ops.push(p);break}l[2]&&s.ops.pop(),s.trys.pop();continue}p=e.call(n,s)}catch(x){p=[6,x],o=0}finally{a=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}var dl=Object.create?(function(n,e,s,a){a===void 0&&(a=s);var o=Object.getOwnPropertyDescriptor(e,s);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[s]}}),Object.defineProperty(n,a,o)}):(function(n,e,s,a){a===void 0&&(a=s),n[a]=e[s]});function Zy(n,e){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(e,s)&&dl(e,n,s)}function tl(n){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&n[e],a=0;if(s)return s.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&a>=n.length&&(n=void 0),{value:n&&n[a++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xd(n,e){var s=typeof Symbol=="function"&&n[Symbol.iterator];if(!s)return n;var a=s.call(n),o,l=[],d;try{for(;(e===void 0||e-- >0)&&!(o=a.next()).done;)l.push(o.value)}catch(f){d={error:f}}finally{try{o&&!o.done&&(s=a.return)&&s.call(a)}finally{if(d)throw d.error}}return l}function e0(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(xd(arguments[e]));return n}function t0(){for(var n=0,e=0,s=arguments.length;e<s;e++)n+=arguments[e].length;for(var a=Array(n),o=0,e=0;e<s;e++)for(var l=arguments[e],d=0,f=l.length;d<f;d++,o++)a[o]=l[d];return a}function n0(n,e,s){if(s||arguments.length===2)for(var a=0,o=e.length,l;a<o;a++)(l||!(a in e))&&(l||(l=Array.prototype.slice.call(e,0,a)),l[a]=e[a]);return n.concat(l||Array.prototype.slice.call(e))}function Qi(n){return this instanceof Qi?(this.v=n,this):new Qi(n)}function s0(n,e,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=s.apply(n,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",d),o[Symbol.asyncIterator]=function(){return this},o;function d(_){return function(N){return Promise.resolve(N).then(_,b)}}function f(_,N){a[_]&&(o[_]=function(C){return new Promise(function(E,R){l.push([_,C,E,R])>1||m(_,C)})},N&&(o[_]=N(o[_])))}function m(_,N){try{p(a[_](N))}catch(C){w(l[0][3],C)}}function p(_){_.value instanceof Qi?Promise.resolve(_.value.v).then(x,b):w(l[0][2],_)}function x(_){m("next",_)}function b(_){m("throw",_)}function w(_,N){_(N),l.shift(),l.length&&m(l[0][0],l[0][1])}}function i0(n){var e,s;return e={},a("next"),a("throw",function(o){throw o}),a("return"),e[Symbol.iterator]=function(){return this},e;function a(o,l){e[o]=n[o]?function(d){return(s=!s)?{value:Qi(n[o](d)),done:!1}:l?l(d):d}:l}}function a0(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],s;return e?e.call(n):(n=typeof tl=="function"?tl(n):n[Symbol.iterator](),s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s);function a(l){s[l]=n[l]&&function(d){return new Promise(function(f,m){d=n[l](d),o(f,m,d.done,d.value)})}}function o(l,d,f,m){Promise.resolve(m).then(function(p){l({value:p,done:f})},d)}}function o0(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}var pw=Object.create?(function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}):function(n,e){n.default=e},Ku=function(n){return Ku=Object.getOwnPropertyNames||function(e){var s=[];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(s[s.length]=a);return s},Ku(n)};function r0(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var s=Ku(n),a=0;a<s.length;a++)s[a]!=="default"&&dl(e,n,s[a]);return pw(e,n),e}function l0(n){return n&&n.__esModule?n:{default:n}}function c0(n,e,s,a){if(s==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?a:s==="a"?a.call(n):a?a.value:e.get(n)}function u0(n,e,s,a,o){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!o:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?o.call(n,s):o?o.value=s:e.set(n,s),s}function d0(n,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?e===n:n.has(e)}function f0(n,e,s){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var a,o;if(s){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");a=e[Symbol.asyncDispose]}if(a===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");a=e[Symbol.dispose],s&&(o=a)}if(typeof a!="function")throw new TypeError("Object not disposable.");o&&(a=function(){try{o.call(this)}catch(l){return Promise.reject(l)}}),n.stack.push({value:e,dispose:a,async:s})}else s&&n.stack.push({async:!0});return e}var gw=typeof SuppressedError=="function"?SuppressedError:function(n,e,s){var a=new Error(s);return a.name="SuppressedError",a.error=n,a.suppressed=e,a};function h0(n){function e(l){n.error=n.hasError?new gw(l,n.error,"An error was suppressed during disposal."):l,n.hasError=!0}var s,a=0;function o(){for(;s=n.stack.pop();)try{if(!s.async&&a===1)return a=0,n.stack.push(s),Promise.resolve().then(o);if(s.dispose){var l=s.dispose.call(s.value);if(s.async)return a|=2,Promise.resolve(l).then(o,function(d){return e(d),o()})}else a|=1}catch(d){e(d)}if(a===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return o()}function m0(n,e){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(s,a,o,l,d){return a?e?".jsx":".js":o&&(!l||!d)?s:o+l+"."+d.toLowerCase()+"js"}):n}const yw={__extends:zy,__assign:el,__rest:Zi,__decorate:Fy,__param:$y,__esDecorate:Jy,__runInitializers:Yy,__propKey:Ky,__setFunctionName:Qy,__metadata:Xy,__awaiter:ae,__generator:Wy,__createBinding:dl,__exportStar:Zy,__values:tl,__read:xd,__spread:e0,__spreadArrays:t0,__spreadArray:n0,__await:Qi,__asyncGenerator:s0,__asyncDelegator:i0,__asyncValues:a0,__makeTemplateObject:o0,__importStar:r0,__importDefault:l0,__classPrivateFieldGet:c0,__classPrivateFieldSet:u0,__classPrivateFieldIn:d0,__addDisposableResource:f0,__disposeResources:h0,__rewriteRelativeImportExtension:m0},vw=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:f0,get __assign(){return el},__asyncDelegator:i0,__asyncGenerator:s0,__asyncValues:a0,__await:Qi,__awaiter:ae,__classPrivateFieldGet:c0,__classPrivateFieldIn:d0,__classPrivateFieldSet:u0,__createBinding:dl,__decorate:Fy,__disposeResources:h0,__esDecorate:Jy,__exportStar:Zy,__extends:zy,__generator:Wy,__importDefault:l0,__importStar:r0,__makeTemplateObject:o0,__metadata:Xy,__param:$y,__propKey:Ky,__read:xd,__rest:Zi,__rewriteRelativeImportExtension:m0,__runInitializers:Yy,__setFunctionName:Qy,__spread:e0,__spreadArray:n0,__spreadArrays:t0,__values:tl,default:yw},Symbol.toStringTag,{value:"Module"})),xw="modulepreload",bw=function(n,e){return new URL(n,e).href},Hp={},ea=function(e,s,a){let o=Promise.resolve();if(s&&s.length>0){let d=function(x){return Promise.all(x.map(b=>Promise.resolve(b).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};const f=document.getElementsByTagName("link"),m=document.querySelector("meta[property=csp-nonce]"),p=m?.nonce||m?.getAttribute("nonce");o=d(s.map(x=>{if(x=bw(x,a),x in Hp)return;Hp[x]=!0;const b=x.endsWith(".css"),w=b?'[rel="stylesheet"]':"";if(!!a)for(let C=f.length-1;C>=0;C--){const E=f[C];if(E.href===x&&(!b||E.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${x}"]${w}`))return;const N=document.createElement("link");if(N.rel=b?"stylesheet":xw,b||(N.as="script"),N.crossOrigin="",N.href=x,p&&N.setAttribute("nonce",p),document.head.appendChild(N),b)return new Promise((C,E)=>{N.addEventListener("load",C),N.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${x}`)))})}))}function l(d){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=d,window.dispatchEvent(f),!f.defaultPrevented)throw d}return o.then(d=>{for(const f of d||[])f.status==="rejected"&&l(f.reason);return e().catch(l)})},ww=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...s)=>ea(async()=>{const{default:a}=await Promise.resolve().then(()=>$s);return{default:a}},void 0,import.meta.url).then(({default:a})=>a(...s)):e=fetch,(...s)=>e(...s)};class bd extends Error{constructor(e,s="FunctionsError",a){super(e),this.name=s,this.context=a}}class Gp extends bd{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class zp extends bd{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Fp extends bd{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Qu;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Qu||(Qu={}));class _w{constructor(e,{headers:s={},customFetch:a,region:o=Qu.Any}={}){this.url=e,this.headers=s,this.region=o,this.fetch=ww(a)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return ae(this,arguments,void 0,function*(s,a={}){var o;try{const{headers:l,method:d,body:f,signal:m}=a;let p={},{region:x}=a;x||(x=this.region);const b=new URL(`${this.url}/${s}`);x&&x!=="any"&&(p["x-region"]=x,b.searchParams.set("forceFunctionRegion",x));let w;f&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&f instanceof Blob||f instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",w=f):typeof f=="string"?(p["Content-Type"]="text/plain",w=f):typeof FormData<"u"&&f instanceof FormData?w=f:(p["Content-Type"]="application/json",w=JSON.stringify(f)):w=f;const _=yield this.fetch(b.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),l),body:w,signal:m}).catch(R=>{throw R.name==="AbortError"?R:new Gp(R)}),N=_.headers.get("x-relay-error");if(N&&N==="true")throw new zp(_);if(!_.ok)throw new Fp(_);let C=((o=_.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),E;return C==="application/json"?E=yield _.json():C==="application/octet-stream"||C==="application/pdf"?E=yield _.blob():C==="text/event-stream"?E=_:C==="multipart/form-data"?E=yield _.formData():E=yield _.text(),{data:E,error:null,response:_}}catch(l){return l instanceof Error&&l.name==="AbortError"?{data:null,error:new Gp(l)}:{data:null,error:l,response:l instanceof Fp||l instanceof zp?l.context:void 0}}})}}var bt={};const ta=qy(vw);var qr={},Br={},Vr={},Hr={},Gr={},Sw=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Xi=Sw();const Nw=Xi.fetch,p0=Xi.fetch.bind(Xi),g0=Xi.Headers,Cw=Xi.Request,Tw=Xi.Response,$s=Object.freeze(Object.defineProperty({__proto__:null,Headers:g0,Request:Cw,Response:Tw,default:p0,fetch:Nw},Symbol.toStringTag,{value:"Module"})),Ew=qy($s);var zr={},$p;function y0(){if($p)return zr;$p=1,Object.defineProperty(zr,"__esModule",{value:!0});class n extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return zr.default=n,zr}var Jp;function v0(){if(Jp)return Gr;Jp=1,Object.defineProperty(Gr,"__esModule",{value:!0});const n=ta,e=n.__importDefault(Ew),s=n.__importDefault(y0());class a{constructor(l){var d,f;this.shouldThrowOnError=!1,this.method=l.method,this.url=l.url,this.headers=new Headers(l.headers),this.schema=l.schema,this.body=l.body,this.shouldThrowOnError=(d=l.shouldThrowOnError)!==null&&d!==void 0?d:!1,this.signal=l.signal,this.isMaybeSingle=(f=l.isMaybeSingle)!==null&&f!==void 0?f:!1,l.fetch?this.fetch=l.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(l,d){return this.headers=new Headers(this.headers),this.headers.set(l,d),this}then(l,d){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const f=this.fetch;let m=f(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var x,b,w,_;let N=null,C=null,E=null,R=p.status,A=p.statusText;if(p.ok){if(this.method!=="HEAD"){const B=await p.text();B===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((x=this.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?C=B:C=JSON.parse(B))}const U=(b=this.headers.get("Prefer"))===null||b===void 0?void 0:b.match(/count=(exact|planned|estimated)/),V=(w=p.headers.get("content-range"))===null||w===void 0?void 0:w.split("/");U&&V&&V.length>1&&(E=parseInt(V[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(C)&&(C.length>1?(N={code:"PGRST116",details:`Results contain ${C.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},C=null,E=null,R=406,A="Not Acceptable"):C.length===1?C=C[0]:C=null)}else{const U=await p.text();try{N=JSON.parse(U),Array.isArray(N)&&p.status===404&&(C=[],N=null,R=200,A="OK")}catch{p.status===404&&U===""?(R=204,A="No Content"):N={message:U}}if(N&&this.isMaybeSingle&&(!((_=N?.details)===null||_===void 0)&&_.includes("0 rows"))&&(N=null,R=200,A="OK"),N&&this.shouldThrowOnError)throw new s.default(N)}return{error:N,data:C,count:E,status:R,statusText:A}});return this.shouldThrowOnError||(m=m.catch(p=>{var x,b,w;return{error:{message:`${(x=p?.name)!==null&&x!==void 0?x:"FetchError"}: ${p?.message}`,details:`${(b=p?.stack)!==null&&b!==void 0?b:""}`,hint:"",code:`${(w=p?.code)!==null&&w!==void 0?w:""}`},data:null,count:null,status:0,statusText:""}})),m.then(l,d)}returns(){return this}overrideTypes(){return this}}return Gr.default=a,Gr}var Yp;function x0(){if(Yp)return Hr;Yp=1,Object.defineProperty(Hr,"__esModule",{value:!0});const e=ta.__importDefault(v0());class s extends e.default{select(o){let l=!1;const d=(o??"*").split("").map(f=>/\s/.test(f)&&!l?"":(f==='"'&&(l=!l),f)).join("");return this.url.searchParams.set("select",d),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:l=!0,nullsFirst:d,foreignTable:f,referencedTable:m=f}={}){const p=m?`${m}.order`:"order",x=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${x?`${x},`:""}${o}.${l?"asc":"desc"}${d===void 0?"":d?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:l,referencedTable:d=l}={}){const f=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(f,`${o}`),this}range(o,l,{foreignTable:d,referencedTable:f=d}={}){const m=typeof f>"u"?"offset":`${f}.offset`,p=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(m,`${o}`),this.url.searchParams.set(p,`${l-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:l=!1,settings:d=!1,buffers:f=!1,wal:m=!1,format:p="text"}={}){var x;const b=[o?"analyze":null,l?"verbose":null,d?"settings":null,f?"buffers":null,m?"wal":null].filter(Boolean).join("|"),w=(x=this.headers.get("Accept"))!==null&&x!==void 0?x:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${w}"; options=${b};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}}return Hr.default=s,Hr}var Kp;function wd(){if(Kp)return Vr;Kp=1,Object.defineProperty(Vr,"__esModule",{value:!0});const e=ta.__importDefault(x0());class s extends e.default{eq(o,l){return this.url.searchParams.append(o,`eq.${l}`),this}neq(o,l){return this.url.searchParams.append(o,`neq.${l}`),this}gt(o,l){return this.url.searchParams.append(o,`gt.${l}`),this}gte(o,l){return this.url.searchParams.append(o,`gte.${l}`),this}lt(o,l){return this.url.searchParams.append(o,`lt.${l}`),this}lte(o,l){return this.url.searchParams.append(o,`lte.${l}`),this}like(o,l){return this.url.searchParams.append(o,`like.${l}`),this}likeAllOf(o,l){return this.url.searchParams.append(o,`like(all).{${l.join(",")}}`),this}likeAnyOf(o,l){return this.url.searchParams.append(o,`like(any).{${l.join(",")}}`),this}ilike(o,l){return this.url.searchParams.append(o,`ilike.${l}`),this}ilikeAllOf(o,l){return this.url.searchParams.append(o,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(o,l){return this.url.searchParams.append(o,`ilike(any).{${l.join(",")}}`),this}is(o,l){return this.url.searchParams.append(o,`is.${l}`),this}in(o,l){const d=Array.from(new Set(l)).map(f=>typeof f=="string"&&new RegExp("[,()]").test(f)?`"${f}"`:`${f}`).join(",");return this.url.searchParams.append(o,`in.(${d})`),this}contains(o,l){return typeof l=="string"?this.url.searchParams.append(o,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(o,`cs.{${l.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(l)}`),this}containedBy(o,l){return typeof l=="string"?this.url.searchParams.append(o,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(o,`cd.{${l.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(l)}`),this}rangeGt(o,l){return this.url.searchParams.append(o,`sr.${l}`),this}rangeGte(o,l){return this.url.searchParams.append(o,`nxl.${l}`),this}rangeLt(o,l){return this.url.searchParams.append(o,`sl.${l}`),this}rangeLte(o,l){return this.url.searchParams.append(o,`nxr.${l}`),this}rangeAdjacent(o,l){return this.url.searchParams.append(o,`adj.${l}`),this}overlaps(o,l){return typeof l=="string"?this.url.searchParams.append(o,`ov.${l}`):this.url.searchParams.append(o,`ov.{${l.join(",")}}`),this}textSearch(o,l,{config:d,type:f}={}){let m="";f==="plain"?m="pl":f==="phrase"?m="ph":f==="websearch"&&(m="w");const p=d===void 0?"":`(${d})`;return this.url.searchParams.append(o,`${m}fts${p}.${l}`),this}match(o){return Object.entries(o).forEach(([l,d])=>{this.url.searchParams.append(l,`eq.${d}`)}),this}not(o,l,d){return this.url.searchParams.append(o,`not.${l}.${d}`),this}or(o,{foreignTable:l,referencedTable:d=l}={}){const f=d?`${d}.or`:"or";return this.url.searchParams.append(f,`(${o})`),this}filter(o,l,d){return this.url.searchParams.append(o,`${l}.${d}`),this}}return Vr.default=s,Vr}var Qp;function b0(){if(Qp)return Br;Qp=1,Object.defineProperty(Br,"__esModule",{value:!0});const e=ta.__importDefault(wd());class s{constructor(o,{headers:l={},schema:d,fetch:f}){this.url=o,this.headers=new Headers(l),this.schema=d,this.fetch=f}select(o,l){const{head:d=!1,count:f}=l??{},m=d?"HEAD":"GET";let p=!1;const x=(o??"*").split("").map(b=>/\s/.test(b)&&!p?"":(b==='"'&&(p=!p),b)).join("");return this.url.searchParams.set("select",x),f&&this.headers.append("Prefer",`count=${f}`),new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:l,defaultToNull:d=!0}={}){var f;const m="POST";if(l&&this.headers.append("Prefer",`count=${l}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const p=o.reduce((x,b)=>x.concat(Object.keys(b)),[]);if(p.length>0){const x=[...new Set(p)].map(b=>`"${b}"`);this.url.searchParams.set("columns",x.join(","))}}return new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}upsert(o,{onConflict:l,ignoreDuplicates:d=!1,count:f,defaultToNull:m=!0}={}){var p;const x="POST";if(this.headers.append("Prefer",`resolution=${d?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),f&&this.headers.append("Prefer",`count=${f}`),m||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const b=o.reduce((w,_)=>w.concat(Object.keys(_)),[]);if(b.length>0){const w=[...new Set(b)].map(_=>`"${_}"`);this.url.searchParams.set("columns",w.join(","))}}return new e.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(o,{count:l}={}){var d;const f="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}delete({count:o}={}){var l;const d="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return Br.default=s,Br}var Xp;function Aw(){if(Xp)return qr;Xp=1,Object.defineProperty(qr,"__esModule",{value:!0});const n=ta,e=n.__importDefault(b0()),s=n.__importDefault(wd());class a{constructor(l,{headers:d={},schema:f,fetch:m}={}){this.url=l,this.headers=new Headers(d),this.schemaName=f,this.fetch=m}from(l){const d=new URL(`${this.url}/${l}`);return new e.default(d,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new a(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,d={},{head:f=!1,get:m=!1,count:p}={}){var x;let b;const w=new URL(`${this.url}/rpc/${l}`);let _;f||m?(b=f?"HEAD":"GET",Object.entries(d).filter(([C,E])=>E!==void 0).map(([C,E])=>[C,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([C,E])=>{w.searchParams.append(C,E)})):(b="POST",_=d);const N=new Headers(this.headers);return p&&N.set("Prefer",`count=${p}`),new s.default({method:b,url:w,headers:N,schema:this.schemaName,body:_,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}}return qr.default=a,qr}var Wp;function kw(){if(Wp)return bt;Wp=1,Object.defineProperty(bt,"__esModule",{value:!0}),bt.PostgrestError=bt.PostgrestBuilder=bt.PostgrestTransformBuilder=bt.PostgrestFilterBuilder=bt.PostgrestQueryBuilder=bt.PostgrestClient=void 0;const n=ta,e=n.__importDefault(Aw());bt.PostgrestClient=e.default;const s=n.__importDefault(b0());bt.PostgrestQueryBuilder=s.default;const a=n.__importDefault(wd());bt.PostgrestFilterBuilder=a.default;const o=n.__importDefault(x0());bt.PostgrestTransformBuilder=o.default;const l=n.__importDefault(v0());bt.PostgrestBuilder=l.default;const d=n.__importDefault(y0());return bt.PostgrestError=d.default,bt.default={PostgrestClient:e.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:d.default},bt}var jw=kw();const Rw=vd(jw),{PostgrestClient:Mw,PostgrestQueryBuilder:U2,PostgrestFilterBuilder:D2,PostgrestTransformBuilder:P2,PostgrestBuilder:O2,PostgrestError:L2}=Rw;class Iw{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const s=process.versions;if(s&&s.node){const a=s.node,o=parseInt(a.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let s=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(s+=`

Suggested solution: ${e.workaround}`),new Error(s)}static createWebSocket(e,s){const a=this.getWebSocketConstructor();return new a(e,s)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Uw="2.76.1",Dw=`realtime-js/${Uw}`,Pw="1.0.0",Xu=1e4,Ow=1e3,Lw=100;var oo;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(oo||(oo={}));var lt;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(lt||(lt={}));var fn;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(fn||(fn={}));var Wu;(function(n){n.websocket="websocket"})(Wu||(Wu={}));var Hs;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Hs||(Hs={}));class qw{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),a=new TextDecoder;return this._decodeBroadcast(e,s,a)}_decodeBroadcast(e,s,a){const o=s.getUint8(1),l=s.getUint8(2);let d=this.HEADER_LENGTH+2;const f=a.decode(e.slice(d,d+o));d=d+o;const m=a.decode(e.slice(d,d+l));d=d+l;const p=JSON.parse(a.decode(e.slice(d,e.byteLength)));return{ref:null,topic:f,event:m,payload:p}}}class w0{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ve;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Ve||(Ve={}));const Zp=(n,e,s={})=>{var a;const o=(a=s.skipTypes)!==null&&a!==void 0?a:[];return e?Object.keys(e).reduce((l,d)=>(l[d]=Bw(d,n,e,o),l),{}):{}},Bw=(n,e,s,a)=>{const o=e.find(f=>f.name===n),l=o?.type,d=s[n];return l&&!a.includes(l)?_0(l,d):Zu(d)},_0=(n,e)=>{if(n.charAt(0)==="_"){const s=n.slice(1,n.length);return zw(e,s)}switch(n){case Ve.bool:return Vw(e);case Ve.float4:case Ve.float8:case Ve.int2:case Ve.int4:case Ve.int8:case Ve.numeric:case Ve.oid:return Hw(e);case Ve.json:case Ve.jsonb:return Gw(e);case Ve.timestamp:return Fw(e);case Ve.abstime:case Ve.date:case Ve.daterange:case Ve.int4range:case Ve.int8range:case Ve.money:case Ve.reltime:case Ve.text:case Ve.time:case Ve.timestamptz:case Ve.timetz:case Ve.tsrange:case Ve.tstzrange:return Zu(e);default:return Zu(e)}},Zu=n=>n,Vw=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},Hw=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},Gw=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch{return n}return n},zw=(n,e)=>{if(typeof n!="string")return n;const s=n.length-1,a=n[s];if(n[0]==="{"&&a==="}"){let l;const d=n.slice(1,s);try{l=JSON.parse("["+d+"]")}catch{l=d?d.split(","):[]}return l.map(f=>_0(e,f))}return n},Fw=n=>typeof n=="string"?n.replace(" ","T"):n,S0=n=>{const e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Ou{constructor(e,s,a={},o=Xu){this.channel=e,this.event=s,this.payload=a,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var a;return this._hasReceived(e)&&s((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(a=>a.status===e).forEach(a=>a.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var eg;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(eg||(eg={}));class ro{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},o=>{const{onJoin:l,onLeave:d,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ro.syncState(this.state,o,l,d),this.pendingDiffs.forEach(m=>{this.state=ro.syncDiff(this.state,m,l,d)}),this.pendingDiffs=[],f()}),this.channel._on(a.diff,{},o=>{const{onJoin:l,onLeave:d,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=ro.syncDiff(this.state,o,l,d),f())}),this.onJoin((o,l,d)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:l,newPresences:d})}),this.onLeave((o,l,d)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:l,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,a,o){const l=this.cloneDeep(e),d=this.transformState(s),f={},m={};return this.map(l,(p,x)=>{d[p]||(m[p]=x)}),this.map(d,(p,x)=>{const b=l[p];if(b){const w=x.map(E=>E.presence_ref),_=b.map(E=>E.presence_ref),N=x.filter(E=>_.indexOf(E.presence_ref)<0),C=b.filter(E=>w.indexOf(E.presence_ref)<0);N.length>0&&(f[p]=N),C.length>0&&(m[p]=C)}else f[p]=x}),this.syncDiff(l,{joins:f,leaves:m},a,o)}static syncDiff(e,s,a,o){const{joins:l,leaves:d}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return a||(a=()=>{}),o||(o=()=>{}),this.map(l,(f,m)=>{var p;const x=(p=e[f])!==null&&p!==void 0?p:[];if(e[f]=this.cloneDeep(m),x.length>0){const b=e[f].map(_=>_.presence_ref),w=x.filter(_=>b.indexOf(_.presence_ref)<0);e[f].unshift(...w)}a(f,x,m)}),this.map(d,(f,m)=>{let p=e[f];if(!p)return;const x=m.map(b=>b.presence_ref);p=p.filter(b=>x.indexOf(b.presence_ref)<0),e[f]=p,o(f,p,m),p.length===0&&delete e[f]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(a=>s(a,e[a]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,a)=>{const o=e[a];return"metas"in o?s[a]=o.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):s[a]=o,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var tg;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(tg||(tg={}));var lo;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(lo||(lo={}));var On;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(On||(On={}));class _d{constructor(e,s={config:{}},a){var o,l;if(this.topic=e,this.params=s,this.socket=a,this.bindings={},this.state=lt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Ou(this,fn.join,this.params,this.timeout),this.rejoinTimer=new w0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=lt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(d=>d.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=lt.closed,this.socket._remove(this)}),this._onError(d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=lt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=lt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=lt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(fn.reply,{},(d,f)=>{this._trigger(this._replyEventName(f),d)}),this.presence=new ro(this),this.broadcastEndpointURL=S0(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,s=this.timeout){var a,o,l;if(this.socket.isConnected()||this.socket.connect(),this.state==lt.closed){const{config:{broadcast:d,presence:f,private:m}}=this.params,p=(o=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(_=>_.filter))!==null&&o!==void 0?o:[],x=!!this.bindings[lo.PRESENCE]&&this.bindings[lo.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,b={},w={broadcast:d,presence:Object.assign(Object.assign({},f),{enabled:x}),postgres_changes:p,private:m};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this._onError(_=>e?.(On.CHANNEL_ERROR,_)),this._onClose(()=>e?.(On.CLOSED)),this.updateJoinPayload(Object.assign({config:w},b)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:_})=>{var N;if(this.socket.setAuth(),_===void 0){e?.(On.SUBSCRIBED);return}else{const C=this.bindings.postgres_changes,E=(N=C?.length)!==null&&N!==void 0?N:0,R=[];for(let A=0;A<E;A++){const k=C[A],{filter:{event:U,schema:V,table:B,filter:H}}=k,W=_&&_[A];if(W&&W.event===U&&W.schema===V&&W.table===B&&W.filter===H)R.push(Object.assign(Object.assign({},k),{id:W.id}));else{this.unsubscribe(),this.state=lt.errored,e?.(On.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=R,e&&e(On.SUBSCRIBED);return}}).receive("error",_=>{this.state=lt.errored,e?.(On.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(_).join(", ")||"error")))}).receive("timeout",()=>{e?.(On.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,a){return this.state===lt.joined&&e===lo.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,s,a)}async httpSend(e,s,a={}){var o;const l=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(s==null)return Promise.reject("Payload is required for httpSend()");const d={method:"POST",headers:{Authorization:l,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:s,private:this.private}]})},f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(o=a.timeout)!==null&&o!==void 0?o:this.timeout);if(f.status===202)return{success:!0};let m=f.statusText;try{const p=await f.json();m=p.error||p.message||m}catch{}return Promise.reject(new Error(m))}async send(e,s={}){var a,o;if(!this._canPush()&&e.type==="broadcast"){const{event:l,payload:d}=e,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:d,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);return await((o=p.body)===null||o===void 0?void 0:o.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var d,f,m;const p=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((m=(f=(d=this.params)===null||d===void 0?void 0:d.config)===null||f===void 0?void 0:f.broadcast)===null||m===void 0)&&m.ack)&&l("ok"),p.receive("ok",()=>l("ok")),p.receive("error",()=>l("error")),p.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=lt.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(fn.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(o=>{a=new Ou(this,fn.leave,{},e),a.receive("ok",()=>{s(),o("ok")}).receive("timeout",()=>{s(),o("timed out")}).receive("error",()=>{o("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=lt.closed,this.bindings={}}async _fetchWithTimeout(e,s,a){const o=new AbortController,l=setTimeout(()=>o.abort(),a),d=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:o.signal}));return clearTimeout(l),d}_push(e,s,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Ou(this,e,s,a);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Lw){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(e,s,a){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,a){var o,l;const d=e.toLocaleLowerCase(),{close:f,error:m,leave:p,join:x}=fn;if(a&&[f,m,p,x].indexOf(d)>=0&&a!==this._joinRef())return;let w=this._onMessage(d,s,a);if(s&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(_=>{var N,C,E;return((N=_.filter)===null||N===void 0?void 0:N.event)==="*"||((E=(C=_.filter)===null||C===void 0?void 0:C.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===d}).map(_=>_.callback(w,a)):(l=this.bindings[d])===null||l===void 0||l.filter(_=>{var N,C,E,R,A,k;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in _){const U=_.id,V=(N=_.filter)===null||N===void 0?void 0:N.event;return U&&((C=s.ids)===null||C===void 0?void 0:C.includes(U))&&(V==="*"||V?.toLocaleLowerCase()===((E=s.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const U=(A=(R=_?.filter)===null||R===void 0?void 0:R.event)===null||A===void 0?void 0:A.toLocaleLowerCase();return U==="*"||U===((k=s?.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===d}).map(_=>{if(typeof w=="object"&&"ids"in w){const N=w.data,{schema:C,table:E,commit_timestamp:R,type:A,errors:k}=N;w=Object.assign(Object.assign({},{schema:C,table:E,commit_timestamp:R,eventType:A,new:{},old:{},errors:k}),this._getPayloadRecords(N))}_.callback(w,a)})}_isClosed(){return this.state===lt.closed}_isJoined(){return this.state===lt.joined}_isJoining(){return this.state===lt.joining}_isLeaving(){return this.state===lt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,a){const o=e.toLocaleLowerCase(),l={type:o,filter:s,callback:a};return this.bindings[o]?this.bindings[o].push(l):this.bindings[o]=[l],this}_off(e,s){const a=e.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(o=>{var l;return!(((l=o.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===a&&_d.isEqual(o.filter,s))})),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const a in e)if(e[a]!==s[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(fn.close,{},e)}_onError(e){this._on(fn.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=lt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=Zp(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=Zp(e.columns,e.old_record)),s}}const Lu=()=>{},Fr={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},$w=[1e3,2e3,5e3,1e4],Jw=1e4,Yw=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Kw{constructor(e,s){var a;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Xu,this.transport=null,this.heartbeatIntervalMs=Fr.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Lu,this.ref=0,this.reconnectTimer=null,this.logger=Lu,this.conn=null,this.sendBuffer=[],this.serializer=new qw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let l;return o?l=o:typeof fetch>"u"?l=(...d)=>ea(async()=>{const{default:f}=await Promise.resolve().then(()=>$s);return{default:f}},void 0,import.meta.url).then(({default:f})=>f(...d)).catch(f=>{throw new Error(`Failed to load @supabase/node-fetch: ${f.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):l=fetch,(...d)=>l(...d)},!(!((a=s?.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${e}/${Wu.websocket}`,this.httpEndpoint=S0(e),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Iw.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const s=e.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Pw}))}disconnect(e,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},e?this.conn.close(e,s??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,a){this.logger(e,s,a)}connectionState(){switch(this.conn&&this.conn.readyState){case oo.connecting:return Hs.Connecting;case oo.open:return Hs.Open;case oo.closing:return Hs.Closing;default:return Hs.Closed}}isConnected(){return this.connectionState()===Hs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,s={config:{}}){const a=`realtime:${e}`,o=this.getChannels().find(l=>l.topic===a);if(o)return o;{const l=new _d(`realtime:${e}`,s,this);return this.channels.push(l),l}}push(e){const{topic:s,event:a,payload:o,ref:l}=e,d=()=>{this.encode(e,f=>{var m;(m=this.conn)===null||m===void 0||m.send(f)})};this.log("push",`${s} ${a} (${l})`,o),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Ow,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},Fr.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(a=>a.topic===e&&(a._isJoined()||a._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:a,event:o,payload:l,ref:d}=s,f=d?`(${d})`:"",m=l.status||"";this.log("receive",`${m} ${a} ${o} ${f}`.trim(),l),this.channels.filter(p=>p._isMember(a)).forEach(p=>p._trigger(o,l,d)),this._triggerStateCallbacks("message",s)})}_clearTimer(e){var s;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var s;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(fn.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const a=e.match(/\?/)?"&":"?",o=new URLSearchParams(s);return`${e}${a}${o}`}_workerObjectUrl(e){let s;if(e)s=e;else{const a=new Blob([Yw],{type:"application/javascript"});s=URL.createObjectURL(a)}return s}_setConnectionState(e,s=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(e=null){let s;e?s=e:this.accessToken?s=await this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(a=>{const o={access_token:s,version:Dw};s&&a.updateJoinPayload(o),a.joinedOnce&&a._isJoined()&&a._push(fn.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${e}`,s)})}_triggerStateCallbacks(e,s){try{this.stateChangeCallbacks[e].forEach(a=>{try{a(s)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(a){this.log("error",`error triggering ${e} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new w0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Fr.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var s,a,o,l,d,f,m,p,x;if(this.transport=(s=e?.transport)!==null&&s!==void 0?s:null,this.timeout=(a=e?.timeout)!==null&&a!==void 0?a:Xu,this.heartbeatIntervalMs=(o=e?.heartbeatIntervalMs)!==null&&o!==void 0?o:Fr.HEARTBEAT_INTERVAL,this.worker=(l=e?.worker)!==null&&l!==void 0?l:!1,this.accessToken=(d=e?.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(f=e?.heartbeatCallback)!==null&&f!==void 0?f:Lu,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=e?.reconnectAfterMs)!==null&&m!==void 0?m:(b=>$w[b-1]||Jw),this.encode=(p=e?.encode)!==null&&p!==void 0?p:((b,w)=>w(JSON.stringify(b))),this.decode=(x=e?.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class Sd extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Je(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class Qw extends Sd{constructor(e,s,a){super(e),this.name="StorageApiError",this.status=s,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ed extends Sd{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}const Nd=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...s)=>ea(async()=>{const{default:a}=await Promise.resolve().then(()=>$s);return{default:a}},void 0,import.meta.url).then(({default:a})=>a(...s)):e=fetch,(...s)=>e(...s)},Xw=()=>ae(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ea(()=>Promise.resolve().then(()=>$s),void 0,import.meta.url)).Response:Response}),td=n=>{if(Array.isArray(n))return n.map(s=>td(s));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([s,a])=>{const o=s.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[o]=td(a)}),e},Ww=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},qu=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Zw=(n,e,s)=>ae(void 0,void 0,void 0,function*(){const a=yield Xw();n instanceof a&&!s?.noResolveJson?n.json().then(o=>{const l=n.status||500,d=o?.statusCode||l+"";e(new Qw(qu(o),l,d))}).catch(o=>{e(new ed(qu(o),o))}):e(new ed(qu(n),n))}),e_=(n,e,s,a)=>{const o={method:n,headers:e?.headers||{}};return n==="GET"||!a?o:(Ww(a)?(o.headers=Object.assign({"Content-Type":"application/json"},e?.headers),o.body=JSON.stringify(a)):o.body=a,e?.duplex&&(o.duplex=e.duplex),Object.assign(Object.assign({},o),s))};function yo(n,e,s,a,o,l){return ae(this,void 0,void 0,function*(){return new Promise((d,f)=>{n(s,e_(e,a,o,l)).then(m=>{if(!m.ok)throw m;return a?.noResolveJson?m:m.json()}).then(m=>d(m)).catch(m=>Zw(m,f,a))})})}function mo(n,e,s,a){return ae(this,void 0,void 0,function*(){return yo(n,"GET",e,s,a)})}function dn(n,e,s,a,o){return ae(this,void 0,void 0,function*(){return yo(n,"POST",e,a,o,s)})}function nd(n,e,s,a,o){return ae(this,void 0,void 0,function*(){return yo(n,"PUT",e,a,o,s)})}function t_(n,e,s,a){return ae(this,void 0,void 0,function*(){return yo(n,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),a)})}function Cd(n,e,s,a,o){return ae(this,void 0,void 0,function*(){return yo(n,"DELETE",e,a,o,s)})}class n_{constructor(e,s){this.downloadFn=e,this.shouldThrowOnError=s}then(e,s){return this.execute().then(e,s)}execute(){return ae(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Je(e))return{data:null,error:e};throw e}})}}var N0;class s_{constructor(e,s){this.downloadFn=e,this.shouldThrowOnError=s,this[N0]="BlobDownloadBuilder",this.promise=null}asStream(){return new n_(this.downloadFn,this.shouldThrowOnError)}then(e,s){return this.getPromise().then(e,s)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ae(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Je(e))return{data:null,error:e};throw e}})}}N0=Symbol.toStringTag;const i_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ng={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class a_{constructor(e,s={},a,o){this.shouldThrowOnError=!1,this.url=e,this.headers=s,this.bucketId=a,this.fetch=Nd(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,s,a,o){return ae(this,void 0,void 0,function*(){try{let l;const d=Object.assign(Object.assign({},ng),o);let f=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(d.upsert)});const m=d.metadata;typeof Blob<"u"&&a instanceof Blob?(l=new FormData,l.append("cacheControl",d.cacheControl),m&&l.append("metadata",this.encodeMetadata(m)),l.append("",a)):typeof FormData<"u"&&a instanceof FormData?(l=a,l.append("cacheControl",d.cacheControl),m&&l.append("metadata",this.encodeMetadata(m))):(l=a,f["cache-control"]=`max-age=${d.cacheControl}`,f["content-type"]=d.contentType,m&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(m)))),o?.headers&&(f=Object.assign(Object.assign({},f),o.headers));const p=this._removeEmptyFolders(s),x=this._getFinalPath(p),b=yield(e=="PUT"?nd:dn)(this.fetch,`${this.url}/object/${x}`,l,Object.assign({headers:f},d?.duplex?{duplex:d.duplex}:{}));return{data:{path:p,id:b.Id,fullPath:b.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Je(l))return{data:null,error:l};throw l}})}upload(e,s,a){return ae(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,a)})}uploadToSignedUrl(e,s,a,o){return ae(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),d=this._getFinalPath(l),f=new URL(this.url+`/object/upload/sign/${d}`);f.searchParams.set("token",s);try{let m;const p=Object.assign({upsert:ng.upsert},o),x=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&a instanceof Blob?(m=new FormData,m.append("cacheControl",p.cacheControl),m.append("",a)):typeof FormData<"u"&&a instanceof FormData?(m=a,m.append("cacheControl",p.cacheControl)):(m=a,x["cache-control"]=`max-age=${p.cacheControl}`,x["content-type"]=p.contentType);const b=yield nd(this.fetch,f.toString(),m,{headers:x});return{data:{path:l,fullPath:b.Key},error:null}}catch(m){if(this.shouldThrowOnError)throw m;if(Je(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(e,s){return ae(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e);const o=Object.assign({},this.headers);s?.upsert&&(o["x-upsert"]="true");const l=yield dn(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:o}),d=new URL(this.url+l.url),f=d.searchParams.get("token");if(!f)throw new Sd("No token returned by API");return{data:{signedUrl:d.toString(),path:e,token:f},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Je(a))return{data:null,error:a};throw a}})}update(e,s,a){return ae(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,a)})}move(e,s,a){return ae(this,void 0,void 0,function*(){try{return{data:yield dn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:a?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Je(o))return{data:null,error:o};throw o}})}copy(e,s,a){return ae(this,void 0,void 0,function*(){try{return{data:{path:(yield dn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:a?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Je(o))return{data:null,error:o};throw o}})}createSignedUrl(e,s,a){return ae(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),l=yield dn(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:s},a?.transform?{transform:a.transform}:{}),{headers:this.headers});const d=a?.download?`&download=${a.download===!0?"":a.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${d}`)},{data:l,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Je(o))return{data:null,error:o};throw o}})}createSignedUrls(e,s,a){return ae(this,void 0,void 0,function*(){try{const o=yield dn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),l=a?.download?`&download=${a.download===!0?"":a.download}`:"";return{data:o.map(d=>Object.assign(Object.assign({},d),{signedUrl:d.signedURL?encodeURI(`${this.url}${d.signedURL}${l}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Je(o))return{data:null,error:o};throw o}})}download(e,s){const o=typeof s?.transform<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString(s?.transform||{}),d=l?`?${l}`:"",f=this._getFinalPath(e),m=()=>mo(this.fetch,`${this.url}/${o}/${f}${d}`,{headers:this.headers,noResolveJson:!0});return new s_(m,this.shouldThrowOnError)}info(e){return ae(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const a=yield mo(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:td(a),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Je(a))return{data:null,error:a};throw a}})}exists(e){return ae(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield t_(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Je(a)&&a instanceof ed){const o=a.originalError;if([400,404].includes(o?.status))return{data:!1,error:a}}throw a}})}getPublicUrl(e,s){const a=this._getFinalPath(e),o=[],l=s?.download?`download=${s.download===!0?"":s.download}`:"";l!==""&&o.push(l);const f=typeof s?.transform<"u"?"render/image":"object",m=this.transformOptsToQueryString(s?.transform||{});m!==""&&o.push(m);let p=o.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${a}${p}`)}}}remove(e){return ae(this,void 0,void 0,function*(){try{return{data:yield Cd(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Je(s))return{data:null,error:s};throw s}})}list(e,s,a){return ae(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},i_),s),{prefix:e||""});return{data:yield dn(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},a),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Je(o))return{data:null,error:o};throw o}})}listV2(e,s){return ae(this,void 0,void 0,function*(){try{const a=Object.assign({},e);return{data:yield dn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Je(a))return{data:null,error:a};throw a}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const C0="2.76.1",T0={"X-Client-Info":`storage-js/${C0}`};class o_{constructor(e,s={},a,o){this.shouldThrowOnError=!1;const l=new URL(e);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},T0),s),this.fetch=Nd(a)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return ae(this,void 0,void 0,function*(){try{return{data:yield mo(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Je(e))return{data:null,error:e};throw e}})}getBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:yield mo(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Je(s))return{data:null,error:s};throw s}})}createBucket(e){return ae(this,arguments,void 0,function*(s,a={public:!1}){try{return{data:yield dn(this.fetch,`${this.url}/bucket`,{id:s,name:s,type:a.type,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Je(o))return{data:null,error:o};throw o}})}updateBucket(e,s){return ae(this,void 0,void 0,function*(){try{return{data:yield nd(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Je(a))return{data:null,error:a};throw a}})}emptyBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:yield dn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Je(s))return{data:null,error:s};throw s}})}deleteBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:yield Cd(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Je(s))return{data:null,error:s};throw s}})}}class r_{constructor(e,s={},a){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},T0),s),this.fetch=Nd(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:yield dn(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Je(s))return{data:null,error:s};throw s}})}listBuckets(e){return ae(this,void 0,void 0,function*(){try{const s=new URLSearchParams;e?.limit!==void 0&&s.set("limit",e.limit.toString()),e?.offset!==void 0&&s.set("offset",e.offset.toString()),e?.sortColumn&&s.set("sortColumn",e.sortColumn),e?.sortOrder&&s.set("sortOrder",e.sortOrder),e?.search&&s.set("search",e.search);const a=s.toString(),o=a?`${this.url}/bucket?${a}`:`${this.url}/bucket`,l=yield mo(this.fetch,o,{headers:this.headers});return{data:Array.isArray(l)?l.filter(f=>f.type==="ANALYTICS"):[],error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Je(s))return{data:null,error:s};throw s}})}deleteBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:yield Cd(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Je(s))return{data:null,error:s};throw s}})}}const Td={"X-Client-Info":`storage-js/${C0}`,"Content-Type":"application/json"};class E0 extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Bt(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}class Bu extends E0{constructor(e,s,a){super(e),this.name="StorageVectorsApiError",this.status=s,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class l_ extends E0{constructor(e,s){super(e),this.name="StorageVectorsUnknownError",this.originalError=s}}var sg;(function(n){n.InternalError="InternalError",n.S3VectorConflictException="S3VectorConflictException",n.S3VectorNotFoundException="S3VectorNotFoundException",n.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",n.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",n.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(sg||(sg={}));const Ed=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...s)=>ea(async()=>{const{default:a}=await Promise.resolve().then(()=>$s);return{default:a}},void 0,import.meta.url).then(({default:a})=>a(...s)):e=fetch,(...s)=>e(...s)},c_=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},ig=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),u_=(n,e,s)=>ae(void 0,void 0,void 0,function*(){if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!s?.noResolveJson){const o=n.status||500,l=n;if(typeof l.json=="function")l.json().then(d=>{const f=d?.statusCode||d?.code||o+"";e(new Bu(ig(d),o,f))}).catch(()=>{const d=o+"",f=l.statusText||`HTTP ${o} error`;e(new Bu(f,o,d))});else{const d=o+"",f=l.statusText||`HTTP ${o} error`;e(new Bu(f,o,d))}}else e(new l_(ig(n),n))}),d_=(n,e,s,a)=>{const o={method:n,headers:e?.headers||{}};return a?(c_(a)?(o.headers=Object.assign({"Content-Type":"application/json"},e?.headers),o.body=JSON.stringify(a)):o.body=a,Object.assign(Object.assign({},o),s)):o};function f_(n,e,s,a,o,l){return ae(this,void 0,void 0,function*(){return new Promise((d,f)=>{n(s,d_(e,a,o,l)).then(m=>{if(!m.ok)throw m;if(a?.noResolveJson)return m;const p=m.headers.get("content-type");return!p||!p.includes("application/json")?{}:m.json()}).then(m=>d(m)).catch(m=>u_(m,f,a))})})}function Vt(n,e,s,a,o){return ae(this,void 0,void 0,function*(){return f_(n,"POST",e,a,o,s)})}class h_{constructor(e,s={},a){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Td),s),this.fetch=Ed(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return ae(this,void 0,void 0,function*(){try{return{data:(yield Vt(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Bt(s))return{data:null,error:s};throw s}})}getIndex(e,s){return ae(this,void 0,void 0,function*(){try{return{data:yield Vt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:s},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Bt(a))return{data:null,error:a};throw a}})}listIndexes(e){return ae(this,void 0,void 0,function*(){try{return{data:yield Vt(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Bt(s))return{data:null,error:s};throw s}})}deleteIndex(e,s){return ae(this,void 0,void 0,function*(){try{return{data:(yield Vt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:s},{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Bt(a))return{data:null,error:a};throw a}})}}class m_{constructor(e,s={},a){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Td),s),this.fetch=Ed(a)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return ae(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Vt(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Bt(s))return{data:null,error:s};throw s}})}getVectors(e){return ae(this,void 0,void 0,function*(){try{return{data:yield Vt(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Bt(s))return{data:null,error:s};throw s}})}listVectors(e){return ae(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Vt(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Bt(s))return{data:null,error:s};throw s}})}queryVectors(e){return ae(this,void 0,void 0,function*(){try{return{data:yield Vt(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Bt(s))return{data:null,error:s};throw s}})}deleteVectors(e){return ae(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Vt(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Bt(s))return{data:null,error:s};throw s}})}}class p_{constructor(e,s={},a){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Td),s),this.fetch=Ed(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:(yield Vt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Bt(s))return{data:null,error:s};throw s}})}getBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:yield Vt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Bt(s))return{data:null,error:s};throw s}})}listBuckets(){return ae(this,arguments,void 0,function*(e={}){try{return{data:yield Vt(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Bt(s))return{data:null,error:s};throw s}})}deleteBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:(yield Vt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Bt(s))return{data:null,error:s};throw s}})}}class g_ extends p_{constructor(e,s={}){super(e,s.headers||{},s.fetch)}from(e){return new y_(this.url,this.headers,e,this.fetch)}}class y_ extends h_{constructor(e,s,a,o){super(e,s,o),this.vectorBucketName=a}createIndex(e){const s=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ae(this,void 0,void 0,function*(){return s.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ae(this,arguments,void 0,function*(s={}){return e.listIndexes.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const s=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ae(this,void 0,void 0,function*(){return s.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const s=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ae(this,void 0,void 0,function*(){return s.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new v_(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class v_ extends m_{constructor(e,s,a,o,l){super(e,s,l),this.vectorBucketName=a,this.indexName=o}putVectors(e){const s=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ae(this,void 0,void 0,function*(){return s.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const s=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ae(this,void 0,void 0,function*(){return s.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ae(this,arguments,void 0,function*(s={}){return e.listVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const s=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ae(this,void 0,void 0,function*(){return s.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const s=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ae(this,void 0,void 0,function*(){return s.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class x_ extends o_{constructor(e,s={},a,o){super(e,s,a,o)}from(e){return new a_(this.url,this.headers,e,this.fetch)}get vectors(){return new g_(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new r_(this.url+"/iceberg",this.headers,this.fetch)}}const b_="2.76.1";let ao="";typeof Deno<"u"?ao="deno":typeof document<"u"?ao="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ao="react-native":ao="node";const w_={"X-Client-Info":`supabase-js-${ao}/${b_}`},__={headers:w_},S_={schema:"public"},N_={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},C_={},T_=n=>{let e;return n?e=n:typeof fetch>"u"?e=p0:e=fetch,(...s)=>e(...s)},E_=()=>typeof Headers>"u"?g0:Headers,A_=(n,e,s)=>{const a=T_(s),o=E_();return async(l,d)=>{var f;const m=(f=await e())!==null&&f!==void 0?f:n;let p=new o(d?.headers);return p.has("apikey")||p.set("apikey",n),p.has("Authorization")||p.set("Authorization",`Bearer ${m}`),a(l,Object.assign(Object.assign({},d),{headers:p}))}};function k_(n){return n.endsWith("/")?n:n+"/"}function j_(n,e){var s,a;const{db:o,auth:l,realtime:d,global:f}=n,{db:m,auth:p,realtime:x,global:b}=e,w={db:Object.assign(Object.assign({},m),o),auth:Object.assign(Object.assign({},p),l),realtime:Object.assign(Object.assign({},x),d),storage:{},global:Object.assign(Object.assign(Object.assign({},b),f),{headers:Object.assign(Object.assign({},(s=b?.headers)!==null&&s!==void 0?s:{}),(a=f?.headers)!==null&&a!==void 0?a:{})}),accessToken:async()=>""};return n.accessToken?w.accessToken=n.accessToken:delete w.accessToken,w}function R_(n){const e=n?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(k_(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const A0="2.76.1",Gi=30*1e3,sd=3,Vu=sd*Gi,M_="http://localhost:9999",I_="supabase.auth.token",U_={"X-Client-Info":`gotrue-js/${A0}`},id="X-Supabase-Api-Version",k0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},D_=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,P_=600*1e3;class po extends Error{constructor(e,s,a){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=a}}function ce(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class O_ extends po{constructor(e,s,a){super(e,s,a),this.name="AuthApiError",this.status=s,this.code=a}}function L_(n){return ce(n)&&n.name==="AuthApiError"}class Gs extends po{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class gs extends po{constructor(e,s,a,o){super(e,a,o),this.name=s,this.status=a}}class hs extends gs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function q_(n){return ce(n)&&n.name==="AuthSessionMissingError"}class Li extends gs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class $r extends gs{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Jr extends gs{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function B_(n){return ce(n)&&n.name==="AuthImplicitGrantRedirectError"}class ag extends gs{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ad extends gs{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function Hu(n){return ce(n)&&n.name==="AuthRetryableFetchError"}class og extends gs{constructor(e,s,a){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=a}}class od extends gs{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const nl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),rg=` 	
\r=`.split(""),V_=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<rg.length;e+=1)n[rg[e].charCodeAt(0)]=-2;for(let e=0;e<nl.length;e+=1)n[nl[e].charCodeAt(0)]=e;return n})();function lg(n,e,s){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const a=e.queue>>e.queuedBits-6&63;s(nl[a]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const a=e.queue>>e.queuedBits-6&63;s(nl[a]),e.queuedBits-=6}}function j0(n,e,s){const a=V_[n];if(a>-1)for(e.queue=e.queue<<6|a,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function cg(n){const e=[],s=d=>{e.push(String.fromCodePoint(d))},a={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},l=d=>{z_(d,a,s)};for(let d=0;d<n.length;d+=1)j0(n.charCodeAt(d),o,l);return e.join("")}function H_(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function G_(n,e){for(let s=0;s<n.length;s+=1){let a=n.charCodeAt(s);if(a>55295&&a<=56319){const o=(a-55296)*1024&65535;a=(n.charCodeAt(s+1)-56320&65535|o)+65536,s+=1}H_(a,e)}}function z_(n,e,s){if(e.utf8seq===0){if(n<=127){s(n);return}for(let a=1;a<6;a+=1)if((n>>7-a&1)===0){e.utf8seq=a;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function $i(n){const e=[],s={queue:0,queuedBits:0},a=o=>{e.push(o)};for(let o=0;o<n.length;o+=1)j0(n.charCodeAt(o),s,a);return new Uint8Array(e)}function F_(n){const e=[];return G_(n,s=>e.push(s)),new Uint8Array(e)}function zs(n){const e=[],s={queue:0,queuedBits:0},a=o=>{e.push(o)};return n.forEach(o=>lg(o,s,a)),lg(null,s,a),e.join("")}function $_(n){return Math.round(Date.now()/1e3)+n}function J_(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const qt=()=>typeof window<"u"&&typeof document<"u",Ls={tested:!1,writable:!1},R0=()=>{if(!qt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ls.tested)return Ls.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Ls.tested=!0,Ls.writable=!0}catch{Ls.tested=!0,Ls.writable=!1}return Ls.writable};function Y_(n){const e={},s=new URL(n);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((o,l)=>{e[l]=o})}catch{}return s.searchParams.forEach((a,o)=>{e[o]=a}),e}const M0=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...s)=>ea(async()=>{const{default:a}=await Promise.resolve().then(()=>$s);return{default:a}},void 0,import.meta.url).then(({default:a})=>a(...s)):e=fetch,(...s)=>e(...s)},K_=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",zi=async(n,e,s)=>{await n.setItem(e,JSON.stringify(s))},qs=async(n,e)=>{const s=await n.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},ds=async(n,e)=>{await n.removeItem(e)};class fl{constructor(){this.promise=new fl.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}fl.promiseConstructor=Promise;function Gu(n){const e=n.split(".");if(e.length!==3)throw new od("Invalid JWT structure");for(let a=0;a<e.length;a++)if(!D_.test(e[a]))throw new od("JWT not in base64url format");return{header:JSON.parse(cg(e[0])),payload:JSON.parse(cg(e[1])),signature:$i(e[2]),raw:{header:e[0],payload:e[1]}}}async function Q_(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function X_(n,e){return new Promise((a,o)=>{(async()=>{for(let l=0;l<1/0;l++)try{const d=await n(l);if(!e(l,null,d)){a(d);return}}catch(d){if(!e(l,d)){o(d);return}}})()})}function W_(n){return("0"+n.toString(16)).substr(-2)}function Z_(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=s.length;let o="";for(let l=0;l<56;l++)o+=s.charAt(Math.floor(Math.random()*a));return o}return crypto.getRandomValues(e),Array.from(e,W_).join("")}async function eS(n){const s=new TextEncoder().encode(n),a=await crypto.subtle.digest("SHA-256",s),o=new Uint8Array(a);return Array.from(o).map(l=>String.fromCharCode(l)).join("")}async function tS(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return n;const s=await eS(n);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function qi(n,e,s=!1){const a=Z_();let o=a;s&&(o+="/PASSWORD_RECOVERY"),await zi(n,`${e}-code-verifier`,o);const l=await tS(a);return[l,a===l?"plain":"s256"]}const nS=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function sS(n){const e=n.headers.get(id);if(!e||!e.match(nS))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function iS(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function aS(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const oS=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Bi(n){if(!oS.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function zu(){const n={};return new Proxy(n,{get:(e,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const a=s.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ug(n){return JSON.parse(JSON.stringify(n))}const Vs=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),rS=[502,503,504];async function dg(n){var e;if(!K_(n))throw new ad(Vs(n),0);if(rS.includes(n.status))throw new ad(Vs(n),n.status);let s;try{s=await n.json()}catch(l){throw new Gs(Vs(l),l)}let a;const o=sS(n);if(o&&o.getTime()>=k0["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?a=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(a=s.error_code),a){if(a==="weak_password")throw new og(Vs(s),n.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(a==="session_not_found")throw new hs}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((l,d)=>l&&typeof d=="string",!0))throw new og(Vs(s),n.status,s.weak_password.reasons);throw new O_(Vs(s),n.status||500,a)}const lS=(n,e,s,a)=>{const o={method:n,headers:e?.headers||{}};return n==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),o.body=JSON.stringify(a),Object.assign(Object.assign({},o),s))};async function he(n,e,s,a){var o;const l=Object.assign({},a?.headers);l[id]||(l[id]=k0["2024-01-01"].name),a?.jwt&&(l.Authorization=`Bearer ${a.jwt}`);const d=(o=a?.query)!==null&&o!==void 0?o:{};a?.redirectTo&&(d.redirect_to=a.redirectTo);const f=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",m=await cS(n,e,s+f,{headers:l,noResolveJson:a?.noResolveJson},{},a?.body);return a?.xform?a?.xform(m):{data:Object.assign({},m),error:null}}async function cS(n,e,s,a,o,l){const d=lS(e,a,o,l);let f;try{f=await n(s,Object.assign({},d))}catch(m){throw new ad(Vs(m),0)}if(f.ok||await dg(f),a?.noResolveJson)return f;try{return await f.json()}catch(m){await dg(m)}}function un(n){var e;let s=null;fS(n)&&(s=Object.assign({},n),n.expires_at||(s.expires_at=$_(n.expires_in)));const a=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:s,user:a},error:null}}function fg(n){const e=un(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0)&&(e.data.weak_password=n.weak_password),e}function ms(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function uS(n){return{data:n,error:null}}function dS(n){const{action_link:e,email_otp:s,hashed_token:a,redirect_to:o,verification_type:l}=n,d=Zi(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:e,email_otp:s,hashed_token:a,redirect_to:o,verification_type:l},m=Object.assign({},d);return{data:{properties:f,user:m},error:null}}function hg(n){return n}function fS(n){return n.access_token&&n.refresh_token&&n.expires_in}const Fu=["global","local","others"];class hS{constructor({url:e="",headers:s={},fetch:a}){this.url=e,this.headers=s,this.fetch=M0(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,s=Fu[0]){if(Fu.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Fu.join(", ")}`);try{return await he(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(a){if(ce(a))return{data:null,error:a};throw a}}async inviteUserByEmail(e,s={}){try{return await he(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:ms})}catch(a){if(ce(a))return{data:{user:null},error:a};throw a}}async generateLink(e){try{const{options:s}=e,a=Zi(e,["options"]),o=Object.assign(Object.assign({},a),s);return"newEmail"in a&&(o.new_email=a?.newEmail,delete o.newEmail),await he(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:dS,redirectTo:s?.redirectTo})}catch(s){if(ce(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await he(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ms})}catch(s){if(ce(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,a,o,l,d,f,m;try{const p={nextPage:null,lastPage:0,total:0},x=await he(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(s=e?.page)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:"",per_page:(l=(o=e?.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:hg});if(x.error)throw x.error;const b=await x.json(),w=(d=x.headers.get("x-total-count"))!==null&&d!==void 0?d:0,_=(m=(f=x.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return _.length>0&&(_.forEach(N=>{const C=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(N.split(";")[1].split("=")[1]);p[`${E}Page`]=C}),p.total=parseInt(w)),{data:Object.assign(Object.assign({},b),p),error:null}}catch(p){if(ce(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){Bi(e);try{return await he(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ms})}catch(s){if(ce(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){Bi(e);try{return await he(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:ms})}catch(a){if(ce(a))return{data:{user:null},error:a};throw a}}async deleteUser(e,s=!1){Bi(e);try{return await he(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:ms})}catch(a){if(ce(a))return{data:{user:null},error:a};throw a}}async _listFactors(e){Bi(e.userId);try{const{data:s,error:a}=await he(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:s,error:a}}catch(s){if(ce(s))return{data:null,error:s};throw s}}async _deleteFactor(e){Bi(e.userId),Bi(e.id);try{return{data:await he(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(ce(s))return{data:null,error:s};throw s}}async _listOAuthClients(e){var s,a,o,l,d,f,m;try{const p={nextPage:null,lastPage:0,total:0},x=await he(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(s=e?.page)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:"",per_page:(l=(o=e?.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:hg});if(x.error)throw x.error;const b=await x.json(),w=(d=x.headers.get("x-total-count"))!==null&&d!==void 0?d:0,_=(m=(f=x.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return _.length>0&&(_.forEach(N=>{const C=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(N.split(";")[1].split("=")[1]);p[`${E}Page`]=C}),p.total=parseInt(w)),{data:Object.assign(Object.assign({},b),p),error:null}}catch(p){if(ce(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await he(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(ce(s))return{data:null,error:s};throw s}}async _getOAuthClient(e){try{return await he(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(ce(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await he(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(ce(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(e){try{return await he(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(ce(s))return{data:null,error:s};throw s}}}function mg(n={}){return{getItem:e=>n[e]||null,setItem:(e,s)=>{n[e]=s},removeItem:e=>{delete n[e]}}}const Vi={debug:!!(globalThis&&R0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class I0 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class mS extends I0{}async function pS(n,e,s){Vi.debug;const a=new globalThis.AbortController;return e>0&&setTimeout(()=>{a.abort(),Vi.debug},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async o=>{if(o){Vi.debug;try{return await s()}finally{Vi.debug}}else{if(e===0)throw Vi.debug,new mS(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Vi.debug)try{const l=await globalThis.navigator.locks.query()}catch{}return await s()}}))}function gS(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function U0(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function yS(n){return parseInt(n,16)}function vS(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,a=>a.toString(16).padStart(2,"0")).join("")}function xS(n){var e;const{chainId:s,domain:a,expirationTime:o,issuedAt:l=new Date,nonce:d,notBefore:f,requestId:m,resources:p,scheme:x,uri:b,version:w}=n;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!a)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(d&&d.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${d}`);if(!b)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(w!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${w}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const _=U0(n.address),N=x?`${x}://${a}`:a,C=n.statement?`${n.statement}
`:"",E=`${N} wants you to sign in with your Ethereum account:
${_}

${C}`;let R=`URI: ${b}
Version: ${w}
Chain ID: ${s}${d?`
Nonce: ${d}`:""}
Issued At: ${l.toISOString()}`;if(o&&(R+=`
Expiration Time: ${o.toISOString()}`),f&&(R+=`
Not Before: ${f.toISOString()}`),m&&(R+=`
Request ID: ${m}`),p){let A=`
Resources:`;for(const k of p){if(!k||typeof k!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${k}`);A+=`
- ${k}`}R+=A}return`${E}
${R}`}class at extends Error{constructor({message:e,code:s,cause:a,name:o}){var l;super(e,{cause:a}),this.__isWebAuthnError=!0,this.name=(l=o??(a instanceof Error?a.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=s}}class sl extends at{constructor(e,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:e}),this.name="WebAuthnUnknownError",this.originalError=s}}function bS({error:n,options:e}){var s,a,o;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new at({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((s=l.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new at({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((a=l.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new at({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((o=l.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new at({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new at({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new at({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return l.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new at({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new at({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const d=window.location.hostname;if(D0(d)){if(l.rp.id!==d)return new at({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new at({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new at({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new at({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new at({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function wS({error:n,options:e}){const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new at({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new at({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const a=window.location.hostname;if(D0(a)){if(s.rpId!==a)return new at({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new at({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new at({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new at({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class _S{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const SS=new _S;function NS(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:s,excludeCredentials:a}=n,o=Zi(n,["challenge","user","excludeCredentials"]),l=$i(e).buffer,d=Object.assign(Object.assign({},s),{id:$i(s.id).buffer}),f=Object.assign(Object.assign({},o),{challenge:l,user:d});if(a&&a.length>0){f.excludeCredentials=new Array(a.length);for(let m=0;m<a.length;m++){const p=a[m];f.excludeCredentials[m]=Object.assign(Object.assign({},p),{id:$i(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return f}function CS(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:s}=n,a=Zi(n,["challenge","allowCredentials"]),o=$i(e).buffer,l=Object.assign(Object.assign({},a),{challenge:o});if(s&&s.length>0){l.allowCredentials=new Array(s.length);for(let d=0;d<s.length;d++){const f=s[d];l.allowCredentials[d]=Object.assign(Object.assign({},f),{id:$i(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return l}function TS(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const s=n;return{id:n.id,rawId:n.id,response:{attestationObject:zs(new Uint8Array(n.response.attestationObject)),clientDataJSON:zs(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=s.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function ES(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const s=n,a=n.getClientExtensionResults(),o=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:zs(new Uint8Array(o.authenticatorData)),clientDataJSON:zs(new Uint8Array(o.clientDataJSON)),signature:zs(new Uint8Array(o.signature)),userHandle:o.userHandle?zs(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:a,authenticatorAttachment:(e=s.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function D0(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function pg(){var n,e;return!!(qt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function AS(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new sl("Browser returned unexpected credential type",e)}:{data:null,error:new sl("Empty credential response",e)}}catch(e){return{data:null,error:bS({error:e,options:n})}}}async function kS(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new sl("Browser returned unexpected credential type",e)}:{data:null,error:new sl("Empty credential response",e)}}catch(e){return{data:null,error:wS({error:e,options:n})}}}const jS={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},RS={userVerification:"preferred",hints:["security-key"]};function il(...n){const e=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),s=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),a={};for(const o of n)if(o)for(const l in o){const d=o[l];if(d!==void 0)if(Array.isArray(d))a[l]=d;else if(s(d))a[l]=d;else if(e(d)){const f=a[l];e(f)?a[l]=il(f,d):a[l]=il(d)}else a[l]=d}return a}function MS(n,e){return il(jS,n,e||{})}function IS(n,e){return il(RS,n,e||{})}class US{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:s,friendlyName:a,signal:o},l){try{const{data:d,error:f}=await this.client.mfa.challenge({factorId:e,webauthn:s});if(!d)return{data:null,error:f};const m=o??SS.createNewAbortSignal();if(d.webauthn.type==="create"){const{user:p}=d.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${a}`),p.displayName||(p.displayName=p.name)}switch(d.webauthn.type){case"create":{const p=MS(d.webauthn.credential_options.publicKey,l?.create),{data:x,error:b}=await AS({publicKey:p,signal:m});return x?{data:{factorId:e,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:x}},error:null}:{data:null,error:b}}case"request":{const p=IS(d.webauthn.credential_options.publicKey,l?.request),{data:x,error:b}=await kS(Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:p,signal:m}));return x?{data:{factorId:e,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:x}},error:null}:{data:null,error:b}}}}catch(d){return ce(d)?{data:null,error:d}:{data:null,error:new Gs("Unexpected error in challenge",d)}}}async _verify({challengeId:e,factorId:s,webauthn:a}){return this.client.mfa.verify({factorId:s,challengeId:e,webauthn:a})}async _authenticate({factorId:e,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:o}},l){if(!s)return{data:null,error:new po("rpId is required for WebAuthn authentication")};try{if(!pg())return{data:null,error:new Gs("Browser does not support WebAuthn",null)};const{data:d,error:f}=await this.challenge({factorId:e,webauthn:{rpId:s,rpOrigins:a},signal:o},{request:l});if(!d)return{data:null,error:f};const{webauthn:m}=d;return this._verify({factorId:e,challengeId:d.challengeId,webauthn:{type:m.type,rpId:s,rpOrigins:a,credential_response:m.credential_response}})}catch(d){return ce(d)?{data:null,error:d}:{data:null,error:new Gs("Unexpected error in authenticate",d)}}}async _register({friendlyName:e,rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:o},l){if(!s)return{data:null,error:new po("rpId is required for WebAuthn registration")};try{if(!pg())return{data:null,error:new Gs("Browser does not support WebAuthn",null)};const{data:d,error:f}=await this._enroll({friendlyName:e});if(!d)return await this.client.mfa.listFactors().then(x=>{var b;return(b=x.data)===null||b===void 0?void 0:b.all.find(w=>w.factor_type==="webauthn"&&w.friendly_name===e&&w.status!=="unverified")}).then(x=>x?this.client.mfa.unenroll({factorId:x?.id}):void 0),{data:null,error:f};const{data:m,error:p}=await this._challenge({factorId:d.id,friendlyName:d.friendly_name,webauthn:{rpId:s,rpOrigins:a},signal:o},{create:l});return m?this._verify({factorId:d.id,challengeId:m.challengeId,webauthn:{rpId:s,rpOrigins:a,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:p}}catch(d){return ce(d)?{data:null,error:d}:{data:null,error:new Gs("Unexpected error in register",d)}}}}gS();const DS={url:M_,storageKey:I_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:U_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function gg(n,e,s){return await s()}const Hi={};class go{get jwks(){var e,s;return(s=(e=Hi[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(e){Hi[this.storageKey]=Object.assign(Object.assign({},Hi[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,s;return(s=(e=Hi[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Hi[this.storageKey]=Object.assign(Object.assign({},Hi[this.storageKey]),{cachedAt:e})}constructor(e){var s,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=go.nextInstanceID,go.nextInstanceID+=1,this.instanceID>0&&qt();const o=Object.assign(Object.assign({},DS),e);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new hS({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=M0(o.fetch),this.lock=o.lock||gg,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:qt()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=pS:this.lock=gg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new US(this)},this.persistSession?(o.storage?this.storage=o.storage:R0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=mg(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=mg(this.memoryStorage)),qt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch{}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${A0}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=Y_(window.location.href);let a="none";if(this._isImplicitGrantCallback(s)?a="implicit":await this._isPKCECallback(s)&&(a="pkce"),qt()&&this.detectSessionInUrl&&a!=="none"){const{data:o,error:l}=await this._getSessionFromURL(s,a);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),B_(l)){const m=(e=l.details)===null||e===void 0?void 0:e.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:d,redirectType:f}=o;return this._debug("#_initialize()","detected session in URL",d,"redirect type",f),await this._saveSession(d),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return ce(s)?{error:s}:{error:new Gs("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,a,o;try{const l=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(s=e?.options)===null||s===void 0?void 0:s.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(o=e?.options)===null||o===void 0?void 0:o.captchaToken}},xform:un}),{data:d,error:f}=l;if(f||!d)return{data:{user:null,session:null},error:f};const m=d.session,p=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:p,session:m},error:null}}catch(l){if(ce(l))return{data:{user:null,session:null},error:l};throw l}}async signUp(e){var s,a,o;try{let l;if("email"in e){const{email:x,password:b,options:w}=e;let _=null,N=null;this.flowType==="pkce"&&([_,N]=await qi(this.storage,this.storageKey)),l=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w?.emailRedirectTo,body:{email:x,password:b,data:(s=w?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:w?.captchaToken},code_challenge:_,code_challenge_method:N},xform:un})}else if("phone"in e){const{phone:x,password:b,options:w}=e;l=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:b,data:(a=w?.data)!==null&&a!==void 0?a:{},channel:(o=w?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:w?.captchaToken}},xform:un})}else throw new $r("You must provide either an email or phone number and a password");const{data:d,error:f}=l;if(f||!d)return{data:{user:null,session:null},error:f};const m=d.session,p=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:p,session:m},error:null}}catch(l){if(ce(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithPassword(e){try{let s;if("email"in e){const{email:l,password:d,options:f}=e;s=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:d,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:fg})}else if("phone"in e){const{phone:l,password:d,options:f}=e;s=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:d,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:fg})}else throw new $r("You must provide either an email or phone number and a password");const{data:a,error:o}=s;return o?{data:{user:null,session:null},error:o}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new Li}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:o})}catch(s){if(ce(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,a,o,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;switch(s){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(e){var s,a,o,l,d,f,m,p,x,b,w;let _,N;if("message"in e)_=e.message,N=e.signature;else{const{chain:C,wallet:E,statement:R,options:A}=e;let k;if(qt())if(typeof E=="object")k=E;else{const Y=window;if("ethereum"in Y&&typeof Y.ethereum=="object"&&"request"in Y.ethereum&&typeof Y.ethereum.request=="function")k=Y.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!A?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=E}const U=new URL((s=A?.url)!==null&&s!==void 0?s:window.location.href),V=await k.request({method:"eth_requestAccounts"}).then(Y=>Y).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!V||V.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const B=U0(V[0]);let H=(a=A?.signInWithEthereum)===null||a===void 0?void 0:a.chainId;if(!H){const Y=await k.request({method:"eth_chainId"});H=yS(Y)}const W={domain:U.host,address:B,statement:R,uri:U.href,version:"1",chainId:H,nonce:(o=A?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(d=(l=A?.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&d!==void 0?d:new Date,expirationTime:(f=A?.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(m=A?.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(p=A?.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(x=A?.signInWithEthereum)===null||x===void 0?void 0:x.resources};_=xS(W),N=await k.request({method:"personal_sign",params:[vS(_),B]})}try{const{data:C,error:E}=await he(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:_,signature:N},!((b=e.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:un});if(E)throw E;return!C||!C.session||!C.user?{data:{user:null,session:null},error:new Li}:(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:E})}catch(C){if(ce(C))return{data:{user:null,session:null},error:C};throw C}}async signInWithSolana(e){var s,a,o,l,d,f,m,p,x,b,w,_;let N,C;if("message"in e)N=e.message,C=e.signature;else{const{chain:E,wallet:R,statement:A,options:k}=e;let U;if(qt())if(typeof R=="object")U=R;else{const B=window;if("solana"in B&&typeof B.solana=="object"&&("signIn"in B.solana&&typeof B.solana.signIn=="function"||"signMessage"in B.solana&&typeof B.solana.signMessage=="function"))U=B.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!k?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");U=R}const V=new URL((s=k?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in U&&U.signIn){const B=await U.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},k?.signInWithSolana),{version:"1",domain:V.host,uri:V.href}),A?{statement:A}:null));let H;if(Array.isArray(B)&&B[0]&&typeof B[0]=="object")H=B[0];else if(B&&typeof B=="object"&&"signedMessage"in B&&"signature"in B)H=B;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in H&&"signature"in H&&(typeof H.signedMessage=="string"||H.signedMessage instanceof Uint8Array)&&H.signature instanceof Uint8Array)N=typeof H.signedMessage=="string"?H.signedMessage:new TextDecoder().decode(H.signedMessage),C=H.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in U)||typeof U.signMessage!="function"||!("publicKey"in U)||typeof U!="object"||!U.publicKey||!("toBase58"in U.publicKey)||typeof U.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");N=[`${V.host} wants you to sign in with your Solana account:`,U.publicKey.toBase58(),...A?["",A,""]:[""],"Version: 1",`URI: ${V.href}`,`Issued At: ${(o=(a=k?.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((l=k?.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${k.signInWithSolana.notBefore}`]:[],...!((d=k?.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${k.signInWithSolana.expirationTime}`]:[],...!((f=k?.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${k.signInWithSolana.chainId}`]:[],...!((m=k?.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${k.signInWithSolana.nonce}`]:[],...!((p=k?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${k.signInWithSolana.requestId}`]:[],...!((b=(x=k?.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||b===void 0)&&b.length?["Resources",...k.signInWithSolana.resources.map(H=>`- ${H}`)]:[]].join(`
`);const B=await U.signMessage(new TextEncoder().encode(N),"utf8");if(!B||!(B instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=B}}try{const{data:E,error:R}=await he(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:N,signature:zs(C)},!((w=e.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(_=e.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:un});if(R)throw R;return!E||!E.session||!E.user?{data:{user:null,session:null},error:new Li}:(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),{data:Object.assign({},E),error:R})}catch(E){if(ce(E))return{data:{user:null,session:null},error:E};throw E}}async _exchangeCodeForSession(e){const s=await qs(this.storage,`${this.storageKey}-code-verifier`),[a,o]=(s??"").split("/");try{const{data:l,error:d}=await he(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:a},xform:un});if(await ds(this.storage,`${this.storageKey}-code-verifier`),d)throw d;return!l||!l.session||!l.user?{data:{user:null,session:null,redirectType:null},error:new Li}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign(Object.assign({},l),{redirectType:o??null}),error:d})}catch(l){if(ce(l))return{data:{user:null,session:null,redirectType:null},error:l};throw l}}async signInWithIdToken(e){try{const{options:s,provider:a,token:o,access_token:l,nonce:d}=e,f=await he(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:o,access_token:l,nonce:d,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:un}),{data:m,error:p}=f;return p?{data:{user:null,session:null},error:p}:!m||!m.session||!m.user?{data:{user:null,session:null},error:new Li}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),{data:m,error:p})}catch(s){if(ce(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,a,o,l,d;try{if("email"in e){const{email:f,options:m}=e;let p=null,x=null;this.flowType==="pkce"&&([p,x]=await qi(this.storage,this.storageKey));const{error:b}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(s=m?.data)!==null&&s!==void 0?s:{},create_user:(a=m?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:p,code_challenge_method:x},redirectTo:m?.emailRedirectTo});return{data:{user:null,session:null},error:b}}if("phone"in e){const{phone:f,options:m}=e,{data:p,error:x}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(o=m?.data)!==null&&o!==void 0?o:{},create_user:(l=m?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},channel:(d=m?.channel)!==null&&d!==void 0?d:"sms"}});return{data:{user:null,session:null,messageId:p?.message_id},error:x}}throw new $r("You must provide either an email or phone number.")}catch(f){if(ce(f))return{data:{user:null,session:null},error:f};throw f}}async verifyOtp(e){var s,a;try{let o,l;"options"in e&&(o=(s=e.options)===null||s===void 0?void 0:s.redirectTo,l=(a=e.options)===null||a===void 0?void 0:a.captchaToken);const{data:d,error:f}=await he(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:o,xform:un});if(f)throw f;if(!d)throw new Error("An error occurred on token verification.");const m=d.session,p=d.user;return m?.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),{data:{user:p,session:m},error:null}}catch(o){if(ce(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(e){var s,a,o;try{let l=null,d=null;return this.flowType==="pkce"&&([l,d]=await qi(this.storage,this.storageKey)),await he(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(a=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&a!==void 0?a:void 0}),!((o=e?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:d}),headers:this.headers,xform:uS})}catch(l){if(ce(l))return{data:null,error:l};throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:a}=e;if(a)throw a;if(!s)throw new hs;const{error:o}=await he(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:o}})}catch(e){if(ce(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:a,type:o,options:l}=e,{error:d}=await he(this.fetch,"POST",s,{headers:this.headers,body:{email:a,type:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},redirectTo:l?.emailRedirectTo});return{data:{user:null,session:null},error:d}}else if("phone"in e){const{phone:a,type:o,options:l}=e,{data:d,error:f}=await he(this.fetch,"POST",s,{headers:this.headers,body:{phone:a,type:o,gotrue_meta_security:{captcha_token:l?.captchaToken}}});return{data:{user:null,session:null,messageId:d?.message_id},error:f}}throw new $r("You must provide either an email or phone number and a type")}catch(s){if(ce(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await a,await s()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=s();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await qs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const a=e.expires_at?e.expires_at*1e3-Date.now()<Vu:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",e.expires_at),!a){if(this.userStorage){const d=await qs(this.userStorage,this.storageKey+"-user");d?.user?e.user=d.user:e.user=zu()}if(this.storage.isServer&&e.user){let d=this.suppressGetSessionWarning;e=new Proxy(e,{get:(m,p,x)=>(!d&&p==="user"&&(d=!0,this.suppressGetSessionWarning=!0),Reflect.get(m,p,x))})}return{data:{session:e},error:null}}const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{session:null},error:l}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ms}):await this._useSession(async s=>{var a,o,l;const{data:d,error:f}=s;if(f)throw f;return!(!((a=d.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new hs}:await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(o=d.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0,xform:ms})})}catch(s){if(ce(s))return q_(s)&&(await this._removeSession(),await ds(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async a=>{const{data:o,error:l}=a;if(l)throw l;if(!o.session)throw new hs;const d=o.session;let f=null,m=null;this.flowType==="pkce"&&e.email!=null&&([f,m]=await qi(this.storage,this.storageKey));const{data:p,error:x}=await he(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:f,code_challenge_method:m}),jwt:d.access_token,xform:ms});if(x)throw x;return d.user=p.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),{data:{user:d.user},error:null}})}catch(a){if(ce(a))return{data:{user:null},error:a};throw a}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new hs;const s=Date.now()/1e3;let a=s,o=!0,l=null;const{payload:d}=Gu(e.access_token);if(d.exp&&(a=d.exp,o=a<=s),o){const{data:f,error:m}=await this._callRefreshToken(e.refresh_token);if(m)return{data:{user:null,session:null},error:m};if(!f)return{data:{user:null,session:null},error:null};l=f}else{const{data:f,error:m}=await this._getUser(e.access_token);if(m)throw m;l={access_token:e.access_token,refresh_token:e.refresh_token,user:f.user,token_type:"bearer",expires_in:a-s,expires_at:a},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return{data:{user:l.user,session:l},error:null}}catch(s){if(ce(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var a;if(!e){const{data:d,error:f}=s;if(f)throw f;e=(a=d.session)!==null&&a!==void 0?a:void 0}if(!e?.refresh_token)throw new hs;const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{user:null,session:null},error:l}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(ce(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!qt())throw new Jr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Jr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new ag("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Jr("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ag("No code detected.");const{data:A,error:k}=await this._exchangeCodeForSession(e.code);if(k)throw k;const U=new URL(window.location.href);return U.searchParams.delete("code"),window.history.replaceState(window.history.state,"",U.toString()),{data:{session:A.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:o,access_token:l,refresh_token:d,expires_in:f,expires_at:m,token_type:p}=e;if(!l||!f||!d||!p)throw new Jr("No session defined in URL");const x=Math.round(Date.now()/1e3),b=parseInt(f);let w=x+b;m&&(w=parseInt(m)),(w-x)*1e3<=Gi;const N=w-b;x-N>=120||x-N<0;const{data:C,error:E}=await this._getUser(l);if(E)throw E;const R={provider_token:a,provider_refresh_token:o,access_token:l,expires_in:b,expires_at:w,refresh_token:d,token_type:p,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:R,redirectType:e.type},error:null}}catch(a){if(ce(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await qs(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var a;const{data:o,error:l}=s;if(l)return{error:l};const d=(a=o.session)===null||a===void 0?void 0:a.access_token;if(d){const{error:f}=await this.admin.signOut(d,e);if(f&&!(L_(f)&&(f.status===404||f.status===401||f.status===403)))return{error:f}}return e!=="others"&&(await this._removeSession(),await ds(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=J_(),a={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:a}}}async _emitInitialSession(e){return await this._useSession(async s=>{var a,o;try{const{data:{session:l},error:d}=s;if(d)throw d;await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l)}})}async resetPasswordForEmail(e,s={}){let a=null,o=null;this.flowType==="pkce"&&([a,o]=await qi(this.storage,this.storageKey,!0));try{return await he(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:a,code_challenge_method:o,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(l){if(ce(l))return{data:null,error:l};throw l}}async getUserIdentities(){var e;try{const{data:s,error:a}=await this.getUser();if(a)throw a;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(ce(s))return{data:null,error:s};throw s}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var s;try{const{data:a,error:o}=await this._useSession(async l=>{var d,f,m,p,x;const{data:b,error:w}=l;if(w)throw w;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(d=e.options)===null||d===void 0?void 0:d.redirectTo,scopes:(f=e.options)===null||f===void 0?void 0:f.scopes,queryParams:(m=e.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await he(this.fetch,"GET",_,{headers:this.headers,jwt:(x=(p=b.session)===null||p===void 0?void 0:p.access_token)!==null&&x!==void 0?x:void 0})});if(o)throw o;return qt()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(a?.url),{data:{provider:e.provider,url:a?.url},error:null}}catch(a){if(ce(a))return{data:{provider:e.provider,url:null},error:a};throw a}}async linkIdentityIdToken(e){return await this._useSession(async s=>{var a;try{const{error:o,data:{session:l}}=s;if(o)throw o;const{options:d,provider:f,token:m,access_token:p,nonce:x}=e,b=await he(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(a=l?.access_token)!==null&&a!==void 0?a:void 0,body:{provider:f,id_token:m,access_token:p,nonce:x,link_identity:!0,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:un}),{data:w,error:_}=b;return _?{data:{user:null,session:null},error:_}:!w||!w.session||!w.user?{data:{user:null,session:null},error:new Li}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("USER_UPDATED",w.session)),{data:w,error:_})}catch(o){if(ce(o))return{data:{user:null,session:null},error:o};throw o}})}async unlinkIdentity(e){try{return await this._useSession(async s=>{var a,o;const{data:l,error:d}=s;if(d)throw d;return await he(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0})})}catch(s){if(ce(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const a=Date.now();return await X_(async o=>(o>0&&await Q_(200*Math.pow(2,o-1)),this._debug(s,"refreshing attempt",o),await he(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:un})),(o,l)=>{const d=200*Math.pow(2,o);return l&&Hu(l)&&Date.now()+d-a<Gi})}catch(a){if(this._debug(s,"error",a),ce(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const a=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",a),qt()&&!s.skipBrowserRedirect&&window.location.assign(a),{data:{provider:e,url:a},error:null}}async _recoverAndRefresh(){var e,s;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const o=await qs(this.storage,this.storageKey);if(o&&this.userStorage){let d=await qs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:o.user},await zi(this.userStorage,this.storageKey+"-user",d)),o.user=(e=d?.user)!==null&&e!==void 0?e:zu()}else if(o&&!o.user&&!o.user){const d=await qs(this.storage,this.storageKey+"-user");d&&d?.user?(o.user=d.user,await ds(this.storage,this.storageKey+"-user"),await zi(this.storage,this.storageKey,o)):o.user=zu()}if(this._debug(a,"session from storage",o),!this._isValidSession(o)){this._debug(a,"session is not valid"),o!==null&&await this._removeSession();return}const l=((s=o.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Vu;if(this._debug(a,`session has${l?"":" not"} expired with margin of ${Vu}s`),l){if(this.autoRefreshToken&&o.refresh_token){const{error:d}=await this._callRefreshToken(o.refresh_token);d&&(Hu(d)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:f}=await this._getUser(o.access_token);!f&&d?.user?(o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(d){this._debug(a,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(a,"error",o);return}finally{this._debug(a,"end")}}async _callRefreshToken(e){var s,a;if(!e)throw new hs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new fl;const{data:l,error:d}=await this._refreshAccessToken(e);if(d)throw d;if(!l.session)throw new hs;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const f={data:l.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(l){if(this._debug(o,"error",l),ce(l)){const d={data:null,error:l};return Hu(l)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(d),d}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(l),l}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,s,a=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",s,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:e,session:s});const l=[],d=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(e,s)}catch(m){l.push(m)}});if(await Promise.all(d),l.length>0){for(let f=0;f<l.length;f+=1);throw l[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const s=Object.assign({},e),a=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&s.user&&await zi(this.userStorage,this.storageKey+"-user",{user:s.user});const o=Object.assign({},s);delete o.user;const l=ug(o);await zi(this.storage,this.storageKey,l)}else{const o=ug(s);await zi(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await ds(this.storage,this.storageKey),await ds(this.storage,this.storageKey+"-code-verifier"),await ds(this.storage,this.storageKey+"-user"),this.userStorage&&await ds(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&qt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch{}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Gi);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:a}}=s;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((a.expires_at*1e3-e)/Gi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Gi}ms, refresh threshold is ${sd} ticks`),o<=sd&&await this._callRefreshToken(a.refresh_token)})}catch{}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof I0)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!qt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch{}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,a){const o=[`provider=${encodeURIComponent(s)}`];if(a?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a?.scopes&&o.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[l,d]=await qi(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(d)}`});o.push(f.toString())}if(a?.queryParams){const l=new URLSearchParams(a.queryParams);o.push(l.toString())}return a?.skipBrowserRedirect&&o.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var a;const{data:o,error:l}=s;return l?{data:null,error:l}:await he(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(a=o?.session)===null||a===void 0?void 0:a.access_token})})}catch(s){if(ce(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var a,o;const{data:l,error:d}=s;if(d)return{data:null,error:d};const f=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:m,error:p}=await he(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(a=l?.session)===null||a===void 0?void 0:a.access_token});return p?{data:null,error:p}:(e.factorType==="totp"&&m.type==="totp"&&(!((o=m?.totp)===null||o===void 0)&&o.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),{data:m,error:null})})}catch(s){if(ce(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var a;const{data:o,error:l}=s;if(l)return{data:null,error:l};const d=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?TS(e.webauthn.credential_response):ES(e.webauthn.credential_response)})}:{code:e.code}),{data:f,error:m}=await he(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:d,headers:this.headers,jwt:(a=o?.session)===null||a===void 0?void 0:a.access_token});return m?{data:null,error:m}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),{data:f,error:m})})}catch(s){if(ce(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var a;const{data:o,error:l}=s;if(l)return{data:null,error:l};const d=await he(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(a=o?.session)===null||a===void 0?void 0:a.access_token});if(d.error)return d;const{data:f}=d;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:NS(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:CS(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(ce(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:a}=await this._challenge({factorId:e.factorId});return a?{data:null,error:a}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){var e;const{data:{user:s},error:a}=await this.getUser();if(a)return{data:null,error:a};const o={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=s?.factors)!==null&&e!==void 0?e:[])o.all.push(l),l.status==="verified"&&o[l.factor_type].push(l);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,a;const{data:{session:o},error:l}=e;if(l)return{data:null,error:l};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=Gu(o.access_token);let f=null;d.aal&&(f=d.aal);let m=f;((a=(s=o.user.factors)===null||s===void 0?void 0:s.filter(b=>b.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(m="aal2");const x=d.amr||[];return{data:{currentLevel:f,nextLevel:m,currentAuthenticationMethods:x},error:null}}))}async fetchJwk(e,s={keys:[]}){let a=s.keys.find(f=>f.kid===e);if(a)return a;const o=Date.now();if(a=this.jwks.keys.find(f=>f.kid===e),a&&this.jwks_cached_at+P_>o)return a;const{data:l,error:d}=await he(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=o,a=l.keys.find(f=>f.kid===e),!a)?null:a}async getClaims(e,s={}){try{let a=e;if(!a){const{data:_,error:N}=await this.getSession();if(N||!_.session)return{data:null,error:N};a=_.session.access_token}const{header:o,payload:l,signature:d,raw:{header:f,payload:m}}=Gu(a);s?.allowExpired||iS(l.exp);const p=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!p){const{error:_}=await this.getUser(a);if(_)throw _;return{data:{claims:l,header:o,signature:d},error:null}}const x=aS(o.alg),b=await crypto.subtle.importKey("jwk",p,x,!0,["verify"]);if(!await crypto.subtle.verify(x,b,d,F_(`${f}.${m}`)))throw new od("Invalid JWT signature");return{data:{claims:l,header:o,signature:d},error:null}}catch(a){if(ce(a))return{data:null,error:a};throw a}}}go.nextInstanceID=0;const PS=go;class OS extends PS{constructor(e){super(e)}}class LS{constructor(e,s,a){var o,l,d;this.supabaseUrl=e,this.supabaseKey=s;const f=R_(e);if(!s)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",f),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",f),this.storageUrl=new URL("storage/v1",f),this.functionsUrl=new URL("functions/v1",f);const m=`sb-${f.hostname.split(".")[0]}-auth-token`,p={db:S_,realtime:C_,auth:Object.assign(Object.assign({},N_),{storageKey:m}),global:__},x=j_(a??{},p);this.storageKey=(o=x.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(l=x.global.headers)!==null&&l!==void 0?l:{},x.accessToken?(this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(b,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((d=x.auth)!==null&&d!==void 0?d:{},this.headers,x.global.fetch),this.fetch=A_(s,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.rest=new Mw(new URL("rest/v1",f).href,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),this.storage=new x_(this.storageUrl.href,this.headers,this.fetch,a?.storage),x.accessToken||this._listenForAuthEvents()}get functions(){return new _w(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},a={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,s,a)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,s;if(this.accessToken)return await this.accessToken();const{data:a}=await this.auth.getSession();return(s=(e=a.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:a,storage:o,userStorage:l,storageKey:d,flowType:f,lock:m,debug:p},x,b){const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new OS({url:this.authUrl.href,headers:Object.assign(Object.assign({},w),x),storageKey:d,autoRefreshToken:e,persistSession:s,detectSessionInUrl:a,storage:o,userStorage:l,flowType:f,lock:m,debug:p,fetch:b,hasCustomAuthorizationHeader:Object.keys(this.headers).some(_=>_.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Kw(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,a)=>{this._handleTokenChanged(s,"CLIENT",a?.access_token)})}_handleTokenChanged(e,s,a){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==a?(this.changedAccessToken=a,this.realtime.setAuth(a)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const qS=(n,e,s)=>new LS(n,e,s);function BS(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}BS();const VS="https://vuhbxceybywwnwzfsvpg.supabase.co",HS="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ1aGJ4Y2V5Ynl3d253emZzdnBnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE1OTYyNjQsImV4cCI6MjA3NzE3MjI2NH0.dvhx9PtbMv0yBu8OVj36wi5KkQeHzt3wFpEAiyhGIG0",ee=qS(VS,HS),na=n=>({async getAll(){const{data:e,error:s}=await ee.from(n).select("*");if(s)throw s;return e},async getCounts(){const{count:e,error:s}=await ee.from(n).select("*",{count:"exact",head:!0});if(s)throw s;return e||0},async add(e){const{data:s,error:a}=await ee.from(n).insert([e]).select();if(a)throw a;return s[0]},async update(e,s){const{error:a}=await ee.from(n).update(s).eq("id",e);if(a)throw a},async set(e){const{data:s,error:a}=await ee.from(n).select("id").eq("id",e.id).single();if(a&&a.code!=="PGRST116")throw a;if(s){const{error:o}=await ee.from(n).update(e).eq("id",e.id);if(o)throw o}else{const{error:o}=await ee.from(n).insert([e]);if(o)throw o}},async remove(e){const{error:s}=await ee.from(n).delete().eq("id",e);if(s)throw s}}),Ad=na("hostels"),kd=na("news"),jd=na("events"),Rd=na("jobs"),Xr=na("profiles"),co={async sendRequest(n,e,s,a){try{const{data:o,error:l}=await ee.from("connection_requests").insert([{sender_id:n,recipient_id:e,sender_name:s,sender_image:a,status:"pending",created_at:new Date().toISOString()}]).select();if(l)throw l.message?.includes("relation")||l.message?.includes("connection_requests"),l;return{id:o[0].id,senderId:o[0].sender_id,senderName:o[0].sender_name,senderImage:o[0].sender_image,recipientId:o[0].recipient_id,status:o[0].status,createdAt:o[0].created_at,respondedAt:o[0].responded_at}}catch(o){throw o}},async getReceivedRequests(n){try{const{data:e,error:s}=await ee.from("connection_requests").select("*").eq("recipient_id",n).order("created_at",{ascending:!1});if(s){if(s.message?.includes("relation")||s.message?.includes("connection_requests"))return[];throw s}return(e||[]).map(a=>({id:a.id,senderId:a.sender_id,senderName:a.sender_name,senderImage:a.sender_image,recipientId:a.recipient_id,status:a.status,createdAt:a.created_at,respondedAt:a.responded_at}))}catch{return[]}},async getSentRequests(n){try{const{data:e,error:s}=await ee.from("connection_requests").select("*").eq("sender_id",n).order("created_at",{ascending:!1});if(s){if(s.message?.includes("relation")||s.message?.includes("connection_requests"))return[];throw s}return(e||[]).map(a=>({id:a.id,senderId:a.sender_id,senderName:a.sender_name,senderImage:a.sender_image,recipientId:a.recipient_id,status:a.status,createdAt:a.created_at,respondedAt:a.responded_at}))}catch{return[]}},async acceptRequest(n,e,s){try{const{error:a}=await ee.from("connection_requests").update({status:"accepted",responded_at:new Date().toISOString()}).eq("id",n);if(a)throw a.message?.includes("relation")||a.message?.includes("connection_requests"),a;const{error:o}=await ee.from("profiles").update({roommate_status:"roomies"}).eq("id",e),{error:l}=await ee.from("profiles").update({roommate_status:"roomies"}).eq("id",s);if(o||l)throw o||l}catch(a){throw a}},async rejectRequest(n){try{const{error:e}=await ee.from("connection_requests").update({status:"rejected",responded_at:new Date().toISOString()}).eq("id",n);if(e)throw e.message?.includes("relation")||e.message?.includes("connection_requests"),e}catch(e){throw e}},async checkRequestExists(n,e){try{const{data:s,error:a}=await ee.from("connection_requests").select("*").eq("sender_id",n).eq("recipient_id",e).in("status",["pending","accepted"]).single();if(a&&a.code!=="PGRST116"){if(a.message?.includes("relation")||a.message?.includes("connection_requests"))return null;throw a}return s?{id:s.id,senderId:s.sender_id,senderName:s.sender_name,senderImage:s.sender_image,recipientId:s.recipient_id,status:s.status,createdAt:s.created_at,respondedAt:s.responded_at}:null}catch{return null}},async cancelRequest(n){try{const{error:e}=await ee.from("connection_requests").delete().eq("id",n);if(e)throw e.message?.includes("relation")||e.message?.includes("connection_requests"),e}catch(e){throw e}}},Ln={async getAll(){const{data:n,error:e}=await ee.from("student_spotlights").select("*").order("votes",{ascending:!1});if(e)throw e;return n||[]},async add(n){const e={...n,votes:n.votes||0,isWinner:n.isWinner||!1,gender:n.gender||"other"},{data:s,error:a}=await ee.from("student_spotlights").insert([e]).select();if(a)throw a;return s[0]},async update(n,e){const{error:s}=await ee.from("student_spotlights").update(e).eq("id",n);if(s)throw s},async incrementVotes(n){const{data:e}=await ee.from("student_spotlights").select("votes").eq("id",n).single();if(e){const{error:s}=await ee.from("student_spotlights").update({votes:(e.votes||0)+1}).eq("id",n);if(s)throw s}},async remove(n){const{error:e}=await ee.from("student_spotlights").delete().eq("id",n);if(e)throw e},onSpotlightsChange:n=>{const e=ee.channel("public:student_spotlights").on("postgres_changes",{event:"*",schema:"public",table:"student_spotlights"},s=>n(s)).subscribe();return()=>{ee.removeChannel(e)}}},GS={add:async n=>{await Ln.add(n)},update:async n=>{await Ln.update(n.id,n)},remove:async n=>{await Ln.remove(n)},incrementVotes:async n=>{await Ln.incrementVotes(n)},subscribeSpotlights:Ln.onSpotlightsChange},Yr={async checkUserHasVoted(n,e){try{const{data:s,error:a}=await ee.from("spotlight_votes").select("id",{count:"exact",head:!0}).eq("student_spotlight_id",n).eq("user_id",e);return a?(a.code==="42P01"||a.message?.includes("does not exist"),!1):(s?.length??0)>0}catch{return!1}},async hasUserVotedForAny(n){try{const{data:e,error:s}=await ee.from("spotlight_votes").select("id",{count:"exact",head:!0}).eq("user_id",n);return s?(s.code==="42P01"||s.message?.includes("does not exist"),!1):(e?.length??0)>0}catch{return!1}},async addVote(n,e){try{if(await this.checkUserHasVoted(n,e))throw new Error("User has already voted for this student");const{data:a,error:o}=await ee.from("spotlight_votes").insert([{student_spotlight_id:n,user_id:e,timestamp:new Date().toISOString()}]).select();if(o){if(o.code==="42P01"||o.message?.includes("does not exist"))return await Ln.incrementVotes(n),{id:"local-"+Date.now(),student_spotlight_id:n,user_id:e,timestamp:new Date().toISOString()};throw o}return await Ln.incrementVotes(n),a[0]}catch(s){throw s}},async getUserVotes(n){try{const{data:e,error:s}=await ee.from("spotlight_votes").select("student_spotlight_id").eq("user_id",n);return s?s.code==="42P01"||s.message?.includes("does not exist")?[]:[]:(e||[]).map(a=>a.student_spotlight_id)}catch{return[]}},async getVoteCount(n){try{const{count:e,error:s}=await ee.from("spotlight_votes").select("*",{count:"exact",head:!0}).eq("student_spotlight_id",n);return s?(s.code==="42P01"||s.message?.includes("does not exist"),0):e||0}catch{return 0}},async removeVote(n,e){try{const{error:s}=await ee.from("spotlight_votes").delete().eq("student_spotlight_id",n).eq("user_id",e);if(s){if(s.code==="42P01"||s.message?.includes("does not exist"))return;throw s}const a=await this.getVoteCount(n);await Ln.update(n,{votes:a})}catch(s){throw s}}},en={async getAll(){const{data:n,error:e}=await ee.from("confessions").select("*").order("timestamp",{ascending:!1});if(e)throw e;return(n||[]).map(s=>({...s,likes:Number(s.likes)||0,dislikes:Number(s.dislikes)||0}))},async add(n){const e={content:n,timestamp:new Date().toISOString()};let s={...e,likes:0,dislikes:0,is_approved:!1};try{const{data:a,error:o}=await ee.from("confessions").insert([s]).select();if(o)throw o;return a[0]}catch(a){const o=a?.message||"",l=a?.hint||"";if(/dislikes/i.test(l+o)||/expected JSON array/i.test(l+o)||/expected array/i.test(l+o))try{s={...e,likes:[],dislikes:[],is_approved:!1};const{data:d,error:f}=await ee.from("confessions").insert([s]).select();if(f)throw f;return d[0]}catch{try{s={...e,likes:[0],dislikes:[0],is_approved:!1};const{data:f,error:m}=await ee.from("confessions").insert([s]).select();if(m)throw m;return f[0]}catch(f){throw f}}throw a}},async like(n,e,s){e==="like"&&ee.rpc;const{data:a,error:o}=await ee.from("confessions").select("*").eq("id",n).single();if(o)throw o;let{likes:l=0,dislikes:d=0}=a;l=Number(l)||0,d=Number(d)||0,e==="like"?(l=Math.max(0,l-1),e=null):e==="dislike"?(d=Math.max(0,d-1),l=l+1,e="like"):(l=l+1,e="like");const{error:f}=await ee.from("confessions").update({likes:l,dislikes:d}).eq("id",n);if(f)throw f;return{likes:l,dislikes:d,userLikeStatus:e}},async dislike(n,e){const{data:s,error:a}=await ee.from("confessions").select("*").eq("id",n).single();if(a)throw a;let{likes:o=0,dislikes:l=0}=s;o=Number(o)||0,l=Number(l)||0,e==="dislike"?(l=Math.max(0,l-1),e=null):e==="like"?(o=Math.max(0,o-1),l=l+1,e="dislike"):(l=l+1,e="dislike");const{error:d}=await ee.from("confessions").update({likes:o,dislikes:l}).eq("id",n);if(d)throw d;return{likes:o,dislikes:l,userLikeStatus:e}},async addComment(n,e){const s={confession_id:n,content:e.content,user_name:e.userName||"Anonymous",timestamp:new Date().toISOString()},{data:a,error:o}=await ee.from("confession_comments").insert([s]).select();if(o)throw o;return a[0]},async getPending(){const{data:n,error:e}=await ee.from("confessions").select("*").eq("is_approved",!1).order("timestamp",{ascending:!0});if(e)throw e;return(n||[]).map(s=>({...s,likes:Number(s.likes)||0,dislikes:Number(s.dislikes)||0}))},async getApproved(){const{data:n,error:e}=await ee.from("confessions").select("*").eq("is_approved",!0).order("timestamp",{ascending:!1});if(e)throw e;return(n||[]).map(s=>({...s,likes:Number(s.likes)||0,dislikes:Number(s.dislikes)||0}))},async approve(n,e){const{error:s}=await ee.from("confessions").update({is_approved:!0,approved_by:e,approved_at:new Date().toISOString()}).eq("id",n);if(s)throw s},async reject(n,e){const{error:s}=await ee.from("confessions").delete().eq("id",n);if(s)throw s},onConfessionsChange:n=>{const e=ee.channel("public:confessions").on("postgres_changes",{event:"*",schema:"public",table:"confessions"},s=>n(s)).subscribe();return()=>{ee.removeChannel(e)}},onCommentsChange:n=>{const e=ee.channel("public:confession_comments").on("postgres_changes",{event:"*",schema:"public",table:"confession_comments"},s=>n(s)).subscribe();return()=>{ee.removeChannel(e)}}},so={add:async n=>{await en.add(n)},remove:async n=>{const{error:e}=await ee.from("confessions").delete().eq("id",n);if(e)throw e},like:async(n,e)=>{await en.like(n,e)},dislike:async(n,e)=>{await en.dislike(n,e)},addComment:async(n,e,s)=>{await en.addComment(n,{content:e,userName:s})},getPending:async()=>await en.getPending(),getApproved:async()=>await en.getApproved(),approve:async(n,e)=>{await en.approve(n,e)},reject:async(n,e)=>{await en.reject(n,e)},subscribeConfessions:en.onConfessionsChange,subscribeComments:en.onCommentsChange},vo=n=>({add:async e=>{await n.add(e)},update:async e=>{await n.update(e.id,e)},remove:async e=>{await n.remove(e)}}),P0=na("student_deals"),zS=vo(Ad),FS=vo(kd),$S=vo(jd),JS=vo(Rd),YS=vo(P0),O0=({event:n,onClose:e})=>{const s=Array.isArray(n.contacts)?n.contacts:[];return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto relative animate-scale-up",children:[c.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-white hover:text-unistay-yellow transition-colors z-10 bg-unistay-navy rounded-full w-10 h-10 flex items-center justify-center","aria-label":"Close modal",children:c.jsx("i",{className:"fas fa-times text-xl"})}),c.jsxs("div",{className:"w-full h-96 relative",children:[c.jsx("img",{src:n.imageUrl,alt:n.title,className:"w-full h-full object-cover"}),c.jsxs("div",{className:"absolute top-6 left-6 bg-unistay-yellow text-unistay-navy text-center rounded-xl px-4 py-2 shadow-lg",children:[c.jsx("p",{className:"font-extrabold text-3xl",children:n.day}),c.jsx("p",{className:"font-bold text-lg leading-tight",children:n.month})]})]}),c.jsxs("div",{className:"p-8",children:[c.jsx("h2",{className:"text-3xl font-bold text-unistay-navy mb-4",children:n.title}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[c.jsx("i",{className:"fas fa-map-marker-alt text-unistay-yellow text-xl w-6"}),c.jsx("span",{children:n.location})]}),c.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[c.jsx("i",{className:"fas fa-calendar text-unistay-yellow text-xl w-6"}),c.jsx("span",{children:n.date})]}),n.time&&c.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[c.jsx("i",{className:"fas fa-clock text-unistay-yellow text-xl w-6"}),c.jsx("span",{children:n.time})]}),c.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[c.jsx("i",{className:"fas fa-ticket-alt text-unistay-yellow text-xl w-6"}),c.jsx("span",{children:n.price||"Free Entry"})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"font-bold text-lg text-unistay-navy",children:"Contact Information"}),c.jsxs("div",{className:"space-y-3 text-gray-600",children:[s.length>0&&c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"font-medium text-unistay-navy",children:"Contact Persons:"}),s.map((a,o)=>c.jsxs("div",{className:"flex items-center gap-3 ml-4",children:[c.jsx("i",{className:"fas fa-user text-unistay-yellow text-lg w-5"}),c.jsx("span",{children:a})]},o))]}),n.phone&&c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("i",{className:"fas fa-phone text-unistay-yellow text-xl w-6"}),c.jsx("a",{href:`tel:${n.phone}`,className:"hover:text-unistay-navy transition-colors",children:n.phone})]}),n.email&&c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("i",{className:"fas fa-envelope text-unistay-yellow text-xl w-6"}),c.jsx("a",{href:`mailto:${n.email}`,className:"hover:text-unistay-navy transition-colors",children:n.email})]}),s.length===0&&!n.phone&&!n.email&&c.jsx("p",{className:"text-gray-500 italic",children:"No contact information provided"})]})]})]}),n.description?c.jsxs("div",{className:"border-t pt-8",children:[c.jsx("h3",{className:"font-bold text-lg text-unistay-navy mb-4",children:"About the Event"}),c.jsx("p",{className:"text-gray-600 whitespace-pre-line leading-relaxed",children:n.description})]}):c.jsx("div",{className:"border-t pt-8",children:c.jsx("p",{className:"text-gray-500 italic",children:"No description provided"})}),c.jsxs("div",{className:"flex flex-wrap gap-4 mt-8 pt-8 border-t",children:[n.phone&&c.jsxs("a",{href:`tel:${n.phone}`,className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-opacity-90 transition-colors flex items-center gap-2",children:[c.jsx("i",{className:"fas fa-phone"}),"Call Now"]}),n.email&&c.jsxs("a",{href:`mailto:${n.email}?subject=Regarding: ${n.title}`,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-opacity-90 transition-colors flex items-center gap-2",children:[c.jsx("i",{className:"fas fa-envelope"}),"Send Email"]}),n.price&&n.price!=="Free Entry"&&c.jsxs("div",{className:"bg-unistay-yellow text-unistay-navy px-6 py-3 rounded-lg flex items-center gap-2",children:[c.jsx("i",{className:"fas fa-ticket-alt"}),"Entry Fee: ",n.price]}),c.jsx("button",{onClick:e,className:"bg-gray-100 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-200 transition-colors ml-auto",children:"Close"})]})]})]})})},L0=n=>{document.querySelectorAll('meta[property^="og:"], meta[name^="twitter:"]').forEach(o=>{(o.getAttribute("property")!=="og:type"||o.getAttribute("name")!=="twitter:card")&&o.remove()});const s=n.imageUrl.replace("/100/100","/800/600");[{property:"og:title",content:n.title},{property:"og:description",content:n.title},{property:"og:image",content:s},{property:"og:image:width",content:"800"},{property:"og:image:height",content:"600"},{property:"og:image:alt",content:n.title},{property:"og:url",content:`${window.location.origin}?view=newsArticle&articleId=${n.id}`},{property:"og:type",content:"article"},{name:"twitter:card",content:"summary_large_image"},{name:"twitter:title",content:n.title},{name:"twitter:description",content:n.title},{name:"twitter:image",content:s},{name:"description",content:n.title}].forEach(({property:o,name:l,content:d})=>{let f=document.querySelector(o?`meta[property="${o}"]`:`meta[name="${l}"]`);f||(f=document.createElement("meta"),o?f.setAttribute("property",o):f.setAttribute("name",l),document.head.appendChild(f)),f.setAttribute("content",d)}),KS(s),document.title=`${n.title} - UniStay`},KS=n=>{document.querySelectorAll('link[rel*="icon"]').forEach(o=>o.remove()),["16x16","32x32","96x96"].forEach(o=>{const l=document.createElement("link");l.rel="icon",l.type="image/png",l.sizes=o,l.href=n,document.head.appendChild(l)});const a=document.createElement("link");a.rel="apple-touch-icon",a.href=n,document.head.appendChild(a)},q0=()=>{document.title="UniStay - Find Your Perfect Student Home",[{property:"og:title",content:"UniStay - Find Your Perfect Student Home"},{property:"og:description",content:"Find your perfect student accommodation at UniStay"},{property:"og:type",content:"website"},{property:"og:image",content:`${window.location.origin}/images/hostels/unistayLogo.png`},{name:"twitter:card",content:"summary_large_image"},{name:"twitter:title",content:"UniStay - Find Your Perfect Student Home"},{name:"twitter:description",content:"Find your perfect student accommodation at UniStay"},{name:"description",content:"Find your perfect student accommodation at UniStay"}].forEach(({property:e,name:s,content:a})=>{let o=document.querySelector(e?`meta[property="${e}"]`:`meta[name="${s}"]`);o||(o=document.createElement("meta"),e?o.setAttribute("property",e):o.setAttribute("name",s),document.head.appendChild(o)),o.setAttribute("content",a)}),QS()},QS=()=>{document.querySelectorAll('link[rel*="icon"]').forEach(a=>a.remove());const e=document.createElement("link");e.rel="icon",e.type="image/png",e.href="/images/hostels/unistayLogo.png",document.head.appendChild(e);const s=document.createElement("link");s.rel="apple-touch-icon",s.href="/images/hostels/unistayLogo.png",document.head.appendChild(s)},XS=({news:n,onClose:e})=>{const[s,a]=G.useState(!1),o=G.useCallback(m=>{m.key==="Escape"&&e()},[e]);G.useEffect(()=>(document.addEventListener("keydown",o),n&&L0(n),()=>{document.removeEventListener("keydown",o),q0()}),[o,n]);const l=m=>{if(!m)return"";const p=m.split(/\n\n+/).filter(b=>b.trim()),x=[];return p.forEach(b=>{const w=b.split(/(\[INLINE_IMAGE:[^\]]+\])/);let _="";w.forEach((N,C)=>{if(N.startsWith("[INLINE_IMAGE:")){const E=N.slice(14,-1);_.trim()&&(x.push(`<p class="text-gray-600 leading-relaxed mb-4">${_}</p>`),_=""),x.push(`<div class="my-6 flex justify-center"><img src="${E}" alt="Article image" class="max-w-full h-auto rounded-lg shadow-md max-h-96" /></div>`)}else if(N.trim()){let E=N.replace(/([^>])</g,"$1&lt;").replace(/([^>])>/g,"$1&gt;").replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>").replace(/\*([^*]+)\*/g,"<em>$1</em>").replace(/\n/g,'<br class="mb-2" />');_+=E}}),_.trim()&&x.push(`<p class="text-gray-600 leading-relaxed mb-4">${_}</p>`)}),x.join("")},d=m=>{if(!n)return;const x=`${window.location.origin}/article/${n.id}`,b=encodeURIComponent(x),w=encodeURIComponent(n.title),_={twitter:`https://twitter.com/intent/tweet?text=${w}&url=${b}`,facebook:`https://www.facebook.com/sharer/sharer.php?u=${b}`,linkedin:`https://www.linkedin.com/shareArticle?mini=true&url=${b}&title=${w}`,whatsapp:`https://api.whatsapp.com/send?text=${w}%20${b}`};window.open(_[m],"_blank","noopener,noreferrer")},f=()=>{if(!n)return;const p=`${window.location.origin}/article/${n.id}`;navigator.clipboard.writeText(p).then(()=>{a(!0),setTimeout(()=>a(!1),2e3)}).catch(()=>{const x=document.createElement("textarea");x.value=p,document.body.appendChild(x),x.select(),document.execCommand("copy"),document.body.removeChild(x),a(!0),setTimeout(()=>a(!1),2e3)})};return n?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto relative animate-scale-up",children:[c.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700 transition-colors","aria-label":"Close modal",children:c.jsx("i",{className:"fas fa-times text-xl"})}),c.jsx("div",{className:"w-full h-64 sm:h-80 relative",children:c.jsx("img",{src:n.imageUrl.replace("/100/100","/800/600"),alt:n.title,className:"w-full h-full object-cover"})}),c.jsxs("div",{className:"p-6 sm:p-8",children:[c.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500 mb-4",children:[c.jsx("p",{children:n.timestamp?qn(n.timestamp):"Recently posted"}),c.jsxs("p",{children:["Source: ",n.source]})]}),c.jsx("h2",{className:"text-3xl font-bold text-unistay-navy mb-6",children:n.title}),c.jsx("div",{className:"prose prose-lg max-w-none",children:c.jsx("div",{className:"space-y-4",dangerouslySetInnerHTML:{__html:l(n.description)}})}),c.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-500",children:"Share this article:"}),c.jsxs("div",{className:"flex gap-4 mt-2",children:[c.jsx("button",{onClick:()=>d("twitter"),className:"text-gray-600 hover:text-[#1DA1F2] transition-colors","aria-label":"Share on Twitter",children:c.jsx("i",{className:"fab fa-twitter"})}),c.jsx("button",{onClick:()=>d("facebook"),className:"text-gray-600 hover:text-[#4267B2] transition-colors","aria-label":"Share on Facebook",children:c.jsx("i",{className:"fab fa-facebook"})}),c.jsx("button",{onClick:()=>d("linkedin"),className:"text-gray-600 hover:text-[#0077b5] transition-colors","aria-label":"Share on LinkedIn",children:c.jsx("i",{className:"fab fa-linkedin"})}),c.jsx("button",{onClick:()=>d("whatsapp"),className:"text-gray-600 hover:text-[#25D366] transition-colors","aria-label":"Share on WhatsApp",children:c.jsx("i",{className:"fab fa-whatsapp"})}),c.jsx("button",{onClick:f,className:`transition-colors ${s?"text-green-500":"text-gray-600 hover:text-unistay-navy"}`,"aria-label":"Copy link",title:s?"Link copied!":"Copy link",children:c.jsx("i",{className:`fas ${s?"fa-check":"fa-link"}`})})]})]}),c.jsxs("button",{onClick:e,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-2 px-6 rounded-lg transition-colors flex items-center gap-2","aria-label":"Close modal",children:[c.jsx("i",{className:"fas fa-times"}),"Close"]})]})})]})]})}):null},WS=({items:n,onNavigateToBlog:e,onSelectNews:s})=>{const a=Gy(n).slice(0,6);return c.jsx("div",{className:"space-y-4",children:a.map(o=>c.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow",children:[c.jsx("img",{src:o.imageUrl,alt:o.title,className:"w-20 h-20 rounded-lg object-cover flex-shrink-0"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-bold text-unistay-navy",children:o.title}),c.jsxs("div",{className:"flex justify-between items-center mt-2",children:[c.jsx("p",{className:"text-xs text-gray-400",children:o.timestamp?qn(o.timestamp):"Recently"}),c.jsxs("p",{className:"text-xs text-gray-400",children:["Source: ",o.source]})]}),c.jsxs("button",{onClick:()=>s?s(o):e(),className:"mt-2 text-sm font-semibold text-unistay-yellow hover:text-unistay-navy transition-colors",children:["Read Full Article ",c.jsx("i",{className:"fas fa-arrow-right ml-1"})]})]})]},o.id))})},ZS=({items:n,onSelectEvent:e})=>{const[s,a]=$e.useState(null),o=[...n].sort((l,d)=>{const f=l.timestamp,m=d.timestamp,p=f?new Date(f).getTime():l.date?new Date(l.date).getTime():0;return(m?new Date(m).getTime():d.date?new Date(d.date).getTime():0)-p}).slice(0,6);return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:o.map((l,d)=>c.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden group transform hover:-translate-y-2 transition-transform duration-300",style:{animation:"fade-in-up 0.5s ease-out forwards",animationDelay:`${d*100}ms`},children:[c.jsxs("div",{className:"relative cursor-pointer",onClick:()=>a(l.imageUrl),children:[c.jsx("img",{src:l.imageUrl,alt:l.title,className:"h-56 w-full object-cover group-hover:opacity-75 transition-opacity duration-300"}),c.jsxs("div",{className:"absolute top-4 left-4 bg-unistay-yellow text-unistay-navy text-center rounded-lg px-4 py-2 shadow-lg",children:[c.jsx("p",{className:"font-extrabold text-2xl",children:l.day}),c.jsx("p",{className:"font-bold text-sm leading-tight",children:l.month})]})]}),c.jsxs("div",{className:"p-5",children:[c.jsx("h3",{className:"font-bold text-xl text-unistay-navy mb-2 group-hover:text-unistay-yellow transition-colors",children:l.title}),c.jsxs("p",{className:"text-sm text-gray-600",children:[c.jsx("i",{className:"fas fa-calendar-alt text-gray-400 mr-2"}),l.date]}),c.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[c.jsx("i",{className:"fas fa-map-marker-alt text-gray-400 mr-2"}),l.location]}),c.jsx("button",{onClick:()=>e?.(l),className:"mt-4 w-full bg-unistay-navy text-white font-semibold py-2 rounded-lg hover:bg-opacity-80 transition-all transform hover:scale-105",children:"More Info"})]})]},l.id))}),s&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4",onClick:()=>a(null),children:c.jsxs("div",{className:"relative max-w-4xl max-h-[90vh] flex items-center justify-center",onClick:l=>l.stopPropagation(),children:[c.jsx("img",{src:s,alt:"Full view",className:"max-w-full max-h-[90vh] object-contain rounded-lg"}),c.jsx("button",{onClick:()=>a(null),className:"absolute top-4 right-4 bg-white rounded-full w-10 h-10 flex items-center justify-center hover:bg-gray-200 transition-colors shadow-lg",children:c.jsx("i",{className:"fas fa-times text-lg text-gray-800"})})]})})]})},eN=({items:n})=>c.jsx("div",{className:"space-y-4",children:n.slice(0,6).map(e=>c.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow",children:[c.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0",children:c.jsx("img",{src:e.imageUrl,alt:e.company,className:"w-12 h-12 object-contain"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-bold text-unistay-navy",children:e.title}),c.jsx("p",{className:"text-sm text-gray-600",children:e.company})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("p",{className:"text-sm text-gray-500",children:"Apply by"}),c.jsx("p",{className:"font-semibold text-unistay-navy",children:e.deadline})]})]},e.id))}),tN=({items:n})=>{const[e,s]=$e.useState({}),[a,o]=$e.useState({}),[l,d]=$e.useState(null);$e.useEffect(()=>{const _={};n.forEach(N=>{_[N.id]=0}),s(_)},[n]);const f=_=>_.imageUrls&&_.imageUrls.length>0?_.imageUrls:[_.imageUrl],m=_=>f(_)[e[_.id]||0]||_.imageUrl,p=(_,N)=>{N.stopPropagation();const C=f(n.find(E=>E.id===_));s(E=>({...E,[_]:(E[_]+1)%C.length}))},x=(_,N)=>{N.stopPropagation();const C=f(n.find(E=>E.id===_));s(E=>({...E,[_]:(E[_]-1+C.length)%C.length}))},b=(_,N)=>{o(C=>({...C,[_]:N.touches[0].clientX}))},w=(_,N)=>{if(!a[_])return;const C=N.changedTouches[0].clientX,E=a[_]-C;Math.abs(E)>50&&(E>0?p(_,N):x(_,N)),o(R=>{const A={...R};return delete A[_],A})};return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"overflow-x-auto scrollbar-hide",children:c.jsx("div",{className:"flex gap-6 pb-4 min-w-min",children:n.map(_=>{const N=f(_),C=e[_.id]||0,E=N.length>1;return c.jsxs("div",{className:"flex-shrink-0 w-72 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow overflow-hidden group flex flex-col",children:[c.jsxs("div",{className:"relative h-40 w-full overflow-hidden bg-gray-100 group cursor-pointer",onTouchStart:R=>b(_.id,R),onTouchEnd:R=>w(_.id,R),onClick:()=>d(m(_)),children:[c.jsx("img",{src:m(_),alt:_.title,className:"w-full h-full object-cover transition-opacity duration-300 group-hover:opacity-75"}),E&&c.jsx("button",{onClick:R=>x(_.id,R),className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-80 hover:bg-opacity-100 rounded-full p-1.5 transition-all duration-200 shadow-md z-10","aria-label":"Previous image",children:c.jsx("i",{className:"fas fa-chevron-left text-gray-800 text-sm"})}),E&&c.jsx("button",{onClick:R=>p(_.id,R),className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-80 hover:bg-opacity-100 rounded-full p-1.5 transition-all duration-200 shadow-md z-10","aria-label":"Next image",children:c.jsx("i",{className:"fas fa-chevron-right text-gray-800 text-sm"})}),c.jsxs("div",{className:"absolute top-3 right-3 bg-unistay-yellow text-unistay-navy font-bold px-3 py-1 rounded-full text-sm",children:[_.discount,"% OFF"]}),E&&c.jsxs("div",{className:"absolute bottom-3 left-1/2 transform -translate-x-1/2 bg-black bg-opacity-50 text-white px-2 py-1 rounded-full text-xs font-semibold",children:[C+1," / ",N.length]}),E&&c.jsx("div",{className:"absolute bottom-3 right-3 flex gap-1",children:N.map((R,A)=>c.jsx("button",{onClick:k=>{k.stopPropagation(),s(U=>({...U,[_.id]:A}))},className:`w-2 h-2 rounded-full transition-all ${A===C?"bg-white w-3":"bg-white bg-opacity-50 hover:bg-opacity-75"}`,"aria-label":`Go to image ${A+1}`},A))})]}),c.jsxs("div",{className:"p-4 flex-1 flex flex-col",children:[c.jsx("h3",{className:"font-bold text-lg text-unistay-navy",children:_.title}),c.jsx("p",{className:"text-sm text-gray-600 mt-2 flex-grow",children:_.description}),c.jsx("p",{className:"text-xs text-gray-400 mt-3",children:_.timestamp?qn(_.timestamp):"Recently"}),c.jsx("button",{className:"mt-auto pt-4 w-full bg-unistay-navy text-white font-semibold py-2 px-4 rounded-lg hover:bg-unistay-yellow hover:text-unistay-navy transition-colors",children:"Order Now"})]})]},_.id)})})}),l&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4",onClick:()=>d(null),children:c.jsxs("div",{className:"relative max-w-4xl max-h-[90vh] flex items-center justify-center",onClick:_=>_.stopPropagation(),children:[c.jsx("img",{src:l,alt:"Full view",className:"max-w-full max-h-[90vh] object-contain rounded-lg"}),c.jsx("button",{onClick:()=>d(null),className:"absolute top-4 right-4 bg-white rounded-full w-10 h-10 flex items-center justify-center hover:bg-gray-200 transition-colors shadow-lg",children:c.jsx("i",{className:"fas fa-times text-lg text-gray-800"})})]})})]})},nN=({items:n})=>{const[e,s]=$e.useState(null);return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"overflow-x-auto scrollbar-hide",children:c.jsx("div",{className:"flex gap-4 pb-4 min-w-min",children:n.map(a=>c.jsxs("div",{className:`flex-shrink-0 w-96 p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow border-l-4 ${a.category==="lost"?"border-red-500 bg-red-50":"border-green-500 bg-green-50"}`,children:[c.jsx("img",{src:a.imageUrl,alt:a.title,className:"w-full h-40 rounded-lg object-cover mb-3 cursor-pointer hover:opacity-75 transition-opacity duration-300",onClick:()=>s(a.imageUrl)}),c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("h3",{className:"font-bold text-unistay-navy",children:a.title}),c.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded-full ${a.category==="lost"?"bg-red-200 text-red-800":"bg-green-200 text-green-800"}`,children:a.category==="lost"?"LOST":"FOUND"})]}),c.jsx("p",{className:"text-sm text-gray-600 mb-2",children:a.description}),c.jsxs("p",{className:"text-xs text-gray-400 flex items-center gap-1",children:[c.jsx("i",{className:"fas fa-phone"})," ",a.phone]}),c.jsx("p",{className:"text-xs text-gray-400 mt-2",children:a.timestamp?qn(a.timestamp):"Recently"})]},a.id))})}),e&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4",onClick:()=>s(null),children:c.jsxs("div",{className:"relative max-w-4xl max-h-[90vh] flex items-center justify-center",onClick:a=>a.stopPropagation(),children:[c.jsx("img",{src:e,alt:"Full view",className:"max-w-full max-h-[90vh] object-contain rounded-lg"}),c.jsx("button",{onClick:()=>s(null),className:"absolute top-4 right-4 bg-white rounded-full w-10 h-10 flex items-center justify-center hover:bg-gray-200 transition-colors shadow-lg",children:c.jsx("i",{className:"fas fa-times text-lg text-gray-800"})})]})})]})},sN=({items:n,user:e})=>{const[s,a]=$e.useState({}),[o,l]=$e.useState(new Set),[d,f]=$e.useState(!1),[m,p]=$e.useState(!1),[x,b]=$e.useState(null),[w,_]=$e.useState(!0),[N,C]=$e.useState(null);$e.useEffect(()=>{(async()=>{if(!e){_(!1);return}try{_(!0);const Z=await Yr.getUserVotes(e.id);l(new Set(Z));let X=!1,pe=!1;for(const oe of Z){const D=n.find(Q=>Q.id===oe);D&&(D.gender==="male"?X=!0:D.gender==="female"&&(pe=!0))}f(X),p(pe);const ke={};for(const oe of n)try{const D=await Yr.getVoteCount(oe.id);ke[oe.id]=D}catch{ke[oe.id]=oe.votes||0}a(ke)}catch{const X={};n.forEach(pe=>{X[pe.id]=pe.votes||0}),a(X)}finally{_(!1)}})()},[e,n]);const E=J=>({"123e4567-e89b-12d3-a456-426614174001":"Makerere","123e4567-e89b-12d3-a456-426614174002":"Kyambogo","123e4567-e89b-12d3-a456-426614174003":"MUBS","123e4567-e89b-12d3-a456-426614174004":"UCU","123e4567-e89b-12d3-a456-426614174005":"UMU Nkozi","123e4567-e89b-12d3-a456-426614174006":"KIU","123e4567-e89b-12d3-a456-426614174007":"MUST","123e4567-e89b-12d3-a456-426614174008":"Aga Khan","123e4567-e89b-12d3-a456-426614174009":"Gulu","123e4567-e89b-12d3-a456-426614174010":"Lira","123e4567-e89b-12d3-a456-426614174011":"IUEA"})[J||""]||"University",R=async(J,Z)=>{if(e){if(Z==="male"&&d){alert("You have already voted for a male candidate. You can only vote for one candidate per category.");return}if(Z==="female"&&m){alert("You have already voted for a female candidate. You can only vote for one candidate per category.");return}try{C(J),await Yr.addVote(J,e.id),a(X=>({...X,[J]:(X[J]||0)+1})),l(X=>new Set(X).add(J)),Z==="male"?f(!0):p(!0)}catch(X){alert(X instanceof Error?X.message:"Error voting. Please try again.");const pe=await Yr.getUserVotes(e.id);if(pe.length>0){l(new Set(pe));let ke=!1,oe=!1;for(const D of pe){const Q=n.find(de=>de.id===D);Q&&(Q.gender==="male"?ke=!0:Q.gender==="female"&&(oe=!0))}f(ke),p(oe)}}finally{C(null)}}},A=n.filter(J=>J.gender==="male").sort((J,Z)=>{const X=s[J.id]||J.votes||0;return(s[Z.id]||Z.votes||0)-X}),k=n.filter(J=>J.gender==="female").sort((J,Z)=>{const X=s[J.id]||J.votes||0;return(s[Z.id]||Z.votes||0)-X}),U=A[0],V=k[0],B=A.slice(1),H=k.slice(1),W=({student:J,category:Z})=>c.jsxs("div",{className:`group relative flex-shrink-0 w-96 rounded-2xl overflow-hidden shadow-2xl transform hover:scale-105 transition-all duration-500 ${Z==="male"?"bg-gradient-to-br from-blue-500 to-blue-700":"bg-gradient-to-br from-pink-500 to-pink-700"}`,children:[c.jsxs("div",{className:`absolute top-0 right-0 z-20 flex items-center gap-2 px-6 py-3 rounded-bl-3xl font-bold text-white shadow-lg ${Z==="male"?"bg-blue-700":"bg-pink-700"}`,children:[c.jsx("span",{className:"text-xl",children:Z==="male"?"":""}),c.jsxs("span",{children:["#",Z==="male"?"MCM":"WCW"]})]}),c.jsxs("div",{className:"relative h-72 overflow-hidden",children:[c.jsx("img",{src:J.imageUrl,alt:J.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-0 group-hover:opacity-70 transition-opacity duration-500"})]}),c.jsxs("div",{className:"relative px-8 py-8 bg-white",children:[c.jsxs("div",{className:`absolute -top-6 right-8 flex flex-col items-center justify-center w-16 h-16 rounded-full shadow-lg font-bold text-white transform group-hover:scale-110 transition-transform duration-300 ${Z==="male"?"bg-gradient-to-br from-blue-500 to-blue-600":"bg-gradient-to-br from-pink-500 to-pink-600"}`,children:[c.jsx("span",{className:"text-2xl",children:s[J.id]||J.votes||0}),c.jsx("span",{className:"text-xs",children:"votes"})]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("h3",{className:"text-2xl font-black text-gray-900 mb-1",children:J.name}),c.jsx("p",{className:`text-sm font-semibold mb-2 ${Z==="male"?"text-blue-600":"text-pink-600"}`,children:J.major}),c.jsxs("p",{className:"text-xs text-gray-500 mb-3",children:[c.jsx("i",{className:"fas fa-university mr-1"}),E(J.universityId)]}),c.jsx("p",{className:"text-gray-700 text-sm leading-relaxed line-clamp-2",children:J.bio})]}),c.jsx("div",{className:`my-4 h-1 rounded-full ${Z==="male"?"bg-gradient-to-r from-blue-300 via-blue-500 to-blue-300":"bg-gradient-to-r from-pink-300 via-pink-500 to-pink-300"}`}),c.jsx("div",{className:"flex items-center justify-center",children:c.jsx("span",{className:"text-3xl animate-bounce",children:""})})]})]}),Y=({student:J})=>{const Z=s[J.id]||0,X=J.gender==="male",pe=X?d:m;return o.has(J.id),c.jsxs("div",{className:`group flex-shrink-0 w-80 rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-3 h-full flex flex-col bg-white border-2 ${X?"border-blue-200 hover:border-blue-400":"border-pink-200 hover:border-pink-400"}`,children:[c.jsxs("div",{className:"relative h-56 overflow-hidden bg-gradient-to-br from-gray-200 to-gray-300",children:[c.jsx("img",{src:J.imageUrl,alt:J.name,className:"w-full h-full object-cover group-hover:scale-125 transition-transform duration-500"}),c.jsx("div",{className:`absolute inset-0 opacity-0 group-hover:opacity-40 transition-opacity duration-500 ${X?"bg-gradient-to-t from-blue-600 via-transparent to-transparent":"bg-gradient-to-t from-pink-600 via-transparent to-transparent"}`}),c.jsxs("div",{className:`absolute top-3 right-3 flex items-center gap-1 px-3 py-1 rounded-full text-white font-bold text-sm backdrop-blur-md shadow-lg transform group-hover:scale-110 transition-transform duration-300 ${X?"bg-blue-600/80":"bg-pink-600/80"}`,children:[c.jsx("i",{className:"fas fa-fire text-xs"}),Z]})]}),c.jsxs("div",{className:"flex-1 flex flex-col p-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-blue-600 group-hover:to-pink-600 transition-all duration-300 mb-1",children:J.name}),c.jsx("p",{className:`text-sm font-semibold mb-2 ${X?"text-blue-600":"text-pink-600"}`,children:J.major}),c.jsxs("p",{className:"text-xs text-gray-500 mb-3",children:[c.jsx("i",{className:"fas fa-university mr-1"}),E(J.universityId)]}),c.jsx("p",{className:"text-gray-600 text-sm leading-relaxed line-clamp-3 mb-4 flex-1",children:J.bio}),c.jsxs("div",{className:"flex gap-3",children:[c.jsxs("button",{onClick:()=>b(J),className:"flex-1 py-2 px-3 rounded-lg font-semibold transition-all duration-300 text-sm bg-gray-100 text-gray-700 hover:bg-gray-200 border border-gray-300",children:[c.jsx("i",{className:"fas fa-eye mr-1"}),"View More"]}),c.jsx("button",{onClick:()=>R(J.id,X?"male":"female"),disabled:!e||pe||N===J.id,title:e?pe?`You have already voted for a ${X?"male":"female"} candidate`:"Vote for this student":"Sign in to vote",className:`flex-1 py-2 px-3 rounded-lg font-semibold transition-all duration-300 text-sm flex items-center justify-center gap-1 transform ${e?pe?"bg-gray-200 text-gray-700 cursor-not-allowed":N===J.id?"opacity-70 cursor-not-allowed":X?"bg-gradient-to-r from-blue-500 to-blue-600 text-white hover:from-blue-600 hover:to-blue-700 hover:shadow-lg hover:scale-105":"bg-gradient-to-r from-pink-500 to-pink-600 text-white hover:from-pink-600 hover:to-pink-700 hover:shadow-lg hover:scale-105":"bg-gray-300 text-gray-600 cursor-not-allowed opacity-60"}`,children:N===J.id?c.jsx(Ze,{color:"white",size:"sm"}):c.jsxs(c.Fragment,{children:[c.jsx("i",{className:`fas ${e?pe?"fa-check":"fa-thumbs-up":"fa-lock"}`}),e?pe?"Voted":"Vote":"Sign in"]})})]})]})]})};return c.jsxs("div",{className:"space-y-16",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"mb-12",children:[c.jsx("h3",{className:"text-3xl font-black text-gray-900 mb-3",children:" Man Crush Monday"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-16 h-1 bg-gradient-to-r from-blue-500 via-blue-600 to-blue-500 rounded-full"}),c.jsx("p",{className:"text-gray-600 font-semibold",children:"Vote for your favorite male student"})]})]}),c.jsxs("div",{className:"mb-16",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[c.jsx("h4",{className:"text-2xl font-bold text-gray-900",children:"Current Winner"}),U&&c.jsxs("span",{className:"ml-auto text-sm font-bold bg-gradient-to-r from-blue-500 to-blue-600 text-white px-4 py-2 rounded-full",children:[s[U.id]||U.votes||0," votes"]})]}),U&&c.jsx("div",{className:"flex justify-center",children:c.jsx("div",{children:c.jsx(W,{student:U,category:"male"})},U.id)})]}),B.length>0&&c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[c.jsx("h4",{className:"text-2xl font-bold text-gray-900",children:"Other Nominees"}),c.jsxs("span",{className:"ml-auto text-sm text-white font-bold bg-gray-400 px-4 py-2 rounded-full",children:[B.length," Nominees"]})]}),c.jsx("div",{className:"overflow-x-auto scrollbar-hide",children:c.jsx("div",{className:"flex gap-6 pb-4 min-w-min justify-center mx-auto",children:B.map(J=>c.jsx("div",{children:c.jsx(Y,{student:J})},J.id))})})]})]}),c.jsx("div",{className:"py-12",children:c.jsx("div",{className:"h-1 bg-gradient-to-r from-transparent via-gray-300 to-transparent rounded-full"})}),c.jsxs("div",{children:[c.jsxs("div",{className:"mb-12",children:[c.jsx("h3",{className:"text-3xl font-black text-gray-900 mb-3",children:" Women Crush Wednesday"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-16 h-1 bg-gradient-to-r from-pink-500 via-pink-600 to-pink-500 rounded-full"}),c.jsx("p",{className:"text-gray-600 font-semibold",children:"Vote for your favorite female student"})]})]}),c.jsxs("div",{className:"mb-16",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[c.jsx("h4",{className:"text-2xl font-bold text-gray-900",children:"Current Winner"}),V&&c.jsxs("span",{className:"ml-auto text-sm font-bold bg-gradient-to-r from-pink-500 to-pink-600 text-white px-4 py-2 rounded-full",children:[s[V.id]||V.votes||0," votes"]})]}),V&&c.jsx("div",{className:"flex justify-center",children:c.jsx("div",{children:c.jsx(W,{student:V,category:"female"})},V.id)})]}),H.length>0&&c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[c.jsx("h4",{className:"text-2xl font-bold text-gray-900",children:"Other Nominees"}),c.jsxs("span",{className:"ml-auto text-sm text-white font-bold bg-gray-400 px-4 py-2 rounded-full",children:[H.length," Nominees"]})]}),c.jsx("div",{className:"overflow-x-auto scrollbar-hide",children:c.jsx("div",{className:"flex gap-6 pb-4 min-w-min justify-center mx-auto",children:H.map(J=>c.jsx("div",{children:c.jsx(Y,{student:J})},J.id))})})]})]}),x&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[c.jsx("button",{onClick:()=>b(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700 transition-colors",children:c.jsx("i",{className:"fas fa-times text-2xl"})}),c.jsxs("div",{className:"relative h-80 overflow-hidden bg-gradient-to-br from-gray-200 to-gray-300",children:[c.jsx("img",{src:x.imageUrl,alt:x.name,className:"w-full h-full object-cover"}),c.jsxs("div",{className:`absolute top-4 left-4 flex items-center gap-2 px-4 py-2 rounded-full font-bold text-white shadow-lg ${x.gender==="male"?"bg-blue-700":"bg-pink-700"}`,children:[c.jsx("span",{children:x.gender==="male"?"":""}),c.jsx("span",{children:x.gender==="male"?"Male Student":"Female Student"})]})]}),c.jsxs("div",{className:"p-8 space-y-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-4xl font-black text-gray-900 mb-2",children:x.name}),c.jsx("p",{className:`text-lg font-semibold ${x.gender==="male"?"text-blue-600":"text-pink-600"}`,children:x.major})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[c.jsx("p",{className:"text-sm text-gray-600 font-semibold mb-1",children:"University"}),c.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[c.jsx("i",{className:"fas fa-university mr-2"}),E(x.universityId)]})]}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[c.jsx("p",{className:"text-sm text-gray-600 font-semibold mb-1",children:"Votes"}),c.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[c.jsx("i",{className:"fas fa-fire mr-2"}),s[x.id]||x.votes||0]})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"About"}),c.jsx("p",{className:"text-gray-700 leading-relaxed text-base",children:x.bio})]}),x.interests&&x.interests.length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Interests"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:x.interests.map((J,Z)=>c.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold text-white ${x.gender==="male"?"bg-blue-500":"bg-pink-500"}`,children:J},Z))})]}),c.jsx("button",{onClick:()=>{R(x.id)},disabled:!e||o.has(x.id)||N===x.id,className:`w-full py-4 px-6 rounded-xl font-bold transition-all duration-300 flex items-center justify-center gap-2 text-lg ${e?o.has(x.id)?"bg-gray-200 text-gray-700 cursor-not-allowed":N===x.id?"opacity-70 cursor-not-allowed":x.gender==="male"?"bg-gradient-to-r from-blue-500 to-blue-600 text-white hover:from-blue-600 hover:to-blue-700 hover:shadow-lg":"bg-gradient-to-r from-pink-500 to-pink-600 text-white hover:from-pink-600 hover:to-pink-700 hover:shadow-lg":"bg-gray-300 text-gray-600 cursor-not-allowed opacity-60"}`,children:N===x.id?c.jsxs(c.Fragment,{children:[c.jsx(Ze,{color:o.has(x.id)?"navy":"white",size:"sm"}),"Voting..."]}):c.jsxs(c.Fragment,{children:[c.jsx("i",{className:`fas ${e?o.has(x.id)?"fa-check":"fa-thumbs-up":"fa-lock"}`}),e?o.has(x.id)?"Already Voted":"Vote for this Student":"Sign in to Vote"]})})]})]})})]})},iN=({items:n,user:e,confessionHandler:s})=>{const[a,o]=$e.useState(new Set),[l,d]=$e.useState({}),f=b=>{o(w=>{const _=new Set(w);return _.has(b)?_.delete(b):_.add(b),_})},m=async b=>{const w=l[b]?.trim();if(!(!w||!s))try{await s.addComment(b,w,e?.name||"Anonymous"),d(_=>({..._,[b]:""}))}catch{}},p=async(b,w)=>{if(!(!e||!s))try{await s.like(b,w)}catch{}},x=async(b,w)=>{if(!(!e||!s))try{await s.dislike(b,w)}catch{}};return c.jsx("div",{className:"space-y-4",children:n.map(b=>c.jsxs("div",{className:"p-4 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg shadow-sm hover:shadow-md transition-shadow border border-purple-200",children:[c.jsx("p",{className:"text-gray-800 italic mb-3",children:b.content}),c.jsx("div",{className:"flex items-center justify-between mb-3",children:c.jsx("span",{className:"text-xs text-gray-500",children:b.timestamp?qn(b.timestamp):"Recently"})}),c.jsxs("div",{className:"flex items-center gap-4 pt-3 border-t border-purple-200",children:[c.jsxs("button",{onClick:()=>p(b.id,b.userLikeStatus),disabled:!e||b.userLikeStatus!==null&&b.userLikeStatus!=="like",title:e?b.userLikeStatus==="like"?"Click to undo your like":b.userLikeStatus==="dislike"?"You already reacted with dislike":"Like this confession":"Sign in to react",className:`flex items-center gap-1 text-sm font-semibold transition-colors ${b.userLikeStatus==="like"?"text-green-600 cursor-pointer":e&&b.userLikeStatus===null?"text-gray-600 hover:text-green-600 cursor-pointer":"text-gray-400 cursor-not-allowed opacity-60"}`,children:[c.jsx("i",{className:`fas fa-thumbs-up ${b.userLikeStatus==="like"?"fas":"far"}`}),Number(b.likes)||0]}),c.jsxs("button",{onClick:()=>x(b.id,b.userLikeStatus),disabled:!e||b.userLikeStatus!==null&&b.userLikeStatus!=="dislike",title:e?b.userLikeStatus==="dislike"?"Click to undo your dislike":b.userLikeStatus==="like"?"You already reacted with like":"Dislike this confession":"Sign in to react",className:`flex items-center gap-1 text-sm font-semibold transition-colors ${b.userLikeStatus==="dislike"?"text-red-600 cursor-pointer":e&&b.userLikeStatus===null?"text-gray-600 hover:text-red-600 cursor-pointer":"text-gray-400 cursor-not-allowed opacity-60"}`,children:[c.jsx("i",{className:`fas fa-thumbs-down ${b.userLikeStatus==="dislike"?"fas":"far"}`}),Number(b.dislikes)||0]}),c.jsxs("button",{onClick:()=>f(b.id),className:"flex items-center gap-1 text-sm font-semibold text-gray-600 hover:text-blue-600 transition-colors",children:[c.jsx("i",{className:"fas fa-comment"}),b.comments?.length||0]})]}),a.has(b.id)&&c.jsxs("div",{className:"mt-4 pt-4 border-t border-purple-200 space-y-3",children:[e&&c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",placeholder:"Write a comment...",maxLength:150,value:l[b.id]||"",onChange:w=>d(_=>({..._,[b.id]:w.target.value})),className:"flex-1 px-3 py-2 text-sm border border-purple-300 rounded-lg focus:ring-1 focus:ring-purple-400 focus:border-transparent"}),c.jsx("button",{onClick:()=>m(b.id),disabled:!l[b.id]?.trim(),className:"px-3 py-2 bg-purple-600 text-white text-sm font-semibold rounded-lg hover:bg-purple-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Post"})]}),c.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:b.comments&&b.comments.length>0?b.comments.map(w=>c.jsxs("div",{className:"p-2 bg-white rounded border border-purple-100",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-xs font-semibold text-gray-700",children:w.userName}),c.jsx("span",{className:"text-xs text-gray-500",children:qn(w.timestamp)})]}),c.jsx("p",{className:"text-sm text-gray-700 mt-1",children:w.content})]},w.id)):c.jsx("p",{className:"text-sm text-gray-500 italic text-center py-2",children:"No comments yet. Be the first to comment!"})})]})]},b.id))})},B0=G.forwardRef(({news:n,events:e,jobs:s,universities:a,onNavigateToBlog:o,onNavigateToEvents:l,onNavigateToJobs:d,user:f,onNavigate:m,deals:p=[],lostItems:x=[],studentSpotlights:b=[],confessions:w=[],studentDealsRef:_,studentSpotlightRef:N,confessionHandler:C},E)=>{const[R,A]=G.useState("News"),[k,U]=Wi(),[V,B]=$e.useState(null),[H,W]=$e.useState(null),Y=[{name:"News",icon:"fas fa-newspaper",action:o},{name:"Events",icon:"fas fa-calendar-alt",action:l},{name:"Jobs",icon:"fas fa-briefcase",action:d}],J={News:c.jsx(WS,{items:n,onNavigateToBlog:o,onSelectNews:W}),Events:c.jsx(ZS,{items:e,onSelectEvent:B}),Jobs:c.jsx(eN,{items:s})};return c.jsxs("section",{ref:k,className:"py-16 bg-unistay-bg",children:[c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"text-center mb-12 transition-all duration-1000 opacity-100 translate-y-0",children:[c.jsx("h2",{className:"text-3xl font-bold text-unistay-navy sm:text-4xl",children:"Campus Community Hub"}),c.jsx("p",{className:"mt-4 text-lg text-gray-600",children:"Stay connected with the latest news, events, and job opportunities from your university."})]}),c.jsxs("div",{className:"transition-all duration-700 delay-200 opacity-100",children:[c.jsx("div",{className:"mb-8 flex justify-center border-b-2 border-gray-200",role:"tablist","aria-label":"Community Hub Tabs",children:Y.map(Z=>c.jsxs("button",{onClick:()=>A(Z.name),className:`px-4 sm:px-8 py-4 font-semibold text-lg border-b-4 transition-all duration-300 -mb-0.5 ${R===Z.name?"text-unistay-navy border-unistay-yellow":"text-gray-500 border-transparent hover:text-unistay-navy hover:border-gray-300"}`,role:"tab","aria-selected":R===Z.name,"aria-controls":`panel-${Z.name}`,children:[c.jsx("i",{className:`${Z.icon} mr-2 hidden sm:inline-block`,"aria-hidden":"true"})," ",Z.name]},Z.name))}),c.jsx("div",{className:"relative min-h-[400px]",children:Object.entries(J).map(([Z,X])=>c.jsx("div",{id:`panel-${Z}`,role:"tabpanel","aria-labelledby":`tab-${Z}`,className:`transition-opacity duration-500 ${R===Z?"opacity-100":"opacity-0 absolute w-full pointer-events-none"}`,children:X},Z))}),c.jsx("div",{className:"text-center mt-8",children:c.jsxs("button",{onClick:Y.find(Z=>Z.name===R)?.action,className:"font-bold text-unistay-navy hover:text-unistay-yellow transition-colors flex items-center gap-2 mx-auto",children:[c.jsxs("span",{children:["View All ",R]}),c.jsx("i",{className:"fas fa-arrow-right","aria-hidden":"true"})]})})]}),p&&p.length>0&&c.jsxs("div",{ref:_,className:"mt-16 transition-all duration-700 delay-300 opacity-100",children:[c.jsxs("div",{className:"mb-10",children:[c.jsx("h3",{className:"text-2xl font-bold text-unistay-navy mb-2",children:" Student Deals"}),c.jsx("p",{className:"text-gray-600",children:"Exclusive discounts and offers from local businesses"})]}),c.jsx(tN,{items:p})]}),x&&x.length>0&&c.jsxs("div",{className:"mt-16 transition-all duration-700 delay-400 opacity-100",children:[c.jsxs("div",{className:"mb-10",children:[c.jsx("h3",{className:"text-2xl font-bold text-unistay-navy mb-2",children:" Lost & Found"}),c.jsx("p",{className:"text-gray-600",children:"Help classmates find their lost items or report something you found"})]}),c.jsx(nN,{items:x})]}),b&&b.length>0&&c.jsxs("div",{ref:N,className:"mt-16 transition-all duration-700 delay-500 opacity-100",children:[c.jsxs("div",{className:"relative -mx-6 -mt-8 mb-10 z-10",children:[c.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-fixed",style:{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 400"><defs><pattern id="pattern" patternUnits="userSpaceOnUse" width="100" height="100"><circle cx="50" cy="50" r="40" fill="none" stroke="%23FFD700" stroke-width="1" opacity="0.1"/><circle cx="50" cy="50" r="30" fill="none" stroke="%23FFD700" stroke-width="1" opacity="0.15"/><circle cx="50" cy="50" r="20" fill="none" stroke="%23FFD700" stroke-width="1" opacity="0.2"/></pattern></defs><rect width="1200" height="400" fill="%230A2540"/><rect width="1200" height="400" fill="url(%23pattern)"/></svg>')`,backgroundAttachment:"fixed"}}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-unistay-navy via-blue-900 to-unistay-navy"}),c.jsx("div",{className:"relative px-6 py-12 backdrop-blur-sm",children:c.jsxs("div",{className:"max-w-6xl mx-auto",children:[c.jsx("h3",{className:"text-4xl md:text-5xl font-black text-white mb-3",children:"Student Spotlight"}),c.jsx("p",{className:"text-lg md:text-xl text-yellow-200 font-semibold",children:"Get to know a featured student from our community"}),c.jsxs("div",{className:"mt-6 flex gap-2",children:[c.jsx("div",{className:"h-1 w-16 bg-unistay-yellow rounded-full"}),c.jsx("div",{className:"h-1 w-12 bg-unistay-yellow rounded-full opacity-75"}),c.jsx("div",{className:"h-1 w-8 bg-unistay-yellow rounded-full opacity-50"})]})]})})]}),c.jsx(sN,{items:b,user:f})]}),w&&w.length>0&&c.jsxs("div",{className:"mt-16 transition-all duration-700 delay-600 opacity-100",children:[c.jsxs("div",{className:"mb-10",children:[c.jsx("h3",{className:"text-2xl font-bold text-unistay-navy mb-2",children:" Anonymous Confessions"}),c.jsx("p",{className:"text-gray-600",children:"Share your thoughts anonymously with the community"})]}),c.jsx(iN,{items:w,user:f,confessionHandler:C})]})]}),V&&c.jsx(O0,{event:V,onClose:()=>B(null)}),H&&c.jsx(XS,{news:H,onClose:()=>W(null)})]})});B0.displayName="CommunityHub";const rd={"Makerere University":{food:[{id:"food-mak-1",name:"Jumia Food",description:"Fast food delivery service with wide restaurant selection",rating:4.6,reviews:2340,contact:"+256 200 500 100",availability:"24/7",icon:"",location:"Kampala Area"},{id:"food-mak-2",name:"Uber Eats",description:"Premium food delivery from restaurants and specialty vendors",rating:4.7,reviews:3120,contact:"+256 789 654 321",availability:"24/7",icon:"",location:"Makerere Campus"},{id:"food-mak-3",name:"Campus Kitchen",description:"In-campus food delivery and catering service",rating:4.5,reviews:1890,contact:"+256 700 123 456",availability:"7am - 11pm",icon:"",location:"On Campus"},{id:"food-mak-4",name:"The Grill House",description:"Premium grilled meats and BBQ specialties",rating:4.7,reviews:2100,contact:"+256 701 234 567",availability:"11am - 10pm",icon:"",location:"Near Campus"},{id:"food-mak-5",name:"Pasta Paradise",description:"Italian restaurant with authentic pasta and pizza",rating:4.6,reviews:1650,contact:"+256 702 345 678",availability:"10am - 11pm",icon:"",location:"Walking Distance"},{id:"food-mak-6",name:"Asian Fusion Kitchen",description:"Thai, Chinese and Vietnamese cuisine",rating:4.5,reviews:1340,contact:"+256 703 456 789",availability:"12pm - 10pm",icon:"",location:"Kampala"},{id:"food-mak-7",name:"Fresh Juice Bar",description:"Freshly made juices, smoothies and healthy wraps",rating:4.8,reviews:2560,contact:"+256 704 567 890",availability:"7am - 8pm",icon:"",location:"On Campus"},{id:"food-mak-8",name:"Street Eats Uganda",description:"Traditional Ugandan cuisine with modern twist",rating:4.4,reviews:1890,contact:"+256 705 678 901",availability:"8am - 9pm",icon:"",location:"Near Campus"}],transport:[{id:"transport-mak-1",name:"SafeBoda",description:"Safe motorcycle taxi service with verified drivers",rating:4.8,reviews:5420,contact:"+256 700 500 050",availability:"24/7",icon:"",location:"Kampala Wide"},{id:"transport-mak-2",name:"Faras",description:"Budget-friendly ride-sharing service for daily commutes",rating:4.4,reviews:2890,contact:"+256 701 234 567",availability:"6am - 10pm",icon:"",location:"Makerere Area"},{id:"transport-mak-3",name:"Uber",description:"Premium ride-hailing service with safety features",rating:4.7,reviews:4560,contact:"+256 800 200 100",availability:"24/7",icon:"",location:"Kampala Wide"}],shopping:[{id:"shopping-mak-1",name:"Jumia",description:"Online marketplace for products and daily essentials",rating:4.5,reviews:3670,contact:"+256 200 500 100",availability:"24/7 ordering",icon:"",location:"Online"},{id:"shopping-mak-2",name:"Kilimall",description:"Fast online shopping with same-day delivery",rating:4.3,reviews:2345,contact:"+256 789 123 456",availability:"24/7 ordering",icon:"",location:"Online"},{id:"shopping-mak-3",name:"Kikuubo Market",description:"Popular market near campus with competitive prices",rating:4.2,reviews:1560,contact:"Visit in person",availability:"8am - 6pm",icon:"",location:"Walking Distance"}],stationery:[{id:"stationery-mak-1",name:"Makerere Supply Hub",description:"Campus stationery store with complete school supplies",rating:4.6,reviews:980,contact:"+256 700 789 012",availability:"7am - 8pm",icon:"",location:"On Campus"},{id:"stationery-mak-2",name:"Pen & Paper",description:"Quality stationery and printing services",rating:4.4,reviews:720,contact:"+256 701 456 789",availability:"8am - 6pm",icon:"",location:"Near Campus"},{id:"stationery-mak-3",name:"Office Plus Kampala",description:"Electronics and office supplies near campus",rating:4.5,reviews:1240,contact:"+256 703 234 567",availability:"9am - 7pm",icon:"",location:"Kampala Center"}],laundry:[{id:"laundry-mak-1",name:"Quick Wash Laundry",description:"Fast laundry service with express cleaning options",rating:4.7,reviews:1560,contact:"+256 700 456 789",availability:"6am - 8pm",icon:"",location:"Near Campus"},{id:"laundry-mak-2",name:"Campus Laundry Hub",description:"On-campus laundry service for students",rating:4.5,reviews:890,contact:"+256 701 789 012",availability:"7am - 10pm",icon:"",location:"On Campus"},{id:"laundry-mak-3",name:"Premium Dry Cleaning",description:"Professional dry cleaning and ironing services",rating:4.6,reviews:720,contact:"+256 703 123 456",availability:"8am - 6pm",icon:"",location:"Kampala Center"}],entertainment:[{id:"entertainment-mak-1",name:"Makerere Events Team",description:"Student event planning and entertainment booking",rating:4.4,reviews:450,contact:"+256 700 789 456",availability:"Bookings 9am - 8pm",icon:"",location:"On Campus"},{id:"entertainment-mak-2",name:"Gaming & Sports Zone",description:"Gaming lounge, pool tables, and sports facilities",rating:4.6,reviews:1120,contact:"+256 701 234 890",availability:"2pm - 11pm",icon:"",location:"Near Campus"},{id:"entertainment-mak-3",name:"Movie & Concert Tickets",description:"Easy online booking for movies, concerts, and shows",rating:4.5,reviews:2340,contact:"+256 703 456 123",availability:"24/7 online",icon:"",location:"Online"}],internet:[{id:"internet-mak-1",name:"MTN Uganda",description:"High-speed mobile data and fixed-line internet",rating:4.4,reviews:3560,contact:"+256 777 100 100",availability:"24/7",icon:"",location:"Campus Coverage"},{id:"internet-mak-2",name:"Airtel Uganda",description:"Fast data plans and WiFi hotspot services",rating:4.3,reviews:2890,contact:"+256 701 700 700",availability:"24/7",icon:"",location:"Campus Coverage"},{id:"internet-mak-3",name:"Makerere Campus WiFi",description:"Ultra-fast WiFi coverage throughout campus",rating:4.8,reviews:1670,contact:"+256 704 555 666",availability:"24/7",icon:"",location:"On Campus"}],health:[{id:"health-mak-1",name:"Makerere Health Center",description:"On-campus medical clinic with trained professionals",rating:4.7,reviews:1890,contact:"+256 700 123 789",availability:"7am - 6pm daily",icon:"",location:"On Campus"},{id:"health-mak-2",name:"Student Wellness Pharmacy",description:"Pharmacy and health products near campus",rating:4.5,reviews:1240,contact:"+256 701 987 654",availability:"8am - 9pm",icon:"",location:"Near Campus"},{id:"health-mak-3",name:"Mental Health Support",description:"Counseling and mental wellness services for students",rating:4.8,reviews:890,contact:"+256 703 789 456",availability:"By appointment",icon:"",location:"On Campus"}]},"Kampala International University":{food:[{id:"food-kiu-1",name:"Jumia Food",description:"Fast food delivery service with wide restaurant selection",rating:4.6,reviews:1890,contact:"+256 200 500 100",availability:"24/7",icon:"",location:"Kampala Area"},{id:"food-kiu-2",name:"Uber Eats",description:"Premium food delivery from restaurants and specialty vendors",rating:4.7,reviews:2560,contact:"+256 789 654 321",availability:"24/7",icon:"",location:"KIU Campus Area"},{id:"food-kiu-3",name:"KIU Food Court",description:"On-campus food delivery and catering service",rating:4.4,reviews:1420,contact:"+256 700 111 222",availability:"7am - 11pm",icon:"",location:"On Campus"},{id:"food-kiu-4",name:"KIU Cafeteria Plus",description:"Affordable daily meals with vegetarian options",rating:4.3,reviews:1560,contact:"+256 701 111 222",availability:"6am - 10pm",icon:"",location:"On Campus"},{id:"food-kiu-5",name:"Spice Route Restaurant",description:"Indian curries and authentic spiced dishes",rating:4.6,reviews:1890,contact:"+256 702 222 333",availability:"11am - 10pm",icon:"",location:"Kampala"},{id:"food-kiu-6",name:"Quick Bites Kiosk",description:"Sandwiches, burgers and quick snacks",rating:4.2,reviews:1200,contact:"+256 703 222 333",availability:"8am - 8pm",icon:"",location:"Near Campus"},{id:"food-kiu-7",name:"Vegetarian Haven",description:"Plant-based meals and vegan options",rating:4.7,reviews:980,contact:"+256 704 222 333",availability:"10am - 9pm",icon:"",location:"Walking Distance"},{id:"food-kiu-8",name:"Night Owl Diner",description:"Late-night comfort food and breakfast all day",rating:4.5,reviews:1450,contact:"+256 705 222 333",availability:"10pm - 5am",icon:"",location:"Near Campus"}],transport:[{id:"transport-kiu-1",name:"SafeBoda",description:"Safe motorcycle taxi service with verified drivers",rating:4.8,reviews:4120,contact:"+256 700 500 050",availability:"24/7",icon:"",location:"Kampala Wide"},{id:"transport-kiu-2",name:"Faras",description:"Budget-friendly ride-sharing service for daily commutes",rating:4.4,reviews:2340,contact:"+256 701 234 567",availability:"6am - 10pm",icon:"",location:"KIU Area"},{id:"transport-kiu-3",name:"Uber",description:"Premium ride-hailing service with safety features",rating:4.7,reviews:3890,contact:"+256 800 200 100",availability:"24/7",icon:"",location:"Kampala Wide"}],shopping:[{id:"shopping-kiu-1",name:"Jumia",description:"Online marketplace for products and daily essentials",rating:4.5,reviews:3e3,contact:"+256 200 500 100",availability:"24/7 ordering",icon:"",location:"Online"},{id:"shopping-kiu-2",name:"Kilimall",description:"Fast online shopping with same-day delivery",rating:4.3,reviews:1890,contact:"+256 789 123 456",availability:"24/7 ordering",icon:"",location:"Online"},{id:"shopping-kiu-3",name:"Makerere Arcade",description:"Shopping complex near KIU with variety of stores",rating:4.3,reviews:1200,contact:"Visit in person",availability:"9am - 7pm",icon:"",location:"Near Campus"}],stationery:[{id:"stationery-kiu-1",name:"KIU Supply Store",description:"Campus stationery store with complete school supplies",rating:4.5,reviews:720,contact:"+256 700 222 333",availability:"7am - 8pm",icon:"",location:"On Campus"},{id:"stationery-kiu-2",name:"Pen & Paper Kampala",description:"Quality stationery and printing services",rating:4.4,reviews:650,contact:"+256 701 456 789",availability:"8am - 6pm",icon:"",location:"Near Campus"},{id:"stationery-kiu-3",name:"Office Plus Downtown",description:"Electronics and office supplies",rating:4.5,reviews:980,contact:"+256 703 234 567",availability:"9am - 7pm",icon:"",location:"Kampala Center"}],laundry:[{id:"laundry-kiu-1",name:"Swift Laundry",description:"Fast laundry service with express cleaning options",rating:4.6,reviews:1240,contact:"+256 700 333 444",availability:"6am - 8pm",icon:"",location:"Near Campus"},{id:"laundry-kiu-2",name:"KIU Campus Laundry",description:"On-campus laundry service for students",rating:4.5,reviews:780,contact:"+256 701 789 012",availability:"7am - 10pm",icon:"",location:"On Campus"},{id:"laundry-kiu-3",name:"Pro Dry Cleaning",description:"Professional dry cleaning and ironing services",rating:4.6,reviews:650,contact:"+256 703 123 456",availability:"8am - 6pm",icon:"",location:"Kampala Center"}],entertainment:[{id:"entertainment-kiu-1",name:"KIU Events Committee",description:"Student event planning and entertainment booking",rating:4.3,reviews:380,contact:"+256 700 444 555",availability:"Bookings 9am - 8pm",icon:"",location:"On Campus"},{id:"entertainment-kiu-2",name:"Campus Gaming Hub",description:"Gaming lounge, pool tables, and sports facilities",rating:4.5,reviews:920,contact:"+256 701 234 890",availability:"2pm - 11pm",icon:"",location:"Near Campus"},{id:"entertainment-kiu-3",name:"Movie & Concert Tickets",description:"Easy online booking for movies, concerts, and shows",rating:4.5,reviews:1890,contact:"+256 703 456 123",availability:"24/7 online",icon:"",location:"Online"}],internet:[{id:"internet-kiu-1",name:"MTN Uganda",description:"High-speed mobile data and fixed-line internet",rating:4.4,reviews:3e3,contact:"+256 777 100 100",availability:"24/7",icon:"",location:"Campus Coverage"},{id:"internet-kiu-2",name:"Airtel Uganda",description:"Fast data plans and WiFi hotspot services",rating:4.3,reviews:2450,contact:"+256 701 700 700",availability:"24/7",icon:"",location:"Campus Coverage"},{id:"internet-kiu-3",name:"KIU Campus Network",description:"High-speed WiFi coverage throughout campus",rating:4.7,reviews:1340,contact:"+256 704 555 666",availability:"24/7",icon:"",location:"On Campus"}],health:[{id:"health-kiu-1",name:"KIU Medical Center",description:"On-campus medical clinic with trained professionals",rating:4.6,reviews:1540,contact:"+256 700 555 666",availability:"7am - 6pm daily",icon:"",location:"On Campus"},{id:"health-kiu-2",name:"Health Plus Pharmacy",description:"Pharmacy and health products near campus",rating:4.5,reviews:980,contact:"+256 701 987 654",availability:"8am - 9pm",icon:"",location:"Near Campus"},{id:"health-kiu-3",name:"Student Wellness Clinic",description:"Counseling and mental wellness services for students",rating:4.7,reviews:720,contact:"+256 703 789 456",availability:"By appointment",icon:"",location:"On Campus"}]},"Uganda Christian University":{food:[{id:"food-ucu-1",name:"Jumia Food",description:"Fast food delivery service with wide restaurant selection",rating:4.6,reviews:1670,contact:"+256 200 500 100",availability:"24/7",icon:"",location:"Kampala Area"},{id:"food-ucu-2",name:"Uber Eats",description:"Premium food delivery from restaurants and specialty vendors",rating:4.7,reviews:2100,contact:"+256 789 654 321",availability:"24/7",icon:"",location:"UCU Campus Area"},{id:"food-ucu-3",name:"Mukono Eatery",description:"Local food delivery and catering service",rating:4.3,reviews:1100,contact:"+256 700 666 777",availability:"7am - 11pm",icon:"",location:"On Campus"},{id:"food-ucu-4",name:"Central Dining Hall",description:"Buffet-style dining with variety of cuisines",rating:4.4,reviews:1670,contact:"+256 701 666 777",availability:"6am - 9pm",icon:"",location:"On Campus"},{id:"food-ucu-5",name:"Garden Cafe",description:"Organic and locally sourced fresh meals",rating:4.8,reviews:1340,contact:"+256 702 666 777",availability:"8am - 8pm",icon:"",location:"On Campus"},{id:"food-ucu-6",name:"Sweet Treats Bakery",description:"Pastries, cakes and baked goods",rating:4.6,reviews:1560,contact:"+256 703 666 777",availability:"7am - 7pm",icon:"",location:"Walking Distance"},{id:"food-ucu-7",name:"Mukono Chop House",description:"Local favorites and traditional dishes",rating:4.3,reviews:1200,contact:"+256 704 666 777",availability:"10am - 10pm",icon:"",location:"Near Campus"},{id:"food-ucu-8",name:"Coffee & Cowork",description:"Premium coffee and light meals with WiFi",rating:4.7,reviews:1450,contact:"+256 705 666 777",availability:"7am - 9pm",icon:"",location:"On Campus"}],transport:[{id:"transport-ucu-1",name:"SafeBoda",description:"Safe motorcycle taxi service with verified drivers",rating:4.8,reviews:3890,contact:"+256 700 500 050",availability:"24/7",icon:"",location:"Mukono Area"},{id:"transport-ucu-2",name:"Faras",description:"Budget-friendly ride-sharing service for daily commutes",rating:4.4,reviews:1890,contact:"+256 701 234 567",availability:"6am - 10pm",icon:"",location:"UCU Area"},{id:"transport-ucu-3",name:"Uber",description:"Premium ride-hailing service with safety features",rating:4.7,reviews:3240,contact:"+256 800 200 100",availability:"24/7",icon:"",location:"Kampala-Mukono"}],shopping:[{id:"shopping-ucu-1",name:"Jumia",description:"Online marketplace for products and daily essentials",rating:4.5,reviews:2670,contact:"+256 200 500 100",availability:"24/7 ordering",icon:"",location:"Online"},{id:"shopping-ucu-2",name:"Kilimall",description:"Fast online shopping with same-day delivery",rating:4.3,reviews:1560,contact:"+256 789 123 456",availability:"24/7 ordering",icon:"",location:"Online"},{id:"shopping-ucu-3",name:"Mukono Shopping Center",description:"Local shopping center with variety of stores",rating:4.1,reviews:890,contact:"Visit in person",availability:"8am - 6pm",icon:"",location:"Near Campus"}],stationery:[{id:"stationery-ucu-1",name:"UCU Supply Store",description:"Campus stationery store with complete school supplies",rating:4.4,reviews:560,contact:"+256 700 777 888",availability:"7am - 8pm",icon:"",location:"On Campus"},{id:"stationery-ucu-2",name:"Mukono Stationery",description:"Quality stationery and printing services",rating:4.2,reviews:480,contact:"+256 701 456 789",availability:"8am - 6pm",icon:"",location:"Near Campus"},{id:"stationery-ucu-3",name:"Office Supplies Plus",description:"Electronics and office supplies",rating:4.4,reviews:720,contact:"+256 703 234 567",availability:"9am - 7pm",icon:"",location:"Kampala Center"}],laundry:[{id:"laundry-ucu-1",name:"Express Laundry",description:"Fast laundry service with express cleaning options",rating:4.5,reviews:890,contact:"+256 700 888 999",availability:"6am - 8pm",icon:"",location:"Near Campus"},{id:"laundry-ucu-2",name:"UCU Laundry Services",description:"On-campus laundry service for students",rating:4.4,reviews:640,contact:"+256 701 789 012",availability:"7am - 10pm",icon:"",location:"On Campus"},{id:"laundry-ucu-3",name:"Mukono Dry Cleaning",description:"Professional dry cleaning and ironing services",rating:4.5,reviews:520,contact:"+256 703 123 456",availability:"8am - 6pm",icon:"",location:"Near Campus"}],entertainment:[{id:"entertainment-ucu-1",name:"UCU Events Office",description:"Student event planning and entertainment booking",rating:4.2,reviews:320,contact:"+256 700 999 000",availability:"Bookings 9am - 8pm",icon:"",location:"On Campus"},{id:"entertainment-ucu-2",name:"Mukono Entertainment",description:"Gaming lounge, pool tables, and sports facilities",rating:4.3,reviews:720,contact:"+256 701 234 890",availability:"2pm - 11pm",icon:"",location:"Near Campus"},{id:"entertainment-ucu-3",name:"Movie & Concert Tickets",description:"Easy online booking for movies, concerts, and shows",rating:4.5,reviews:1560,contact:"+256 703 456 123",availability:"24/7 online",icon:"",location:"Online"}],internet:[{id:"internet-ucu-1",name:"MTN Uganda",description:"High-speed mobile data and fixed-line internet",rating:4.4,reviews:2890,contact:"+256 777 100 100",availability:"24/7",icon:"",location:"Campus Coverage"},{id:"internet-ucu-2",name:"Airtel Uganda",description:"Fast data plans and WiFi hotspot services",rating:4.3,reviews:2100,contact:"+256 701 700 700",availability:"24/7",icon:"",location:"Campus Coverage"},{id:"internet-ucu-3",name:"UCU Campus WiFi",description:"High-speed WiFi coverage throughout campus",rating:4.6,reviews:1100,contact:"+256 704 555 666",availability:"24/7",icon:"",location:"On Campus"}],health:[{id:"health-ucu-1",name:"UCU Health Services",description:"On-campus medical clinic with trained professionals",rating:4.5,reviews:1240,contact:"+256 700 000 111",availability:"7am - 6pm daily",icon:"",location:"On Campus"},{id:"health-ucu-2",name:"Mukono Pharmacy",description:"Pharmacy and health products near campus",rating:4.4,reviews:760,contact:"+256 701 987 654",availability:"8am - 9pm",icon:"",location:"Near Campus"},{id:"health-ucu-3",name:"Wellness Counseling Center",description:"Counseling and mental wellness services for students",rating:4.6,reviews:580,contact:"+256 703 789 456",availability:"By appointment",icon:"",location:"On Campus"}]},"Makerere University Business School":{food:[{id:"food-mubs-1",name:"Jumia Food",description:"Fast food delivery service with wide restaurant selection",rating:4.6,reviews:1456,contact:"+256 200 500 100",availability:"24/7",icon:"",location:"Kampala Area"},{id:"food-mubs-2",name:"Chef's Table",description:"Premium catering and meal prep services for students",rating:4.7,reviews:890,contact:"+256 700 123 789",availability:"7am - 10pm",icon:"",location:"Near Campus"},{id:"food-mubs-3",name:"Quick Bites Cafe",description:"On-campus quick service restaurant",rating:4.4,reviews:1234,contact:"+256 701 555 666",availability:"6am - 11pm",icon:"",location:"On Campus"},{id:"food-mubs-4",name:"The Executive Lounge",description:"Premium business meals and corporate catering",rating:4.8,reviews:1890,contact:"+256 702 555 666",availability:"10am - 10pm",icon:"",location:"Nakawa"},{id:"food-mubs-5",name:"Healthy Bowls Cafe",description:"Organic bowls, wraps and smoothie bowls",rating:4.6,reviews:1560,contact:"+256 703 555 666",availability:"7am - 8pm",icon:"",location:"On Campus"},{id:"food-mubs-6",name:"Nakawa Night Market",description:"Street food and late-night dining",rating:4.3,reviews:1340,contact:"+256 704 555 666",availability:"5pm - 2am",icon:"",location:"Nakawa"},{id:"food-mubs-7",name:"Business Lunch Club",description:"Meal subscriptions and meal prep service",rating:4.7,reviews:1670,contact:"+256 705 555 666",availability:"24/7 delivery",icon:"",location:"Campus Delivery"},{id:"food-mubs-8",name:"Asian Wok Express",description:"Quick Asian noodles and stir-fry",rating:4.5,reviews:1450,contact:"+256 706 555 666",availability:"11am - 10pm",icon:"",location:"Near Campus"}],transport:[{id:"transport-mubs-1",name:"SafeBoda",description:"Safe motorcycle taxi service with verified drivers",rating:4.8,reviews:4890,contact:"+256 700 500 050",availability:"24/7",icon:"",location:"Kampala Wide"},{id:"transport-mubs-2",name:"Bolt",description:"Fast ride-hailing app with competitive pricing",rating:4.5,reviews:2340,contact:"+256 800 300 200",availability:"24/7",icon:"",location:"Kampala Wide"},{id:"transport-mubs-3",name:"Campus Shuttle",description:"Dedicated shuttle service for MUBS students",rating:4.6,reviews:1567,contact:"+256 702 111 222",availability:"6am - 8pm",icon:"",location:"MUBS Campus"}],shopping:[{id:"shopping-mubs-1",name:"Jumia",description:"Online marketplace for products and daily essentials",rating:4.5,reviews:3120,contact:"+256 200 500 100",availability:"24/7 ordering",icon:"",location:"Online"},{id:"shopping-mubs-2",name:"Glovo",description:"Fast delivery service for groceries and essentials",rating:4.6,reviews:2100,contact:"+256 789 987 654",availability:"24/7",icon:"",location:"Online"},{id:"shopping-mubs-3",name:"Nakawa Market Hub",description:"Popular shopping district near campus",rating:4.2,reviews:1890,contact:"Visit in person",availability:"8am - 7pm",icon:"",location:"Walking Distance"}],stationery:[{id:"stationery-mubs-1",name:"MUBS Bookstore",description:"Official campus bookstore with textbooks and supplies",rating:4.7,reviews:1240,contact:"+256 702 222 333",availability:"7am - 6pm",icon:"",location:"On Campus"},{id:"stationery-mubs-2",name:"PrintPro Services",description:"Printing and copying services with fast turnaround",rating:4.5,reviews:890,contact:"+256 701 666 777",availability:"8am - 7pm",icon:"",location:"Near Campus"},{id:"stationery-mubs-3",name:"Tech & Office Supplies",description:"Electronics and tech accessories for students",rating:4.6,reviews:1120,contact:"+256 703 333 444",availability:"9am - 8pm",icon:"",location:"Kampala Center"}],laundry:[{id:"laundry-mubs-1",name:"Express Wash",description:"Quick same-day laundry service",rating:4.7,reviews:1456,contact:"+256 702 444 555",availability:"6am - 9pm",icon:"",location:"Near Campus"},{id:"laundry-mubs-2",name:"Premium Fabric Care",description:"Specialist dry cleaning and delicate fabric care",rating:4.8,reviews:980,contact:"+256 701 888 999",availability:"7am - 7pm",icon:"",location:"Nakawa"},{id:"laundry-mubs-3",name:"Campus Laundry Point",description:"Self-service and full-service laundry on campus",rating:4.4,reviews:720,contact:"+256 703 555 666",availability:"6am - 10pm",icon:"",location:"On Campus"}],entertainment:[{id:"entertainment-mubs-1",name:"MUBS Social Club",description:"Student events and social activities coordinator",rating:4.5,reviews:620,contact:"+256 702 666 777",availability:"Daily 9am - 6pm",icon:"",location:"On Campus"},{id:"entertainment-mubs-2",name:"Game Zone Nakawa",description:"Modern gaming lounge with console and PC gaming",rating:4.6,reviews:1340,contact:"+256 701 555 666",availability:"1pm - 12am",icon:"",location:"Near Campus"},{id:"entertainment-mubs-3",name:"Event Tickets Uganda",description:"Online booking for concerts, shows, and sports events",rating:4.7,reviews:2890,contact:"+256 703 666 777",availability:"24/7 online",icon:"",location:"Online"}],internet:[{id:"internet-mubs-1",name:"MTN Uganda",description:"High-speed mobile data and fixed-line internet",rating:4.4,reviews:3890,contact:"+256 777 100 100",availability:"24/7",icon:"",location:"Campus Coverage"},{id:"internet-mubs-2",name:"Liquid Intelligent Technologies",description:"Enterprise-grade WiFi and fiber internet",rating:4.8,reviews:1200,contact:"+256 704 777 888",availability:"24/7",icon:"",location:"On Campus"},{id:"internet-mubs-3",name:"Airtel Uganda",description:"Fast data plans and WiFi hotspot services",rating:4.3,reviews:2340,contact:"+256 701 700 700",availability:"24/7",icon:"",location:"Campus Coverage"}],health:[{id:"health-mubs-1",name:"MUBS Medical Clinic",description:"Full-service on-campus medical facility",rating:4.7,reviews:1560,contact:"+256 702 888 999",availability:"7am - 6pm daily",icon:"",location:"On Campus"},{id:"health-mubs-2",name:"Nakawa Pharmacy Plus",description:"Comprehensive pharmacy with medical consultation",rating:4.6,reviews:1340,contact:"+256 701 999 000",availability:"8am - 10pm",icon:"",location:"Near Campus"},{id:"health-mubs-3",name:"Student Mental Health Clinic",description:"Professional counseling and mental health support",rating:4.8,reviews:920,contact:"+256 703 777 888",availability:"By appointment",icon:"",location:"On Campus"}]},"Kyambogo University":{food:[{id:"food-kyambogo-1",name:"Jumia Food",description:"Fast food delivery service with wide restaurant selection",rating:4.6,reviews:1230,contact:"+256 200 500 100",availability:"24/7",icon:"",location:"Kampala Area"},{id:"food-kyambogo-2",name:"Campus Cafeteria",description:"Affordable on-campus dining for all students",rating:4.3,reviews:1890,contact:"+256 703 111 222",availability:"6am - 10pm",icon:"",location:"On Campus"},{id:"food-kyambogo-3",name:"Nile Eatery",description:"Local restaurant with traditional and modern cuisine",rating:4.4,reviews:1120,contact:"+256 701 777 888",availability:"7am - 9pm",icon:"",location:"Near Campus"},{id:"food-kyambogo-4",name:"Kamwokya Grill",description:"Grilled proteins and BBQ skewers",rating:4.6,reviews:1340,contact:"+256 702 777 888",availability:"11am - 11pm",icon:"",location:"Kamwokya"},{id:"food-kyambogo-5",name:"Student Canteen",description:"Budget-friendly daily meals for students",rating:4.2,reviews:1670,contact:"+256 703 777 888",availability:"6am - 8pm",icon:"",location:"On Campus"},{id:"food-kyambogo-6",name:"Sushi Dreams",description:"Japanese sushi and sashimi specialties",rating:4.7,reviews:1200,contact:"+256 704 777 888",availability:"12pm - 10pm",icon:"",location:"Kampala"},{id:"food-kyambogo-7",name:"Smoothie Bar",description:"Healthy smoothies and acai bowls",rating:4.8,reviews:1450,contact:"+256 705 777 888",availability:"7am - 7pm",icon:"",location:"Near Campus"},{id:"food-kyambogo-8",name:"Kebab House",description:"Turkish kebabs and Mediterranean wraps",rating:4.5,reviews:1100,contact:"+256 706 777 888",availability:"10am - 11pm",icon:"",location:"Kampala"}],transport:[{id:"transport-kyambogo-1",name:"SafeBoda",description:"Safe motorcycle taxi service with verified drivers",rating:4.8,reviews:4120,contact:"+256 700 500 050",availability:"24/7",icon:"",location:"Kampala Wide"},{id:"transport-kyambogo-2",name:"Uber",description:"Premium ride-hailing service with safety features",rating:4.7,reviews:3560,contact:"+256 800 200 100",availability:"24/7",icon:"",location:"Kampala Wide"},{id:"transport-kyambogo-3",name:"Kyambogo Campus Bikes",description:"Bike rental and delivery service for students",rating:4.5,reviews:890,contact:"+256 702 222 333",availability:"24/7",icon:"",location:"On Campus"}],shopping:[{id:"shopping-kyambogo-1",name:"Kilimall",description:"Fast online shopping with same-day delivery",rating:4.3,reviews:2100,contact:"+256 789 123 456",availability:"24/7 ordering",icon:"",location:"Online"},{id:"shopping-kyambogo-2",name:"Kyambogo Market",description:"Large market complex near campus",rating:4.2,reviews:1560,contact:"Visit in person",availability:"7am - 7pm",icon:"",location:"Walking Distance"},{id:"shopping-kyambogo-3",name:"Student Essentials Store",description:"One-stop shop for student needs and supplies",rating:4.5,reviews:1240,contact:"+256 701 333 444",availability:"8am - 8pm",icon:"",location:"Near Campus"}],stationery:[{id:"stationery-kyambogo-1",name:"Kyambogo Supply Store",description:"Campus stationery store with complete school supplies",rating:4.5,reviews:780,contact:"+256 703 333 444",availability:"7am - 7pm",icon:"",location:"On Campus"},{id:"stationery-kyambogo-2",name:"Copy & Print Hub",description:"Fast printing, copying, and binding services",rating:4.6,reviews:920,contact:"+256 702 444 555",availability:"8am - 6pm",icon:"",location:"Near Campus"},{id:"stationery-kyambogo-3",name:"Arts & Crafts Corner",description:"Art supplies and craft materials for creative students",rating:4.4,reviews:650,contact:"+256 701 222 333",availability:"9am - 6pm",icon:"",location:"Kampala"}],laundry:[{id:"laundry-kyambogo-1",name:"Quick Laundry Services",description:"Express laundry with 24-hour turnaround",rating:4.6,reviews:1100,contact:"+256 703 555 666",availability:"6am - 8pm",icon:"",location:"Near Campus"},{id:"laundry-kyambogo-2",name:"Kyambogo Campus Laundry",description:"Convenient on-campus laundry facility",rating:4.3,reviews:780,contact:"+256 702 666 777",availability:"24/7",icon:"",location:"On Campus"},{id:"laundry-kyambogo-3",name:"Premium Cleaning Services",description:"Professional dry cleaning and delicate care",rating:4.7,reviews:890,contact:"+256 701 444 555",availability:"8am - 6pm",icon:"",location:"Near Campus"}],entertainment:[{id:"entertainment-kyambogo-1",name:"Kyambogo Events Board",description:"Official student entertainment organizer",rating:4.4,reviews:480,contact:"+256 703 666 777",availability:"Daily 9am - 5pm",icon:"",location:"On Campus"},{id:"entertainment-kyambogo-2",name:"Gamer's Paradise",description:"Gaming cafe with latest consoles and PCs",rating:4.5,reviews:1200,contact:"+256 702 777 888",availability:"2pm - 12am",icon:"",location:"Near Campus"},{id:"entertainment-kyambogo-3",name:"Concert & Event Hub",description:"Online ticket booking for entertainment events",rating:4.6,reviews:2340,contact:"+256 701 888 999",availability:"24/7 online",icon:"",location:"Online"}],internet:[{id:"internet-kyambogo-1",name:"Airtel Uganda",description:"Fast data plans and WiFi hotspot services",rating:4.3,reviews:2670,contact:"+256 701 700 700",availability:"24/7",icon:"",location:"Campus Coverage"},{id:"internet-kyambogo-2",name:"Kyambogo Campus WiFi",description:"Free and premium WiFi throughout campus",rating:4.7,reviews:1560,contact:"+256 703 888 999",availability:"24/7",icon:"",location:"On Campus"},{id:"internet-kyambogo-3",name:"MTN Uganda",description:"High-speed mobile data and fixed-line internet",rating:4.4,reviews:3120,contact:"+256 777 100 100",availability:"24/7",icon:"",location:"Campus Coverage"}],health:[{id:"health-kyambogo-1",name:"Kyambogo Health Center",description:"Full medical services for students",rating:4.6,reviews:1340,contact:"+256 703 999 000",availability:"7am - 6pm daily",icon:"",location:"On Campus"},{id:"health-kyambogo-2",name:"Kamwokya Pharmacy",description:"Full-service pharmacy with medical advice",rating:4.5,reviews:1120,contact:"+256 702 888 999",availability:"8am - 10pm",icon:"",location:"Near Campus"},{id:"health-kyambogo-3",name:"Student Wellness Center",description:"Mental health counseling and wellness programs",rating:4.7,reviews:890,contact:"+256 701 666 777",availability:"By appointment",icon:"",location:"On Campus"}]}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let aN,oN;function rN(){return{geminiUrl:aN,vertexUrl:oN}}function lN(n,e,s,a){var o,l;if(!n?.baseUrl){const d=rN();return e?(o=d.vertexUrl)!==null&&o!==void 0?o:s:(l=d.geminiUrl)!==null&&l!==void 0?l:a}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Js{}function se(n,e){const s=/\{([^}]+)\}/g;return n.replace(s,(a,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const l=e[o];return l!=null?String(l):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function y(n,e,s){for(let l=0;l<e.length-1;l++){const d=e[l];if(d.endsWith("[]")){const f=d.slice(0,-2);if(!(f in n))if(Array.isArray(s))n[f]=Array.from({length:s.length},()=>({}));else throw new Error(`Value must be a list given an array path ${d}`);if(Array.isArray(n[f])){const m=n[f];if(Array.isArray(s))for(let p=0;p<m.length;p++){const x=m[p];y(x,e.slice(l+1),s[p])}else for(const p of m)y(p,e.slice(l+1),s)}return}else if(d.endsWith("[0]")){const f=d.slice(0,-3);f in n||(n[f]=[{}]);const m=n[f];y(m[0],e.slice(l+1),s);return}(!n[d]||typeof n[d]!="object")&&(n[d]={}),n=n[d]}const a=e[e.length-1],o=n[a];if(o!==void 0){if(!s||typeof s=="object"&&Object.keys(s).length===0||s===o)return;if(typeof o=="object"&&typeof s=="object"&&o!==null&&s!==null)Object.assign(o,s);else throw new Error(`Cannot set value for an existing key. Key: ${a}`)}else a==="_self"&&typeof s=="object"&&s!==null&&!Array.isArray(s)?Object.assign(n,s):n[a]=s}function h(n,e,s=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let a=0;a<e.length;a++){if(typeof n!="object"||n===null)return s;const o=e[a];if(o.endsWith("[]")){const l=o.slice(0,-2);if(l in n){const d=n[l];return Array.isArray(d)?d.map(f=>h(f,e.slice(a+1),s)):s}else return s}else n=n[o]}return n}catch(a){if(a instanceof TypeError)return s;throw a}}function cN(n,e){for(const[s,a]of Object.entries(e)){const o=s.split("."),l=a.split("."),d=new Set;let f=-1;for(let m=0;m<o.length;m++)if(o[m]==="*"){f=m;break}if(f!==-1&&l.length>f)for(let m=f;m<l.length;m++){const p=l[m];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&d.add(p)}ld(n,o,l,0,d)}}function ld(n,e,s,a,o){if(a>=e.length||typeof n!="object"||n===null)return;const l=e[a];if(l.endsWith("[]")){const d=l.slice(0,-2),f=n;if(d in f&&Array.isArray(f[d]))for(const m of f[d])ld(m,e,s,a+1,o)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const d=n,f=Object.keys(d).filter(p=>!p.startsWith("_")&&!o.has(p)),m={};for(const p of f)m[p]=d[p];for(const[p,x]of Object.entries(m)){const b=[];for(const w of s.slice(a))w==="*"?b.push(p):b.push(w);y(d,b,x)}for(const p of f)delete d[p]}}else{const d=n;l in d&&ld(d[l],e,s,a+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Md(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uN(n){const e={},s=h(n,["operationName"]);s!=null&&y(e,["operationName"],s);const a=h(n,["resourceName"]);return a!=null&&y(e,["_url","resourceName"],a),e}function dN(n){const e={},s=h(n,["name"]);s!=null&&y(e,["name"],s);const a=h(n,["metadata"]);a!=null&&y(e,["metadata"],a);const o=h(n,["done"]);o!=null&&y(e,["done"],o);const l=h(n,["error"]);l!=null&&y(e,["error"],l);const d=h(n,["response","generateVideoResponse"]);return d!=null&&y(e,["response"],hN(d)),e}function fN(n){const e={},s=h(n,["name"]);s!=null&&y(e,["name"],s);const a=h(n,["metadata"]);a!=null&&y(e,["metadata"],a);const o=h(n,["done"]);o!=null&&y(e,["done"],o);const l=h(n,["error"]);l!=null&&y(e,["error"],l);const d=h(n,["response"]);return d!=null&&y(e,["response"],mN(d)),e}function hN(n){const e={},s=h(n,["generatedSamples"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>pN(d))),y(e,["generatedVideos"],l)}const a=h(n,["raiMediaFilteredCount"]);a!=null&&y(e,["raiMediaFilteredCount"],a);const o=h(n,["raiMediaFilteredReasons"]);return o!=null&&y(e,["raiMediaFilteredReasons"],o),e}function mN(n){const e={},s=h(n,["videos"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>gN(d))),y(e,["generatedVideos"],l)}const a=h(n,["raiMediaFilteredCount"]);a!=null&&y(e,["raiMediaFilteredCount"],a);const o=h(n,["raiMediaFilteredReasons"]);return o!=null&&y(e,["raiMediaFilteredReasons"],o),e}function pN(n){const e={},s=h(n,["video"]);return s!=null&&y(e,["video"],xN(s)),e}function gN(n){const e={},s=h(n,["_self"]);return s!=null&&y(e,["video"],bN(s)),e}function yN(n){const e={},s=h(n,["operationName"]);return s!=null&&y(e,["_url","operationName"],s),e}function vN(n){const e={},s=h(n,["operationName"]);return s!=null&&y(e,["_url","operationName"],s),e}function xN(n){const e={},s=h(n,["uri"]);s!=null&&y(e,["uri"],s);const a=h(n,["encodedVideo"]);a!=null&&y(e,["videoBytes"],Md(a));const o=h(n,["encoding"]);return o!=null&&y(e,["mimeType"],o),e}function bN(n){const e={},s=h(n,["gcsUri"]);s!=null&&y(e,["uri"],s);const a=h(n,["bytesBase64Encoded"]);a!=null&&y(e,["videoBytes"],Md(a));const o=h(n,["mimeType"]);return o!=null&&y(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var yg;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(yg||(yg={}));var vg;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(vg||(vg={}));var xg;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(xg||(xg={}));var ps;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(ps||(ps={}));var bg;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(bg||(bg={}));var wg;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(wg||(wg={}));var _g;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(_g||(_g={}));var Sg;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Sg||(Sg={}));var Ng;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(Ng||(Ng={}));var Cg;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Cg||(Cg={}));var Tg;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Tg||(Tg={}));var Eg;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(Eg||(Eg={}));var Ag;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Ag||(Ag={}));var kg;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(kg||(kg={}));var jg;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(jg||(jg={}));var Rg;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Rg||(Rg={}));var al;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(al||(al={}));var Mg;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Mg||(Mg={}));var cd;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(cd||(cd={}));var Ig;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Ig||(Ig={}));var Ug;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Ug||(Ug={}));var Dg;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V"})(Dg||(Dg={}));var Pg;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(Pg||(Pg={}));var Og;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(Og||(Og={}));var Lg;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Lg||(Lg={}));var qg;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(qg||(qg={}));var Bg;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(Bg||(Bg={}));var Vg;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Vg||(Vg={}));var Hg;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Hg||(Hg={}));var Gg;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(Gg||(Gg={}));var zg;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(zg||(zg={}));var Fg;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Fg||(Fg={}));var $g;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})($g||($g={}));var Jg;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Jg||(Jg={}));var Yg;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(Yg||(Yg={}));var Kg;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(Kg||(Kg={}));var Qg;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(Qg||(Qg={}));var Xg;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(Xg||(Xg={}));var Wg;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(Wg||(Wg={}));var Zg;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(Zg||(Zg={}));var ey;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(ey||(ey={}));var ty;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(ty||(ty={}));var ny;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(ny||(ny={}));var sy;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(sy||(sy={}));var iy;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(iy||(iy={}));var ay;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(ay||(ay={}));var oy;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(oy||(oy={}));var ry;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(ry||(ry={}));var Fi;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Fi||(Fi={}));class ud{constructor(e){const s={};for(const a of e.headers.entries())s[a[0]]=a[1];this.headers=s,this.responseInternal=e}json(){return this.responseInternal.json()}}class io{get text(){var e,s,a,o,l,d,f,m;if(((o=(a=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1;let p="",x=!1;const b=[];for(const w of(m=(f=(d=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||d===void 0?void 0:d.content)===null||f===void 0?void 0:f.parts)!==null&&m!==void 0?m:[]){for(const[_,N]of Object.entries(w))_!=="text"&&_!=="thought"&&(N!==null||N!==void 0)&&b.push(_);if(typeof w.text=="string"){if(typeof w.thought=="boolean"&&w.thought)continue;x=!0,p+=w.text}}return b.length>0,x?p:void 0}get data(){var e,s,a,o,l,d,f,m;if(((o=(a=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1;let p="";const x=[];for(const b of(m=(f=(d=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||d===void 0?void 0:d.content)===null||f===void 0?void 0:f.parts)!==null&&m!==void 0?m:[]){for(const[w,_]of Object.entries(b))w!=="inlineData"&&(_!==null||_!==void 0)&&x.push(w);b.inlineData&&typeof b.inlineData.data=="string"&&(p+=atob(b.inlineData.data))}return x.length>0,p.length>0?btoa(p):void 0}get functionCalls(){var e,s,a,o,l,d,f,m;if(((o=(a=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1;const p=(m=(f=(d=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||d===void 0?void 0:d.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(x=>x.functionCall).map(x=>x.functionCall).filter(x=>x!==void 0);if(p?.length!==0)return p}get executableCode(){var e,s,a,o,l,d,f,m,p;if(((o=(a=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1;const x=(m=(f=(d=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||d===void 0?void 0:d.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(b=>b.executableCode).map(b=>b.executableCode).filter(b=>b!==void 0);if(x?.length!==0)return(p=x?.[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,s,a,o,l,d,f,m,p;if(((o=(a=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1;const x=(m=(f=(d=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||d===void 0?void 0:d.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(b=>b.codeExecutionResult).map(b=>b.codeExecutionResult).filter(b=>b!==void 0);if(x?.length!==0)return(p=x?.[0])===null||p===void 0?void 0:p.output}}class ly{}class cy{}class wN{}class _N{}class SN{}class NN{}class uy{}class dy{}class fy{}class CN{}class ol{_fromAPIResponse({apiResponse:e,isVertexAI:s}){const a=new ol;let o;const l=e;return s?o=fN(l):o=dN(l),Object.assign(a,o),a}}class hy{}class my{}class py{}class TN{}class EN{}class AN{}class gy{}class kN{get text(){var e,s,a;let o="",l=!1;const d=[];for(const f of(a=(s=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||s===void 0?void 0:s.parts)!==null&&a!==void 0?a:[]){for(const[m,p]of Object.entries(f))m!=="text"&&m!=="thought"&&p!==null&&d.push(m);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;l=!0,o+=f.text}}return d.length>0,l?o:void 0}get data(){var e,s,a;let o="";const l=[];for(const d of(a=(s=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||s===void 0?void 0:s.parts)!==null&&a!==void 0?a:[]){for(const[f,m]of Object.entries(d))f!=="inlineData"&&m!==null&&l.push(f);d.inlineData&&typeof d.inlineData.data=="string"&&(o+=atob(d.inlineData.data))}return l.length>0,o.length>0?btoa(o):void 0}}class jN{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ee(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const s=e.split("/",2);return`publishers/${s[0]}/models/${s[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function V0(n,e){const s=Ee(n,e);return s?s.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${s}`:s.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${s}`:s:""}function H0(n){return Array.isArray(n)?n.map(e=>rl(e)):[rl(n)]}function rl(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function G0(n){const e=rl(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function z0(n){const e=rl(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function yy(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function F0(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>yy(e)):[yy(n)]}function dd(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function vy(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function xy(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function wt(n){if(n==null)throw new Error("ContentUnion is required");return dd(n)?n:{role:"user",parts:F0(n)}}function Id(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(s=>{const a=wt(s);return a.parts&&a.parts.length>0&&a.parts[0].text!==void 0?[a.parts[0].text]:[]});if(n.isVertexAI()){const s=wt(e);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]}return Array.isArray(e)?e.map(s=>wt(s)):[wt(e)]}function tn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(vy(n)||xy(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[wt(n)]}const e=[],s=[],a=dd(n[0]);for(const o of n){const l=dd(o);if(l!=a)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(o);else{if(vy(o)||xy(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");s.push(o)}}return a||e.push({role:"user",parts:F0(s)}),e}function RN(n,e){n.includes("null")&&(e.nullable=!0);const s=n.filter(a=>a!=="null");if(s.length===1)e.type=Object.values(ps).includes(s[0].toUpperCase())?s[0].toUpperCase():ps.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const a of s)e.anyOf.push({type:Object.values(ps).includes(a.toUpperCase())?a.toUpperCase():ps.TYPE_UNSPECIFIED})}}function Ji(n){const e={},s=["items"],a=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&RN(n.type,e);for(const[d,f]of Object.entries(n))if(f!=null)if(d=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(ps).includes(f.toUpperCase())?f.toUpperCase():ps.TYPE_UNSPECIFIED}else if(s.includes(d))e[d]=Ji(f);else if(a.includes(d)){const m=[];for(const p of f){if(p.type=="null"){e.nullable=!0;continue}m.push(Ji(p))}e[d]=m}else if(o.includes(d)){const m={};for(const[p,x]of Object.entries(f))m[p]=Ji(x);e[d]=m}else{if(d==="additionalProperties")continue;e[d]=f}return e}function Ud(n){return Ji(n)}function Dd(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Pd(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function sa(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ji(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ji(e.response));return n}function ia(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const s of n)e.push(s);return e}function MN(n,e,s,a=1){const o=!e.startsWith(`${s}/`)&&e.split("/").length===a;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${s}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${s}/${e}`:e:o?`${s}/${e}`:e}function Bn(n,e){if(typeof e!="string")throw new Error("name must be a string");return MN(n,e,"cachedContents")}function $0(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function ys(n){return Md(n)}function IN(n){return n!=null&&typeof n=="object"&&"name"in n}function UN(n){return n!=null&&typeof n=="object"&&"video"in n}function DN(n){return n!=null&&typeof n=="object"&&"uri"in n}function J0(n){var e;let s;if(IN(n)&&(s=n.name),!(DN(n)&&(s=n.uri,s===void 0))&&!(UN(n)&&(s=(e=n.video)===null||e===void 0?void 0:e.uri,s===void 0))){if(typeof n=="string"&&(s=n),s===void 0)throw new Error("Could not extract file name from the provided input.");if(s.startsWith("https://")){const o=s.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${s}`);s=o[0]}else s.startsWith("files/")&&(s=s.split("files/")[1]);return s}}function Y0(n,e){let s;return n.isVertexAI()?s=e?"publishers/google/models":"models":s=e?"models":"tunedModels",s}function K0(n){for(const e of["models","tunedModels","publisherModels"])if(PN(n,e))return n[e];return[]}function PN(n,e){return n!==null&&typeof n=="object"&&e in n}function ON(n,e={}){const s=n,a={name:s.name,description:s.description,parametersJsonSchema:s.inputSchema};return s.outputSchema&&(a.responseJsonSchema=s.outputSchema),e.behavior&&(a.behavior=e.behavior),{functionDeclarations:[a]}}function LN(n,e={}){const s=[],a=new Set;for(const o of n){const l=o.name;if(a.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);a.add(l);const d=ON(o,e);d.functionDeclarations&&s.push(...d.functionDeclarations)}return{functionDeclarations:s}}function Q0(n,e){let s;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))s={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))s={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))s={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");s={inlinedRequests:e}}else s=e;const a=[s.gcsUri,s.bigqueryUri].filter(Boolean).length,o=[s.inlinedRequests,s.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||a!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(a>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return s}function qN(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function X0(n){if(typeof n!="object"||n===null)return{};const e=n,s=e.inlinedResponses;if(typeof s!="object"||s===null)return n;const o=s.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let l=!1;for(const d of o){if(typeof d!="object"||d===null)continue;const m=d.response;if(typeof m!="object"||m===null)continue;if(m.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function aa(n,e){const s=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(s))return s.split("/").pop();throw new Error(`Invalid batch job name: ${s}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(s))return s.split("/").pop();if(/^\d+$/.test(s))return s;throw new Error(`Invalid batch job name: ${s}.`)}function W0(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BN(n){const e={},s=h(n,["responsesFile"]);s!=null&&y(e,["fileName"],s);const a=h(n,["inlinedResponses","inlinedResponses"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(d=>yC(d))),y(e,["inlinedResponses"],l)}const o=h(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(d=>d)),y(e,["inlinedEmbedContentResponses"],l)}return e}function VN(n){const e={},s=h(n,["predictionsFormat"]);s!=null&&y(e,["format"],s);const a=h(n,["gcsDestination","outputUriPrefix"]);a!=null&&y(e,["gcsUri"],a);const o=h(n,["bigqueryDestination","outputUri"]);return o!=null&&y(e,["bigqueryUri"],o),e}function HN(n){const e={},s=h(n,["format"]);s!=null&&y(e,["predictionsFormat"],s);const a=h(n,["gcsUri"]);a!=null&&y(e,["gcsDestination","outputUriPrefix"],a);const o=h(n,["bigqueryUri"]);if(o!=null&&y(e,["bigqueryDestination","outputUri"],o),h(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(h(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Wr(n){const e={},s=h(n,["name"]);s!=null&&y(e,["name"],s);const a=h(n,["metadata","displayName"]);a!=null&&y(e,["displayName"],a);const o=h(n,["metadata","state"]);o!=null&&y(e,["state"],W0(o));const l=h(n,["metadata","createTime"]);l!=null&&y(e,["createTime"],l);const d=h(n,["metadata","endTime"]);d!=null&&y(e,["endTime"],d);const f=h(n,["metadata","updateTime"]);f!=null&&y(e,["updateTime"],f);const m=h(n,["metadata","model"]);m!=null&&y(e,["model"],m);const p=h(n,["metadata","output"]);return p!=null&&y(e,["dest"],BN(X0(p))),e}function fd(n){const e={},s=h(n,["name"]);s!=null&&y(e,["name"],s);const a=h(n,["displayName"]);a!=null&&y(e,["displayName"],a);const o=h(n,["state"]);o!=null&&y(e,["state"],W0(o));const l=h(n,["error"]);l!=null&&y(e,["error"],l);const d=h(n,["createTime"]);d!=null&&y(e,["createTime"],d);const f=h(n,["startTime"]);f!=null&&y(e,["startTime"],f);const m=h(n,["endTime"]);m!=null&&y(e,["endTime"],m);const p=h(n,["updateTime"]);p!=null&&y(e,["updateTime"],p);const x=h(n,["model"]);x!=null&&y(e,["model"],x);const b=h(n,["inputConfig"]);b!=null&&y(e,["src"],GN(b));const w=h(n,["outputConfig"]);return w!=null&&y(e,["dest"],VN(X0(w))),e}function GN(n){const e={},s=h(n,["instancesFormat"]);s!=null&&y(e,["format"],s);const a=h(n,["gcsSource","uris"]);a!=null&&y(e,["gcsUri"],a);const o=h(n,["bigquerySource","inputUri"]);return o!=null&&y(e,["bigqueryUri"],o),e}function zN(n,e){const s={};if(h(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(h(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const a=h(e,["fileName"]);a!=null&&y(s,["fileName"],a);const o=h(e,["inlinedRequests"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(d=>gC(n,d))),y(s,["requests","requests"],l)}return s}function FN(n){const e={},s=h(n,["format"]);s!=null&&y(e,["instancesFormat"],s);const a=h(n,["gcsUri"]);a!=null&&y(e,["gcsSource","uris"],a);const o=h(n,["bigqueryUri"]);if(o!=null&&y(e,["bigquerySource","inputUri"],o),h(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function $N(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(n,["data"]);s!=null&&y(e,["data"],s);const a=h(n,["mimeType"]);return a!=null&&y(e,["mimeType"],a),e}function JN(n,e){const s={},a=h(e,["name"]);return a!=null&&y(s,["_url","name"],aa(n,a)),s}function YN(n,e){const s={},a=h(e,["name"]);return a!=null&&y(s,["_url","name"],aa(n,a)),s}function KN(n){const e={},s=h(n,["content"]);s!=null&&y(e,["content"],s);const a=h(n,["citationMetadata"]);a!=null&&y(e,["citationMetadata"],QN(a));const o=h(n,["tokenCount"]);o!=null&&y(e,["tokenCount"],o);const l=h(n,["finishReason"]);l!=null&&y(e,["finishReason"],l);const d=h(n,["urlContextMetadata"]);d!=null&&y(e,["urlContextMetadata"],d);const f=h(n,["avgLogprobs"]);f!=null&&y(e,["avgLogprobs"],f);const m=h(n,["groundingMetadata"]);m!=null&&y(e,["groundingMetadata"],m);const p=h(n,["index"]);p!=null&&y(e,["index"],p);const x=h(n,["logprobsResult"]);x!=null&&y(e,["logprobsResult"],x);const b=h(n,["safetyRatings"]);if(b!=null){let w=b;Array.isArray(w)&&(w=w.map(_=>_)),y(e,["safetyRatings"],w)}return e}function QN(n){const e={},s=h(n,["citationSources"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>o)),y(e,["citations"],a)}return e}function Z0(n){const e={},s=h(n,["parts"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>NC(l))),y(e,["parts"],o)}const a=h(n,["role"]);return a!=null&&y(e,["role"],a),e}function XN(n,e){const s={},a=h(n,["displayName"]);if(e!==void 0&&a!=null&&y(e,["batch","displayName"],a),h(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return s}function WN(n,e){const s={},a=h(n,["displayName"]);e!==void 0&&a!=null&&y(e,["displayName"],a);const o=h(n,["dest"]);return e!==void 0&&o!=null&&y(e,["outputConfig"],HN(qN(o))),s}function by(n,e){const s={},a=h(e,["model"]);a!=null&&y(s,["_url","model"],Ee(n,a));const o=h(e,["src"]);o!=null&&y(s,["batch","inputConfig"],zN(n,Q0(n,o)));const l=h(e,["config"]);return l!=null&&XN(l,s),s}function ZN(n,e){const s={},a=h(e,["model"]);a!=null&&y(s,["model"],Ee(n,a));const o=h(e,["src"]);o!=null&&y(s,["inputConfig"],FN(Q0(n,o)));const l=h(e,["config"]);return l!=null&&WN(l,s),s}function eC(n,e){const s={},a=h(n,["displayName"]);return e!==void 0&&a!=null&&y(e,["batch","displayName"],a),s}function tC(n,e){const s={},a=h(e,["model"]);a!=null&&y(s,["_url","model"],Ee(n,a));const o=h(e,["src"]);o!=null&&y(s,["batch","inputConfig"],lC(n,o));const l=h(e,["config"]);return l!=null&&eC(l,s),s}function nC(n,e){const s={},a=h(e,["name"]);return a!=null&&y(s,["_url","name"],aa(n,a)),s}function sC(n,e){const s={},a=h(e,["name"]);return a!=null&&y(s,["_url","name"],aa(n,a)),s}function iC(n){const e={},s=h(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const a=h(n,["name"]);a!=null&&y(e,["name"],a);const o=h(n,["done"]);o!=null&&y(e,["done"],o);const l=h(n,["error"]);return l!=null&&y(e,["error"],l),e}function aC(n){const e={},s=h(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const a=h(n,["name"]);a!=null&&y(e,["name"],a);const o=h(n,["done"]);o!=null&&y(e,["done"],o);const l=h(n,["error"]);return l!=null&&y(e,["error"],l),e}function oC(n,e){const s={},a=h(e,["contents"]);if(a!=null){let l=Id(n,a);Array.isArray(l)&&(l=l.map(d=>d)),y(s,["requests[]","request","content"],l)}const o=h(e,["config"]);return o!=null&&(y(s,["_self"],rC(o,s)),cN(s,{"requests[].*":"requests[].request.*"})),s}function rC(n,e){const s={},a=h(n,["taskType"]);e!==void 0&&a!=null&&y(e,["requests[]","taskType"],a);const o=h(n,["title"]);e!==void 0&&o!=null&&y(e,["requests[]","title"],o);const l=h(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&y(e,["requests[]","outputDimensionality"],l),h(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return s}function lC(n,e){const s={},a=h(e,["fileName"]);a!=null&&y(s,["file_name"],a);const o=h(e,["inlinedRequests"]);return o!=null&&y(s,["requests"],oC(n,o)),s}function cC(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(n,["fileUri"]);s!=null&&y(e,["fileUri"],s);const a=h(n,["mimeType"]);return a!=null&&y(e,["mimeType"],a),e}function uC(n,e,s){const a={},o=h(e,["systemInstruction"]);s!==void 0&&o!=null&&y(s,["systemInstruction"],Z0(wt(o)));const l=h(e,["temperature"]);l!=null&&y(a,["temperature"],l);const d=h(e,["topP"]);d!=null&&y(a,["topP"],d);const f=h(e,["topK"]);f!=null&&y(a,["topK"],f);const m=h(e,["candidateCount"]);m!=null&&y(a,["candidateCount"],m);const p=h(e,["maxOutputTokens"]);p!=null&&y(a,["maxOutputTokens"],p);const x=h(e,["stopSequences"]);x!=null&&y(a,["stopSequences"],x);const b=h(e,["responseLogprobs"]);b!=null&&y(a,["responseLogprobs"],b);const w=h(e,["logprobs"]);w!=null&&y(a,["logprobs"],w);const _=h(e,["presencePenalty"]);_!=null&&y(a,["presencePenalty"],_);const N=h(e,["frequencyPenalty"]);N!=null&&y(a,["frequencyPenalty"],N);const C=h(e,["seed"]);C!=null&&y(a,["seed"],C);const E=h(e,["responseMimeType"]);E!=null&&y(a,["responseMimeType"],E);const R=h(e,["responseSchema"]);R!=null&&y(a,["responseSchema"],Ud(R));const A=h(e,["responseJsonSchema"]);if(A!=null&&y(a,["responseJsonSchema"],A),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=h(e,["safetySettings"]);if(s!==void 0&&k!=null){let X=k;Array.isArray(X)&&(X=X.map(pe=>CC(pe))),y(s,["safetySettings"],X)}const U=h(e,["tools"]);if(s!==void 0&&U!=null){let X=ia(U);Array.isArray(X)&&(X=X.map(pe=>TC(sa(pe)))),y(s,["tools"],X)}const V=h(e,["toolConfig"]);if(s!==void 0&&V!=null&&y(s,["toolConfig"],V),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const B=h(e,["cachedContent"]);s!==void 0&&B!=null&&y(s,["cachedContent"],Bn(n,B));const H=h(e,["responseModalities"]);H!=null&&y(a,["responseModalities"],H);const W=h(e,["mediaResolution"]);W!=null&&y(a,["mediaResolution"],W);const Y=h(e,["speechConfig"]);if(Y!=null&&y(a,["speechConfig"],Dd(Y)),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const J=h(e,["thinkingConfig"]);J!=null&&y(a,["thinkingConfig"],J);const Z=h(e,["imageConfig"]);return Z!=null&&y(a,["imageConfig"],Z),a}function dC(n){const e={},s=h(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const a=h(n,["candidates"]);if(a!=null){let m=a;Array.isArray(m)&&(m=m.map(p=>KN(p))),y(e,["candidates"],m)}const o=h(n,["modelVersion"]);o!=null&&y(e,["modelVersion"],o);const l=h(n,["promptFeedback"]);l!=null&&y(e,["promptFeedback"],l);const d=h(n,["responseId"]);d!=null&&y(e,["responseId"],d);const f=h(n,["usageMetadata"]);return f!=null&&y(e,["usageMetadata"],f),e}function fC(n,e){const s={},a=h(e,["name"]);return a!=null&&y(s,["_url","name"],aa(n,a)),s}function hC(n,e){const s={},a=h(e,["name"]);return a!=null&&y(s,["_url","name"],aa(n,a)),s}function mC(n){const e={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=h(n,["enableWidget"]);return s!=null&&y(e,["enableWidget"],s),e}function pC(n){const e={},s=h(n,["timeRangeFilter"]);if(s!=null&&y(e,["timeRangeFilter"],s),h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function gC(n,e){const s={},a=h(e,["model"]);a!=null&&y(s,["request","model"],Ee(n,a));const o=h(e,["contents"]);if(o!=null){let f=tn(o);Array.isArray(f)&&(f=f.map(m=>Z0(m))),y(s,["request","contents"],f)}const l=h(e,["metadata"]);l!=null&&y(s,["metadata"],l);const d=h(e,["config"]);return d!=null&&y(s,["request","generationConfig"],uC(n,d,h(s,["request"],{}))),s}function yC(n){const e={},s=h(n,["response"]);s!=null&&y(e,["response"],dC(s));const a=h(n,["error"]);return a!=null&&y(e,["error"],a),e}function vC(n,e){const s={},a=h(n,["pageSize"]);e!==void 0&&a!=null&&y(e,["_query","pageSize"],a);const o=h(n,["pageToken"]);if(e!==void 0&&o!=null&&y(e,["_query","pageToken"],o),h(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return s}function xC(n,e){const s={},a=h(n,["pageSize"]);e!==void 0&&a!=null&&y(e,["_query","pageSize"],a);const o=h(n,["pageToken"]);e!==void 0&&o!=null&&y(e,["_query","pageToken"],o);const l=h(n,["filter"]);return e!==void 0&&l!=null&&y(e,["_query","filter"],l),s}function bC(n){const e={},s=h(n,["config"]);return s!=null&&vC(s,e),e}function wC(n){const e={},s=h(n,["config"]);return s!=null&&xC(s,e),e}function _C(n){const e={},s=h(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const a=h(n,["nextPageToken"]);a!=null&&y(e,["nextPageToken"],a);const o=h(n,["operations"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(d=>Wr(d))),y(e,["batchJobs"],l)}return e}function SC(n){const e={},s=h(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const a=h(n,["nextPageToken"]);a!=null&&y(e,["nextPageToken"],a);const o=h(n,["batchPredictionJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(d=>fd(d))),y(e,["batchJobs"],l)}return e}function NC(n){const e={},s=h(n,["videoMetadata"]);s!=null&&y(e,["videoMetadata"],s);const a=h(n,["thought"]);a!=null&&y(e,["thought"],a);const o=h(n,["inlineData"]);o!=null&&y(e,["inlineData"],$N(o));const l=h(n,["fileData"]);l!=null&&y(e,["fileData"],cC(l));const d=h(n,["thoughtSignature"]);d!=null&&y(e,["thoughtSignature"],d);const f=h(n,["functionCall"]);f!=null&&y(e,["functionCall"],f);const m=h(n,["codeExecutionResult"]);m!=null&&y(e,["codeExecutionResult"],m);const p=h(n,["executableCode"]);p!=null&&y(e,["executableCode"],p);const x=h(n,["functionResponse"]);x!=null&&y(e,["functionResponse"],x);const b=h(n,["text"]);return b!=null&&y(e,["text"],b),e}function CC(n){const e={};if(h(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=h(n,["category"]);s!=null&&y(e,["category"],s);const a=h(n,["threshold"]);return a!=null&&y(e,["threshold"],a),e}function TC(n){const e={},s=h(n,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(x=>x)),y(e,["functionDeclarations"],p)}if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=h(n,["googleSearch"]);a!=null&&y(e,["googleSearch"],pC(a));const o=h(n,["googleSearchRetrieval"]);if(o!=null&&y(e,["googleSearchRetrieval"],o),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=h(n,["googleMaps"]);l!=null&&y(e,["googleMaps"],mC(l));const d=h(n,["urlContext"]);d!=null&&y(e,["urlContext"],d);const f=h(n,["computerUse"]);f!=null&&y(e,["computerUse"],f);const m=h(n,["codeExecution"]);return m!=null&&y(e,["codeExecution"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Fs;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Fs||(Fs={}));class xo{constructor(e,s,a,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=s,this.init(e,a,o)}init(e,s,a){var o,l;this.nameInternal=e,this.pageInternal=s[this.nameInternal]||[],this.sdkHttpResponseInternal=s?.sdkHttpResponse,this.idxInternal=0;let d={config:{}};!a||Object.keys(a).length===0?d={config:{}}:typeof a=="object"?d=Object.assign({},a):d=a,d.config&&(d.config.pageToken=s.nextPageToken),this.paramsInternal=d,this.pageInternalSize=(l=(o=d.config)===null||o===void 0?void 0:o.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class EC extends Js{constructor(e){super(),this.apiClient=e,this.create=async s=>(this.apiClient.isVertexAI()&&(s.config=this.formatDestination(s.src,s.config)),this.createInternal(s)),this.createEmbeddings=async s=>{if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(s)},this.list=async(s={})=>new xo(Fs.PAGED_ITEM_BATCH_JOBS,a=>this.listInternal(a),await this.listInternal(s),s)}createInlinedGenerateContentRequest(e){const s=by(this.apiClient,e),a=s._url,o=se("{model}:batchGenerateContent",a),f=s.batch.inputConfig.requests,m=f.requests,p=[];for(const x of m){const b=Object.assign({},x);if(b.systemInstruction){const w=b.systemInstruction;delete b.systemInstruction;const _=b.request;_.systemInstruction=w,b.request=_}p.push(b)}return f.requests=p,delete s.config,delete s._url,delete s._query,{path:o,body:s}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,s){const a=s?Object.assign({},s):{},o=Date.now().toString();if(a.displayName||(a.displayName=`genaiBatchJob_${o}`),a.dest===void 0){const l=this.getGcsUri(e),d=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?a.dest=`${l.slice(0,-6)}/dest`:a.dest=`${l}_dest_${o}`;else if(d)a.dest=`${d}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return a}async createInternal(e){var s,a,o,l;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=ZN(this.apiClient,e);return f=se("batchPredictionJobs",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),d.then(x=>fd(x))}else{const p=by(this.apiClient,e);return f=se("{model}:batchGenerateContent",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),d.then(x=>Wr(x))}}async createEmbeddingsInternal(e){var s,a;let o,l="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=tC(this.apiClient,e);return l=se("{model}:asyncBatchEmbedContent",f._url),d=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),o.then(m=>Wr(m))}}async get(e){var s,a,o,l;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=hC(this.apiClient,e);return f=se("batchPredictionJobs/{name}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),d.then(x=>fd(x))}else{const p=fC(this.apiClient,e);return f=se("batches/{name}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),d.then(x=>Wr(x))}}async cancel(e){var s,a,o,l;let d="",f={};if(this.apiClient.isVertexAI()){const m=YN(this.apiClient,e);d=se("batchPredictionJobs/{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}else{const m=JN(this.apiClient,e);d=se("batches/{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var s,a,o,l;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=wC(e);return f=se("batchPredictionJobs",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),d.then(x=>{const b=SC(x),w=new gy;return Object.assign(w,b),w})}else{const p=bC(e);return f=se("batches",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),d.then(x=>{const b=_C(x),w=new gy;return Object.assign(w,b),w})}}async delete(e){var s,a,o,l;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=sC(this.apiClient,e);return f=se("batchPredictionJobs/{name}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),d.then(x=>aC(x))}else{const p=nC(this.apiClient,e);return f=se("batches/{name}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),d.then(x=>iC(x))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AC(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(n,["data"]);s!=null&&y(e,["data"],s);const a=h(n,["mimeType"]);return a!=null&&y(e,["mimeType"],a),e}function wy(n){const e={},s=h(n,["parts"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>KC(l))),y(e,["parts"],o)}const a=h(n,["role"]);return a!=null&&y(e,["role"],a),e}function kC(n,e){const s={},a=h(n,["ttl"]);e!==void 0&&a!=null&&y(e,["ttl"],a);const o=h(n,["expireTime"]);e!==void 0&&o!=null&&y(e,["expireTime"],o);const l=h(n,["displayName"]);e!==void 0&&l!=null&&y(e,["displayName"],l);const d=h(n,["contents"]);if(e!==void 0&&d!=null){let x=tn(d);Array.isArray(x)&&(x=x.map(b=>wy(b))),y(e,["contents"],x)}const f=h(n,["systemInstruction"]);e!==void 0&&f!=null&&y(e,["systemInstruction"],wy(wt(f)));const m=h(n,["tools"]);if(e!==void 0&&m!=null){let x=m;Array.isArray(x)&&(x=x.map(b=>QC(b))),y(e,["tools"],x)}const p=h(n,["toolConfig"]);if(e!==void 0&&p!=null&&y(e,["toolConfig"],p),h(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return s}function jC(n,e){const s={},a=h(n,["ttl"]);e!==void 0&&a!=null&&y(e,["ttl"],a);const o=h(n,["expireTime"]);e!==void 0&&o!=null&&y(e,["expireTime"],o);const l=h(n,["displayName"]);e!==void 0&&l!=null&&y(e,["displayName"],l);const d=h(n,["contents"]);if(e!==void 0&&d!=null){let b=tn(d);Array.isArray(b)&&(b=b.map(w=>w)),y(e,["contents"],b)}const f=h(n,["systemInstruction"]);e!==void 0&&f!=null&&y(e,["systemInstruction"],wt(f));const m=h(n,["tools"]);if(e!==void 0&&m!=null){let b=m;Array.isArray(b)&&(b=b.map(w=>XC(w))),y(e,["tools"],b)}const p=h(n,["toolConfig"]);e!==void 0&&p!=null&&y(e,["toolConfig"],p);const x=h(n,["kmsKeyName"]);return e!==void 0&&x!=null&&y(e,["encryption_spec","kmsKeyName"],x),s}function RC(n,e){const s={},a=h(e,["model"]);a!=null&&y(s,["model"],V0(n,a));const o=h(e,["config"]);return o!=null&&kC(o,s),s}function MC(n,e){const s={},a=h(e,["model"]);a!=null&&y(s,["model"],V0(n,a));const o=h(e,["config"]);return o!=null&&jC(o,s),s}function IC(n,e){const s={},a=h(e,["name"]);return a!=null&&y(s,["_url","name"],Bn(n,a)),s}function UC(n,e){const s={},a=h(e,["name"]);return a!=null&&y(s,["_url","name"],Bn(n,a)),s}function DC(n){const e={},s=h(n,["sdkHttpResponse"]);return s!=null&&y(e,["sdkHttpResponse"],s),e}function PC(n){const e={},s=h(n,["sdkHttpResponse"]);return s!=null&&y(e,["sdkHttpResponse"],s),e}function OC(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(n,["fileUri"]);s!=null&&y(e,["fileUri"],s);const a=h(n,["mimeType"]);return a!=null&&y(e,["mimeType"],a),e}function LC(n){const e={};if(h(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const s=h(n,["description"]);s!=null&&y(e,["description"],s);const a=h(n,["name"]);a!=null&&y(e,["name"],a);const o=h(n,["parameters"]);o!=null&&y(e,["parameters"],o);const l=h(n,["parametersJsonSchema"]);l!=null&&y(e,["parametersJsonSchema"],l);const d=h(n,["response"]);d!=null&&y(e,["response"],d);const f=h(n,["responseJsonSchema"]);return f!=null&&y(e,["responseJsonSchema"],f),e}function qC(n,e){const s={},a=h(e,["name"]);return a!=null&&y(s,["_url","name"],Bn(n,a)),s}function BC(n,e){const s={},a=h(e,["name"]);return a!=null&&y(s,["_url","name"],Bn(n,a)),s}function VC(n){const e={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=h(n,["enableWidget"]);return s!=null&&y(e,["enableWidget"],s),e}function HC(n){const e={},s=h(n,["timeRangeFilter"]);if(s!=null&&y(e,["timeRangeFilter"],s),h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function GC(n,e){const s={},a=h(n,["pageSize"]);e!==void 0&&a!=null&&y(e,["_query","pageSize"],a);const o=h(n,["pageToken"]);return e!==void 0&&o!=null&&y(e,["_query","pageToken"],o),s}function zC(n,e){const s={},a=h(n,["pageSize"]);e!==void 0&&a!=null&&y(e,["_query","pageSize"],a);const o=h(n,["pageToken"]);return e!==void 0&&o!=null&&y(e,["_query","pageToken"],o),s}function FC(n){const e={},s=h(n,["config"]);return s!=null&&GC(s,e),e}function $C(n){const e={},s=h(n,["config"]);return s!=null&&zC(s,e),e}function JC(n){const e={},s=h(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const a=h(n,["nextPageToken"]);a!=null&&y(e,["nextPageToken"],a);const o=h(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(d=>d)),y(e,["cachedContents"],l)}return e}function YC(n){const e={},s=h(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const a=h(n,["nextPageToken"]);a!=null&&y(e,["nextPageToken"],a);const o=h(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(d=>d)),y(e,["cachedContents"],l)}return e}function KC(n){const e={},s=h(n,["videoMetadata"]);s!=null&&y(e,["videoMetadata"],s);const a=h(n,["thought"]);a!=null&&y(e,["thought"],a);const o=h(n,["inlineData"]);o!=null&&y(e,["inlineData"],AC(o));const l=h(n,["fileData"]);l!=null&&y(e,["fileData"],OC(l));const d=h(n,["thoughtSignature"]);d!=null&&y(e,["thoughtSignature"],d);const f=h(n,["functionCall"]);f!=null&&y(e,["functionCall"],f);const m=h(n,["codeExecutionResult"]);m!=null&&y(e,["codeExecutionResult"],m);const p=h(n,["executableCode"]);p!=null&&y(e,["executableCode"],p);const x=h(n,["functionResponse"]);x!=null&&y(e,["functionResponse"],x);const b=h(n,["text"]);return b!=null&&y(e,["text"],b),e}function QC(n){const e={},s=h(n,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(x=>x)),y(e,["functionDeclarations"],p)}if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=h(n,["googleSearch"]);a!=null&&y(e,["googleSearch"],HC(a));const o=h(n,["googleSearchRetrieval"]);if(o!=null&&y(e,["googleSearchRetrieval"],o),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=h(n,["googleMaps"]);l!=null&&y(e,["googleMaps"],VC(l));const d=h(n,["urlContext"]);d!=null&&y(e,["urlContext"],d);const f=h(n,["computerUse"]);f!=null&&y(e,["computerUse"],f);const m=h(n,["codeExecution"]);return m!=null&&y(e,["codeExecution"],m),e}function XC(n){const e={},s=h(n,["functionDeclarations"]);if(s!=null){let b=s;Array.isArray(b)&&(b=b.map(w=>LC(w))),y(e,["functionDeclarations"],b)}const a=h(n,["retrieval"]);a!=null&&y(e,["retrieval"],a);const o=h(n,["googleSearch"]);o!=null&&y(e,["googleSearch"],o);const l=h(n,["googleSearchRetrieval"]);l!=null&&y(e,["googleSearchRetrieval"],l);const d=h(n,["enterpriseWebSearch"]);d!=null&&y(e,["enterpriseWebSearch"],d);const f=h(n,["googleMaps"]);f!=null&&y(e,["googleMaps"],f);const m=h(n,["urlContext"]);m!=null&&y(e,["urlContext"],m);const p=h(n,["computerUse"]);p!=null&&y(e,["computerUse"],p);const x=h(n,["codeExecution"]);return x!=null&&y(e,["codeExecution"],x),e}function WC(n,e){const s={},a=h(n,["ttl"]);e!==void 0&&a!=null&&y(e,["ttl"],a);const o=h(n,["expireTime"]);return e!==void 0&&o!=null&&y(e,["expireTime"],o),s}function ZC(n,e){const s={},a=h(n,["ttl"]);e!==void 0&&a!=null&&y(e,["ttl"],a);const o=h(n,["expireTime"]);return e!==void 0&&o!=null&&y(e,["expireTime"],o),s}function eT(n,e){const s={},a=h(e,["name"]);a!=null&&y(s,["_url","name"],Bn(n,a));const o=h(e,["config"]);return o!=null&&WC(o,s),s}function tT(n,e){const s={},a=h(e,["name"]);a!=null&&y(s,["_url","name"],Bn(n,a));const o=h(e,["config"]);return o!=null&&ZC(o,s),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nT extends Js{constructor(e){super(),this.apiClient=e,this.list=async(s={})=>new xo(Fs.PAGED_ITEM_CACHED_CONTENTS,a=>this.listInternal(a),await this.listInternal(s),s)}async create(e){var s,a,o,l;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=MC(this.apiClient,e);return f=se("cachedContents",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),d.then(x=>x)}else{const p=RC(this.apiClient,e);return f=se("cachedContents",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),d.then(x=>x)}}async get(e){var s,a,o,l;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=BC(this.apiClient,e);return f=se("{name}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),d.then(x=>x)}else{const p=qC(this.apiClient,e);return f=se("{name}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),d.then(x=>x)}}async delete(e){var s,a,o,l;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=UC(this.apiClient,e);return f=se("{name}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),d.then(x=>{const b=PC(x),w=new my;return Object.assign(w,b),w})}else{const p=IC(this.apiClient,e);return f=se("{name}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),d.then(x=>{const b=DC(x),w=new my;return Object.assign(w,b),w})}}async update(e){var s,a,o,l;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=tT(this.apiClient,e);return f=se("{name}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),d.then(x=>x)}else{const p=eT(this.apiClient,e);return f=se("{name}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),d.then(x=>x)}}async listInternal(e){var s,a,o,l;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=$C(e);return f=se("cachedContents",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),d.then(x=>{const b=YC(x),w=new py;return Object.assign(w,b),w})}else{const p=FC(e);return f=se("cachedContents",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),d.then(x=>{const b=JC(x),w=new py;return Object.assign(w,b),w})}}}function _y(n){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&n[e],a=0;if(s)return s.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&a>=n.length&&(n=void 0),{value:n&&n[a++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ze(n){return this instanceof ze?(this.v=n,this):new ze(n)}function Yi(n,e,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=s.apply(n,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",d),o[Symbol.asyncIterator]=function(){return this},o;function d(_){return function(N){return Promise.resolve(N).then(_,b)}}function f(_,N){a[_]&&(o[_]=function(C){return new Promise(function(E,R){l.push([_,C,E,R])>1||m(_,C)})},N&&(o[_]=N(o[_])))}function m(_,N){try{p(a[_](N))}catch(C){w(l[0][3],C)}}function p(_){_.value instanceof ze?Promise.resolve(_.value.v).then(x,b):w(l[0][2],_)}function x(_){m("next",_)}function b(_){m("throw",_)}function w(_,N){_(N),l.shift(),l.length&&m(l[0][0],l[0][1])}}function uo(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],s;return e?e.call(n):(n=typeof _y=="function"?_y(n):n[Symbol.iterator](),s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s);function a(l){s[l]=n[l]&&function(d){return new Promise(function(f,m){d=n[l](d),o(f,m,d.done,d.value)})}}function o(l,d,f,m){Promise.resolve(m).then(function(p){l({value:p,done:f})},d)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sT(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const s=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return s===void 0?!1:ev(s)}function ev(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function iT(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Sy(n){if(n===void 0||n.length===0)return[];const e=[],s=n.length;let a=0;for(;a<s;)if(n[a].role==="user")e.push(n[a]),a++;else{const o=[];let l=!0;for(;a<s&&n[a].role==="model";)o.push(n[a]),l&&!ev(n[a])&&(l=!1),a++;l?e.push(...o):e.pop()}return e}class aT{constructor(e,s){this.modelsModule=e,this.apiClient=s}create(e){return new oT(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class oT{constructor(e,s,a,o={},l=[]){this.apiClient=e,this.modelsModule=s,this.model=a,this.config=o,this.history=l,this.sendPromise=Promise.resolve(),iT(l)}async sendMessage(e){var s;await this.sendPromise;const a=wt(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(a),config:(s=e.config)!==null&&s!==void 0?s:this.config});return this.sendPromise=(async()=>{var l,d,f;const m=await o,p=(d=(l=m.candidates)===null||l===void 0?void 0:l[0])===null||d===void 0?void 0:d.content,x=m.automaticFunctionCallingHistory,b=this.getHistory(!0).length;let w=[];x!=null&&(w=(f=x.slice(b))!==null&&f!==void 0?f:[]);const _=p?[p]:[];this.recordHistory(a,_,w)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var s;await this.sendPromise;const a=wt(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(a),config:(s=e.config)!==null&&s!==void 0?s:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const l=await o;return this.processStreamResponse(l,a)}getHistory(e=!1){const s=e?Sy(this.history):this.history;return structuredClone(s)}processStreamResponse(e,s){var a,o;return Yi(this,arguments,function*(){var d,f,m,p;const x=[];try{for(var b=!0,w=uo(e),_;_=yield ze(w.next()),d=_.done,!d;b=!0){p=_.value,b=!1;const N=p;if(sT(N)){const C=(o=(a=N.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content;C!==void 0&&x.push(C)}yield yield ze(N)}}catch(N){f={error:N}}finally{try{!b&&!d&&(m=w.return)&&(yield ze(m.call(w)))}finally{if(f)throw f.error}}this.recordHistory(s,x)})}recordHistory(e,s,a){let o=[];s.length>0&&s.every(l=>l.role!==void 0)?o=s:o.push({role:"model",parts:[]}),a&&a.length>0?this.history.push(...Sy(a)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hl extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,hl.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rT(n){const e={},s=h(n,["file"]);return s!=null&&y(e,["file"],s),e}function lT(n){const e={},s=h(n,["sdkHttpResponse"]);return s!=null&&y(e,["sdkHttpResponse"],s),e}function cT(n){const e={},s=h(n,["name"]);return s!=null&&y(e,["_url","file"],J0(s)),e}function uT(n){const e={},s=h(n,["sdkHttpResponse"]);return s!=null&&y(e,["sdkHttpResponse"],s),e}function dT(n){const e={},s=h(n,["name"]);return s!=null&&y(e,["_url","file"],J0(s)),e}function fT(n,e){const s={},a=h(n,["pageSize"]);e!==void 0&&a!=null&&y(e,["_query","pageSize"],a);const o=h(n,["pageToken"]);return e!==void 0&&o!=null&&y(e,["_query","pageToken"],o),s}function hT(n){const e={},s=h(n,["config"]);return s!=null&&fT(s,e),e}function mT(n){const e={},s=h(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const a=h(n,["nextPageToken"]);a!=null&&y(e,["nextPageToken"],a);const o=h(n,["files"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(d=>d)),y(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pT extends Js{constructor(e){super(),this.apiClient=e,this.list=async(s={})=>new xo(Fs.PAGED_ITEM_FILES,a=>this.listInternal(a),await this.listInternal(s),s)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(s=>s)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var s,a;let o,l="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=hT(e);return l=se("files",f._url),d=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(p=>{const x=p;return x.sdkHttpResponse={headers:m.headers},x})),o.then(m=>{const p=mT(m),x=new TN;return Object.assign(x,p),x})}}async createInternal(e){var s,a;let o,l="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=rT(e);return l=se("upload/v1beta/files",f._url),d=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),o.then(m=>{const p=lT(m),x=new EN;return Object.assign(x,p),x})}}async get(e){var s,a;let o,l="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=dT(e);return l=se("files/{file}",f._url),d=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var s,a;let o,l="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=cT(e);return l=se("files/{file}",f._url),d=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(p=>{const x=p;return x.sdkHttpResponse={headers:m.headers},x})),o.then(m=>{const p=uT(m),x=new AN;return Object.assign(x,p),x})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zr(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(n,["data"]);s!=null&&y(e,["data"],s);const a=h(n,["mimeType"]);return a!=null&&y(e,["mimeType"],a),e}function gT(n){const e={},s=h(n,["parts"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>RT(l))),y(e,["parts"],o)}const a=h(n,["role"]);return a!=null&&y(e,["role"],a),e}function yT(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(n,["fileUri"]);s!=null&&y(e,["fileUri"],s);const a=h(n,["mimeType"]);return a!=null&&y(e,["mimeType"],a),e}function vT(n){const e={};if(h(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const s=h(n,["description"]);s!=null&&y(e,["description"],s);const a=h(n,["name"]);a!=null&&y(e,["name"],a);const o=h(n,["parameters"]);o!=null&&y(e,["parameters"],o);const l=h(n,["parametersJsonSchema"]);l!=null&&y(e,["parametersJsonSchema"],l);const d=h(n,["response"]);d!=null&&y(e,["response"],d);const f=h(n,["responseJsonSchema"]);return f!=null&&y(e,["responseJsonSchema"],f),e}function xT(n){const e={},s=h(n,["modelSelectionConfig"]);s!=null&&y(e,["modelConfig"],s);const a=h(n,["audioTimestamp"]);a!=null&&y(e,["audioTimestamp"],a);const o=h(n,["candidateCount"]);o!=null&&y(e,["candidateCount"],o);const l=h(n,["enableAffectiveDialog"]);l!=null&&y(e,["enableAffectiveDialog"],l);const d=h(n,["frequencyPenalty"]);d!=null&&y(e,["frequencyPenalty"],d);const f=h(n,["logprobs"]);f!=null&&y(e,["logprobs"],f);const m=h(n,["maxOutputTokens"]);m!=null&&y(e,["maxOutputTokens"],m);const p=h(n,["mediaResolution"]);p!=null&&y(e,["mediaResolution"],p);const x=h(n,["presencePenalty"]);x!=null&&y(e,["presencePenalty"],x);const b=h(n,["responseJsonSchema"]);b!=null&&y(e,["responseJsonSchema"],b);const w=h(n,["responseLogprobs"]);w!=null&&y(e,["responseLogprobs"],w);const _=h(n,["responseMimeType"]);_!=null&&y(e,["responseMimeType"],_);const N=h(n,["responseModalities"]);N!=null&&y(e,["responseModalities"],N);const C=h(n,["responseSchema"]);C!=null&&y(e,["responseSchema"],C);const E=h(n,["routingConfig"]);E!=null&&y(e,["routingConfig"],E);const R=h(n,["seed"]);R!=null&&y(e,["seed"],R);const A=h(n,["speechConfig"]);A!=null&&y(e,["speechConfig"],tv(A));const k=h(n,["stopSequences"]);k!=null&&y(e,["stopSequences"],k);const U=h(n,["temperature"]);U!=null&&y(e,["temperature"],U);const V=h(n,["thinkingConfig"]);V!=null&&y(e,["thinkingConfig"],V);const B=h(n,["topK"]);B!=null&&y(e,["topK"],B);const H=h(n,["topP"]);if(H!=null&&y(e,["topP"],H),h(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function bT(n){const e={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=h(n,["enableWidget"]);return s!=null&&y(e,["enableWidget"],s),e}function wT(n){const e={},s=h(n,["timeRangeFilter"]);if(s!=null&&y(e,["timeRangeFilter"],s),h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function _T(n,e){const s={},a=h(n,["generationConfig"]);e!==void 0&&a!=null&&y(e,["setup","generationConfig"],a);const o=h(n,["responseModalities"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","responseModalities"],o);const l=h(n,["temperature"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","temperature"],l);const d=h(n,["topP"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","topP"],d);const f=h(n,["topK"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","topK"],f);const m=h(n,["maxOutputTokens"]);e!==void 0&&m!=null&&y(e,["setup","generationConfig","maxOutputTokens"],m);const p=h(n,["mediaResolution"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","mediaResolution"],p);const x=h(n,["seed"]);e!==void 0&&x!=null&&y(e,["setup","generationConfig","seed"],x);const b=h(n,["speechConfig"]);e!==void 0&&b!=null&&y(e,["setup","generationConfig","speechConfig"],Pd(b));const w=h(n,["thinkingConfig"]);e!==void 0&&w!=null&&y(e,["setup","generationConfig","thinkingConfig"],w);const _=h(n,["enableAffectiveDialog"]);e!==void 0&&_!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],_);const N=h(n,["systemInstruction"]);e!==void 0&&N!=null&&y(e,["setup","systemInstruction"],gT(wt(N)));const C=h(n,["tools"]);if(e!==void 0&&C!=null){let B=ia(C);Array.isArray(B)&&(B=B.map(H=>IT(sa(H)))),y(e,["setup","tools"],B)}const E=h(n,["sessionResumption"]);e!==void 0&&E!=null&&y(e,["setup","sessionResumption"],MT(E));const R=h(n,["inputAudioTranscription"]);e!==void 0&&R!=null&&y(e,["setup","inputAudioTranscription"],R);const A=h(n,["outputAudioTranscription"]);e!==void 0&&A!=null&&y(e,["setup","outputAudioTranscription"],A);const k=h(n,["realtimeInputConfig"]);e!==void 0&&k!=null&&y(e,["setup","realtimeInputConfig"],k);const U=h(n,["contextWindowCompression"]);e!==void 0&&U!=null&&y(e,["setup","contextWindowCompression"],U);const V=h(n,["proactivity"]);return e!==void 0&&V!=null&&y(e,["setup","proactivity"],V),s}function ST(n,e){const s={},a=h(n,["generationConfig"]);e!==void 0&&a!=null&&y(e,["setup","generationConfig"],xT(a));const o=h(n,["responseModalities"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","responseModalities"],o);const l=h(n,["temperature"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","temperature"],l);const d=h(n,["topP"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","topP"],d);const f=h(n,["topK"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","topK"],f);const m=h(n,["maxOutputTokens"]);e!==void 0&&m!=null&&y(e,["setup","generationConfig","maxOutputTokens"],m);const p=h(n,["mediaResolution"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","mediaResolution"],p);const x=h(n,["seed"]);e!==void 0&&x!=null&&y(e,["setup","generationConfig","seed"],x);const b=h(n,["speechConfig"]);e!==void 0&&b!=null&&y(e,["setup","generationConfig","speechConfig"],tv(Pd(b)));const w=h(n,["thinkingConfig"]);e!==void 0&&w!=null&&y(e,["setup","generationConfig","thinkingConfig"],w);const _=h(n,["enableAffectiveDialog"]);e!==void 0&&_!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],_);const N=h(n,["systemInstruction"]);e!==void 0&&N!=null&&y(e,["setup","systemInstruction"],wt(N));const C=h(n,["tools"]);if(e!==void 0&&C!=null){let B=ia(C);Array.isArray(B)&&(B=B.map(H=>UT(sa(H)))),y(e,["setup","tools"],B)}const E=h(n,["sessionResumption"]);e!==void 0&&E!=null&&y(e,["setup","sessionResumption"],E);const R=h(n,["inputAudioTranscription"]);e!==void 0&&R!=null&&y(e,["setup","inputAudioTranscription"],R);const A=h(n,["outputAudioTranscription"]);e!==void 0&&A!=null&&y(e,["setup","outputAudioTranscription"],A);const k=h(n,["realtimeInputConfig"]);e!==void 0&&k!=null&&y(e,["setup","realtimeInputConfig"],k);const U=h(n,["contextWindowCompression"]);e!==void 0&&U!=null&&y(e,["setup","contextWindowCompression"],U);const V=h(n,["proactivity"]);return e!==void 0&&V!=null&&y(e,["setup","proactivity"],V),s}function NT(n,e){const s={},a=h(e,["model"]);a!=null&&y(s,["setup","model"],Ee(n,a));const o=h(e,["config"]);return o!=null&&y(s,["config"],_T(o,s)),s}function CT(n,e){const s={},a=h(e,["model"]);a!=null&&y(s,["setup","model"],Ee(n,a));const o=h(e,["config"]);return o!=null&&y(s,["config"],ST(o,s)),s}function TT(n){const e={},s=h(n,["musicGenerationConfig"]);return s!=null&&y(e,["musicGenerationConfig"],s),e}function ET(n){const e={},s=h(n,["weightedPrompts"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>o)),y(e,["weightedPrompts"],a)}return e}function AT(n){const e={},s=h(n,["media"]);if(s!=null){let p=H0(s);Array.isArray(p)&&(p=p.map(x=>Zr(x))),y(e,["mediaChunks"],p)}const a=h(n,["audio"]);a!=null&&y(e,["audio"],Zr(z0(a)));const o=h(n,["audioStreamEnd"]);o!=null&&y(e,["audioStreamEnd"],o);const l=h(n,["video"]);l!=null&&y(e,["video"],Zr(G0(l)));const d=h(n,["text"]);d!=null&&y(e,["text"],d);const f=h(n,["activityStart"]);f!=null&&y(e,["activityStart"],f);const m=h(n,["activityEnd"]);return m!=null&&y(e,["activityEnd"],m),e}function kT(n){const e={},s=h(n,["media"]);if(s!=null){let p=H0(s);Array.isArray(p)&&(p=p.map(x=>x)),y(e,["mediaChunks"],p)}const a=h(n,["audio"]);a!=null&&y(e,["audio"],z0(a));const o=h(n,["audioStreamEnd"]);o!=null&&y(e,["audioStreamEnd"],o);const l=h(n,["video"]);l!=null&&y(e,["video"],G0(l));const d=h(n,["text"]);d!=null&&y(e,["text"],d);const f=h(n,["activityStart"]);f!=null&&y(e,["activityStart"],f);const m=h(n,["activityEnd"]);return m!=null&&y(e,["activityEnd"],m),e}function jT(n){const e={},s=h(n,["setupComplete"]);s!=null&&y(e,["setupComplete"],s);const a=h(n,["serverContent"]);a!=null&&y(e,["serverContent"],a);const o=h(n,["toolCall"]);o!=null&&y(e,["toolCall"],o);const l=h(n,["toolCallCancellation"]);l!=null&&y(e,["toolCallCancellation"],l);const d=h(n,["usageMetadata"]);d!=null&&y(e,["usageMetadata"],DT(d));const f=h(n,["goAway"]);f!=null&&y(e,["goAway"],f);const m=h(n,["sessionResumptionUpdate"]);return m!=null&&y(e,["sessionResumptionUpdate"],m),e}function RT(n){const e={},s=h(n,["videoMetadata"]);s!=null&&y(e,["videoMetadata"],s);const a=h(n,["thought"]);a!=null&&y(e,["thought"],a);const o=h(n,["inlineData"]);o!=null&&y(e,["inlineData"],Zr(o));const l=h(n,["fileData"]);l!=null&&y(e,["fileData"],yT(l));const d=h(n,["thoughtSignature"]);d!=null&&y(e,["thoughtSignature"],d);const f=h(n,["functionCall"]);f!=null&&y(e,["functionCall"],f);const m=h(n,["codeExecutionResult"]);m!=null&&y(e,["codeExecutionResult"],m);const p=h(n,["executableCode"]);p!=null&&y(e,["executableCode"],p);const x=h(n,["functionResponse"]);x!=null&&y(e,["functionResponse"],x);const b=h(n,["text"]);return b!=null&&y(e,["text"],b),e}function MT(n){const e={},s=h(n,["handle"]);if(s!=null&&y(e,["handle"],s),h(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function tv(n){const e={},s=h(n,["voiceConfig"]);if(s!=null&&y(e,["voiceConfig"],s),h(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const a=h(n,["languageCode"]);return a!=null&&y(e,["languageCode"],a),e}function IT(n){const e={},s=h(n,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(x=>x)),y(e,["functionDeclarations"],p)}if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=h(n,["googleSearch"]);a!=null&&y(e,["googleSearch"],wT(a));const o=h(n,["googleSearchRetrieval"]);if(o!=null&&y(e,["googleSearchRetrieval"],o),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=h(n,["googleMaps"]);l!=null&&y(e,["googleMaps"],bT(l));const d=h(n,["urlContext"]);d!=null&&y(e,["urlContext"],d);const f=h(n,["computerUse"]);f!=null&&y(e,["computerUse"],f);const m=h(n,["codeExecution"]);return m!=null&&y(e,["codeExecution"],m),e}function UT(n){const e={},s=h(n,["functionDeclarations"]);if(s!=null){let b=s;Array.isArray(b)&&(b=b.map(w=>vT(w))),y(e,["functionDeclarations"],b)}const a=h(n,["retrieval"]);a!=null&&y(e,["retrieval"],a);const o=h(n,["googleSearch"]);o!=null&&y(e,["googleSearch"],o);const l=h(n,["googleSearchRetrieval"]);l!=null&&y(e,["googleSearchRetrieval"],l);const d=h(n,["enterpriseWebSearch"]);d!=null&&y(e,["enterpriseWebSearch"],d);const f=h(n,["googleMaps"]);f!=null&&y(e,["googleMaps"],f);const m=h(n,["urlContext"]);m!=null&&y(e,["urlContext"],m);const p=h(n,["computerUse"]);p!=null&&y(e,["computerUse"],p);const x=h(n,["codeExecution"]);return x!=null&&y(e,["codeExecution"],x),e}function DT(n){const e={},s=h(n,["promptTokenCount"]);s!=null&&y(e,["promptTokenCount"],s);const a=h(n,["cachedContentTokenCount"]);a!=null&&y(e,["cachedContentTokenCount"],a);const o=h(n,["candidatesTokenCount"]);o!=null&&y(e,["responseTokenCount"],o);const l=h(n,["toolUsePromptTokenCount"]);l!=null&&y(e,["toolUsePromptTokenCount"],l);const d=h(n,["thoughtsTokenCount"]);d!=null&&y(e,["thoughtsTokenCount"],d);const f=h(n,["totalTokenCount"]);f!=null&&y(e,["totalTokenCount"],f);const m=h(n,["promptTokensDetails"]);if(m!=null){let _=m;Array.isArray(_)&&(_=_.map(N=>N)),y(e,["promptTokensDetails"],_)}const p=h(n,["cacheTokensDetails"]);if(p!=null){let _=p;Array.isArray(_)&&(_=_.map(N=>N)),y(e,["cacheTokensDetails"],_)}const x=h(n,["candidatesTokensDetails"]);if(x!=null){let _=x;Array.isArray(_)&&(_=_.map(N=>N)),y(e,["responseTokensDetails"],_)}const b=h(n,["toolUsePromptTokensDetails"]);if(b!=null){let _=b;Array.isArray(_)&&(_=_.map(N=>N)),y(e,["toolUsePromptTokensDetails"],_)}const w=h(n,["trafficType"]);return w!=null&&y(e,["trafficType"],w),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PT(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(n,["data"]);s!=null&&y(e,["data"],s);const a=h(n,["mimeType"]);return a!=null&&y(e,["mimeType"],a),e}function OT(n){const e={},s=h(n,["content"]);s!=null&&y(e,["content"],s);const a=h(n,["citationMetadata"]);a!=null&&y(e,["citationMetadata"],LT(a));const o=h(n,["tokenCount"]);o!=null&&y(e,["tokenCount"],o);const l=h(n,["finishReason"]);l!=null&&y(e,["finishReason"],l);const d=h(n,["urlContextMetadata"]);d!=null&&y(e,["urlContextMetadata"],d);const f=h(n,["avgLogprobs"]);f!=null&&y(e,["avgLogprobs"],f);const m=h(n,["groundingMetadata"]);m!=null&&y(e,["groundingMetadata"],m);const p=h(n,["index"]);p!=null&&y(e,["index"],p);const x=h(n,["logprobsResult"]);x!=null&&y(e,["logprobsResult"],x);const b=h(n,["safetyRatings"]);if(b!=null){let w=b;Array.isArray(w)&&(w=w.map(_=>_)),y(e,["safetyRatings"],w)}return e}function LT(n){const e={},s=h(n,["citationSources"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>o)),y(e,["citations"],a)}return e}function qT(n,e){const s={},a=h(e,["model"]);a!=null&&y(s,["_url","model"],Ee(n,a));const o=h(e,["contents"]);if(o!=null){let l=tn(o);Array.isArray(l)&&(l=l.map(d=>d)),y(s,["contents"],l)}return s}function BT(n){const e={},s=h(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const a=h(n,["tokensInfo"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["tokensInfo"],o)}return e}function VT(n){const e={},s=h(n,["values"]);s!=null&&y(e,["values"],s);const a=h(n,["statistics"]);return a!=null&&y(e,["statistics"],HT(a)),e}function HT(n){const e={},s=h(n,["truncated"]);s!=null&&y(e,["truncated"],s);const a=h(n,["token_count"]);return a!=null&&y(e,["tokenCount"],a),e}function ml(n){const e={},s=h(n,["parts"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>JE(l))),y(e,["parts"],o)}const a=h(n,["role"]);return a!=null&&y(e,["role"],a),e}function GT(n){const e={},s=h(n,["controlType"]);s!=null&&y(e,["controlType"],s);const a=h(n,["enableControlImageComputation"]);return a!=null&&y(e,["computeControl"],a),e}function zT(n){const e={};if(h(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(h(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(h(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function FT(n,e){const s={},a=h(n,["systemInstruction"]);e!==void 0&&a!=null&&y(e,["systemInstruction"],wt(a));const o=h(n,["tools"]);if(e!==void 0&&o!=null){let d=o;Array.isArray(d)&&(d=d.map(f=>ov(f))),y(e,["tools"],d)}const l=h(n,["generationConfig"]);return e!==void 0&&l!=null&&y(e,["generationConfig"],UE(l)),s}function $T(n,e){const s={},a=h(e,["model"]);a!=null&&y(s,["_url","model"],Ee(n,a));const o=h(e,["contents"]);if(o!=null){let d=tn(o);Array.isArray(d)&&(d=d.map(f=>ml(f))),y(s,["contents"],d)}const l=h(e,["config"]);return l!=null&&zT(l),s}function JT(n,e){const s={},a=h(e,["model"]);a!=null&&y(s,["_url","model"],Ee(n,a));const o=h(e,["contents"]);if(o!=null){let d=tn(o);Array.isArray(d)&&(d=d.map(f=>f)),y(s,["contents"],d)}const l=h(e,["config"]);return l!=null&&FT(l,s),s}function YT(n){const e={},s=h(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const a=h(n,["totalTokens"]);a!=null&&y(e,["totalTokens"],a);const o=h(n,["cachedContentTokenCount"]);return o!=null&&y(e,["cachedContentTokenCount"],o),e}function KT(n){const e={},s=h(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const a=h(n,["totalTokens"]);return a!=null&&y(e,["totalTokens"],a),e}function QT(n,e){const s={},a=h(e,["model"]);return a!=null&&y(s,["_url","name"],Ee(n,a)),s}function XT(n,e){const s={},a=h(e,["model"]);return a!=null&&y(s,["_url","name"],Ee(n,a)),s}function WT(n){const e={},s=h(n,["sdkHttpResponse"]);return s!=null&&y(e,["sdkHttpResponse"],s),e}function ZT(n){const e={},s=h(n,["sdkHttpResponse"]);return s!=null&&y(e,["sdkHttpResponse"],s),e}function eE(n,e){const s={},a=h(n,["outputGcsUri"]);e!==void 0&&a!=null&&y(e,["parameters","storageUri"],a);const o=h(n,["negativePrompt"]);e!==void 0&&o!=null&&y(e,["parameters","negativePrompt"],o);const l=h(n,["numberOfImages"]);e!==void 0&&l!=null&&y(e,["parameters","sampleCount"],l);const d=h(n,["aspectRatio"]);e!==void 0&&d!=null&&y(e,["parameters","aspectRatio"],d);const f=h(n,["guidanceScale"]);e!==void 0&&f!=null&&y(e,["parameters","guidanceScale"],f);const m=h(n,["seed"]);e!==void 0&&m!=null&&y(e,["parameters","seed"],m);const p=h(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&y(e,["parameters","safetySetting"],p);const x=h(n,["personGeneration"]);e!==void 0&&x!=null&&y(e,["parameters","personGeneration"],x);const b=h(n,["includeSafetyAttributes"]);e!==void 0&&b!=null&&y(e,["parameters","includeSafetyAttributes"],b);const w=h(n,["includeRaiReason"]);e!==void 0&&w!=null&&y(e,["parameters","includeRaiReason"],w);const _=h(n,["language"]);e!==void 0&&_!=null&&y(e,["parameters","language"],_);const N=h(n,["outputMimeType"]);e!==void 0&&N!=null&&y(e,["parameters","outputOptions","mimeType"],N);const C=h(n,["outputCompressionQuality"]);e!==void 0&&C!=null&&y(e,["parameters","outputOptions","compressionQuality"],C);const E=h(n,["addWatermark"]);e!==void 0&&E!=null&&y(e,["parameters","addWatermark"],E);const R=h(n,["labels"]);e!==void 0&&R!=null&&y(e,["labels"],R);const A=h(n,["editMode"]);e!==void 0&&A!=null&&y(e,["parameters","editMode"],A);const k=h(n,["baseSteps"]);return e!==void 0&&k!=null&&y(e,["parameters","editConfig","baseSteps"],k),s}function tE(n,e){const s={},a=h(e,["model"]);a!=null&&y(s,["_url","model"],Ee(n,a));const o=h(e,["prompt"]);o!=null&&y(s,["instances[0]","prompt"],o);const l=h(e,["referenceImages"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(m=>ZE(m))),y(s,["instances[0]","referenceImages"],f)}const d=h(e,["config"]);return d!=null&&eE(d,s),s}function nE(n){const e={},s=h(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const a=h(n,["predictions"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>pl(l))),y(e,["generatedImages"],o)}return e}function sE(n,e){const s={},a=h(n,["taskType"]);e!==void 0&&a!=null&&y(e,["requests[]","taskType"],a);const o=h(n,["title"]);e!==void 0&&o!=null&&y(e,["requests[]","title"],o);const l=h(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&y(e,["requests[]","outputDimensionality"],l),h(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return s}function iE(n,e){const s={},a=h(n,["taskType"]);e!==void 0&&a!=null&&y(e,["instances[]","task_type"],a);const o=h(n,["title"]);e!==void 0&&o!=null&&y(e,["instances[]","title"],o);const l=h(n,["outputDimensionality"]);e!==void 0&&l!=null&&y(e,["parameters","outputDimensionality"],l);const d=h(n,["mimeType"]);e!==void 0&&d!=null&&y(e,["instances[]","mimeType"],d);const f=h(n,["autoTruncate"]);return e!==void 0&&f!=null&&y(e,["parameters","autoTruncate"],f),s}function aE(n,e){const s={},a=h(e,["model"]);a!=null&&y(s,["_url","model"],Ee(n,a));const o=h(e,["contents"]);if(o!=null){let f=Id(n,o);Array.isArray(f)&&(f=f.map(m=>m)),y(s,["requests[]","content"],f)}const l=h(e,["config"]);l!=null&&sE(l,s);const d=h(e,["model"]);return d!==void 0&&y(s,["requests[]","model"],Ee(n,d)),s}function oE(n,e){const s={},a=h(e,["model"]);a!=null&&y(s,["_url","model"],Ee(n,a));const o=h(e,["contents"]);if(o!=null){let d=Id(n,o);Array.isArray(d)&&(d=d.map(f=>f)),y(s,["instances[]","content"],d)}const l=h(e,["config"]);return l!=null&&iE(l,s),s}function rE(n){const e={},s=h(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const a=h(n,["embeddings"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(d=>d)),y(e,["embeddings"],l)}const o=h(n,["metadata"]);return o!=null&&y(e,["metadata"],o),e}function lE(n){const e={},s=h(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const a=h(n,["predictions[]","embeddings"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(d=>VT(d))),y(e,["embeddings"],l)}const o=h(n,["metadata"]);return o!=null&&y(e,["metadata"],o),e}function cE(n){const e={},s=h(n,["endpoint"]);s!=null&&y(e,["name"],s);const a=h(n,["deployedModelId"]);return a!=null&&y(e,["deployedModelId"],a),e}function uE(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(n,["fileUri"]);s!=null&&y(e,["fileUri"],s);const a=h(n,["mimeType"]);return a!=null&&y(e,["mimeType"],a),e}function dE(n){const e={};if(h(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const s=h(n,["description"]);s!=null&&y(e,["description"],s);const a=h(n,["name"]);a!=null&&y(e,["name"],a);const o=h(n,["parameters"]);o!=null&&y(e,["parameters"],o);const l=h(n,["parametersJsonSchema"]);l!=null&&y(e,["parametersJsonSchema"],l);const d=h(n,["response"]);d!=null&&y(e,["response"],d);const f=h(n,["responseJsonSchema"]);return f!=null&&y(e,["responseJsonSchema"],f),e}function fE(n,e,s){const a={},o=h(e,["systemInstruction"]);s!==void 0&&o!=null&&y(s,["systemInstruction"],ml(wt(o)));const l=h(e,["temperature"]);l!=null&&y(a,["temperature"],l);const d=h(e,["topP"]);d!=null&&y(a,["topP"],d);const f=h(e,["topK"]);f!=null&&y(a,["topK"],f);const m=h(e,["candidateCount"]);m!=null&&y(a,["candidateCount"],m);const p=h(e,["maxOutputTokens"]);p!=null&&y(a,["maxOutputTokens"],p);const x=h(e,["stopSequences"]);x!=null&&y(a,["stopSequences"],x);const b=h(e,["responseLogprobs"]);b!=null&&y(a,["responseLogprobs"],b);const w=h(e,["logprobs"]);w!=null&&y(a,["logprobs"],w);const _=h(e,["presencePenalty"]);_!=null&&y(a,["presencePenalty"],_);const N=h(e,["frequencyPenalty"]);N!=null&&y(a,["frequencyPenalty"],N);const C=h(e,["seed"]);C!=null&&y(a,["seed"],C);const E=h(e,["responseMimeType"]);E!=null&&y(a,["responseMimeType"],E);const R=h(e,["responseSchema"]);R!=null&&y(a,["responseSchema"],Ud(R));const A=h(e,["responseJsonSchema"]);if(A!=null&&y(a,["responseJsonSchema"],A),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=h(e,["safetySettings"]);if(s!==void 0&&k!=null){let X=k;Array.isArray(X)&&(X=X.map(pe=>eA(pe))),y(s,["safetySettings"],X)}const U=h(e,["tools"]);if(s!==void 0&&U!=null){let X=ia(U);Array.isArray(X)&&(X=X.map(pe=>oA(sa(pe)))),y(s,["tools"],X)}const V=h(e,["toolConfig"]);if(s!==void 0&&V!=null&&y(s,["toolConfig"],V),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const B=h(e,["cachedContent"]);s!==void 0&&B!=null&&y(s,["cachedContent"],Bn(n,B));const H=h(e,["responseModalities"]);H!=null&&y(a,["responseModalities"],H);const W=h(e,["mediaResolution"]);W!=null&&y(a,["mediaResolution"],W);const Y=h(e,["speechConfig"]);if(Y!=null&&y(a,["speechConfig"],Dd(Y)),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const J=h(e,["thinkingConfig"]);J!=null&&y(a,["thinkingConfig"],J);const Z=h(e,["imageConfig"]);return Z!=null&&y(a,["imageConfig"],Z),a}function hE(n,e,s){const a={},o=h(e,["systemInstruction"]);s!==void 0&&o!=null&&y(s,["systemInstruction"],wt(o));const l=h(e,["temperature"]);l!=null&&y(a,["temperature"],l);const d=h(e,["topP"]);d!=null&&y(a,["topP"],d);const f=h(e,["topK"]);f!=null&&y(a,["topK"],f);const m=h(e,["candidateCount"]);m!=null&&y(a,["candidateCount"],m);const p=h(e,["maxOutputTokens"]);p!=null&&y(a,["maxOutputTokens"],p);const x=h(e,["stopSequences"]);x!=null&&y(a,["stopSequences"],x);const b=h(e,["responseLogprobs"]);b!=null&&y(a,["responseLogprobs"],b);const w=h(e,["logprobs"]);w!=null&&y(a,["logprobs"],w);const _=h(e,["presencePenalty"]);_!=null&&y(a,["presencePenalty"],_);const N=h(e,["frequencyPenalty"]);N!=null&&y(a,["frequencyPenalty"],N);const C=h(e,["seed"]);C!=null&&y(a,["seed"],C);const E=h(e,["responseMimeType"]);E!=null&&y(a,["responseMimeType"],E);const R=h(e,["responseSchema"]);R!=null&&y(a,["responseSchema"],Ud(R));const A=h(e,["responseJsonSchema"]);A!=null&&y(a,["responseJsonSchema"],A);const k=h(e,["routingConfig"]);k!=null&&y(a,["routingConfig"],k);const U=h(e,["modelSelectionConfig"]);U!=null&&y(a,["modelConfig"],U);const V=h(e,["safetySettings"]);if(s!==void 0&&V!=null){let D=V;Array.isArray(D)&&(D=D.map(Q=>Q)),y(s,["safetySettings"],D)}const B=h(e,["tools"]);if(s!==void 0&&B!=null){let D=ia(B);Array.isArray(D)&&(D=D.map(Q=>ov(sa(Q)))),y(s,["tools"],D)}const H=h(e,["toolConfig"]);s!==void 0&&H!=null&&y(s,["toolConfig"],H);const W=h(e,["labels"]);s!==void 0&&W!=null&&y(s,["labels"],W);const Y=h(e,["cachedContent"]);s!==void 0&&Y!=null&&y(s,["cachedContent"],Bn(n,Y));const J=h(e,["responseModalities"]);J!=null&&y(a,["responseModalities"],J);const Z=h(e,["mediaResolution"]);Z!=null&&y(a,["mediaResolution"],Z);const X=h(e,["speechConfig"]);X!=null&&y(a,["speechConfig"],av(Dd(X)));const pe=h(e,["audioTimestamp"]);pe!=null&&y(a,["audioTimestamp"],pe);const ke=h(e,["thinkingConfig"]);ke!=null&&y(a,["thinkingConfig"],ke);const oe=h(e,["imageConfig"]);return oe!=null&&y(a,["imageConfig"],oe),a}function Ny(n,e){const s={},a=h(e,["model"]);a!=null&&y(s,["_url","model"],Ee(n,a));const o=h(e,["contents"]);if(o!=null){let d=tn(o);Array.isArray(d)&&(d=d.map(f=>ml(f))),y(s,["contents"],d)}const l=h(e,["config"]);return l!=null&&y(s,["generationConfig"],fE(n,l,s)),s}function Cy(n,e){const s={},a=h(e,["model"]);a!=null&&y(s,["_url","model"],Ee(n,a));const o=h(e,["contents"]);if(o!=null){let d=tn(o);Array.isArray(d)&&(d=d.map(f=>f)),y(s,["contents"],d)}const l=h(e,["config"]);return l!=null&&y(s,["generationConfig"],hE(n,l,s)),s}function Ty(n){const e={},s=h(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const a=h(n,["candidates"]);if(a!=null){let m=a;Array.isArray(m)&&(m=m.map(p=>OT(p))),y(e,["candidates"],m)}const o=h(n,["modelVersion"]);o!=null&&y(e,["modelVersion"],o);const l=h(n,["promptFeedback"]);l!=null&&y(e,["promptFeedback"],l);const d=h(n,["responseId"]);d!=null&&y(e,["responseId"],d);const f=h(n,["usageMetadata"]);return f!=null&&y(e,["usageMetadata"],f),e}function Ey(n){const e={},s=h(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const a=h(n,["candidates"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(x=>x)),y(e,["candidates"],p)}const o=h(n,["createTime"]);o!=null&&y(e,["createTime"],o);const l=h(n,["modelVersion"]);l!=null&&y(e,["modelVersion"],l);const d=h(n,["promptFeedback"]);d!=null&&y(e,["promptFeedback"],d);const f=h(n,["responseId"]);f!=null&&y(e,["responseId"],f);const m=h(n,["usageMetadata"]);return m!=null&&y(e,["usageMetadata"],m),e}function mE(n,e){const s={};if(h(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const a=h(n,["numberOfImages"]);e!==void 0&&a!=null&&y(e,["parameters","sampleCount"],a);const o=h(n,["aspectRatio"]);e!==void 0&&o!=null&&y(e,["parameters","aspectRatio"],o);const l=h(n,["guidanceScale"]);if(e!==void 0&&l!=null&&y(e,["parameters","guidanceScale"],l),h(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=h(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&y(e,["parameters","safetySetting"],d);const f=h(n,["personGeneration"]);e!==void 0&&f!=null&&y(e,["parameters","personGeneration"],f);const m=h(n,["includeSafetyAttributes"]);e!==void 0&&m!=null&&y(e,["parameters","includeSafetyAttributes"],m);const p=h(n,["includeRaiReason"]);e!==void 0&&p!=null&&y(e,["parameters","includeRaiReason"],p);const x=h(n,["language"]);e!==void 0&&x!=null&&y(e,["parameters","language"],x);const b=h(n,["outputMimeType"]);e!==void 0&&b!=null&&y(e,["parameters","outputOptions","mimeType"],b);const w=h(n,["outputCompressionQuality"]);if(e!==void 0&&w!=null&&y(e,["parameters","outputOptions","compressionQuality"],w),h(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(h(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const _=h(n,["imageSize"]);if(e!==void 0&&_!=null&&y(e,["parameters","sampleImageSize"],_),h(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return s}function pE(n,e){const s={},a=h(n,["outputGcsUri"]);e!==void 0&&a!=null&&y(e,["parameters","storageUri"],a);const o=h(n,["negativePrompt"]);e!==void 0&&o!=null&&y(e,["parameters","negativePrompt"],o);const l=h(n,["numberOfImages"]);e!==void 0&&l!=null&&y(e,["parameters","sampleCount"],l);const d=h(n,["aspectRatio"]);e!==void 0&&d!=null&&y(e,["parameters","aspectRatio"],d);const f=h(n,["guidanceScale"]);e!==void 0&&f!=null&&y(e,["parameters","guidanceScale"],f);const m=h(n,["seed"]);e!==void 0&&m!=null&&y(e,["parameters","seed"],m);const p=h(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&y(e,["parameters","safetySetting"],p);const x=h(n,["personGeneration"]);e!==void 0&&x!=null&&y(e,["parameters","personGeneration"],x);const b=h(n,["includeSafetyAttributes"]);e!==void 0&&b!=null&&y(e,["parameters","includeSafetyAttributes"],b);const w=h(n,["includeRaiReason"]);e!==void 0&&w!=null&&y(e,["parameters","includeRaiReason"],w);const _=h(n,["language"]);e!==void 0&&_!=null&&y(e,["parameters","language"],_);const N=h(n,["outputMimeType"]);e!==void 0&&N!=null&&y(e,["parameters","outputOptions","mimeType"],N);const C=h(n,["outputCompressionQuality"]);e!==void 0&&C!=null&&y(e,["parameters","outputOptions","compressionQuality"],C);const E=h(n,["addWatermark"]);e!==void 0&&E!=null&&y(e,["parameters","addWatermark"],E);const R=h(n,["labels"]);e!==void 0&&R!=null&&y(e,["labels"],R);const A=h(n,["imageSize"]);e!==void 0&&A!=null&&y(e,["parameters","sampleImageSize"],A);const k=h(n,["enhancePrompt"]);return e!==void 0&&k!=null&&y(e,["parameters","enhancePrompt"],k),s}function gE(n,e){const s={},a=h(e,["model"]);a!=null&&y(s,["_url","model"],Ee(n,a));const o=h(e,["prompt"]);o!=null&&y(s,["instances[0]","prompt"],o);const l=h(e,["config"]);return l!=null&&mE(l,s),s}function yE(n,e){const s={},a=h(e,["model"]);a!=null&&y(s,["_url","model"],Ee(n,a));const o=h(e,["prompt"]);o!=null&&y(s,["instances[0]","prompt"],o);const l=h(e,["config"]);return l!=null&&pE(l,s),s}function vE(n){const e={},s=h(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const a=h(n,["predictions"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(d=>jE(d))),y(e,["generatedImages"],l)}const o=h(n,["positivePromptSafetyAttributes"]);return o!=null&&y(e,["positivePromptSafetyAttributes"],sv(o)),e}function xE(n){const e={},s=h(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const a=h(n,["predictions"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(d=>pl(d))),y(e,["generatedImages"],l)}const o=h(n,["positivePromptSafetyAttributes"]);return o!=null&&y(e,["positivePromptSafetyAttributes"],iv(o)),e}function bE(n,e){const s={},a=h(n,["numberOfVideos"]);if(e!==void 0&&a!=null&&y(e,["parameters","sampleCount"],a),h(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=h(n,["durationSeconds"]);if(e!==void 0&&o!=null&&y(e,["parameters","durationSeconds"],o),h(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=h(n,["aspectRatio"]);e!==void 0&&l!=null&&y(e,["parameters","aspectRatio"],l);const d=h(n,["resolution"]);e!==void 0&&d!=null&&y(e,["parameters","resolution"],d);const f=h(n,["personGeneration"]);if(e!==void 0&&f!=null&&y(e,["parameters","personGeneration"],f),h(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=h(n,["negativePrompt"]);e!==void 0&&m!=null&&y(e,["parameters","negativePrompt"],m);const p=h(n,["enhancePrompt"]);if(e!==void 0&&p!=null&&y(e,["parameters","enhancePrompt"],p),h(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const x=h(n,["lastFrame"]);e!==void 0&&x!=null&&y(e,["instances[0]","lastFrame"],gl(x));const b=h(n,["referenceImages"]);if(e!==void 0&&b!=null){let w=b;Array.isArray(w)&&(w=w.map(_=>xA(_))),y(e,["instances[0]","referenceImages"],w)}if(h(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(h(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return s}function wE(n,e){const s={},a=h(n,["numberOfVideos"]);e!==void 0&&a!=null&&y(e,["parameters","sampleCount"],a);const o=h(n,["outputGcsUri"]);e!==void 0&&o!=null&&y(e,["parameters","storageUri"],o);const l=h(n,["fps"]);e!==void 0&&l!=null&&y(e,["parameters","fps"],l);const d=h(n,["durationSeconds"]);e!==void 0&&d!=null&&y(e,["parameters","durationSeconds"],d);const f=h(n,["seed"]);e!==void 0&&f!=null&&y(e,["parameters","seed"],f);const m=h(n,["aspectRatio"]);e!==void 0&&m!=null&&y(e,["parameters","aspectRatio"],m);const p=h(n,["resolution"]);e!==void 0&&p!=null&&y(e,["parameters","resolution"],p);const x=h(n,["personGeneration"]);e!==void 0&&x!=null&&y(e,["parameters","personGeneration"],x);const b=h(n,["pubsubTopic"]);e!==void 0&&b!=null&&y(e,["parameters","pubsubTopic"],b);const w=h(n,["negativePrompt"]);e!==void 0&&w!=null&&y(e,["parameters","negativePrompt"],w);const _=h(n,["enhancePrompt"]);e!==void 0&&_!=null&&y(e,["parameters","enhancePrompt"],_);const N=h(n,["generateAudio"]);e!==void 0&&N!=null&&y(e,["parameters","generateAudio"],N);const C=h(n,["lastFrame"]);e!==void 0&&C!=null&&y(e,["instances[0]","lastFrame"],hn(C));const E=h(n,["referenceImages"]);if(e!==void 0&&E!=null){let k=E;Array.isArray(k)&&(k=k.map(U=>bA(U))),y(e,["instances[0]","referenceImages"],k)}const R=h(n,["mask"]);e!==void 0&&R!=null&&y(e,["instances[0]","mask"],vA(R));const A=h(n,["compressionQuality"]);return e!==void 0&&A!=null&&y(e,["parameters","compressionQuality"],A),s}function _E(n){const e={},s=h(n,["name"]);s!=null&&y(e,["name"],s);const a=h(n,["metadata"]);a!=null&&y(e,["metadata"],a);const o=h(n,["done"]);o!=null&&y(e,["done"],o);const l=h(n,["error"]);l!=null&&y(e,["error"],l);const d=h(n,["response","generateVideoResponse"]);return d!=null&&y(e,["response"],TE(d)),e}function SE(n){const e={},s=h(n,["name"]);s!=null&&y(e,["name"],s);const a=h(n,["metadata"]);a!=null&&y(e,["metadata"],a);const o=h(n,["done"]);o!=null&&y(e,["done"],o);const l=h(n,["error"]);l!=null&&y(e,["error"],l);const d=h(n,["response"]);return d!=null&&y(e,["response"],EE(d)),e}function NE(n,e){const s={},a=h(e,["model"]);a!=null&&y(s,["_url","model"],Ee(n,a));const o=h(e,["prompt"]);o!=null&&y(s,["instances[0]","prompt"],o);const l=h(e,["image"]);l!=null&&y(s,["instances[0]","image"],gl(l));const d=h(e,["video"]);d!=null&&y(s,["instances[0]","video"],rv(d));const f=h(e,["source"]);f!=null&&AE(f,s);const m=h(e,["config"]);return m!=null&&bE(m,s),s}function CE(n,e){const s={},a=h(e,["model"]);a!=null&&y(s,["_url","model"],Ee(n,a));const o=h(e,["prompt"]);o!=null&&y(s,["instances[0]","prompt"],o);const l=h(e,["image"]);l!=null&&y(s,["instances[0]","image"],hn(l));const d=h(e,["video"]);d!=null&&y(s,["instances[0]","video"],lv(d));const f=h(e,["source"]);f!=null&&kE(f,s);const m=h(e,["config"]);return m!=null&&wE(m,s),s}function TE(n){const e={},s=h(n,["generatedSamples"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>ME(d))),y(e,["generatedVideos"],l)}const a=h(n,["raiMediaFilteredCount"]);a!=null&&y(e,["raiMediaFilteredCount"],a);const o=h(n,["raiMediaFilteredReasons"]);return o!=null&&y(e,["raiMediaFilteredReasons"],o),e}function EE(n){const e={},s=h(n,["videos"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>IE(d))),y(e,["generatedVideos"],l)}const a=h(n,["raiMediaFilteredCount"]);a!=null&&y(e,["raiMediaFilteredCount"],a);const o=h(n,["raiMediaFilteredReasons"]);return o!=null&&y(e,["raiMediaFilteredReasons"],o),e}function AE(n,e){const s={},a=h(n,["prompt"]);e!==void 0&&a!=null&&y(e,["instances[0]","prompt"],a);const o=h(n,["image"]);e!==void 0&&o!=null&&y(e,["instances[0]","image"],gl(o));const l=h(n,["video"]);return e!==void 0&&l!=null&&y(e,["instances[0]","video"],rv(l)),s}function kE(n,e){const s={},a=h(n,["prompt"]);e!==void 0&&a!=null&&y(e,["instances[0]","prompt"],a);const o=h(n,["image"]);e!==void 0&&o!=null&&y(e,["instances[0]","image"],hn(o));const l=h(n,["video"]);return e!==void 0&&l!=null&&y(e,["instances[0]","video"],lv(l)),s}function jE(n){const e={},s=h(n,["_self"]);s!=null&&y(e,["image"],qE(s));const a=h(n,["raiFilteredReason"]);a!=null&&y(e,["raiFilteredReason"],a);const o=h(n,["_self"]);return o!=null&&y(e,["safetyAttributes"],sv(o)),e}function pl(n){const e={},s=h(n,["_self"]);s!=null&&y(e,["image"],nv(s));const a=h(n,["raiFilteredReason"]);a!=null&&y(e,["raiFilteredReason"],a);const o=h(n,["_self"]);o!=null&&y(e,["safetyAttributes"],iv(o));const l=h(n,["prompt"]);return l!=null&&y(e,["enhancedPrompt"],l),e}function RE(n){const e={},s=h(n,["_self"]);s!=null&&y(e,["mask"],nv(s));const a=h(n,["labels"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["labels"],o)}return e}function ME(n){const e={},s=h(n,["video"]);return s!=null&&y(e,["video"],gA(s)),e}function IE(n){const e={},s=h(n,["_self"]);return s!=null&&y(e,["video"],yA(s)),e}function UE(n){const e={},s=h(n,["modelSelectionConfig"]);s!=null&&y(e,["modelConfig"],s);const a=h(n,["audioTimestamp"]);a!=null&&y(e,["audioTimestamp"],a);const o=h(n,["candidateCount"]);o!=null&&y(e,["candidateCount"],o);const l=h(n,["enableAffectiveDialog"]);l!=null&&y(e,["enableAffectiveDialog"],l);const d=h(n,["frequencyPenalty"]);d!=null&&y(e,["frequencyPenalty"],d);const f=h(n,["logprobs"]);f!=null&&y(e,["logprobs"],f);const m=h(n,["maxOutputTokens"]);m!=null&&y(e,["maxOutputTokens"],m);const p=h(n,["mediaResolution"]);p!=null&&y(e,["mediaResolution"],p);const x=h(n,["presencePenalty"]);x!=null&&y(e,["presencePenalty"],x);const b=h(n,["responseJsonSchema"]);b!=null&&y(e,["responseJsonSchema"],b);const w=h(n,["responseLogprobs"]);w!=null&&y(e,["responseLogprobs"],w);const _=h(n,["responseMimeType"]);_!=null&&y(e,["responseMimeType"],_);const N=h(n,["responseModalities"]);N!=null&&y(e,["responseModalities"],N);const C=h(n,["responseSchema"]);C!=null&&y(e,["responseSchema"],C);const E=h(n,["routingConfig"]);E!=null&&y(e,["routingConfig"],E);const R=h(n,["seed"]);R!=null&&y(e,["seed"],R);const A=h(n,["speechConfig"]);A!=null&&y(e,["speechConfig"],av(A));const k=h(n,["stopSequences"]);k!=null&&y(e,["stopSequences"],k);const U=h(n,["temperature"]);U!=null&&y(e,["temperature"],U);const V=h(n,["thinkingConfig"]);V!=null&&y(e,["thinkingConfig"],V);const B=h(n,["topK"]);B!=null&&y(e,["topK"],B);const H=h(n,["topP"]);if(H!=null&&y(e,["topP"],H),h(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function DE(n,e){const s={},a=h(e,["model"]);return a!=null&&y(s,["_url","name"],Ee(n,a)),s}function PE(n,e){const s={},a=h(e,["model"]);return a!=null&&y(s,["_url","name"],Ee(n,a)),s}function OE(n){const e={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=h(n,["enableWidget"]);return s!=null&&y(e,["enableWidget"],s),e}function LE(n){const e={},s=h(n,["timeRangeFilter"]);if(s!=null&&y(e,["timeRangeFilter"],s),h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function qE(n){const e={},s=h(n,["bytesBase64Encoded"]);s!=null&&y(e,["imageBytes"],ys(s));const a=h(n,["mimeType"]);return a!=null&&y(e,["mimeType"],a),e}function nv(n){const e={},s=h(n,["gcsUri"]);s!=null&&y(e,["gcsUri"],s);const a=h(n,["bytesBase64Encoded"]);a!=null&&y(e,["imageBytes"],ys(a));const o=h(n,["mimeType"]);return o!=null&&y(e,["mimeType"],o),e}function gl(n){const e={};if(h(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const s=h(n,["imageBytes"]);s!=null&&y(e,["bytesBase64Encoded"],ys(s));const a=h(n,["mimeType"]);return a!=null&&y(e,["mimeType"],a),e}function hn(n){const e={},s=h(n,["gcsUri"]);s!=null&&y(e,["gcsUri"],s);const a=h(n,["imageBytes"]);a!=null&&y(e,["bytesBase64Encoded"],ys(a));const o=h(n,["mimeType"]);return o!=null&&y(e,["mimeType"],o),e}function BE(n,e,s){const a={},o=h(e,["pageSize"]);s!==void 0&&o!=null&&y(s,["_query","pageSize"],o);const l=h(e,["pageToken"]);s!==void 0&&l!=null&&y(s,["_query","pageToken"],l);const d=h(e,["filter"]);s!==void 0&&d!=null&&y(s,["_query","filter"],d);const f=h(e,["queryBase"]);return s!==void 0&&f!=null&&y(s,["_url","models_url"],Y0(n,f)),a}function VE(n,e,s){const a={},o=h(e,["pageSize"]);s!==void 0&&o!=null&&y(s,["_query","pageSize"],o);const l=h(e,["pageToken"]);s!==void 0&&l!=null&&y(s,["_query","pageToken"],l);const d=h(e,["filter"]);s!==void 0&&d!=null&&y(s,["_query","filter"],d);const f=h(e,["queryBase"]);return s!==void 0&&f!=null&&y(s,["_url","models_url"],Y0(n,f)),a}function HE(n,e){const s={},a=h(e,["config"]);return a!=null&&BE(n,a,s),s}function GE(n,e){const s={},a=h(e,["config"]);return a!=null&&VE(n,a,s),s}function zE(n){const e={},s=h(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const a=h(n,["nextPageToken"]);a!=null&&y(e,["nextPageToken"],a);const o=h(n,["_self"]);if(o!=null){let l=K0(o);Array.isArray(l)&&(l=l.map(d=>hd(d))),y(e,["models"],l)}return e}function FE(n){const e={},s=h(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const a=h(n,["nextPageToken"]);a!=null&&y(e,["nextPageToken"],a);const o=h(n,["_self"]);if(o!=null){let l=K0(o);Array.isArray(l)&&(l=l.map(d=>md(d))),y(e,["models"],l)}return e}function $E(n){const e={},s=h(n,["maskMode"]);s!=null&&y(e,["maskMode"],s);const a=h(n,["segmentationClasses"]);a!=null&&y(e,["maskClasses"],a);const o=h(n,["maskDilation"]);return o!=null&&y(e,["dilation"],o),e}function hd(n){const e={},s=h(n,["name"]);s!=null&&y(e,["name"],s);const a=h(n,["displayName"]);a!=null&&y(e,["displayName"],a);const o=h(n,["description"]);o!=null&&y(e,["description"],o);const l=h(n,["version"]);l!=null&&y(e,["version"],l);const d=h(n,["_self"]);d!=null&&y(e,["tunedModelInfo"],rA(d));const f=h(n,["inputTokenLimit"]);f!=null&&y(e,["inputTokenLimit"],f);const m=h(n,["outputTokenLimit"]);m!=null&&y(e,["outputTokenLimit"],m);const p=h(n,["supportedGenerationMethods"]);return p!=null&&y(e,["supportedActions"],p),e}function md(n){const e={},s=h(n,["name"]);s!=null&&y(e,["name"],s);const a=h(n,["displayName"]);a!=null&&y(e,["displayName"],a);const o=h(n,["description"]);o!=null&&y(e,["description"],o);const l=h(n,["versionId"]);l!=null&&y(e,["version"],l);const d=h(n,["deployedModels"]);if(d!=null){let b=d;Array.isArray(b)&&(b=b.map(w=>cE(w))),y(e,["endpoints"],b)}const f=h(n,["labels"]);f!=null&&y(e,["labels"],f);const m=h(n,["_self"]);m!=null&&y(e,["tunedModelInfo"],lA(m));const p=h(n,["defaultCheckpointId"]);p!=null&&y(e,["defaultCheckpointId"],p);const x=h(n,["checkpoints"]);if(x!=null){let b=x;Array.isArray(b)&&(b=b.map(w=>w)),y(e,["checkpoints"],b)}return e}function JE(n){const e={},s=h(n,["videoMetadata"]);s!=null&&y(e,["videoMetadata"],s);const a=h(n,["thought"]);a!=null&&y(e,["thought"],a);const o=h(n,["inlineData"]);o!=null&&y(e,["inlineData"],PT(o));const l=h(n,["fileData"]);l!=null&&y(e,["fileData"],uE(l));const d=h(n,["thoughtSignature"]);d!=null&&y(e,["thoughtSignature"],d);const f=h(n,["functionCall"]);f!=null&&y(e,["functionCall"],f);const m=h(n,["codeExecutionResult"]);m!=null&&y(e,["codeExecutionResult"],m);const p=h(n,["executableCode"]);p!=null&&y(e,["executableCode"],p);const x=h(n,["functionResponse"]);x!=null&&y(e,["functionResponse"],x);const b=h(n,["text"]);return b!=null&&y(e,["text"],b),e}function YE(n){const e={},s=h(n,["productImage"]);return s!=null&&y(e,["image"],hn(s)),e}function KE(n,e){const s={},a=h(n,["numberOfImages"]);e!==void 0&&a!=null&&y(e,["parameters","sampleCount"],a);const o=h(n,["baseSteps"]);e!==void 0&&o!=null&&y(e,["parameters","editConfig","baseSteps"],o);const l=h(n,["outputGcsUri"]);e!==void 0&&l!=null&&y(e,["parameters","storageUri"],l);const d=h(n,["seed"]);e!==void 0&&d!=null&&y(e,["parameters","seed"],d);const f=h(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&y(e,["parameters","safetySetting"],f);const m=h(n,["personGeneration"]);e!==void 0&&m!=null&&y(e,["parameters","personGeneration"],m);const p=h(n,["addWatermark"]);e!==void 0&&p!=null&&y(e,["parameters","addWatermark"],p);const x=h(n,["outputMimeType"]);e!==void 0&&x!=null&&y(e,["parameters","outputOptions","mimeType"],x);const b=h(n,["outputCompressionQuality"]);e!==void 0&&b!=null&&y(e,["parameters","outputOptions","compressionQuality"],b);const w=h(n,["enhancePrompt"]);e!==void 0&&w!=null&&y(e,["parameters","enhancePrompt"],w);const _=h(n,["labels"]);return e!==void 0&&_!=null&&y(e,["labels"],_),s}function QE(n,e){const s={},a=h(e,["model"]);a!=null&&y(s,["_url","model"],Ee(n,a));const o=h(e,["source"]);o!=null&&WE(o,s);const l=h(e,["config"]);return l!=null&&KE(l,s),s}function XE(n){const e={},s=h(n,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>pl(o))),y(e,["generatedImages"],a)}return e}function WE(n,e){const s={},a=h(n,["prompt"]);e!==void 0&&a!=null&&y(e,["instances[0]","prompt"],a);const o=h(n,["personImage"]);e!==void 0&&o!=null&&y(e,["instances[0]","personImage","image"],hn(o));const l=h(n,["productImages"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(f=>YE(f))),y(e,["instances[0]","productImages"],d)}return s}function ZE(n){const e={},s=h(n,["referenceImage"]);s!=null&&y(e,["referenceImage"],hn(s));const a=h(n,["referenceId"]);a!=null&&y(e,["referenceId"],a);const o=h(n,["referenceType"]);o!=null&&y(e,["referenceType"],o);const l=h(n,["maskImageConfig"]);l!=null&&y(e,["maskImageConfig"],$E(l));const d=h(n,["controlImageConfig"]);d!=null&&y(e,["controlImageConfig"],GT(d));const f=h(n,["styleImageConfig"]);f!=null&&y(e,["styleImageConfig"],f);const m=h(n,["subjectImageConfig"]);return m!=null&&y(e,["subjectImageConfig"],m),e}function sv(n){const e={},s=h(n,["safetyAttributes","categories"]);s!=null&&y(e,["categories"],s);const a=h(n,["safetyAttributes","scores"]);a!=null&&y(e,["scores"],a);const o=h(n,["contentType"]);return o!=null&&y(e,["contentType"],o),e}function iv(n){const e={},s=h(n,["safetyAttributes","categories"]);s!=null&&y(e,["categories"],s);const a=h(n,["safetyAttributes","scores"]);a!=null&&y(e,["scores"],a);const o=h(n,["contentType"]);return o!=null&&y(e,["contentType"],o),e}function eA(n){const e={};if(h(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=h(n,["category"]);s!=null&&y(e,["category"],s);const a=h(n,["threshold"]);return a!=null&&y(e,["threshold"],a),e}function tA(n){const e={},s=h(n,["image"]);return s!=null&&y(e,["image"],hn(s)),e}function nA(n,e){const s={},a=h(n,["mode"]);e!==void 0&&a!=null&&y(e,["parameters","mode"],a);const o=h(n,["maxPredictions"]);e!==void 0&&o!=null&&y(e,["parameters","maxPredictions"],o);const l=h(n,["confidenceThreshold"]);e!==void 0&&l!=null&&y(e,["parameters","confidenceThreshold"],l);const d=h(n,["maskDilation"]);e!==void 0&&d!=null&&y(e,["parameters","maskDilation"],d);const f=h(n,["binaryColorThreshold"]);e!==void 0&&f!=null&&y(e,["parameters","binaryColorThreshold"],f);const m=h(n,["labels"]);return e!==void 0&&m!=null&&y(e,["labels"],m),s}function sA(n,e){const s={},a=h(e,["model"]);a!=null&&y(s,["_url","model"],Ee(n,a));const o=h(e,["source"]);o!=null&&aA(o,s);const l=h(e,["config"]);return l!=null&&nA(l,s),s}function iA(n){const e={},s=h(n,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>RE(o))),y(e,["generatedMasks"],a)}return e}function aA(n,e){const s={},a=h(n,["prompt"]);e!==void 0&&a!=null&&y(e,["instances[0]","prompt"],a);const o=h(n,["image"]);e!==void 0&&o!=null&&y(e,["instances[0]","image"],hn(o));const l=h(n,["scribbleImage"]);return e!==void 0&&l!=null&&y(e,["instances[0]","scribble"],tA(l)),s}function av(n){const e={},s=h(n,["voiceConfig"]);if(s!=null&&y(e,["voiceConfig"],s),h(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const a=h(n,["languageCode"]);return a!=null&&y(e,["languageCode"],a),e}function oA(n){const e={},s=h(n,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(x=>x)),y(e,["functionDeclarations"],p)}if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=h(n,["googleSearch"]);a!=null&&y(e,["googleSearch"],LE(a));const o=h(n,["googleSearchRetrieval"]);if(o!=null&&y(e,["googleSearchRetrieval"],o),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=h(n,["googleMaps"]);l!=null&&y(e,["googleMaps"],OE(l));const d=h(n,["urlContext"]);d!=null&&y(e,["urlContext"],d);const f=h(n,["computerUse"]);f!=null&&y(e,["computerUse"],f);const m=h(n,["codeExecution"]);return m!=null&&y(e,["codeExecution"],m),e}function ov(n){const e={},s=h(n,["functionDeclarations"]);if(s!=null){let b=s;Array.isArray(b)&&(b=b.map(w=>dE(w))),y(e,["functionDeclarations"],b)}const a=h(n,["retrieval"]);a!=null&&y(e,["retrieval"],a);const o=h(n,["googleSearch"]);o!=null&&y(e,["googleSearch"],o);const l=h(n,["googleSearchRetrieval"]);l!=null&&y(e,["googleSearchRetrieval"],l);const d=h(n,["enterpriseWebSearch"]);d!=null&&y(e,["enterpriseWebSearch"],d);const f=h(n,["googleMaps"]);f!=null&&y(e,["googleMaps"],f);const m=h(n,["urlContext"]);m!=null&&y(e,["urlContext"],m);const p=h(n,["computerUse"]);p!=null&&y(e,["computerUse"],p);const x=h(n,["codeExecution"]);return x!=null&&y(e,["codeExecution"],x),e}function rA(n){const e={},s=h(n,["baseModel"]);s!=null&&y(e,["baseModel"],s);const a=h(n,["createTime"]);a!=null&&y(e,["createTime"],a);const o=h(n,["updateTime"]);return o!=null&&y(e,["updateTime"],o),e}function lA(n){const e={},s=h(n,["labels","google-vertex-llm-tuning-base-model-id"]);s!=null&&y(e,["baseModel"],s);const a=h(n,["createTime"]);a!=null&&y(e,["createTime"],a);const o=h(n,["updateTime"]);return o!=null&&y(e,["updateTime"],o),e}function cA(n,e){const s={},a=h(n,["displayName"]);e!==void 0&&a!=null&&y(e,["displayName"],a);const o=h(n,["description"]);e!==void 0&&o!=null&&y(e,["description"],o);const l=h(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&y(e,["defaultCheckpointId"],l),s}function uA(n,e){const s={},a=h(n,["displayName"]);e!==void 0&&a!=null&&y(e,["displayName"],a);const o=h(n,["description"]);e!==void 0&&o!=null&&y(e,["description"],o);const l=h(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&y(e,["defaultCheckpointId"],l),s}function dA(n,e){const s={},a=h(e,["model"]);a!=null&&y(s,["_url","name"],Ee(n,a));const o=h(e,["config"]);return o!=null&&cA(o,s),s}function fA(n,e){const s={},a=h(e,["model"]);a!=null&&y(s,["_url","model"],Ee(n,a));const o=h(e,["config"]);return o!=null&&uA(o,s),s}function hA(n,e){const s={},a=h(n,["outputGcsUri"]);e!==void 0&&a!=null&&y(e,["parameters","storageUri"],a);const o=h(n,["includeRaiReason"]);e!==void 0&&o!=null&&y(e,["parameters","includeRaiReason"],o);const l=h(n,["outputMimeType"]);e!==void 0&&l!=null&&y(e,["parameters","outputOptions","mimeType"],l);const d=h(n,["outputCompressionQuality"]);e!==void 0&&d!=null&&y(e,["parameters","outputOptions","compressionQuality"],d);const f=h(n,["enhanceInputImage"]);e!==void 0&&f!=null&&y(e,["parameters","upscaleConfig","enhanceInputImage"],f);const m=h(n,["imagePreservationFactor"]);e!==void 0&&m!=null&&y(e,["parameters","upscaleConfig","imagePreservationFactor"],m);const p=h(n,["labels"]);e!==void 0&&p!=null&&y(e,["labels"],p);const x=h(n,["numberOfImages"]);e!==void 0&&x!=null&&y(e,["parameters","sampleCount"],x);const b=h(n,["mode"]);return e!==void 0&&b!=null&&y(e,["parameters","mode"],b),s}function mA(n,e){const s={},a=h(e,["model"]);a!=null&&y(s,["_url","model"],Ee(n,a));const o=h(e,["image"]);o!=null&&y(s,["instances[0]","image"],hn(o));const l=h(e,["upscaleFactor"]);l!=null&&y(s,["parameters","upscaleConfig","upscaleFactor"],l);const d=h(e,["config"]);return d!=null&&hA(d,s),s}function pA(n){const e={},s=h(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const a=h(n,["predictions"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>pl(l))),y(e,["generatedImages"],o)}return e}function gA(n){const e={},s=h(n,["uri"]);s!=null&&y(e,["uri"],s);const a=h(n,["encodedVideo"]);a!=null&&y(e,["videoBytes"],ys(a));const o=h(n,["encoding"]);return o!=null&&y(e,["mimeType"],o),e}function yA(n){const e={},s=h(n,["gcsUri"]);s!=null&&y(e,["uri"],s);const a=h(n,["bytesBase64Encoded"]);a!=null&&y(e,["videoBytes"],ys(a));const o=h(n,["mimeType"]);return o!=null&&y(e,["mimeType"],o),e}function vA(n){const e={},s=h(n,["image"]);s!=null&&y(e,["_self"],hn(s));const a=h(n,["maskMode"]);return a!=null&&y(e,["maskMode"],a),e}function xA(n){const e={},s=h(n,["image"]);s!=null&&y(e,["image"],gl(s));const a=h(n,["referenceType"]);return a!=null&&y(e,["referenceType"],a),e}function bA(n){const e={},s=h(n,["image"]);s!=null&&y(e,["image"],hn(s));const a=h(n,["referenceType"]);return a!=null&&y(e,["referenceType"],a),e}function rv(n){const e={},s=h(n,["uri"]);s!=null&&y(e,["uri"],s);const a=h(n,["videoBytes"]);a!=null&&y(e,["encodedVideo"],ys(a));const o=h(n,["mimeType"]);return o!=null&&y(e,["encoding"],o),e}function lv(n){const e={},s=h(n,["uri"]);s!=null&&y(e,["gcsUri"],s);const a=h(n,["videoBytes"]);a!=null&&y(e,["bytesBase64Encoded"],ys(a));const o=h(n,["mimeType"]);return o!=null&&y(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wA="Content-Type",_A="X-Server-Timeout",SA="User-Agent",pd="x-goog-api-client",NA="1.27.0",CA=`google-genai-sdk/${NA}`,TA="v1beta1",EA="v1beta",Ay=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class AA{constructor(e){var s,a;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:TA,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(a=this.clientOptions.apiVersion)!==null&&a!==void 0?a:EA,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const a=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&a.push(e.apiVersion),a.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),s=new URL(e);return s.protocol=s.protocol=="http:"?"ws":"wss",s.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,s,a){const o=[this.getRequestUrlInternal(s)];return a&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let s=this.clientOptions.httpOptions;e.httpOptions&&(s=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const a=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,s,a);if(e.queryParams)for(const[d,f]of Object.entries(e.queryParams))o.searchParams.append(d,String(f));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,s,o.toString(),e.abortSignal),this.unaryApiCall(o,l,e.httpMethod)}patchHttpOptions(e,s){const a=JSON.parse(JSON.stringify(e));for(const[o,l]of Object.entries(s))typeof l=="object"?a[o]=Object.assign(Object.assign({},a[o]),l):l!==void 0&&(a[o]=l);return a}async requestStream(e){let s=this.clientOptions.httpOptions;e.httpOptions&&(s=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const a=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,s,a);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,s,o.toString(),e.abortSignal),this.streamApiCall(o,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,s,a,o){if(s&&s.timeout||o){const l=new AbortController,d=l.signal;if(s.timeout&&s?.timeout>0){const f=setTimeout(()=>l.abort(),s.timeout);f&&typeof f.unref=="function"&&f.unref()}o&&o.addEventListener("abort",()=>{l.abort()}),e.signal=d}return s&&s.extraBody!==null&&kA(e,s.extraBody),e.headers=await this.getHeadersInternal(s,a),e}async unaryApiCall(e,s,a){return this.apiCall(e.toString(),Object.assign(Object.assign({},s),{method:a})).then(async o=>(await ky(o),new ud(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,s,a){return this.apiCall(e.toString(),Object.assign(Object.assign({},s),{method:a})).then(async o=>(await ky(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var s;return Yi(this,arguments,function*(){const o=(s=e?.body)===null||s===void 0?void 0:s.getReader(),l=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let d="";for(;;){const{done:f,value:m}=yield ze(o.read());if(f){if(d.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=l.decode(m,{stream:!0});try{const b=JSON.parse(p);if("error"in b){const w=JSON.parse(JSON.stringify(b.error)),_=w.status,N=w.code,C=`got status: ${_}. ${JSON.stringify(b)}`;if(N>=400&&N<600)throw new hl({message:C,status:N})}}catch(b){if(b.name==="ApiError")throw b}d+=p;let x=d.match(Ay);for(;x;){const b=x[1];try{const w=new Response(b,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield ze(new ud(w)),d=d.slice(x[0].length),x=d.match(Ay)}catch(w){throw new Error(`exception parsing stream chunk ${b}. ${w}`)}}}}finally{o.releaseLock()}})}async apiCall(e,s){return fetch(e,s).catch(a=>{throw new Error(`exception ${a} sending request`)})}getDefaultHeaders(){const e={},s=CA+" "+this.clientOptions.userAgentExtra;return e[SA]=s,e[pd]=s,e[wA]="application/json",e}async getHeadersInternal(e,s){const a=new Headers;if(e&&e.headers){for(const[o,l]of Object.entries(e.headers))a.append(o,l);e.timeout&&e.timeout>0&&a.append(_A,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(a,s),a}async uploadFile(e,s){var a;const o={};s!=null&&(o.mimeType=s.mimeType,o.name=s.name,o.displayName=s.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const l=this.clientOptions.uploader,d=await l.stat(e);o.sizeBytes=String(d.size);const f=(a=s?.mimeType)!==null&&a!==void 0?a:d.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=f;const m=await this.fetchUploadUrl(o,s);return l.upload(e,m,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,s){var a;let o={};s?.httpOptions?o=s.httpOptions:o={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const l={file:e},d=await this.request({path:se("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:o});if(!d||!d?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(a=d?.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function ky(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const s=n.status;let a;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?a=await n.json():a={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(a);throw s>=400&&s<600?new hl({message:o,status:s}):new Error(o)}}function kA(n,e){if(!e||Object.keys(e).length===0||n.body instanceof Blob)return;let s={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))s=l;else return}catch{return}function a(l,d){const f=Object.assign({},l);for(const m in d)if(Object.prototype.hasOwnProperty.call(d,m)){const p=d[m],x=f[m];p&&typeof p=="object"&&!Array.isArray(p)&&x&&typeof x=="object"&&!Array.isArray(x)?f[m]=a(x,p):f[m]=p}return f}const o=a(s,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jA="mcp_used/unknown";let RA=!1;function cv(n){for(const e of n)if(MA(e)||typeof e=="object"&&"inputSchema"in e)return!0;return RA}function uv(n){var e;const s=(e=n[pd])!==null&&e!==void 0?e:"";n[pd]=(s+` ${jA}`).trimStart()}function MA(n){return n!==null&&typeof n=="object"&&n instanceof Od}function IA(n,e=100){return Yi(this,arguments,function*(){let a,o=0;for(;o<e;){const l=yield ze(n.listTools({cursor:a}));for(const d of l.tools)yield yield ze(d),o++;if(!l.nextCursor)break;a=l.nextCursor}})}class Od{constructor(e=[],s){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=s}static create(e,s){return new Od(e,s)}async initialize(){var e,s,a,o;if(this.mcpTools.length>0)return;const l={},d=[];for(const x of this.mcpClients)try{for(var f=!0,m=(s=void 0,uo(IA(x))),p;p=await m.next(),e=p.done,!e;f=!0){o=p.value,f=!1;const b=o;d.push(b);const w=b.name;if(l[w])throw new Error(`Duplicate function name ${w} found in MCP tools. Please ensure function names are unique.`);l[w]=x}}catch(b){s={error:b}}finally{try{!f&&!e&&(a=m.return)&&await a.call(m)}finally{if(s)throw s.error}}this.mcpTools=d,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),LN(this.mcpTools,this.config)}async callTool(e){await this.initialize();const s=[];for(const a of e)if(a.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[a.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const d=await o.callTool({name:a.name,arguments:a.args},void 0,l);s.push({functionResponse:{name:a.name,response:d.isError?{error:d}:d}})}return s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function UA(n,e,s){const a=new jN;let o;s.data instanceof Blob?o=JSON.parse(await s.data.text()):o=JSON.parse(s.data),Object.assign(a,o),e(a)}class DA{constructor(e,s,a){this.apiClient=e,this.auth=s,this.webSocketFactory=a}async connect(e){var s,a;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),d=LA(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),m=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${f}`;let p=()=>{};const x=new Promise(k=>{p=k}),b=e.callbacks,w=function(){p({})},_=this.apiClient,N={onopen:w,onmessage:k=>{UA(_,b.onmessage,k)},onerror:(s=b?.onerror)!==null&&s!==void 0?s:function(k){},onclose:(a=b?.onclose)!==null&&a!==void 0?a:function(k){}},C=this.webSocketFactory.create(m,OA(d),N);C.connect(),await x;const A={setup:{model:Ee(this.apiClient,e.model)}};return C.send(JSON.stringify(A)),new PA(C,this.apiClient)}}class PA{constructor(e,s){this.conn=e,this.apiClient=s}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const s=ET(e);this.conn.send(JSON.stringify({clientContent:s}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const s=TT(e);this.conn.send(JSON.stringify(s))}sendPlaybackControl(e){const s={playbackControl:e};this.conn.send(JSON.stringify(s))}play(){this.sendPlaybackControl(Fi.PLAY)}pause(){this.sendPlaybackControl(Fi.PAUSE)}stop(){this.sendPlaybackControl(Fi.STOP)}resetContext(){this.sendPlaybackControl(Fi.RESET_CONTEXT)}close(){this.conn.close()}}function OA(n){const e={};return n.forEach((s,a)=>{e[a]=s}),e}function LA(n){const e=new Headers;for(const[s,a]of Object.entries(n))e.append(s,a);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qA="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function BA(n,e,s){const a=new kN;let o;s.data instanceof Blob?o=await s.data.text():s.data instanceof ArrayBuffer?o=new TextDecoder().decode(s.data):o=s.data;const l=JSON.parse(o);if(n.isVertexAI()){const d=jT(l);Object.assign(a,d)}else Object.assign(a,l);e(a)}class VA{constructor(e,s,a){this.apiClient=e,this.auth=s,this.webSocketFactory=a,this.music=new DA(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var s,a,o,l,d,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const m=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let x;const b=this.apiClient.getHeaders();e.config&&e.config.tools&&cv(e.config.tools)&&uv(b);const w=FA(b);if(this.apiClient.isVertexAI())x=`${m}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(w,x);else{const Y=this.apiClient.getApiKey();let J="BidiGenerateContent",Z="key";Y?.startsWith("auth_tokens/")&&(J="BidiGenerateContentConstrained",Z="access_token"),x=`${m}/ws/google.ai.generativelanguage.${p}.GenerativeService.${J}?${Z}=${Y}`}let _=()=>{};const N=new Promise(Y=>{_=Y}),C=e.callbacks,E=function(){var Y;(Y=C?.onopen)===null||Y===void 0||Y.call(C),_({})},R=this.apiClient,A={onopen:E,onmessage:Y=>{BA(R,C.onmessage,Y)},onerror:(s=C?.onerror)!==null&&s!==void 0?s:function(Y){},onclose:(a=C?.onclose)!==null&&a!==void 0?a:function(Y){}},k=this.webSocketFactory.create(x,zA(w),A);k.connect(),await N;let U=Ee(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&U.startsWith("publishers/")){const Y=this.apiClient.getProject(),J=this.apiClient.getLocation();U=`projects/${Y}/locations/${J}/`+U}let V={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[al.AUDIO]}:e.config.responseModalities=[al.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig;const B=(f=(d=e.config)===null||d===void 0?void 0:d.tools)!==null&&f!==void 0?f:[],H=[];for(const Y of B)if(this.isCallableTool(Y)){const J=Y;H.push(await J.tool())}else H.push(Y);H.length>0&&(e.config.tools=H);const W={model:U,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?V=CT(this.apiClient,W):V=NT(this.apiClient,W),delete V.config,k.send(JSON.stringify(V)),new GA(k,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const HA={turnComplete:!0};class GA{constructor(e,s){this.conn=e,this.apiClient=s}tLiveClientContent(e,s){if(s.turns!==null&&s.turns!==void 0){let a=[];try{a=tn(s.turns),e.isVertexAI()||(a=a.map(o=>ml(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof s.turns}'`)}return{clientContent:{turns:a,turnComplete:s.turnComplete}}}return{clientContent:{turnComplete:s.turnComplete}}}tLiveClienttToolResponse(e,s){let a=[];if(s.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(s.functionResponses)?a=s.functionResponses:a=[s.functionResponses],a.length===0)throw new Error("functionResponses is required.");for(const l of a){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(qA)}return{toolResponse:{functionResponses:a}}}sendClientContent(e){e=Object.assign(Object.assign({},HA),e);const s=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(s))}sendRealtimeInput(e){let s={};this.apiClient.isVertexAI()?s={realtimeInput:kT(e)}:s={realtimeInput:AT(e)},this.conn.send(JSON.stringify(s))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const s=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(s))}close(){this.conn.close()}}function zA(n){const e={};return n.forEach((s,a)=>{e[a]=s}),e}function FA(n){const e=new Headers;for(const[s,a]of Object.entries(n))e.append(s,a);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jy=10;function Ry(n){var e,s,a;if(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const d of(s=n?.tools)!==null&&s!==void 0?s:[])if(Ki(d)){o=!0;break}if(!o)return!0;const l=(a=n?.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls;return!!(l&&(l<0||!Number.isInteger(l))||l==0)}function Ki(n){return"callTool"in n&&typeof n.callTool=="function"}function $A(n){var e,s,a;return(a=(s=(e=n.config)===null||e===void 0?void 0:e.tools)===null||s===void 0?void 0:s.some(o=>Ki(o)))!==null&&a!==void 0?a:!1}function JA(n){var e,s,a;return(a=(s=(e=n.config)===null||e===void 0?void 0:e.tools)===null||s===void 0?void 0:s.some(o=>!Ki(o)))!==null&&a!==void 0?a:!1}function My(n){var e;return!(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YA extends Js{constructor(e){super(),this.apiClient=e,this.generateContent=async s=>{var a,o,l,d,f;const m=await this.processParamsMaybeAddMcpUsage(s);if(this.maybeMoveToResponseJsonSchem(s),!$A(s)||Ry(s.config))return await this.generateContentInternal(m);if(JA(s))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let p,x;const b=tn(m.contents),w=(l=(o=(a=m.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&l!==void 0?l:jy;let _=0;for(;_<w&&(p=await this.generateContentInternal(m),!(!p.functionCalls||p.functionCalls.length===0));){const N=p.candidates[0].content,C=[];for(const E of(f=(d=s.config)===null||d===void 0?void 0:d.tools)!==null&&f!==void 0?f:[])if(Ki(E)){const A=await E.callTool(p.functionCalls);C.push(...A)}_++,x={role:"user",parts:C},m.contents=tn(m.contents),m.contents.push(N),m.contents.push(x),My(m.config)&&(b.push(N),b.push(x))}return My(m.config)&&(p.automaticFunctionCallingHistory=b),p},this.generateContentStream=async s=>{if(this.maybeMoveToResponseJsonSchem(s),Ry(s.config)){const a=await this.processParamsMaybeAddMcpUsage(s);return await this.generateContentStreamInternal(a)}else return await this.processAfcStream(s)},this.generateImages=async s=>await this.generateImagesInternal(s).then(a=>{var o;let l;const d=[];if(a?.generatedImages)for(const m of a.generatedImages)m&&m?.safetyAttributes&&((o=m?.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?l=m?.safetyAttributes:d.push(m);let f;return l?f={generatedImages:d,positivePromptSafetyAttributes:l,sdkHttpResponse:a.sdkHttpResponse}:f={generatedImages:d,sdkHttpResponse:a.sdkHttpResponse},f}),this.list=async s=>{var a;const d={config:Object.assign(Object.assign({},{queryBase:!0}),s?.config)};if(this.apiClient.isVertexAI()&&!d.config.queryBase){if(!((a=d.config)===null||a===void 0)&&a.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");d.config.filter="labels.tune-type:*"}return new xo(Fs.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(d),d)},this.editImage=async s=>{const a={model:s.model,prompt:s.prompt,referenceImages:[],config:s.config};return s.referenceImages&&s.referenceImages&&(a.referenceImages=s.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(a)},this.upscaleImage=async s=>{let a={numberOfImages:1,mode:"upscale"};s.config&&(a=Object.assign(Object.assign({},a),s.config));const o={model:s.model,image:s.image,upscaleFactor:s.upscaleFactor,config:a};return await this.upscaleImageInternal(o)},this.generateVideos=async s=>{var a,o,l,d,f,m;if((s.prompt||s.image||s.video)&&s.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((a=s.video)===null||a===void 0)&&a.uri&&(!((o=s.video)===null||o===void 0)&&o.videoBytes)?s.video={uri:s.video.uri,mimeType:s.video.mimeType}:!((d=(l=s.source)===null||l===void 0?void 0:l.video)===null||d===void 0)&&d.uri&&(!((m=(f=s.source)===null||f===void 0?void 0:f.video)===null||m===void 0)&&m.videoBytes)&&(s.source.video={uri:s.source.video.uri,mimeType:s.source.video.mimeType})),await this.generateVideosInternal(s)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var s,a,o;const l=(s=e.config)===null||s===void 0?void 0:s.tools;if(!l)return e;const d=await Promise.all(l.map(async m=>Ki(m)?await m.tool():m)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:d})};if(f.config.tools=d,e.config&&e.config.tools&&cv(e.config.tools)){const m=(o=(a=e.config.httpOptions)===null||a===void 0?void 0:a.headers)!==null&&o!==void 0?o:{};let p=Object.assign({},m);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),uv(p),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return f}async initAfcToolsMap(e){var s,a,o;const l=new Map;for(const d of(a=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[])if(Ki(d)){const f=d,m=await f.tool();for(const p of(o=m.functionDeclarations)!==null&&o!==void 0?o:[]){if(!p.name)throw new Error("Function declaration name is required.");if(l.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);l.set(p.name,f)}}return l}async processAfcStream(e){var s,a,o;const l=(o=(a=(s=e.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&o!==void 0?o:jy;let d=!1,f=0;const m=await this.initAfcToolsMap(e);return(function(p,x,b){var w,_;return Yi(this,arguments,function*(){for(var N,C,E,R;f<l;){d&&(f++,d=!1);const V=yield ze(p.processParamsMaybeAddMcpUsage(b)),B=yield ze(p.generateContentStreamInternal(V)),H=[],W=[];try{for(var A=!0,k=(C=void 0,uo(B)),U;U=yield ze(k.next()),N=U.done,!N;A=!0){R=U.value,A=!1;const Y=R;if(yield yield ze(Y),Y.candidates&&(!((w=Y.candidates[0])===null||w===void 0)&&w.content)){W.push(Y.candidates[0].content);for(const J of(_=Y.candidates[0].content.parts)!==null&&_!==void 0?_:[])if(f<l&&J.functionCall){if(!J.functionCall.name)throw new Error("Function call name was not returned by the model.");if(x.has(J.functionCall.name)){const Z=yield ze(x.get(J.functionCall.name).callTool([J.functionCall]));H.push(...Z)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${x.keys()}, mising tool: ${J.functionCall.name}`)}}}}catch(Y){C={error:Y}}finally{try{!A&&!N&&(E=k.return)&&(yield ze(E.call(k)))}finally{if(C)throw C.error}}if(H.length>0){d=!0;const Y=new io;Y.candidates=[{content:{role:"user",parts:H}}],yield yield ze(Y);const J=[];J.push(...W),J.push({role:"user",parts:H});const Z=tn(b.contents).concat(J);b.contents=Z}else break}})})(this,m,e)}async generateContentInternal(e){var s,a,o,l;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=Cy(this.apiClient,e);return f=se("{model}:generateContent",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),d.then(x=>{const b=Ey(x),w=new io;return Object.assign(w,b),w})}else{const p=Ny(this.apiClient,e);return f=se("{model}:generateContent",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),d.then(x=>{const b=Ty(x),w=new io;return Object.assign(w,b),w})}}async generateContentStreamInternal(e){var s,a,o,l;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=Cy(this.apiClient,e);return f=se("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.requestStream({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),d.then(function(b){return Yi(this,arguments,function*(){var w,_,N,C;try{for(var E=!0,R=uo(b),A;A=yield ze(R.next()),w=A.done,!w;E=!0){C=A.value,E=!1;const k=C,U=Ey(yield ze(k.json()));U.sdkHttpResponse={headers:k.headers};const V=new io;Object.assign(V,U),yield yield ze(V)}}catch(k){_={error:k}}finally{try{!E&&!w&&(N=R.return)&&(yield ze(N.call(R)))}finally{if(_)throw _.error}}})})}else{const p=Ny(this.apiClient,e);return f=se("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.requestStream({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),d.then(function(b){return Yi(this,arguments,function*(){var w,_,N,C;try{for(var E=!0,R=uo(b),A;A=yield ze(R.next()),w=A.done,!w;E=!0){C=A.value,E=!1;const k=C,U=Ty(yield ze(k.json()));U.sdkHttpResponse={headers:k.headers};const V=new io;Object.assign(V,U),yield yield ze(V)}}catch(k){_={error:k}}finally{try{!E&&!w&&(N=R.return)&&(yield ze(N.call(R)))}finally{if(_)throw _.error}}})})}}async embedContent(e){var s,a,o,l;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=oE(this.apiClient,e);return f=se("{model}:predict",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),d.then(x=>{const b=lE(x),w=new ly;return Object.assign(w,b),w})}else{const p=aE(this.apiClient,e);return f=se("{model}:batchEmbedContents",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),d.then(x=>{const b=rE(x),w=new ly;return Object.assign(w,b),w})}}async generateImagesInternal(e){var s,a,o,l;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=yE(this.apiClient,e);return f=se("{model}:predict",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),d.then(x=>{const b=xE(x),w=new cy;return Object.assign(w,b),w})}else{const p=gE(this.apiClient,e);return f=se("{model}:predict",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),d.then(x=>{const b=vE(x),w=new cy;return Object.assign(w,b),w})}}async editImageInternal(e){var s,a;let o,l="",d={};if(this.apiClient.isVertexAI()){const f=tE(this.apiClient,e);return l=se("{model}:predict",f._url),d=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(p=>{const x=p;return x.sdkHttpResponse={headers:m.headers},x})),o.then(m=>{const p=nE(m),x=new wN;return Object.assign(x,p),x})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var s,a;let o,l="",d={};if(this.apiClient.isVertexAI()){const f=mA(this.apiClient,e);return l=se("{model}:predict",f._url),d=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(p=>{const x=p;return x.sdkHttpResponse={headers:m.headers},x})),o.then(m=>{const p=pA(m),x=new _N;return Object.assign(x,p),x})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var s,a;let o,l="",d={};if(this.apiClient.isVertexAI()){const f=QE(this.apiClient,e);return l=se("{model}:predict",f._url),d=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),o.then(m=>{const p=XE(m),x=new SN;return Object.assign(x,p),x})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var s,a;let o,l="",d={};if(this.apiClient.isVertexAI()){const f=sA(this.apiClient,e);return l=se("{model}:predict",f._url),d=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),o.then(m=>{const p=iA(m),x=new NN;return Object.assign(x,p),x})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var s,a,o,l;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=PE(this.apiClient,e);return f=se("{name}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),d.then(x=>md(x))}else{const p=DE(this.apiClient,e);return f=se("{name}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),d.then(x=>hd(x))}}async listInternal(e){var s,a,o,l;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=GE(this.apiClient,e);return f=se("{models_url}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),d.then(x=>{const b=FE(x),w=new uy;return Object.assign(w,b),w})}else{const p=HE(this.apiClient,e);return f=se("{models_url}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),d.then(x=>{const b=zE(x),w=new uy;return Object.assign(w,b),w})}}async update(e){var s,a,o,l;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=fA(this.apiClient,e);return f=se("{model}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),d.then(x=>md(x))}else{const p=dA(this.apiClient,e);return f=se("{name}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),d.then(x=>hd(x))}}async delete(e){var s,a,o,l;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=XT(this.apiClient,e);return f=se("{name}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),d.then(x=>{const b=ZT(x),w=new dy;return Object.assign(w,b),w})}else{const p=QT(this.apiClient,e);return f=se("{name}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),d.then(x=>{const b=WT(x),w=new dy;return Object.assign(w,b),w})}}async countTokens(e){var s,a,o,l;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=JT(this.apiClient,e);return f=se("{model}:countTokens",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),d.then(x=>{const b=KT(x),w=new fy;return Object.assign(w,b),w})}else{const p=$T(this.apiClient,e);return f=se("{model}:countTokens",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),d.then(x=>{const b=YT(x),w=new fy;return Object.assign(w,b),w})}}async computeTokens(e){var s,a;let o,l="",d={};if(this.apiClient.isVertexAI()){const f=qT(this.apiClient,e);return l=se("{model}:computeTokens",f._url),d=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(p=>{const x=p;return x.sdkHttpResponse={headers:m.headers},x})),o.then(m=>{const p=BT(m),x=new CN;return Object.assign(x,p),x})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var s,a,o,l;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=CE(this.apiClient,e);return f=se("{model}:predictLongRunning",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),d.then(x=>{const b=SE(x),w=new ol;return Object.assign(w,b),w})}else{const p=NE(this.apiClient,e);return f=se("{model}:predictLongRunning",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),d.then(x=>{const b=_E(x),w=new ol;return Object.assign(w,b),w})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class KA extends Js{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const s=e.operation,a=e.config;if(s.name===void 0||s.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=s.name.split("/operations/")[0];let l;a&&"httpOptions"in a&&(l=a.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:s.name,resourceName:o,config:{httpOptions:l}});return s._fromAPIResponse({apiResponse:d,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:s.name,config:a});return s._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async get(e){const s=e.operation,a=e.config;if(s.name===void 0||s.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=s.name.split("/operations/")[0];let l;a&&"httpOptions"in a&&(l=a.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:s.name,resourceName:o,config:{httpOptions:l}});return s._fromAPIResponse({apiResponse:d,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:s.name,config:a});return s._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async getVideosOperationInternal(e){var s,a,o,l;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=vN(e);return f=se("{operationName}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),d}else{const p=yN(e);return f=se("{operationName}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),d}}async fetchPredictVideosOperationInternal(e){var s,a;let o,l="",d={};if(this.apiClient.isVertexAI()){const f=uN(e);return l=se("{resourceName}:fetchPredictOperation",f._url),d=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QA(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(n,["data"]);s!=null&&y(e,["data"],s);const a=h(n,["mimeType"]);return a!=null&&y(e,["mimeType"],a),e}function XA(n){const e={},s=h(n,["parts"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>a1(l))),y(e,["parts"],o)}const a=h(n,["role"]);return a!=null&&y(e,["role"],a),e}function WA(n,e,s){const a={},o=h(e,["expireTime"]);s!==void 0&&o!=null&&y(s,["expireTime"],o);const l=h(e,["newSessionExpireTime"]);s!==void 0&&l!=null&&y(s,["newSessionExpireTime"],l);const d=h(e,["uses"]);s!==void 0&&d!=null&&y(s,["uses"],d);const f=h(e,["liveConnectConstraints"]);s!==void 0&&f!=null&&y(s,["bidiGenerateContentSetup"],i1(n,f));const m=h(e,["lockAdditionalFields"]);return s!==void 0&&m!=null&&y(s,["fieldMask"],m),a}function ZA(n,e){const s={},a=h(e,["config"]);return a!=null&&y(s,["config"],WA(n,a,s)),s}function e1(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(n,["fileUri"]);s!=null&&y(e,["fileUri"],s);const a=h(n,["mimeType"]);return a!=null&&y(e,["mimeType"],a),e}function t1(n){const e={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=h(n,["enableWidget"]);return s!=null&&y(e,["enableWidget"],s),e}function n1(n){const e={},s=h(n,["timeRangeFilter"]);if(s!=null&&y(e,["timeRangeFilter"],s),h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function s1(n,e){const s={},a=h(n,["generationConfig"]);e!==void 0&&a!=null&&y(e,["setup","generationConfig"],a);const o=h(n,["responseModalities"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","responseModalities"],o);const l=h(n,["temperature"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","temperature"],l);const d=h(n,["topP"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","topP"],d);const f=h(n,["topK"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","topK"],f);const m=h(n,["maxOutputTokens"]);e!==void 0&&m!=null&&y(e,["setup","generationConfig","maxOutputTokens"],m);const p=h(n,["mediaResolution"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","mediaResolution"],p);const x=h(n,["seed"]);e!==void 0&&x!=null&&y(e,["setup","generationConfig","seed"],x);const b=h(n,["speechConfig"]);e!==void 0&&b!=null&&y(e,["setup","generationConfig","speechConfig"],Pd(b));const w=h(n,["thinkingConfig"]);e!==void 0&&w!=null&&y(e,["setup","generationConfig","thinkingConfig"],w);const _=h(n,["enableAffectiveDialog"]);e!==void 0&&_!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],_);const N=h(n,["systemInstruction"]);e!==void 0&&N!=null&&y(e,["setup","systemInstruction"],XA(wt(N)));const C=h(n,["tools"]);if(e!==void 0&&C!=null){let B=ia(C);Array.isArray(B)&&(B=B.map(H=>r1(sa(H)))),y(e,["setup","tools"],B)}const E=h(n,["sessionResumption"]);e!==void 0&&E!=null&&y(e,["setup","sessionResumption"],o1(E));const R=h(n,["inputAudioTranscription"]);e!==void 0&&R!=null&&y(e,["setup","inputAudioTranscription"],R);const A=h(n,["outputAudioTranscription"]);e!==void 0&&A!=null&&y(e,["setup","outputAudioTranscription"],A);const k=h(n,["realtimeInputConfig"]);e!==void 0&&k!=null&&y(e,["setup","realtimeInputConfig"],k);const U=h(n,["contextWindowCompression"]);e!==void 0&&U!=null&&y(e,["setup","contextWindowCompression"],U);const V=h(n,["proactivity"]);return e!==void 0&&V!=null&&y(e,["setup","proactivity"],V),s}function i1(n,e){const s={},a=h(e,["model"]);a!=null&&y(s,["setup","model"],Ee(n,a));const o=h(e,["config"]);return o!=null&&y(s,["config"],s1(o,s)),s}function a1(n){const e={},s=h(n,["videoMetadata"]);s!=null&&y(e,["videoMetadata"],s);const a=h(n,["thought"]);a!=null&&y(e,["thought"],a);const o=h(n,["inlineData"]);o!=null&&y(e,["inlineData"],QA(o));const l=h(n,["fileData"]);l!=null&&y(e,["fileData"],e1(l));const d=h(n,["thoughtSignature"]);d!=null&&y(e,["thoughtSignature"],d);const f=h(n,["functionCall"]);f!=null&&y(e,["functionCall"],f);const m=h(n,["codeExecutionResult"]);m!=null&&y(e,["codeExecutionResult"],m);const p=h(n,["executableCode"]);p!=null&&y(e,["executableCode"],p);const x=h(n,["functionResponse"]);x!=null&&y(e,["functionResponse"],x);const b=h(n,["text"]);return b!=null&&y(e,["text"],b),e}function o1(n){const e={},s=h(n,["handle"]);if(s!=null&&y(e,["handle"],s),h(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function r1(n){const e={},s=h(n,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(x=>x)),y(e,["functionDeclarations"],p)}if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=h(n,["googleSearch"]);a!=null&&y(e,["googleSearch"],n1(a));const o=h(n,["googleSearchRetrieval"]);if(o!=null&&y(e,["googleSearchRetrieval"],o),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=h(n,["googleMaps"]);l!=null&&y(e,["googleMaps"],t1(l));const d=h(n,["urlContext"]);d!=null&&y(e,["urlContext"],d);const f=h(n,["computerUse"]);f!=null&&y(e,["computerUse"],f);const m=h(n,["codeExecution"]);return m!=null&&y(e,["codeExecution"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function l1(n){const e=[];for(const s in n)if(Object.prototype.hasOwnProperty.call(n,s)){const a=n[s];if(typeof a=="object"&&a!=null&&Object.keys(a).length>0){const o=Object.keys(a).map(l=>`${s}.${l}`);e.push(...o)}else e.push(s)}return e.join(",")}function c1(n,e){let s=null;const a=n.bidiGenerateContentSetup;if(typeof a=="object"&&a!==null&&"setup"in a){const l=a.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,s=l):delete n.bidiGenerateContentSetup}else a!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(s){const l=l1(s);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)l?n.fieldMask=l:delete n.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const d=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];o.length>0&&(f=o.map(p=>d.includes(p)?`generationConfig.${p}`:p));const m=[];l&&m.push(l),f.length>0&&m.push(...f),m.length>0?n.fieldMask=m.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class u1 extends Js{constructor(e){super(),this.apiClient=e}async create(e){var s,a;let o,l="",d={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=ZA(this.apiClient,e);l=se("auth_tokens",f._url),d=f._query,delete f.config,delete f._url,delete f._query;const m=c1(f,e.config);return o=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),o.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function d1(n,e){const s={},a=h(n,["name"]);return a!=null&&y(s,["_url","name"],a),s}function f1(n,e){const s={},a=h(n,["name"]);return a!=null&&y(s,["_url","name"],a),s}function h1(n,e,s){const a={};if(h(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=h(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&y(e,["displayName"],o),h(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=h(n,["epochCount"]);e!==void 0&&l!=null&&y(e,["tuningTask","hyperparameters","epochCount"],l);const d=h(n,["learningRateMultiplier"]);if(d!=null&&y(a,["tuningTask","hyperparameters","learningRateMultiplier"],d),h(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(h(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(h(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=h(n,["batchSize"]);e!==void 0&&f!=null&&y(e,["tuningTask","hyperparameters","batchSize"],f);const m=h(n,["learningRate"]);if(e!==void 0&&m!=null&&y(e,["tuningTask","hyperparameters","learningRate"],m),h(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return a}function m1(n,e,s){const a={},o=h(n,["validationDataset"]);e!==void 0&&o!=null&&y(e,["supervisedTuningSpec"],k1(o));const l=h(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&y(e,["tunedModelDisplayName"],l);const d=h(n,["description"]);e!==void 0&&d!=null&&y(e,["description"],d);const f=h(n,["epochCount"]);e!==void 0&&f!=null&&y(e,["supervisedTuningSpec","hyperParameters","epochCount"],f);const m=h(n,["learningRateMultiplier"]);e!==void 0&&m!=null&&y(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],m);const p=h(n,["exportLastCheckpointOnly"]);e!==void 0&&p!=null&&y(e,["supervisedTuningSpec","exportLastCheckpointOnly"],p);const x=h(n,["adapterSize"]);if(e!==void 0&&x!=null&&y(e,["supervisedTuningSpec","hyperParameters","adapterSize"],x),h(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(h(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const b=h(n,["labels"]);return e!==void 0&&b!=null&&y(e,["labels"],b),a}function p1(n,e){const s={},a=h(n,["baseModel"]);a!=null&&y(s,["baseModel"],a);const o=h(n,["preTunedModel"]);o!=null&&y(s,["preTunedModel"],o);const l=h(n,["trainingDataset"]);l!=null&&y(s,["tuningTask","trainingData"],T1(l));const d=h(n,["config"]);return d!=null&&h1(d,s),s}function g1(n,e){const s={},a=h(n,["baseModel"]);a!=null&&y(s,["baseModel"],a);const o=h(n,["preTunedModel"]);o!=null&&y(s,["preTunedModel"],o);const l=h(n,["trainingDataset"]);l!=null&&E1(l,s);const d=h(n,["config"]);return d!=null&&m1(d,s),s}function y1(n,e){const s={},a=h(n,["name"]);return a!=null&&y(s,["_url","name"],a),s}function v1(n,e){const s={},a=h(n,["name"]);return a!=null&&y(s,["_url","name"],a),s}function x1(n,e,s){const a={},o=h(n,["pageSize"]);e!==void 0&&o!=null&&y(e,["_query","pageSize"],o);const l=h(n,["pageToken"]);e!==void 0&&l!=null&&y(e,["_query","pageToken"],l);const d=h(n,["filter"]);return e!==void 0&&d!=null&&y(e,["_query","filter"],d),a}function b1(n,e,s){const a={},o=h(n,["pageSize"]);e!==void 0&&o!=null&&y(e,["_query","pageSize"],o);const l=h(n,["pageToken"]);e!==void 0&&l!=null&&y(e,["_query","pageToken"],l);const d=h(n,["filter"]);return e!==void 0&&d!=null&&y(e,["_query","filter"],d),a}function w1(n,e){const s={},a=h(n,["config"]);return a!=null&&x1(a,s),s}function _1(n,e){const s={},a=h(n,["config"]);return a!=null&&b1(a,s),s}function S1(n,e){const s={},a=h(n,["sdkHttpResponse"]);a!=null&&y(s,["sdkHttpResponse"],a);const o=h(n,["nextPageToken"]);o!=null&&y(s,["nextPageToken"],o);const l=h(n,["tunedModels"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(f=>dv(f))),y(s,["tuningJobs"],d)}return s}function N1(n,e){const s={},a=h(n,["sdkHttpResponse"]);a!=null&&y(s,["sdkHttpResponse"],a);const o=h(n,["nextPageToken"]);o!=null&&y(s,["nextPageToken"],o);const l=h(n,["tuningJobs"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(f=>gd(f))),y(s,["tuningJobs"],d)}return s}function C1(n,e){const s={},a=h(n,["name"]);a!=null&&y(s,["model"],a);const o=h(n,["name"]);return o!=null&&y(s,["endpoint"],o),s}function T1(n,e){const s={};if(h(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const a=h(n,["examples"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>l)),y(s,["examples","examples"],o)}return s}function E1(n,e,s){const a={},o=h(n,["gcsUri"]);e!==void 0&&o!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],o);const l=h(n,["vertexDatasetResource"]);if(e!==void 0&&l!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],l),h(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return a}function dv(n,e){const s={},a=h(n,["sdkHttpResponse"]);a!=null&&y(s,["sdkHttpResponse"],a);const o=h(n,["name"]);o!=null&&y(s,["name"],o);const l=h(n,["state"]);l!=null&&y(s,["state"],$0(l));const d=h(n,["createTime"]);d!=null&&y(s,["createTime"],d);const f=h(n,["tuningTask","startTime"]);f!=null&&y(s,["startTime"],f);const m=h(n,["tuningTask","completeTime"]);m!=null&&y(s,["endTime"],m);const p=h(n,["updateTime"]);p!=null&&y(s,["updateTime"],p);const x=h(n,["description"]);x!=null&&y(s,["description"],x);const b=h(n,["baseModel"]);b!=null&&y(s,["baseModel"],b);const w=h(n,["_self"]);return w!=null&&y(s,["tunedModel"],C1(w)),s}function gd(n,e){const s={},a=h(n,["sdkHttpResponse"]);a!=null&&y(s,["sdkHttpResponse"],a);const o=h(n,["name"]);o!=null&&y(s,["name"],o);const l=h(n,["state"]);l!=null&&y(s,["state"],$0(l));const d=h(n,["createTime"]);d!=null&&y(s,["createTime"],d);const f=h(n,["startTime"]);f!=null&&y(s,["startTime"],f);const m=h(n,["endTime"]);m!=null&&y(s,["endTime"],m);const p=h(n,["updateTime"]);p!=null&&y(s,["updateTime"],p);const x=h(n,["error"]);x!=null&&y(s,["error"],x);const b=h(n,["description"]);b!=null&&y(s,["description"],b);const w=h(n,["baseModel"]);w!=null&&y(s,["baseModel"],w);const _=h(n,["tunedModel"]);_!=null&&y(s,["tunedModel"],_);const N=h(n,["preTunedModel"]);N!=null&&y(s,["preTunedModel"],N);const C=h(n,["supervisedTuningSpec"]);C!=null&&y(s,["supervisedTuningSpec"],C);const E=h(n,["tuningDataStats"]);E!=null&&y(s,["tuningDataStats"],E);const R=h(n,["encryptionSpec"]);R!=null&&y(s,["encryptionSpec"],R);const A=h(n,["partnerModelTuningSpec"]);A!=null&&y(s,["partnerModelTuningSpec"],A);const k=h(n,["customBaseModel"]);k!=null&&y(s,["customBaseModel"],k);const U=h(n,["experiment"]);U!=null&&y(s,["experiment"],U);const V=h(n,["labels"]);V!=null&&y(s,["labels"],V);const B=h(n,["outputUri"]);B!=null&&y(s,["outputUri"],B);const H=h(n,["pipelineJob"]);H!=null&&y(s,["pipelineJob"],H);const W=h(n,["serviceAccount"]);W!=null&&y(s,["serviceAccount"],W);const Y=h(n,["tunedModelDisplayName"]);Y!=null&&y(s,["tunedModelDisplayName"],Y);const J=h(n,["veoTuningSpec"]);return J!=null&&y(s,["veoTuningSpec"],J),s}function A1(n,e){const s={},a=h(n,["sdkHttpResponse"]);a!=null&&y(s,["sdkHttpResponse"],a);const o=h(n,["name"]);o!=null&&y(s,["name"],o);const l=h(n,["metadata"]);l!=null&&y(s,["metadata"],l);const d=h(n,["done"]);d!=null&&y(s,["done"],d);const f=h(n,["error"]);return f!=null&&y(s,["error"],f),s}function k1(n,e){const s={},a=h(n,["gcsUri"]);a!=null&&y(s,["validationDatasetUri"],a);const o=h(n,["vertexDatasetResource"]);return o!=null&&y(s,["validationDatasetUri"],o),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class j1 extends Js{constructor(e){super(),this.apiClient=e,this.get=async s=>await this.getInternal(s),this.list=async(s={})=>new xo(Fs.PAGED_ITEM_TUNING_JOBS,a=>this.listInternal(a),await this.listInternal(s),s),this.tune=async s=>{var a;if(this.apiClient.isVertexAI())if(s.baseModel.startsWith("projects/")){const o={tunedModelName:s.baseModel};!((a=s.config)===null||a===void 0)&&a.preTunedModelCheckpointId&&(o.checkpointId=s.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},s),{preTunedModel:o});return l.baseModel=void 0,await this.tuneInternal(l)}else{const o=Object.assign({},s);return await this.tuneInternal(o)}else{const o=Object.assign({},s),l=await this.tuneMldevInternal(o);let d="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?d=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(d=l.name.split("/operations/")[0]),{name:d,state:cd.JOB_STATE_QUEUED}}}}async getInternal(e){var s,a,o,l;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=v1(e);return f=se("{name}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),d.then(x=>gd(x))}else{const p=y1(e);return f=se("{name}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),d.then(x=>dv(x))}}async listInternal(e){var s,a,o,l;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=_1(e);return f=se("tuningJobs",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),d.then(x=>{const b=N1(x),w=new hy;return Object.assign(w,b),w})}else{const p=w1(e);return f=se("tunedModels",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:x.headers},w})),d.then(x=>{const b=S1(x),w=new hy;return Object.assign(w,b),w})}}async cancel(e){var s,a,o,l;let d="",f={};if(this.apiClient.isVertexAI()){const m=f1(e);d=se("{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}else{const m=d1(e);d=se("{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var s,a;let o,l="",d={};if(this.apiClient.isVertexAI()){const f=g1(e);return l=se("tuningJobs",f._url),d=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(p=>{const x=p;return x.sdkHttpResponse={headers:m.headers},x})),o.then(m=>gd(m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var s,a;let o,l="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=p1(e);return l=se("tunedModels",f._url),d=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(p=>{const x=p;return x.sdkHttpResponse={headers:m.headers},x})),o.then(m=>A1(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class R1{async download(e,s){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const M1=1024*1024*8,I1=3,U1=1e3,D1=2,$u="x-goog-upload-status";async function P1(n,e,s){var a,o,l;let d=0,f=0,m=new ud(new Response),p="upload";for(d=n.size;f<d;){const b=Math.min(M1,d-f),w=n.slice(f,f+b);f+b>=d&&(p+=", finalize");let _=0,N=U1;for(;_<I1&&(m=await s.request({path:"",body:w,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(f),"Content-Length":String(b)}}}),!(!((a=m?.headers)===null||a===void 0)&&a[$u]));)_++,await L1(N),N=N*D1;if(f+=b,((o=m?.headers)===null||o===void 0?void 0:o[$u])!=="active")break;if(d<=f)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const x=await m?.json();if(((l=m?.headers)===null||l===void 0?void 0:l[$u])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return x.file}async function O1(n){return{size:n.size,type:n.type}}function L1(n){return new Promise(e=>setTimeout(e,n))}class q1{async upload(e,s,a){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await P1(e,s,a)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await O1(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class B1{create(e,s,a){return new V1(e,s,a)}}class V1{constructor(e,s,a){this.url=e,this.headers=s,this.callbacks=a}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Iy="x-goog-api-key";class H1{constructor(e){this.apiKey=e}async addAuthHeaders(e,s){if(e.get(Iy)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Iy,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const G1="gl-node/";class z1{constructor(e){var s;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(s=e.vertexai)!==null&&s!==void 0?s:!1,this.apiKey=e.apiKey;const a=lN(e.httpOptions,e.vertexai,void 0,void 0);a&&(e.httpOptions?e.httpOptions.baseUrl=a:e.httpOptions={baseUrl:a}),this.apiVersion=e.apiVersion;const o=new H1(this.apiKey);this.apiClient=new AA({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:G1+"web",uploader:new q1,downloader:new R1}),this.models=new YA(this.apiClient),this.live=new VA(this.apiClient,o,new B1),this.batches=new EC(this.apiClient),this.chats=new aT(this.models,this.apiClient),this.caches=new nT(this.apiClient),this.files=new pT(this.apiClient),this.operations=new KA(this.apiClient),this.authTokens=new u1(this.apiClient),this.tunings=new j1(this.apiClient)}}new z1({apiKey:"mock_key"});const F1=({service:n,onClick:e,index:s,isVisible:a})=>c.jsxs("div",{onClick:e,className:`bg-white rounded-2xl shadow-lg p-6 text-center cursor-pointer group transform hover:-translate-y-2 transition-all duration-300 ease-in-out ${a?"opacity-100 translate-y-0":"opacity-0 translate-y-5"}`,style:{transitionDelay:`${a?s*100:0}ms`},children:[c.jsx("div",{className:"w-20 h-20 mx-auto bg-unistay-yellow/20 rounded-full flex items-center justify-center mb-4 transition-all duration-300 group-hover:bg-unistay-yellow",children:c.jsx("i",{className:`${n.icon} text-4xl text-unistay-navy transition-colors duration-300 group-hover:text-white`})}),c.jsx("h3",{className:"text-xl font-bold text-unistay-navy",children:n.name}),c.jsx("p",{className:"text-gray-500 text-sm mt-1",children:n.description})]}),$1=({services:n,selectedUniversity:e,onServiceSelect:s})=>{const[a,o]=Wi(),[l,d]=G.useState(e);G.useEffect(()=>{d(e)},[e]);const f=p=>{s&&s(p)},m=p=>{const x=rd[l.name];return x?(x[p.id]||[]).length:0};return c.jsx("section",{ref:a,id:"services",className:"py-16 bg-gray-100",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:`text-center mb-12 transition-opacity duration-1000 ${o?"opacity-100":"opacity-0"}`,children:[c.jsx("h2",{className:"text-3xl font-bold text-unistay-navy sm:text-4xl",children:"Student Life Services"}),c.jsxs("p",{className:"mt-4 text-lg text-gray-600",children:["Everything you need for a comfortable and productive campus life at ",l.name,", right at your fingertips."]})]}),c.jsx("div",{className:"relative min-h-[400px]",children:c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:n.map((p,x)=>{const b=m(p);return c.jsxs("div",{className:"relative",children:[c.jsx(F1,{service:p,onClick:()=>f(p),index:x,isVisible:o}),b>0&&c.jsx("div",{className:"absolute top-2 right-2 bg-unistay-yellow text-unistay-navy px-2 py-1 rounded-full text-xs font-bold",children:b})]},p.id)})})})]})})};new Date().toISOString();const Rt=[{id:"123e4567-e89b-12d3-a456-426614174001",name:"Makerere University",logoUrl:"/images/hostels/makerere.jpg"},{id:"123e4567-e89b-12d3-a456-426614174002",name:"Kyambogo University",logoUrl:"/images/hostels/kyambogo.jpg"},{id:"123e4567-e89b-12d3-a456-426614174003",name:"Makerere University Business School",logoUrl:"/images/hostels/mubs.jpg"},{id:"123e4567-e89b-12d3-a456-426614174004",name:"Uganda Christian University",logoUrl:"/images/hostels/ucu.png"},{id:"123e4567-e89b-12d3-a456-426614174005",name:"UMU Nkozi",logoUrl:"/images/hostels/umu.png"},{id:"123e4567-e89b-12d3-a456-426614174006",name:"Kampala International University",logoUrl:"/images/hostels/kiu.jpg"},{id:"123e4567-e89b-12d3-a456-426614174007",name:"MUST",logoUrl:"/images/hostels/must.jpg"},{id:"123e4567-e89b-12d3-a456-426614174008",name:"Aga Khan",logoUrl:"/images/hostels/agaKhan.jpg"},{id:"123e4567-e89b-12d3-a456-426614174009",name:"Gulu",logoUrl:"/images/hostels/gulu.png"},{id:"123e4567-e89b-12d3-a456-426614174010",name:"Lira",logoUrl:"/images/hostels/lira.png"},{id:"123e4567-e89b-12d3-a456-426614174011",name:"IUEA",logoUrl:"/images/hostels/iuea.jpg"},{id:"123e4567-e89b-12d3-a456-426614174012",name:"Soroti University",logoUrl:"/images/hostels/soroti.png"}],J1=[{id:"food",name:"Food",icon:"fas fa-utensils",description:"Best & affordable food spots."},{id:"transport",name:"Transport",icon:"fas fa-motorcycle",description:"Easy ways to get around campus."},{id:"shopping",name:"Shopping",icon:"fas fa-shopping-bag",description:"Your essentials and retail therapy."},{id:"stationery",name:"Stationery",icon:"fas fa-book-open",description:"All your academic supplies."},{id:"laundry",name:"Laundry",icon:"fas fa-tshirt",description:"Quick & convenient laundry services."},{id:"entertainment",name:"Entertainment",icon:"fas fa-ticket-alt",description:"Fun activities and hangout joints."},{id:"internet",name:"Internet",icon:"fas fa-wifi",description:"Reliable internet for study & fun."},{id:"health",name:"Health",icon:"fas fa-heartbeat",description:"Clinics, pharmacies & wellness."}],fv=["Male","Female"],Y1=["Male","Female","Any"],hv=["Semester","Full Year","Flexible"],mv=["Early Bird","Night Owl","Flexible"],pv=["Tidy","Average","Relaxed"],gv=["Rarely","Sometimes","Often"],yv=["Socially","Rarely","No"],K1=({service:n,university:e,onNavigateHome:s})=>{const[a,o]=G.useState(e.name),[l,d]=G.useState(!1),f=G.useRef(null);G.useEffect(()=>{const w=_=>{l&&f.current&&!f.current.contains(_.target)&&d(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[l]),G.useEffect(()=>{o(e.name)},[e.name]);const m=w=>({food:"from-orange-500 to-red-500",transport:"from-blue-500 to-cyan-500",shopping:"from-pink-500 to-rose-500",stationery:"from-purple-500 to-indigo-500",laundry:"from-green-500 to-emerald-500",entertainment:"from-yellow-500 to-orange-500",internet:"from-indigo-500 to-blue-500",health:"from-red-500 to-pink-500"})[w]||"from-unistay-navy to-blue-600",p=w=>({food:"/images/services/burger1.webp",transport:"/images/services/boda1.jpg",shopping:"/images/services/shopping4.webp",stationery:"/images/services/stationery1.webp",entertainment:"/images/services/entertainment.avif",internet:"/images/services/wifi5.jpg",health:"/images/services/medicine1.png",laundry:"/images/services/laundry1.jpg"})[w]||"",x=()=>{const w=rd[a];return w?w[n.id]||[]:[]},b=w=>({SafeBoda:"https://www.safeboda.com/assets/logo.png",Faras:"https://www.faras.co/images/logo.png",Uber:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/58/Uber_logo_2018.svg/2560px-Uber_logo_2018.svg.png","Jumia Food":"https://www.jumiafoods.com/logo.png","Uber Eats":"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6d/UberEats_logo.svg/2560px-UberEats_logo.svg.png",SafeBites:"https://via.placeholder.com/150?text=SafeBites",Jumia:"https://www.jumia.ug/logo.png",Kilimall:"https://www.kilimall.co.ug/logo.png","Local Markets":"https://via.placeholder.com/150?text=Local+Markets","Student Supply Hub":"https://via.placeholder.com/150?text=Student+Supply","Pen & Paper":"https://via.placeholder.com/150?text=Pen+Paper","Office Plus":"https://via.placeholder.com/150?text=Office+Plus","Quick Wash Laundry":"https://via.placeholder.com/150?text=QuickWash","Campus Laundry Hub":"https://via.placeholder.com/150?text=Campus+Laundry","Premium Dry Cleaning":"https://via.placeholder.com/150?text=Premium+Cleaning","Campus Events Organizers":"https://via.placeholder.com/150?text=Campus+Events","Gaming & Sports Zone":"https://via.placeholder.com/150?text=Gaming+Sports","Movie & Concert Tickets":"https://via.placeholder.com/150?text=Tickets","MTN Uganda":"https://www.mtn.co.ug/logo.png","Airtel Uganda":"https://www.airtel.co.ug/logo.png","StarLink Campus WiFi":"https://www.starlink.com/logo.png","Campus Health Center":"https://via.placeholder.com/150?text=Health+Center","Student Wellness Pharmacy":"https://via.placeholder.com/150?text=Pharmacy","Mental Health Support":"https://via.placeholder.com/150?text=Mental+Health"})[w]||`https://via.placeholder.com/150?text=${encodeURIComponent(w)}`;return c.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[c.jsxs("div",{className:"text-white py-12 sticky top-0 z-30 shadow-lg bg-cover bg-center relative",style:{backgroundImage:`url('${p(n.id)}')`},children:[c.jsx("div",{className:"absolute inset-0 bg-black/40"}),c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between relative z-10",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"bg-white/20 rounded-full h-16 w-16 flex items-center justify-center backdrop-blur-sm",children:c.jsx("i",{className:`${n.icon} text-4xl`})}),c.jsxs("div",{children:[c.jsxs("h1",{className:"text-4xl font-bold",children:[n.name," Services"]}),c.jsxs("p",{className:"text-white/90 mt-1",children:["Trusted providers at ",a]})]})]}),c.jsxs("button",{onClick:s,className:"bg-white/20 hover:bg-white/30 backdrop-blur-sm text-white font-bold py-2 px-6 rounded-full transition-all duration-300 flex items-center gap-2",children:[c.jsx("i",{className:"fas fa-arrow-left"}),"Back"]})]})]}),c.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[c.jsx("div",{className:"mb-12 bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:c.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-unistay-navy mb-2",children:"Filter by University"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"Select your university to see local service providers"})]}),c.jsxs("div",{className:"relative inline-block text-left w-full sm:w-auto",children:[c.jsxs("button",{ref:null,onClick:()=>d(w=>!w),className:"w-full sm:w-72 flex items-center justify-between gap-3 px-4 py-3 border-2 border-gray-300 rounded-lg font-semibold text-unistay-navy focus:outline-none focus:border-unistay-yellow transition-colors cursor-pointer bg-white","aria-haspopup":"true","aria-expanded":l,children:[c.jsxs("span",{className:"flex items-center gap-3",children:[c.jsx("img",{src:Rt.find(w=>w.name===a)?.logoUrl,alt:"logo",className:"w-8 h-8 rounded-full object-cover shadow-sm"}),c.jsx("span",{className:"truncate",children:a})]}),c.jsx("i",{className:"fas fa-chevron-down text-gray-400"})]}),l&&c.jsx("div",{ref:f,className:"absolute mt-2 w-full sm:w-96 bg-white rounded-lg shadow-lg border border-gray-100 z-50 overflow-hidden",children:c.jsx("div",{className:"max-h-60 overflow-y-auto",children:Rt.map(w=>{const _=rd[w.name],N=_&&_[n.id]?_[n.id].length:0;return c.jsxs("button",{onClick:()=>{o(w.name),d(!1)},className:"w-full flex items-center justify-between gap-4 px-4 py-3 hover:bg-gray-50 transition-colors text-left",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("img",{src:w.logoUrl,alt:w.name,className:"w-10 h-10 rounded-full object-cover shadow-sm"}),c.jsxs("div",{children:[c.jsx("div",{className:"font-semibold text-unistay-navy",children:w.name}),c.jsxs("div",{className:"text-xs text-gray-500",children:[N," provider",N!==1?"s":""]})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[N>0?c.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-unistay-yellow text-unistay-navy",children:N}):c.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-500",children:"0"}),c.jsx("i",{className:"fas fa-chevron-right text-gray-300"})]})]},w.id)})})})]})]})}),c.jsxs("div",{className:"mb-10",children:[c.jsx("h2",{className:"text-4xl font-bold text-unistay-navy mb-3",children:"Featured Providers"}),c.jsxs("p",{className:"text-gray-600 text-lg",children:["Choose from verified and trusted service providers near ",a]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:x().length>0?x().map((w,_)=>c.jsxs("div",{className:"bg-white rounded-2xl shadow-md overflow-hidden hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 border border-gray-100 animate-fade-in-up",style:{animationDelay:`${_*50}ms`},children:[c.jsxs("div",{className:`bg-gradient-to-br ${m(n.id)} h-40 flex items-center justify-center relative overflow-hidden`,children:[c.jsx("div",{className:"absolute inset-0 opacity-10 flex items-center justify-center text-9xl",children:w.icon}),c.jsx("img",{src:b(w.name),alt:w.name,className:"h-24 w-24 object-contain z-10 drop-shadow-lg",onError:N=>{N.target.style.display="none"}})]}),c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-start justify-between mb-3",children:[c.jsx("h3",{className:"font-bold text-2xl text-unistay-navy flex-1",children:w.name}),c.jsxs("div",{className:"flex items-center gap-1 bg-yellow-100 text-unistay-navy px-3 py-1 rounded-full flex-shrink-0 ml-2",children:[c.jsx("i",{className:"fas fa-star text-unistay-yellow text-sm"}),c.jsx("span",{className:"font-bold text-sm",children:w.rating})]})]}),c.jsx("p",{className:"text-gray-600 text-sm mb-6 line-clamp-2",children:w.description}),c.jsxs("div",{className:"space-y-4 mb-6 pb-6 border-b border-gray-200",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"bg-yellow-100 rounded-full p-3 w-12 h-12 flex items-center justify-center flex-shrink-0",children:c.jsx("i",{className:"fas fa-clock text-unistay-yellow text-lg"})}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("p",{className:"text-xs text-gray-500 font-semibold",children:"AVAILABILITY"}),c.jsx("p",{className:"text-sm font-bold text-unistay-navy",children:w.availability})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"bg-yellow-100 rounded-full p-3 w-12 h-12 flex items-center justify-center flex-shrink-0",children:c.jsx("i",{className:"fas fa-map-marker-alt text-unistay-yellow text-lg"})}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("p",{className:"text-xs text-gray-500 font-semibold",children:"LOCATION"}),c.jsx("p",{className:"text-sm font-bold text-unistay-navy",children:w.location})]})]})]}),c.jsxs("button",{className:"w-full bg-gradient-to-r from-unistay-navy to-blue-700 text-white py-3 rounded-lg font-bold hover:shadow-lg transition-all duration-300 flex items-center justify-center gap-2",children:[c.jsx("i",{className:"fas fa-shopping-bag"}),"Order Now"]})]})]},w.id)):c.jsxs("div",{className:"col-span-full bg-white rounded-2xl shadow-md p-12 text-center border border-gray-100",children:[c.jsx("div",{className:"inline-block bg-gray-100 rounded-full p-6 mb-4",children:c.jsx("i",{className:"fas fa-search text-4xl text-gray-400"})}),c.jsx("h3",{className:"text-2xl font-bold text-unistay-navy mb-2",children:"No Providers Available"}),c.jsxs("p",{className:"text-gray-600 text-lg",children:["Unfortunately, there are no service providers available for ",n.name," at ",a," at this time."]})]})}),c.jsxs("div",{className:"bg-gradient-to-r from-unistay-yellow to-yellow-400 rounded-2xl p-8 md:p-12 text-center shadow-lg border border-yellow-200",children:[c.jsx("h2",{className:"text-3xl font-bold text-unistay-navy mb-4",children:"Need Help Finding a Provider?"}),c.jsx("p",{className:"text-unistay-navy/80 mb-8 text-lg",children:"Can't find what you're looking for? Contact our support team or submit a service request and we'll help you out."}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[c.jsxs("button",{className:"bg-unistay-navy text-white px-8 py-3 rounded-lg font-bold hover:bg-opacity-90 transition-all hover:shadow-lg transform hover:-translate-y-1",children:[c.jsx("i",{className:"fas fa-envelope mr-2"}),"Contact Support"]}),c.jsxs("button",{className:"bg-white text-unistay-navy px-8 py-3 rounded-lg font-bold hover:bg-gray-100 transition-all hover:shadow-lg transform hover:-translate-y-1",children:[c.jsx("i",{className:"fas fa-plus-circle mr-2"}),"Request Service"]})]})]})]})]})},vv=G.createContext(void 0),Q1=({children:n})=>{const[e,s]=G.useState([]),a=G.useCallback(l=>{s(d=>d.filter(f=>f.id!==l))},[]),o=G.useCallback(({message:l,type:d,duration:f=5e3})=>{const m=Date.now();let p="An unknown error occurred.";typeof l=="string"?p=l:typeof l=="object"&&l!==null&&l.message?p=l.message:typeof l=="object"&&l!==null&&(p=JSON.stringify(l)),s(x=>[...x,{id:m,message:p,type:d,duration:f}]),setTimeout(()=>{a(m)},f)},[a]);return c.jsx(vv.Provider,{value:{notifications:e,notify:o,removeNotification:a},children:n})},vs=()=>{const n=G.useContext(vv);if(n===void 0)throw new Error("useNotifier must be used within a NotificationProvider");return n},fo={async getAll(){const{data:n,error:e}=await ee.from("contact_submissions").select("*").order("timestamp",{ascending:!1});if(e)throw e;return n},async getCounts(){const{count:n,error:e}=await ee.from("contact_submissions").select("*",{count:"exact",head:!0});if(e)throw e;return n||0},async add(n){const{data:e,error:s}=await ee.from("contact_submissions").insert([n]).select();if(s)throw s;return e[0]},async update(n,e){const{error:s}=await ee.from("contact_submissions").update(e).eq("id",n);if(s)throw s},async markAsRead(n){await this.update(n,{read:!0})},async remove(n){const{error:e}=await ee.from("contact_submissions").delete().eq("id",n);if(e)throw e}},X1={add:async n=>{await fo.add(n)},update:async n=>{await fo.update(n.id,n)},remove:async n=>{await fo.remove(n)}},W1=()=>{const[n,e]=G.useState({name:"",email:"",phone:"",subject:"",message:""}),[s,a]=G.useState(!1),{notify:o}=vs(),l=f=>{const{name:m,value:p}=f.target;e(x=>({...x,[m]:p}))},d=async f=>{if(f.preventDefault(),!n.name.trim()||!n.email.trim()||!n.phone.trim()||!n.subject.trim()||!n.message.trim()){o({message:"Please fill in all fields",type:"error"});return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)){o({message:"Please enter a valid email address",type:"error"});return}const p=/^[\d\s\-\+\(\)]+$/,x=n.phone.replace(/\D/g,"");if(!p.test(n.phone)||x.length<10){o({message:"Please enter a valid phone number",type:"error"});return}a(!0);try{await fo.add({name:n.name.trim(),email:n.email.trim(),phone:n.phone.trim(),subject:n.subject.trim(),message:n.message.trim(),timestamp:new Date().toISOString(),read:!1}),o({message:"Message sent successfully! We'll get back to you soon.",type:"success"}),e({name:"",email:"",phone:"",subject:"",message:""})}catch{o({message:"Failed to send message. Please try again.",type:"error"})}finally{a(!1)}};return c.jsx("section",{className:"py-16 bg-white",children:c.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx("h2",{className:"text-3xl font-bold text-unistay-navy sm:text-4xl",children:"Contact Us"}),c.jsx("p",{className:"mt-4 text-lg text-gray-600",children:"Have a question or feedback? We'd love to hear from you!"})]}),c.jsxs("form",{onSubmit:d,className:"bg-gray-50 rounded-xl shadow-md p-8 space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"name",className:"block text-sm font-semibold text-unistay-navy mb-2",children:"Full Name"}),c.jsx("input",{type:"text",id:"name",name:"name",value:n.name,onChange:l,placeholder:"Enter your full name",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-unistay-yellow focus:bg-yellow-50 transition-colors",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-unistay-navy mb-2",children:"Email Address"}),c.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:l,placeholder:"your.email@example.com",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-unistay-yellow focus:bg-yellow-50 transition-colors",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"phone",className:"block text-sm font-semibold text-unistay-navy mb-2",children:"Phone Number"}),c.jsx("input",{type:"tel",id:"phone",name:"phone",value:n.phone,onChange:l,placeholder:"+234 (0) 800 123 4567",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-unistay-yellow focus:bg-yellow-50 transition-colors",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"subject",className:"block text-sm font-semibold text-unistay-navy mb-2",children:"Subject"}),c.jsx("input",{type:"text",id:"subject",name:"subject",value:n.subject,onChange:l,placeholder:"What is this about?",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-unistay-yellow focus:bg-yellow-50 transition-colors",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"message",className:"block text-sm font-semibold text-unistay-navy mb-2",children:"Message"}),c.jsx("textarea",{id:"message",name:"message",value:n.message,onChange:l,placeholder:"Tell us more about your inquiry...",rows:5,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-unistay-yellow focus:bg-yellow-50 transition-colors resize-none",required:!0})]}),c.jsx("div",{className:"pt-4",children:c.jsx("button",{type:"submit",disabled:s,className:`w-full py-3 px-6 rounded-lg font-semibold text-lg transition-all duration-300 ${s?"bg-gray-400 text-white cursor-not-allowed opacity-75":"bg-unistay-navy text-white hover:bg-unistay-yellow hover:text-unistay-navy"}`,children:s?c.jsxs("span",{className:"flex items-center justify-center gap-2",children:[c.jsx("i",{className:"fas fa-spinner fa-spin"}),"Sending..."]}):c.jsxs("span",{className:"flex items-center justify-center gap-2",children:[c.jsx("i",{className:"fas fa-paper-plane"}),"Send Message"]})})})]})]})})},Z1=({onNavigateToRoommateFinder:n,onNavigateToBlog:e,onNavigateToAuth:s,onNavigateToHostels:a,onScrollToContact:o,onScrollToDeals:l,user:d})=>{const[f,m]=G.useState(!1),p=()=>{window.scrollY>300?m(!0):m(!1)};G.useEffect(()=>(window.addEventListener("scroll",p),()=>window.removeEventListener("scroll",p)),[]);const x=()=>{window.scrollTo({top:0,behavior:"smooth"})},b=()=>{d?l?.():s()},w=E=>{E.preventDefault(),alert(` Coming Soon!

Our mobile app is still under construction and will be available soon on the App Store. Thank you for your patience!`)},_=E=>{E.preventDefault(),alert(` Coming Soon!

Our mobile app is still under construction and will be available soon on Google Play. Thank you for your patience!`)},N={UniStay:[{text:"Hostels",action:a||x},{text:"Contact",action:o||(()=>{})},{text:"Blog",action:e}],"For Students":[{text:"Find a Roommate",action:d?n:s},{text:"Student Deals",action:b},!d&&{text:"Login / Sign Up",action:s}].filter(Boolean),Support:[{text:"Help Center",href:"#"},{text:"FAQs",href:"#"},{text:"Terms of Service",href:"#"},{text:"Privacy Policy",href:"#"}]},C=[{icon:"fab fa-facebook-f",href:"https://www.facebook.com/share/1F8wDkxS8r/",name:"Facebook"},{icon:"fa-brands fa-x-twitter",href:"https://x.com/uni_nav1",name:"Twitter"},{icon:"fab fa-instagram",href:"https://www.instagram.com/accounts/login/?next=%2Funistay_navigator%2F&source=omni_redirect",name:"Instagram"},{icon:"fab fa-whatsapp",href:"https://whatsapp.com/channel/0029VbBJkVYLikgDIbagef1J",name:"WhatsApp"}];return c.jsxs("footer",{className:"bg-unistay-navy text-white relative",children:[c.jsxs("div",{className:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-8",children:[c.jsxs("div",{className:"col-span-2 md:col-span-4 lg:col-span-1",children:[c.jsx("div",{className:"flex items-center select-none",children:c.jsx("img",{src:"/images/hostels/unistay.png",alt:"UniStay Logo",className:"h-10"})}),c.jsx("p",{className:"mt-4 text-gray-300 text-sm",children:"Your partner in finding the perfect student accommodation."})]}),Object.entries(N).map(([E,R])=>c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-200 tracking-wider uppercase",children:E}),c.jsx("ul",{className:"mt-4 space-y-3",children:R.map(A=>c.jsx("li",{children:A.action?c.jsx("button",{onClick:A.action,className:"text-base text-left text-gray-300 hover:text-unistay-yellow transition-colors duration-200",children:A.text}):c.jsx("a",{href:A.href,className:"text-base text-gray-300 hover:text-unistay-yellow transition-colors duration-200",children:A.text})},A.text))})]},E)),c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-200 tracking-wider uppercase",children:"Get the App"}),c.jsxs("div",{className:"mt-4 space-y-3",children:[c.jsx("button",{onClick:w,"aria-label":"Download on the App Store",children:c.jsx("img",{src:"https://developer.apple.com/assets/elements/badges/download-on-the-app-store.svg",alt:"Download on the App Store",className:"h-10 cursor-pointer hover:opacity-80 transition-opacity"})}),c.jsx("button",{onClick:_,"aria-label":"Get it on Google Play",children:c.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/7/78/Google_Play_Store_badge_EN.svg",alt:"Get it on Google Play",className:"h-10 cursor-pointer hover:opacity-80 transition-opacity"})})]})]})]}),c.jsxs("div",{className:"mt-12 border-t border-white/10 pt-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-200 tracking-wider uppercase text-center mb-6",children:"Our Sponsors"}),c.jsxs("div",{className:"flex justify-center items-center space-x-8",children:[c.jsx("a",{href:"#",className:"hover:opacity-80 transition-opacity duration-200",children:c.jsx("img",{src:"/images/hostels/rugbyinkitchen.png",alt:"Rugby in Kitchen",className:"h-16 object-contain"})}),c.jsx("a",{href:"#",className:"hover:opacity-80 transition-opacity duration-200",children:c.jsx("img",{src:"/images/hostels/kampanisLogo.jpg",alt:"Kampanis",className:"h-16 object-contain"})})]})]}),c.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[c.jsx("div",{className:"flex space-x-6",children:C.map(E=>c.jsxs("a",{href:E.href,className:"text-gray-400 hover:text-unistay-yellow transition-colors duration-200",children:[c.jsx("span",{className:"sr-only",children:E.name}),c.jsx("i",{className:`${E.icon} text-xl`})]},E.name))}),c.jsxs("p",{className:"text-base text-gray-400 text-center",children:[" ",new Date().getFullYear()," UniStay. All rights reserved."]})]})]})]}),f&&c.jsx("button",{onClick:x,className:"fixed bottom-8 right-8 bg-unistay-yellow text-unistay-navy h-14 w-14 rounded-full shadow-lg flex items-center justify-center transition-all duration-300 transform hover:scale-110 focus:outline-none focus:ring-4 focus:ring-yellow-300 animate-fade-in","aria-label":"Go to top",children:c.jsx("i",{className:"fas fa-arrow-up text-2xl"})})]})},e2=({hostel:n,onClose:e})=>{const[s,a]=G.useState(!1);G.useEffect(()=>{const l=d=>{d.key==="Escape"&&e()};return window.addEventListener("keydown",l),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",l),document.body.style.overflow="unset"}},[e]);const o=()=>{a(!0),setTimeout(()=>{a(!1)},2e3)};return c.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-[100] flex items-center justify-center p-4",style:{animation:"fadeIn 0.3s ease-out forwards"},onClick:e,children:[c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto no-scrollbar",style:{animation:"scaleIn 0.3s ease-out forwards"},onClick:l=>l.stopPropagation(),children:[c.jsxs("div",{className:"relative",children:[c.jsx(vn,{src:n.imageUrl,alt:n.name,className:"w-full h-64 object-cover rounded-t-2xl",loading:"eager"}),c.jsx("button",{onClick:e,className:"absolute top-4 right-4 bg-white/70 text-unistay-navy rounded-full h-10 w-10 flex items-center justify-center hover:bg-white transition-transform duration-200 hover:scale-110 z-10","aria-label":"Close modal",children:c.jsx("i",{className:"fas fa-times text-xl"})}),c.jsxs("div",{className:"absolute bottom-0 left-0 w-full p-6 bg-gradient-to-t from-black/80 to-transparent rounded-b-t-none rounded-t-2xl",children:[c.jsx("h2",{className:"text-3xl font-extrabold text-white",children:n.name}),c.jsxs("p",{className:"text-gray-200 mt-1",children:[c.jsx("i",{className:"fas fa-map-marker-alt text-unistay-yellow mr-2"}),n.location]})]})]}),c.jsxs("div",{className:"p-6 md:p-8",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[c.jsx("span",{className:"text-xl font-extrabold text-unistay-navy bg-unistay-yellow/30 px-4 py-2 rounded-lg",children:n.priceRange}),c.jsxs("div",{className:"flex items-center gap-2 text-xl font-bold text-unistay-navy",children:[c.jsx("i",{className:"fas fa-star text-unistay-yellow"}),c.jsx("span",{children:n.rating}),c.jsx("span",{className:"text-sm font-normal text-gray-500",children:"(25 reviews)"})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-xl font-bold text-unistay-navy mb-3",children:"About this hostel"}),c.jsx("p",{className:"text-gray-600 leading-relaxed",children:n.description})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-xl font-bold text-unistay-navy mb-4",children:"Amenities"}),c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:n.amenities.map(l=>c.jsxs("div",{className:"bg-gray-50 border border-gray-200 p-4 rounded-lg flex items-center gap-4",children:[c.jsx("i",{className:`${l.icon} text-unistay-navy text-2xl w-8 text-center`}),c.jsx("span",{className:"font-semibold text-gray-700",children:l.name})]},l.name))})]}),c.jsx("div",{className:"pt-6 border-t border-gray-200",children:c.jsx("button",{onClick:o,disabled:s,className:"w-full bg-unistay-navy hover:bg-opacity-90 text-white font-bold text-lg py-4 px-8 rounded-full transition-all duration-300 transform hover:scale-105 flex items-center justify-center disabled:bg-opacity-70",children:s?c.jsx(Ze,{color:"white",size:"md"}):"Book Now"})})]})]}),c.jsx("style",{children:`
          @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
          }
          @keyframes scaleIn {
            from { opacity: 0; transform: scale(0.95) translateY(20px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
          }
      `})]})},Kr=({children:n})=>c.jsx("h3",{className:"text-xl font-bold text-unistay-navy mb-4 border-b pb-2",children:n}),Bs=n=>c.jsx("input",{...n,className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-unistay-yellow focus:border-unistay-yellow disabled:bg-gray-200"}),fs=({children:n,...e})=>c.jsx("select",{...e,className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-unistay-yellow focus:border-unistay-yellow disabled:bg-gray-200",children:n}),t2=n=>c.jsx("textarea",{...n,rows:4,className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-unistay-yellow focus:border-unistay-yellow disabled:bg-gray-200"}),yt=({children:n,...e})=>c.jsx("label",{...e,className:"block text-sm font-medium text-gray-700 mb-1",children:n}),n2=({profile:n,user:e,onProfileUpdate:s,onCancel:a,isProfileIncomplete:o})=>{const l={id:e.id,name:e.name.split(" ")[0],imageUrl:`https://picsum.photos/seed/${e.name.toLowerCase()}/400/400`,age:20,gender:"Female",universityId:Rt[0].id,course:"",yearOfStudy:1,budget:5e5,moveInDate:new Date().toISOString().split("T")[0],leaseDuration:"Semester",bio:"",isSmoker:!1,drinksAlcohol:"No",studySchedule:"Flexible",cleanliness:"Average",guestFrequency:"Rarely",hobbies:"",seekingGender:"Any",...n},[d,f]=G.useState(l),[m,p]=G.useState(!1),x=_=>{const{name:N,value:C,type:E,checked:R}=_.target;f(A=>({...A,[N]:E==="checkbox"?R:C}))},b=_=>{const{name:N,value:C}=_.target;f(E=>({...E,[N]:parseInt(C,10)||0}))},w=async _=>{_.preventDefault(),p(!0),await s(d),p(!1)};return c.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 md:p-8 animate-fade-in",children:[c.jsx("h2",{className:"text-2xl font-bold text-unistay-navy mb-1",children:o?"Complete Your Profile":n?"Update Your Profile":"Create Your Roommate Profile"}),c.jsx("p",{className:"text-gray-600 mb-6",children:o?"Welcome to UniStay! Please fill out the details below to start finding roommates.":"A detailed profile helps us find you the best matches!"}),c.jsxs("form",{onSubmit:w,className:"space-y-8",children:[c.jsxs("div",{children:[c.jsx(Kr,{children:"Personal Details"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx(yt,{htmlFor:"name",children:"First Name"}),c.jsx(Bs,{id:"name",name:"name",value:d.name,onChange:x,required:!0})]}),c.jsxs("div",{children:[c.jsx(yt,{htmlFor:"age",children:"Age"}),c.jsx(Bs,{id:"age",name:"age",type:"number",value:d.age,onChange:b,required:!0})]}),c.jsxs("div",{children:[c.jsx(yt,{htmlFor:"gender",children:"Gender"}),c.jsx(fs,{id:"gender",name:"gender",value:d.gender,onChange:x,children:fv.map(_=>c.jsx("option",{value:_,children:_},_))})]}),c.jsxs("div",{children:[c.jsx(yt,{htmlFor:"universityId",children:"University"}),c.jsx(fs,{id:"universityId",name:"universityId",value:d.universityId,onChange:x,children:Rt.map(_=>c.jsx("option",{value:_.id,children:_.name},_.id))})]}),c.jsxs("div",{children:[c.jsx(yt,{htmlFor:"course",children:"Course of Study"}),c.jsx(Bs,{id:"course",name:"course",value:d.course,onChange:x,placeholder:"e.g., Computer Science",required:!0})]}),c.jsxs("div",{children:[c.jsx(yt,{htmlFor:"yearOfStudy",children:"Year of Study"}),c.jsx(Bs,{id:"yearOfStudy",name:"yearOfStudy",type:"number",min:"1",max:"7",value:d.yearOfStudy,onChange:b,required:!0})]})]})]}),c.jsxs("div",{children:[c.jsx(Kr,{children:"Accommodation Needs"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx(yt,{htmlFor:"budget",children:"Monthly Budget (UGX)"}),c.jsx(Bs,{id:"budget",name:"budget",type:"number",step:"50000",value:d.budget,onChange:b,required:!0})]}),c.jsxs("div",{children:[c.jsx(yt,{htmlFor:"moveInDate",children:"Move-in Date"}),c.jsx(Bs,{id:"moveInDate",name:"moveInDate",type:"date",value:d.moveInDate,onChange:x,required:!0})]}),c.jsxs("div",{children:[c.jsx(yt,{htmlFor:"leaseDuration",children:"Lease Duration"}),c.jsx(fs,{id:"leaseDuration",name:"leaseDuration",value:d.leaseDuration,onChange:x,children:hv.map(_=>c.jsx("option",{value:_,children:_},_))})]})]})]}),c.jsxs("div",{children:[c.jsx(Kr,{children:"Lifestyle & Habits"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx(yt,{htmlFor:"studySchedule",children:"Study Schedule"}),c.jsx(fs,{id:"studySchedule",name:"studySchedule",value:d.studySchedule,onChange:x,children:mv.map(_=>c.jsx("option",{value:_,children:_},_))})]}),c.jsxs("div",{children:[c.jsx(yt,{htmlFor:"cleanliness",children:"Cleanliness"}),c.jsx(fs,{id:"cleanliness",name:"cleanliness",value:d.cleanliness,onChange:x,children:pv.map(_=>c.jsx("option",{value:_,children:_},_))})]}),c.jsxs("div",{children:[c.jsx(yt,{htmlFor:"guestFrequency",children:"Guest Frequency"}),c.jsx(fs,{id:"guestFrequency",name:"guestFrequency",value:d.guestFrequency,onChange:x,children:gv.map(_=>c.jsx("option",{value:_,children:_},_))})]}),c.jsxs("div",{children:[c.jsx(yt,{htmlFor:"drinksAlcohol",children:"Drinking Habits"}),c.jsx(fs,{id:"drinksAlcohol",name:"drinksAlcohol",value:d.drinksAlcohol,onChange:x,children:yv.map(_=>c.jsx("option",{value:_,children:_},_))})]}),c.jsxs("div",{className:"flex items-center pt-6",children:[c.jsx("input",{id:"isSmoker",name:"isSmoker",type:"checkbox",checked:d.isSmoker,onChange:x,className:"h-4 w-4 text-unistay-yellow focus:ring-unistay-yellow border-gray-300 rounded"}),c.jsx(yt,{htmlFor:"isSmoker",className:"ml-2",children:"Are you a smoker?"})]})]})]}),c.jsxs("div",{children:[c.jsx(Kr,{children:"About You & What You're Looking For"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx(yt,{htmlFor:"seekingGender",children:"Seeking Roommate Gender"}),c.jsx(fs,{id:"seekingGender",name:"seekingGender",value:d.seekingGender,onChange:x,children:Y1.map(_=>c.jsx("option",{value:_,children:_},_))})]}),c.jsxs("div",{children:[c.jsx(yt,{htmlFor:"hobbies",children:"Hobbies (comma-separated)"}),c.jsx(Bs,{id:"hobbies",name:"hobbies",value:d.hobbies,onChange:x,placeholder:"e.g., Football, Reading, Movies"})]})]}),c.jsxs("div",{className:"mt-6",children:[c.jsx(yt,{htmlFor:"bio",children:"Short Bio"}),c.jsx(t2,{id:"bio",name:"bio",value:d.bio,onChange:x,placeholder:"Tell potential roommates a little about yourself...",required:!0})]})]}),c.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t",children:[n&&!o&&c.jsx("button",{type:"button",onClick:a,className:"bg-gray-200 text-gray-800 font-bold py-2 px-6 rounded-full hover:bg-gray-300 transition-colors",children:"Cancel"}),c.jsx("button",{type:"submit",disabled:m,className:"bg-unistay-yellow text-unistay-navy font-bold py-2 px-6 rounded-full hover:bg-yellow-400 transition-colors disabled:bg-yellow-400/70 disabled:cursor-not-allowed flex items-center justify-center min-w-[150px]",children:m?c.jsx(Ze,{color:"navy",size:"sm"}):n?"Save Changes":"Create Profile & Find Matches"})]})]})]})};function s2(n,e){if(!n||!e)return 0;let s=0;const a={gender:20,budget:25,university:20,lifestyle:25,interest:10},o=n.seekingGender==="Any"||n.seekingGender===e.gender,l=e.seekingGender==="Any"||e.seekingGender===n.gender;o&&l&&(s+=a.gender);const d=Math.abs(n.budget-e.budget),f=Math.max(n.budget,1),m=Math.max(0,1-d/f);s+=m*a.budget,n.universityId===e.universityId&&(s+=a.university);let p=0;const x=5;n.isSmoker===e.isSmoker&&p++,n.studySchedule===e.studySchedule?p++:(n.studySchedule==="Flexible"||e.studySchedule==="Flexible")&&(p+=.5);const b={Tidy:2,Average:1,Relaxed:0};Math.abs(b[n.cleanliness]-b[e.cleanliness])===0?p++:Math.abs(b[n.cleanliness]-b[e.cleanliness])===1&&(p+=.5);const w={Often:2,Sometimes:1,Rarely:0};Math.abs(w[n.guestFrequency]-w[e.guestFrequency])===0?p++:Math.abs(w[n.guestFrequency]-w[e.guestFrequency])===1&&(p+=.5),n.drinksAlcohol===e.drinksAlcohol?p++:(n.drinksAlcohol==="Rarely"||e.drinksAlcohol==="Rarely")&&(p+=.5),s+=p/x*a.lifestyle;let _=0;Math.abs(n.yearOfStudy-e.yearOfStudy)<=1&&(_+=5);const N=n.hobbies.toLowerCase().split(",").map(R=>R.trim()).filter(Boolean),C=e.hobbies.toLowerCase().split(",").map(R=>R.trim()).filter(Boolean),E=N.filter(R=>C.includes(R)).length;return _+=Math.min(5,E*2.5),s+=_/10*a.interest,Math.round(s)}const i2=({profile:n,score:e,universityName:s})=>{const[a,o]=G.useState(!1),l=()=>{o(!0),setTimeout(()=>{o(!1)},2e3)};return c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden transition-all duration-300 h-full flex flex-col border-4 border-transparent hover:border-unistay-yellow",children:[c.jsxs("div",{className:"relative",children:[c.jsx(vn,{src:n.imageUrl,alt:n.name,className:"h-56 w-full object-cover",loading:"lazy"}),c.jsxs("div",{className:"absolute top-3 right-3 bg-unistay-navy text-white rounded-full h-16 w-16 flex flex-col items-center justify-center font-bold shadow-lg",children:[c.jsxs("span",{className:"text-2xl",children:[e,"%"]}),c.jsx("span",{className:"text-xs",children:"Match"})]})]}),c.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[c.jsxs("h3",{className:"text-xl font-bold text-unistay-navy",children:[n.name,", ",n.age]}),c.jsxs("p",{className:"text-gray-500 text-sm",children:[s,"  ",n.course]}),c.jsx("p",{className:"text-gray-600 mt-3 text-sm flex-grow",children:n.bio}),c.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[c.jsx("span",{className:"bg-gray-200 text-gray-700 text-xs font-semibold px-2.5 py-1 rounded-full",children:n.studySchedule}),c.jsx("span",{className:"bg-gray-200 text-gray-700 text-xs font-semibold px-2.5 py-1 rounded-full",children:n.cleanliness}),c.jsx("span",{className:"bg-gray-200 text-gray-700 text-xs font-semibold px-2.5 py-1 rounded-full",children:n.isSmoker?"Smoker":"Non-Smoker"})]})]}),c.jsx("div",{className:"p-4 bg-gray-50 border-t",children:c.jsx("button",{onClick:l,disabled:a,className:"w-full bg-unistay-navy hover:bg-opacity-90 text-white font-bold py-2 px-4 rounded-full transition-all duration-300 flex items-center justify-center disabled:bg-opacity-70",children:a?c.jsx(Ze,{color:"white",size:"sm"}):"Request to Connect"})})]})},a2=({userProfile:n,profiles:e,universities:s,onEditProfile:a})=>{const o=G.useMemo(()=>new Map(s.map(d=>[d.id,d.name])),[s]),l=G.useMemo(()=>n?e.filter(d=>d.id!==n.id).map(d=>({profile:d,score:s2(n,d)})).sort((d,f)=>f.score-d.score):[],[n,e]);return c.jsxs("div",{className:"animate-fade-in",children:[c.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-6 md:p-8 mb-8",children:c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-unistay-navy",children:"Your Top Roommate Matches"}),c.jsx("p",{className:"text-gray-600 mt-1",children:"Based on your profile, here are your most compatible roommates."})]}),c.jsx("button",{onClick:a,className:"bg-unistay-yellow text-unistay-navy font-bold py-2 px-6 rounded-full hover:bg-yellow-400 transition-colors flex-shrink-0",children:"Edit My Profile"})]})}),l.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:l.slice(0,9).map(({profile:d,score:f},m)=>c.jsx("div",{className:"animate-fade-in-up",style:{animationDelay:`${m*100}ms`},children:c.jsx(i2,{profile:d,score:f,universityName:o.get(d.universityId)||"Unknown University"})},d.id))}):c.jsxs("div",{className:"text-center py-16 bg-white rounded-lg shadow-md",children:[c.jsx("i",{className:"fas fa-users text-4xl text-gray-300 mb-4"}),c.jsx("h3",{className:"text-xl font-semibold text-unistay-navy",children:"No Matches Found Yet"}),c.jsx("p",{className:"text-gray-500 mt-2",children:"We couldn't find any compatible roommates right now. More students are signing up every day, so check back soon!"})]})]})},o2=({currentUser:n,currentUserProfile:e,onProfileUpdate:s,profiles:a,universities:o,onNavigateHome:l,onNavigateToProfile:d})=>{const[f,m]=G.useState(!1),p=!e||!e.contactNumber||!e.universityId||!e.course,x=p||f,b=async w=>{await s(w),m(!1),d()};return c.jsxs("div",{className:"bg-gray-100 min-h-screen",children:[c.jsx("header",{className:"bg-unistay-navy text-white shadow-lg sticky top-0 z-40",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between h-20",children:[c.jsx("h1",{className:"text-3xl font-bold",children:"Find a Roommate"}),c.jsxs("button",{onClick:l,className:"font-semibold hover:text-unistay-yellow transition-colors flex items-center gap-2",children:[c.jsx("i",{className:"fas fa-arrow-left"}),"Back to Home"]})]})}),c.jsx("main",{className:"max-w-7xl mx-auto p-4 sm:p-6 lg:p-8 pt-24",children:x?c.jsx(n2,{profile:e,user:n,onProfileUpdate:b,onCancel:()=>m(!1),isProfileIncomplete:p}):c.jsx(a2,{userProfile:e,profiles:a,universities:o,onEditProfile:()=>m(!0)})})]})},Uy=({filters:n,onFilterChange:e,activeFiltersCount:s})=>{const[a,o]=G.useState(!0),l=(m,p)=>{e({...n,[m]:p})},d=(m,p)=>{const x=n[m];Array.isArray(x)&&(x.includes(p)?e({...n,[m]:x.filter(b=>b!==p)}):e({...n,[m]:[...x,p]}))},f=()=>{e({university:[],gender:[],ageMin:18,ageMax:40,budget:1e7,cleanliness:[],studySchedule:[],guestFrequency:[],isSmoker:void 0,drinksAlcohol:[],leaseDuration:[]})};return c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 h-fit sticky top-24",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("h3",{className:"text-lg font-bold text-unistay-navy flex items-center gap-2",children:[c.jsx("i",{className:"fas fa-filter"}),"Filters",s>0&&c.jsx("span",{className:"bg-unistay-yellow text-unistay-navy text-xs font-bold px-2 py-1 rounded-full",children:s})]}),c.jsx("button",{onClick:()=>o(!a),className:"lg:hidden text-unistay-navy hover:text-unistay-yellow transition-colors",children:c.jsx("i",{className:`fas fa-chevron-${a?"up":"down"}`})})]}),a&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"pb-6 border-b",children:[c.jsx("label",{className:"block text-sm font-semibold text-unistay-navy mb-3",children:"University"}),c.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:Rt.map(m=>c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:text-unistay-yellow transition-colors",children:[c.jsx("input",{type:"checkbox",checked:n.university.includes(m.id),onChange:()=>d("university",m.id),className:"rounded border-gray-300 text-unistay-yellow focus:ring-unistay-yellow"}),c.jsx("span",{className:"text-sm text-gray-700",children:m.name})]},m.id))})]}),c.jsxs("div",{className:"pb-6 border-b",children:[c.jsx("label",{className:"block text-sm font-semibold text-unistay-navy mb-3",children:"Gender"}),c.jsx("div",{className:"space-y-2",children:fv.map(m=>c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:text-unistay-yellow transition-colors",children:[c.jsx("input",{type:"checkbox",checked:n.gender.includes(m),onChange:()=>d("gender",m),className:"rounded border-gray-300 text-unistay-yellow focus:ring-unistay-yellow"}),c.jsx("span",{className:"text-sm text-gray-700",children:m})]},m))})]}),c.jsxs("div",{className:"pb-6 border-b",children:[c.jsx("label",{className:"block text-sm font-semibold text-unistay-navy mb-3",children:"Age Range"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[c.jsx("span",{children:"Min"}),c.jsxs("span",{children:[n.ageMin," years"]})]}),c.jsx("input",{type:"range",min:"18",max:"40",value:n.ageMin,onChange:m=>l("ageMin",parseInt(m.target.value)),className:"w-full"})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[c.jsx("span",{children:"Max"}),c.jsxs("span",{children:[n.ageMax," years"]})]}),c.jsx("input",{type:"range",min:"18",max:"40",value:n.ageMax,onChange:m=>l("ageMax",parseInt(m.target.value)),className:"w-full"})]})]})]}),c.jsxs("div",{className:"pb-6 border-b",children:[c.jsxs("label",{className:"block text-sm font-semibold text-unistay-navy mb-3",children:["Budget: UGX ",Math.round(n.budget/1e5)*1e5|0]}),c.jsx("input",{type:"range",min:"100000",max:"10000000",step:"100000",value:n.budget,onChange:m=>l("budget",parseInt(m.target.value)),className:"w-full"}),c.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Up to UGX ",n.budget.toLocaleString()]})]}),c.jsxs("div",{className:"pb-6 border-b",children:[c.jsx("label",{className:"block text-sm font-semibold text-unistay-navy mb-3",children:"Cleanliness Level"}),c.jsx("div",{className:"space-y-2",children:pv.map(m=>c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:text-unistay-yellow transition-colors",children:[c.jsx("input",{type:"checkbox",checked:n.cleanliness.includes(m),onChange:()=>d("cleanliness",m),className:"rounded border-gray-300 text-unistay-yellow focus:ring-unistay-yellow"}),c.jsx("span",{className:"text-sm text-gray-700",children:m})]},m))})]}),c.jsxs("div",{className:"pb-6 border-b",children:[c.jsx("label",{className:"block text-sm font-semibold text-unistay-navy mb-3",children:"Study Schedule"}),c.jsx("div",{className:"space-y-2",children:mv.map(m=>c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:text-unistay-yellow transition-colors",children:[c.jsx("input",{type:"checkbox",checked:n.studySchedule.includes(m),onChange:()=>d("studySchedule",m),className:"rounded border-gray-300 text-unistay-yellow focus:ring-unistay-yellow"}),c.jsx("span",{className:"text-sm text-gray-700",children:m})]},m))})]}),c.jsxs("div",{className:"pb-6 border-b",children:[c.jsx("label",{className:"block text-sm font-semibold text-unistay-navy mb-3",children:"Guest Frequency"}),c.jsx("div",{className:"space-y-2",children:gv.map(m=>c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:text-unistay-yellow transition-colors",children:[c.jsx("input",{type:"checkbox",checked:n.guestFrequency.includes(m),onChange:()=>d("guestFrequency",m),className:"rounded border-gray-300 text-unistay-yellow focus:ring-unistay-yellow"}),c.jsx("span",{className:"text-sm text-gray-700",children:m})]},m))})]}),c.jsxs("div",{className:"pb-6 border-b",children:[c.jsx("label",{className:"block text-sm font-semibold text-unistay-navy mb-3",children:"Drinking Habits"}),c.jsx("div",{className:"space-y-2",children:yv.map(m=>c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:text-unistay-yellow transition-colors",children:[c.jsx("input",{type:"checkbox",checked:n.drinksAlcohol.includes(m),onChange:()=>d("drinksAlcohol",m),className:"rounded border-gray-300 text-unistay-yellow focus:ring-unistay-yellow"}),c.jsx("span",{className:"text-sm text-gray-700",children:m})]},m))})]}),c.jsxs("div",{className:"pb-6 border-b",children:[c.jsx("label",{className:"block text-sm font-semibold text-unistay-navy mb-3",children:"Lease Duration"}),c.jsx("div",{className:"space-y-2",children:hv.map(m=>c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:text-unistay-yellow transition-colors",children:[c.jsx("input",{type:"checkbox",checked:n.leaseDuration.includes(m),onChange:()=>d("leaseDuration",m),className:"rounded border-gray-300 text-unistay-yellow focus:ring-unistay-yellow"}),c.jsx("span",{className:"text-sm text-gray-700",children:m})]},m))})]}),c.jsxs("div",{className:"pb-6 border-b",children:[c.jsx("label",{className:"block text-sm font-semibold text-unistay-navy mb-3",children:"Smoking"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:text-unistay-yellow transition-colors",children:[c.jsx("input",{type:"radio",name:"smoker",checked:n.isSmoker===void 0,onChange:()=>l("isSmoker",void 0),className:"border-gray-300 text-unistay-yellow focus:ring-unistay-yellow"}),c.jsx("span",{className:"text-sm text-gray-700",children:"Any"})]}),c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:text-unistay-yellow transition-colors",children:[c.jsx("input",{type:"radio",name:"smoker",checked:n.isSmoker===!1,onChange:()=>l("isSmoker",!1),className:"border-gray-300 text-unistay-yellow focus:ring-unistay-yellow"}),c.jsx("span",{className:"text-sm text-gray-700",children:"Non-Smoker"})]}),c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:text-unistay-yellow transition-colors",children:[c.jsx("input",{type:"radio",name:"smoker",checked:n.isSmoker===!0,onChange:()=>l("isSmoker",!0),className:"border-gray-300 text-unistay-yellow focus:ring-unistay-yellow"}),c.jsx("span",{className:"text-sm text-gray-700",children:"Smoker"})]})]})]}),s>0&&c.jsx("button",{onClick:f,className:"w-full bg-red-50 text-red-600 font-semibold py-2 px-4 rounded-lg hover:bg-red-100 transition-colors text-sm",children:"Clear All Filters"})]})]})},r2=({profile:n,matchPercentage:e,university:s,currentUser:a,onRequestSent:o})=>{const[l,d]=G.useState(!1),[f,m]=G.useState("none"),{notify:p}=vs();G.useEffect(()=>{x()},[]);const x=async()=>{if(a?.id)try{const E=await co.checkRequestExists(a.id,n.id);m(E?E.status:"none")}catch{}},b=async()=>{if(!a?.id){p({message:"Please sign in to send connection requests",type:"error"});return}d(!0);try{await co.sendRequest(a.id,n.id,a.name,a.imageUrl),m("pending"),p({message:`Connection request sent to ${n.name}!`,type:"success"}),o?.()}catch(E){E?.message?.includes("connection_requests")||E?.message?.includes("relation")?p({message:"Connection request feature is being set up. Please try again in a moment.",type:"info"}):p({message:"Failed to send connection request",type:"error"})}finally{d(!1)}},_=f==="accepted"?{label:" Roomies!",disabled:!0,color:"bg-green-600 hover:bg-green-700"}:f==="pending"?{label:" Request Pending",disabled:!0,color:"bg-gray-400 hover:bg-gray-500"}:{label:"Send Connection Request",disabled:!1,color:"bg-unistay-navy hover:bg-unistay-navy/90"},N=E=>E>=80?"text-green-600":E>=60?"text-blue-600":E>=40?"text-yellow-600":"text-gray-600",C=E=>E>=80?"bg-green-50 border-green-200":E>=60?"bg-blue-50 border-blue-200":E>=40?"bg-yellow-50 border-yellow-200":"bg-gray-50 border-gray-200";return c.jsxs("div",{className:`bg-white rounded-2xl shadow-lg overflow-hidden border-2 transition-all duration-300 hover:shadow-xl ${C(e)}`,children:[c.jsxs("div",{className:"relative",children:[c.jsx(vn,{src:n.imageUrl||`https://picsum.photos/seed/${n.name.toLowerCase()}/400/400`,alt:n.name,className:"h-64 w-full object-cover",loading:"lazy"}),c.jsxs("div",{className:`absolute top-3 right-3 ${N(e)} bg-white rounded-full h-20 w-20 flex flex-col items-center justify-center font-bold shadow-lg border-2`,children:[c.jsxs("span",{className:"text-2xl",children:[e,"%"]}),c.jsx("span",{className:"text-xs",children:"Match"})]})]}),c.jsxs("div",{className:"p-6",children:[c.jsx("div",{className:"flex items-start justify-between mb-2",children:c.jsxs("div",{children:[c.jsxs("h3",{className:"text-xl font-bold text-unistay-navy",children:[n.name,", ",n.age]}),c.jsx("p",{className:"text-sm text-gray-600",children:s})]})}),c.jsxs("p",{className:"text-gray-700 font-semibold mb-3",children:[n.course,"  Year ",n.yearOfStudy]}),c.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:n.bio||"No bio provided"}),c.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4 text-sm",children:[c.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[c.jsx("p",{className:"text-gray-500 text-xs",children:"Budget"}),c.jsxs("p",{className:"font-semibold text-unistay-navy",children:["UGX ",(n.budget||0).toLocaleString()]})]}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[c.jsx("p",{className:"text-gray-500 text-xs",children:"Lease"}),c.jsx("p",{className:"font-semibold text-unistay-navy",children:n.leaseDuration})]}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[c.jsx("p",{className:"text-gray-500 text-xs",children:"Study Schedule"}),c.jsx("p",{className:"font-semibold text-unistay-navy",children:n.studySchedule})]}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[c.jsx("p",{className:"text-gray-500 text-xs",children:"Cleanliness"}),c.jsx("p",{className:"font-semibold text-unistay-navy",children:n.cleanliness})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[n.isSmoker?c.jsx("span",{className:"bg-red-100 text-red-700 text-xs font-semibold px-2.5 py-1 rounded-full",children:"Smoker"}):c.jsx("span",{className:"bg-green-100 text-green-700 text-xs font-semibold px-2.5 py-1 rounded-full",children:"Non-Smoker"}),c.jsx("span",{className:"bg-blue-100 text-blue-700 text-xs font-semibold px-2.5 py-1 rounded-full",children:n.drinksAlcohol}),c.jsx("span",{className:"bg-purple-100 text-purple-700 text-xs font-semibold px-2.5 py-1 rounded-full",children:n.guestFrequency})]}),n.hobbies&&c.jsxs("p",{className:"text-xs text-gray-600 mb-4",children:[c.jsx("i",{className:"fas fa-heart text-red-500 mr-1"}),n.hobbies]}),c.jsx("button",{onClick:b,disabled:l||_.disabled,className:`w-full ${_.color} text-white font-bold py-2 px-4 rounded-lg transition-all duration-300 flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed`,children:l?c.jsxs(c.Fragment,{children:[c.jsx(Ze,{color:"white",size:"sm"}),"Sending..."]}):c.jsxs(c.Fragment,{children:[c.jsx("i",{className:`fas ${f==="accepted"?"fa-check":"fa-paper-plane"}`}),_.label]})})]})]})},l2=({currentUser:n,profiles:e,universities:s,onNavigateHome:a,onNavigateToProfile:o})=>{const[l,d]=G.useState({university:[],gender:[],ageMin:18,ageMax:40,budget:1e7,cleanliness:[],studySchedule:[],guestFrequency:[],isSmoker:void 0,drinksAlcohol:[],leaseDuration:[]}),[f,m]=G.useState("match"),p=(_,N)=>{if(!_||!N)return 0;let C=0;const E={gender:20,budget:25,university:20,lifestyle:25,interest:10},R=_.seekingGender==="Any"||_.seekingGender===N.gender,A=N.seekingGender==="Any"||N.seekingGender===_.gender;R&&A&&(C+=E.gender);const k=Math.abs((_.budget||0)-(N.budget||0)),U=Math.max(_.budget||1,1),V=Math.max(0,1-k/U);C+=V*E.budget,_.universityId===N.universityId&&(C+=E.university);let B=0;const H=5;_.isSmoker===N.isSmoker&&B++,_.studySchedule===N.studySchedule?B++:(_.studySchedule==="Flexible"||N.studySchedule==="Flexible")&&(B+=.5);const W={Tidy:2,Average:1,Relaxed:0},Y=Math.abs((W[_.cleanliness]||1)-(W[N.cleanliness]||1));Y===0?B++:Y===1&&(B+=.5);const J={Often:2,Sometimes:1,Rarely:0},Z=Math.abs((J[_.guestFrequency]||1)-(J[N.guestFrequency]||1));Z===0?B++:Z===1&&(B+=.5),_.drinksAlcohol===N.drinksAlcohol?B++:(_.drinksAlcohol==="Rarely"||N.drinksAlcohol==="Rarely")&&(B+=.5),C+=B/H*E.lifestyle;let X=0;Math.abs((_.yearOfStudy||0)-(N.yearOfStudy||0))<=1&&(X+=5);const pe=(_.hobbies||"").toLowerCase().split(",").map(D=>D.trim()).filter(Boolean),ke=(N.hobbies||"").toLowerCase().split(",").map(D=>D.trim()).filter(Boolean),oe=pe.filter(D=>ke.includes(D)).length;return X+=Math.min(5,oe*2.5),C+=X/10*E.interest,Math.round(C)},x=G.useMemo(()=>{if(!n)return[];let _=e.filter(N=>N.id!==n.id).map(N=>({profile:N,matchScore:p(n,N)})).filter(N=>{const C=N.profile;return!(l.university.length>0&&!l.university.includes(C.universityId)||l.gender.length>0&&!l.gender.includes(C.gender)||(C.age||0)<l.ageMin||(C.age||0)>l.ageMax||(C.budget||0)>l.budget||l.cleanliness.length>0&&!l.cleanliness.includes(C.cleanliness)||l.studySchedule.length>0&&!l.studySchedule.includes(C.studySchedule)||l.guestFrequency.length>0&&!l.guestFrequency.includes(C.guestFrequency)||l.drinksAlcohol.length>0&&!l.drinksAlcohol.includes(C.drinksAlcohol)||l.leaseDuration.length>0&&!l.leaseDuration.includes(C.leaseDuration)||l.isSmoker!==void 0&&C.isSmoker!==l.isSmoker)});return f==="match"?_.sort((N,C)=>C.matchScore-N.matchScore):f==="recent"?_.sort((N,C)=>(C.profile.id||"").localeCompare(N.profile.id||"")):f==="budget-low"?_.sort((N,C)=>(N.profile.budget||0)-(C.profile.budget||0)):f==="budget-high"&&_.sort((N,C)=>(C.profile.budget||0)-(N.profile.budget||0)),_},[n,e,l,f]),b=Object.values(l).reduce((_,N)=>Array.isArray(N)?_+N.length:N!==void 0&&N!==1e7&&N!==18&&N!==40?_+1:_,0),w=_=>{if(!_)return"Unknown";const N=s.find(C=>C.id===_);return N?N.name:"Unknown"};return n?c.jsxs("div",{className:"bg-gray-100 min-h-screen",children:[c.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-40",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between h-20",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-unistay-navy",children:"Find a Roommate"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"Discover your perfect match"})]}),c.jsxs("button",{onClick:a,className:"font-semibold text-unistay-navy hover:text-unistay-yellow transition-colors flex items-center gap-2",children:[c.jsx("i",{className:"fas fa-arrow-left"}),"Back"]})]})}),c.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[c.jsx("div",{className:"hidden lg:block",children:c.jsx(Uy,{filters:l,onFilterChange:d,activeFiltersCount:b})}),c.jsxs("div",{className:"lg:col-span-3",children:[c.jsx("div",{className:"lg:hidden mb-6",children:c.jsx(Uy,{filters:l,onFilterChange:d,activeFiltersCount:b})}),c.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-8",children:c.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[c.jsx("div",{children:c.jsxs("p",{className:"text-sm text-gray-600",children:["Found ",c.jsx("span",{className:"font-bold text-unistay-navy text-lg",children:x.length})," compatible roommates"]})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{htmlFor:"sortBy",className:"text-sm font-semibold text-gray-700",children:"Sort by:"}),c.jsxs("select",{id:"sortBy",value:f,onChange:_=>m(_.target.value),className:"bg-gray-50 border border-gray-300 rounded-lg px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 transition-colors",children:[c.jsx("option",{value:"match",children:"Best Match"}),c.jsx("option",{value:"recent",children:"Most Recent"}),c.jsx("option",{value:"budget-low",children:"Budget: Low to High"}),c.jsx("option",{value:"budget-high",children:"Budget: High to Low"})]})]})]})}),x.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:x.map(({profile:_,matchScore:N},C)=>c.jsx("div",{className:"animate-fade-in-up",style:{animationDelay:`${C*100}ms`},children:c.jsx(r2,{profile:_,matchPercentage:N,university:w(_.universityId),currentUser:n,onRequestSent:()=>{}})},_.id))}):c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center",children:[c.jsx("i",{className:"fas fa-search text-6xl text-gray-300 mb-4"}),c.jsx("h3",{className:"text-2xl font-bold text-unistay-navy mb-2",children:"No Matches Found"}),c.jsx("p",{className:"text-gray-600 mb-6",children:b>0?"Try adjusting your filters to see more roommate matches.":"Be the first to complete your profile!"}),b>0&&c.jsx("button",{onClick:()=>d({university:[],gender:[],ageMin:18,ageMax:40,budget:1e7,cleanliness:[],studySchedule:[],guestFrequency:[],isSmoker:void 0,drinksAlcohol:[],leaseDuration:[]}),className:"bg-unistay-yellow text-unistay-navy font-bold py-2 px-6 rounded-lg hover:bg-yellow-400 transition-colors",children:"Clear Filters"})]})]})]})})]}):c.jsx("div",{className:"bg-gray-100 min-h-screen flex items-center justify-center",children:c.jsx("div",{className:"text-center",children:c.jsx(Ze,{size:"lg"})})})},yd=({news:n,onNavigateHome:e})=>{const[s,a]=G.useState(!1);G.useEffect(()=>(window.scrollTo(0,0),n&&L0(n),()=>{q0()}),[n]);const o=f=>{if(!f)return"";const m=f.split(/\n\n+/).filter(x=>x.trim()),p=[];return m.forEach(x=>{const b=x.split(/(\[INLINE_IMAGE:[^\]]+\])/);let w="";b.forEach((_,N)=>{if(_.startsWith("[INLINE_IMAGE:")){const C=_.slice(14,-1);w.trim()&&(p.push(`<p class="text-gray-600 leading-relaxed mb-4">${w}</p>`),w=""),p.push(`<div class="my-6 flex justify-center"><img src="${C}" alt="Article image" class="max-w-full h-auto rounded-lg shadow-md max-h-96" /></div>`)}else if(_.trim()){let C=_.replace(/([^>])</g,"$1&lt;").replace(/([^>])>/g,"$1&gt;").replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>").replace(/\*([^*]+)\*/g,"<em>$1</em>").replace(/\n/g,'<br class="mb-2" />');w+=C}}),w.trim()&&p.push(`<p class="text-gray-600 leading-relaxed mb-4">${w}</p>`)}),p.join("")},l=f=>{if(!n)return;const p=`${window.location.origin}/article/${n.id}`,x=encodeURIComponent(p),b=encodeURIComponent(n.title),w={twitter:`https://twitter.com/intent/tweet?text=${b}&url=${x}`,facebook:`https://www.facebook.com/sharer/sharer.php?u=${x}`,linkedin:`https://www.linkedin.com/shareArticle?mini=true&url=${x}&title=${b}`,whatsapp:`https://api.whatsapp.com/send?text=${b}%20${x}`};window.open(w[f],"_blank","noopener,noreferrer")},d=()=>{if(!n)return;const m=`${window.location.origin}/article/${n.id}`;navigator.clipboard.writeText(m).then(()=>{a(!0),setTimeout(()=>a(!1),2e3)}).catch(()=>{const p=document.createElement("textarea");p.value=m,document.body.appendChild(p),p.select(),document.execCommand("copy"),document.body.removeChild(p),a(!0),setTimeout(()=>a(!1),2e3)})};return n?c.jsxs("div",{className:"bg-gray-50 min-h-screen flex flex-col",children:[c.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-40",children:c.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between h-20",children:[c.jsx("h1",{className:"text-2xl font-bold text-unistay-navy",children:"Article"}),c.jsxs("button",{onClick:e,className:"font-semibold text-unistay-navy hover:text-unistay-yellow transition-colors flex items-center gap-2",children:[c.jsx("i",{className:"fas fa-arrow-left"}),"Back to Blog"]})]})}),c.jsxs("main",{className:"flex-grow max-w-4xl mx-auto w-full px-4 sm:px-6 lg:px-8 py-12",children:[c.jsx("div",{className:"mb-8 rounded-2xl overflow-hidden shadow-lg",children:c.jsx("img",{src:n.imageUrl.replace("/100/100","/800/600"),alt:n.title,className:"w-full h-96 object-cover"})}),c.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8 pb-6 border-b border-gray-200",children:c.jsxs("div",{children:[c.jsx("h1",{className:"text-4xl font-extrabold text-unistay-navy mb-4",children:n.title}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 text-sm text-gray-500",children:[c.jsx("p",{children:n.timestamp?qn(n.timestamp):"Recently posted"}),c.jsxs("p",{children:["Source: ",n.source]})]})]})}),c.jsx("article",{className:"prose prose-lg max-w-none mb-12",children:c.jsx("div",{className:"space-y-4 text-gray-700",dangerouslySetInnerHTML:{__html:o(n.description)}})}),c.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-12",children:c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-6",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"text-sm font-semibold text-gray-700 mb-3",children:[c.jsx("i",{className:"fas fa-share mr-2"}),"Share this article:"]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{onClick:()=>l("twitter"),className:"text-gray-600 hover:text-[#1DA1F2] transition-colors text-lg","aria-label":"Share on Twitter",title:"Share on Twitter",children:c.jsx("i",{className:"fab fa-twitter"})}),c.jsx("button",{onClick:()=>l("facebook"),className:"text-gray-600 hover:text-[#4267B2] transition-colors text-lg","aria-label":"Share on Facebook",title:"Share on Facebook",children:c.jsx("i",{className:"fab fa-facebook"})}),c.jsx("button",{onClick:()=>l("linkedin"),className:"text-gray-600 hover:text-[#0077b5] transition-colors text-lg","aria-label":"Share on LinkedIn",title:"Share on LinkedIn",children:c.jsx("i",{className:"fab fa-linkedin"})}),c.jsx("button",{onClick:()=>l("whatsapp"),className:"text-gray-600 hover:text-[#25D366] transition-colors text-lg","aria-label":"Share on WhatsApp",title:"Share on WhatsApp",children:c.jsx("i",{className:"fab fa-whatsapp"})}),c.jsx("button",{onClick:d,className:`text-lg transition-colors ${s?"text-green-500":"text-gray-600 hover:text-unistay-navy"}`,"aria-label":"Copy link",title:s?"Link copied!":"Copy link",children:c.jsx("i",{className:`fas ${s?"fa-check":"fa-link"}`})})]})]}),c.jsxs("button",{onClick:e,className:"bg-unistay-navy hover:bg-opacity-90 text-white font-semibold py-3 px-6 rounded-lg transition-colors flex items-center gap-2 w-full sm:w-auto justify-center","aria-label":"Back to blog",children:[c.jsx("i",{className:"fas fa-arrow-left"}),"Back to Blog"]})]})})]})]}):null},c2=({news:n,onNavigateHome:e})=>{const[s,a]=G.useState(null),o=Gy(n),l=o.find(f=>f.featured)||(o.length>0?o[0]:null),d=o.filter(f=>f.id!==l?.id);return s?c.jsx(yd,{news:s,onNavigateHome:()=>a(null)}):c.jsxs("div",{className:"bg-gray-50 min-h-screen flex flex-col",children:[c.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-40",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between h-20",children:[c.jsx("h1",{className:"text-3xl font-bold text-unistay-navy",children:"UniStay Blog"}),c.jsxs("button",{onClick:e,className:"font-semibold text-unistay-navy hover:text-unistay-yellow transition-colors flex items-center gap-2",children:[c.jsx("i",{className:"fas fa-arrow-left"}),"Back to Home"]})]})}),c.jsxs("main",{className:"flex-grow max-w-7xl mx-auto p-4 sm:p-6 lg:p-8 w-full pt-24",children:[l&&c.jsx("section",{className:`mb-12 group animate-fade-in ${l.featured?"bg-unistay-navy text-white p-8 rounded-2xl":""}`,children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-center",children:[c.jsx("div",{className:"rounded-2xl overflow-hidden shadow-lg group-hover:shadow-2xl transition-shadow duration-300",children:c.jsx(vn,{src:l.imageUrl.replace("/100/100","/600/400"),alt:l.title,className:"w-full h-full object-cover",loading:"lazy"})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("p",{className:`font-semibold ${l.featured,"text-unistay-yellow"}`,children:l.featured?"Featured Story":"Latest Article"}),l.featured&&c.jsxs("span",{className:"bg-unistay-yellow text-unistay-navy text-xs px-2 py-1 rounded-full",children:[c.jsx("i",{className:"fas fa-star mr-1"}),"Featured"]})]}),c.jsx("h2",{className:"text-4xl font-extrabold text-unistay-navy mb-4",children:l.title}),c.jsxs("div",{className:`flex items-center gap-4 text-sm ${l.featured?"text-gray-300":"text-gray-500"} mb-6`,children:[c.jsx("p",{children:l.timestamp?qn(l.timestamp):"Recently posted"}),c.jsxs("p",{children:["Source: ",l.source]})]}),c.jsxs("button",{onClick:()=>a(l),className:"mt-6 bg-unistay-navy text-white font-bold py-3 px-8 rounded-full hover:bg-opacity-90 transition-all transform hover:scale-105 flex items-center gap-2",children:["Read Full Article ",c.jsx("i",{className:"fas fa-arrow-right"})]})]})]})}),c.jsxs("section",{className:"animate-fade-in-up",style:{animationDelay:"200ms"},children:[c.jsx("h3",{className:"text-2xl font-bold text-unistay-navy mb-6 border-b pb-2",children:"Latest News"}),d.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:d.map((f,m)=>c.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden group transform hover:-translate-y-2 transition-transform duration-300 flex flex-col",style:{animation:"fade-in-up 0.5s ease-out forwards",animationDelay:`${m*100}ms`},children:[c.jsx(vn,{src:f.imageUrl.replace("/100/100","/400/300"),alt:f.title,className:"h-48 w-full object-cover",loading:"lazy"}),c.jsxs("div",{className:"p-6 flex flex-col flex-grow",children:[c.jsx("h4",{className:"text-xl font-bold text-unistay-navy flex-grow group-hover:text-unistay-yellow transition-colors",children:f.title}),c.jsxs("div",{className:"flex justify-between items-center mt-2 mb-4",children:[c.jsx("p",{className:"text-xs text-gray-400",children:f.timestamp?qn(f.timestamp):"Recently posted"}),c.jsxs("p",{className:"text-xs text-gray-400",children:["Source: ",f.source]})]}),c.jsx("div",{className:"pt-4 border-t border-gray-100 flex justify-end",children:c.jsxs("button",{onClick:()=>a(f),className:"text-sm font-semibold text-unistay-yellow hover:text-unistay-navy transition-colors flex items-center gap-1",children:["Read More ",c.jsx("i",{className:"fas fa-arrow-right"})]})})]})]},f.id))}):c.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-md",children:[c.jsx("i",{className:"fas fa-newspaper text-4xl text-gray-300 mb-4"}),c.jsx("h3",{className:"text-xl font-semibold text-unistay-navy",children:"No More News"}),c.jsx("p",{className:"text-gray-500 mt-2",children:"Check back later for more updates!"})]})]})]}),s&&c.jsx(yd,{news:s,onNavigateHome:()=>a(null)})]})},u2=({events:n,onNavigateHome:e})=>{const[s,a]=G.useState(null),[o,l]=G.useState(null),d=[...n].sort((f,m)=>{const p=f.timestamp,x=m.timestamp,b=p?new Date(p).getTime():f.date?new Date(f.date).getTime():0;return(x?new Date(x).getTime():m.date?new Date(m.date).getTime():0)-b});return c.jsxs("div",{className:"bg-gray-100 min-h-screen",children:[c.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-40",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between h-20",children:[c.jsx("h1",{className:"text-3xl font-bold text-unistay-navy",children:"Campus Events"}),c.jsxs("button",{onClick:e,className:"font-semibold text-unistay-navy hover:text-unistay-yellow transition-colors flex items-center gap-2",children:[c.jsx("i",{className:"fas fa-arrow-left"}),"Back to Home"]})]})}),c.jsx("main",{className:"max-w-7xl mx-auto p-4 sm:p-6 lg:p-8 pt-24",children:n.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:d.map((f,m)=>c.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden group transform hover:-translate-y-2 transition-transform duration-300",style:{animation:"fade-in-up 0.5s ease-out forwards",animationDelay:`${m*100}ms`},children:[c.jsxs("div",{className:"relative cursor-pointer",onClick:()=>l(f.imageUrl),children:[c.jsx(vn,{src:f.imageUrl,alt:f.title,className:"h-56 w-full object-cover group-hover:opacity-75 transition-opacity duration-300",loading:"lazy"}),c.jsxs("div",{className:"absolute top-4 left-4 bg-unistay-yellow text-unistay-navy text-center rounded-lg px-4 py-2 shadow-lg",children:[c.jsx("p",{className:"font-extrabold text-2xl",children:f.day}),c.jsx("p",{className:"font-bold text-sm leading-tight",children:f.month})]})]}),c.jsxs("div",{className:"p-5",children:[c.jsx("h3",{className:"font-bold text-xl text-unistay-navy mb-2 group-hover:text-unistay-yellow transition-colors",children:f.title}),c.jsxs("p",{className:"text-sm text-gray-600",children:[c.jsx("i",{className:"fas fa-calendar-alt text-gray-400 mr-2"}),f.date]}),c.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[c.jsx("i",{className:"fas fa-map-marker-alt text-gray-400 mr-2"}),f.location]}),c.jsx("button",{onClick:()=>a(f),className:"mt-4 w-full bg-unistay-navy text-white font-semibold py-2 rounded-lg hover:bg-opacity-80 transition-all transform hover:scale-105",children:"More Info"})]})]},f.id))}):c.jsxs("div",{className:"text-center py-16 bg-white rounded-lg shadow-md",children:[c.jsx("i",{className:"fas fa-calendar-times text-4xl text-gray-300 mb-4"}),c.jsx("h3",{className:"text-xl font-semibold text-unistay-navy",children:"No Upcoming Events"}),c.jsx("p",{className:"text-gray-500 mt-2",children:"Please check back soon for new events!"})]})}),s&&c.jsx(O0,{event:s,onClose:()=>a(null)}),o&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4",onClick:()=>l(null),children:c.jsxs("div",{className:"relative max-w-4xl max-h-[90vh] flex items-center justify-center",onClick:f=>f.stopPropagation(),children:[c.jsx("img",{src:o,alt:"Full view",className:"max-w-full max-h-[90vh] object-contain rounded-lg"}),c.jsx("button",{onClick:()=>l(null),className:"absolute top-4 right-4 bg-white rounded-full w-10 h-10 flex items-center justify-center hover:bg-gray-200 transition-colors shadow-lg",children:c.jsx("i",{className:"fas fa-times text-lg text-gray-800"})})]})})]})},d2=({job:n,onClose:e})=>(G.useEffect(()=>{const s=a=>{a.key==="Escape"&&e()};return window.addEventListener("keydown",s),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",s),document.body.style.overflow="unset"}},[e]),c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-[100] flex items-center justify-center p-4 animate-fade-in",onClick:e,children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] flex flex-col animate-slide-in-down",onClick:s=>s.stopPropagation(),children:[c.jsxs("div",{className:"p-6 border-b border-gray-200",children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-extrabold text-unistay-navy",children:n.title}),c.jsxs("p",{className:"text-gray-600 mt-1",children:[n.company,"  ",c.jsx("span",{className:"text-gray-500",children:n.location})]})]}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-unistay-navy transition-colors h-10 w-10 flex items-center justify-center rounded-full hover:bg-gray-100 flex-shrink-0 ml-4","aria-label":"Close modal",children:c.jsx("i",{className:"fas fa-times text-xl"})})]}),c.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[c.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs font-semibold px-2.5 py-1 rounded-full",children:n.type}),c.jsxs("span",{className:"bg-red-100 text-red-800 text-xs font-semibold px-2.5 py-1 rounded-full",children:["Deadline: ",n.deadline]})]})]}),c.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto no-scrollbar flex-grow",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-unistay-navy mb-2",children:"Job Description"}),c.jsx("p",{className:"text-gray-700 leading-relaxed",children:n.description})]}),n.responsibilities&&n.responsibilities.length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-unistay-navy mb-2",children:"Responsibilities"}),c.jsx("ul",{className:"list-disc list-inside space-y-1 text-gray-700",children:n.responsibilities.map((s,a)=>c.jsx("li",{children:s},a))})]}),n.qualifications&&n.qualifications.length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-unistay-navy mb-2",children:"Qualifications"}),c.jsx("ul",{className:"list-disc list-inside space-y-1 text-gray-700",children:n.qualifications.map((s,a)=>c.jsx("li",{children:s},a))})]})]}),c.jsx("div",{className:"p-6 border-t border-gray-200 bg-white",children:c.jsx("a",{href:n.howToApply,target:"_blank",rel:"noopener noreferrer",className:"w-full block text-center bg-unistay-navy hover:bg-opacity-90 text-white font-bold text-lg py-3 px-8 rounded-full transition-all duration-300 transform hover:scale-105",children:"Apply Now"})})]})})),f2=({jobs:n,onNavigateHome:e})=>{const[s,a]=G.useState(null),o=d=>{a(d)},l=()=>{a(null)};return c.jsxs("div",{className:"bg-gray-100 min-h-screen",children:[c.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-40",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between h-20",children:[c.jsx("h1",{className:"text-3xl font-bold text-unistay-navy",children:"Jobs & Internships"}),c.jsxs("button",{onClick:e,className:"font-semibold text-unistay-navy hover:text-unistay-yellow transition-colors flex items-center gap-2",children:[c.jsx("i",{className:"fas fa-arrow-left"}),"Back to Home"]})]})}),c.jsx("main",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8 pt-24",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-unistay-navy mb-6",children:"Current Opportunities"}),n.length>0?c.jsx("div",{className:"space-y-6",children:n.map((d,f)=>c.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6 p-4 border rounded-lg hover:shadow-md hover:border-unistay-yellow transition-all duration-300",style:{animation:"fade-in-up 0.5s ease-out forwards",animationDelay:`${f*100}ms`},children:[c.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0",children:c.jsx(vn,{src:d.imageUrl,alt:d.company,className:"w-16 h-16 object-contain",width:64,height:64,loading:"lazy"})}),c.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[c.jsx("p",{className:"font-bold text-lg text-unistay-navy",children:d.title}),c.jsx("p",{className:"text-md text-gray-700",children:d.company})]}),c.jsxs("div",{className:"text-center sm:text-right flex-shrink-0",children:[c.jsx("p",{className:"text-sm text-gray-500",children:"Apply by"}),c.jsx("p",{className:"font-semibold text-unistay-navy text-lg",children:d.deadline})]}),c.jsx("button",{onClick:()=>o(d),className:"w-full sm:w-auto bg-unistay-navy text-white font-semibold py-2 px-6 rounded-lg hover:bg-opacity-80 transition-all flex-shrink-0 transform hover:scale-105",children:"Details"})]},d.id))}):c.jsxs("div",{className:"text-center py-16",children:[c.jsx("i",{className:"fas fa-briefcase text-4xl text-gray-300 mb-4"}),c.jsx("h3",{className:"text-xl font-semibold text-unistay-navy",children:"No Job Openings"}),c.jsx("p",{className:"text-gray-500 mt-2",children:"New opportunities are posted regularly. Check back soon!"})]})]})}),s&&c.jsx(d2,{job:s,onClose:l})]})},ll=n=>n?{id:n.id,name:n.user_metadata?.full_name||n.email,email:n.email}:null,cl={async signUp(n,e,s,a,o,l,d,f){const{data:m,error:p}=await ee.auth.signUp({email:e,password:s,options:{data:{full_name:n}}});if(p)throw p;if(!m.user)throw new Error("Signup successful, but no user data returned.");let x=`https://picsum.photos/seed/${n.toLowerCase().replace(/\s/g,"")}/400/400`;if(f){const w=`${m.user.id}/${Date.now()}_${f.name}`,{error:_}=await ee.storage.from("profile-photos").upload(w,f,{cacheControl:"3600",upsert:!0});if(!_){const{data:N}=ee.storage.from("profile-photos").getPublicUrl(w);N.publicUrl&&(x=N.publicUrl)}}const{error:b}=await ee.from("profiles").upsert({id:m.user.id,name:n.split(" ")[0]||n,email:m.user.email,universityId:a,contactNumber:o,studentNumber:l,imageUrl:x,dateOfBirth:d},{onConflict:"id"});if(b)throw b;return ll(m.user)},async login(n,e){const{data:s,error:a}=await ee.auth.signInWithPassword({email:n,password:e});if(a)throw a;if(!s.user)throw new Error("Login successful, but no user data returned.");return ll(s.user)},async updateProfilePhoto(n,e){if(!e)throw new Error("No photo provided.");if(e.size>2*1024*1024)throw new Error("Image file is too large. Please use a file under 2MB.");const s=`${n}/${Date.now()}_${e.name}`,{error:a}=await ee.storage.from("profile-photos").upload(s,e,{upsert:!0});if(a)throw new Error("Failed to upload new photo.");const{data:o}=ee.storage.from("profile-photos").getPublicUrl(s);if(!o.publicUrl)throw new Error("Failed to get public URL for the new photo.");const l=o.publicUrl,{error:d}=await ee.from("profiles").update({imageUrl:l}).eq("id",n);if(d)throw new Error("Failed to update profile with new photo.");return l},async logout(){const{error:n}=await ee.auth.signOut();if(n)throw n}},h2=({onAuthSuccess:n,onNavigateHome:e})=>{const[s,a]=G.useState(!0),[o,l]=G.useState({name:"",email:"",password:"",confirmPassword:"",dateOfBirth:"",contactNumber:"",universityId:Rt[0]?.id||"other",studentNumber:""}),[d,f]=G.useState(null),[m,p]=G.useState(null),[x,b]=G.useState(null),[w,_]=G.useState({password:!1,confirmPassword:!1}),{notify:N}=vs(),C=U=>{l({...o,[U.target.name]:U.target.value})},E=U=>{if(U.target.files&&U.target.files[0]){const V=U.target.files[0];if(V.size>2*1024*1024){N({message:"Image file is too large. Please use a file under 2MB.",type:"error"});return}f(V),p(URL.createObjectURL(V))}},R=async U=>{if(U.preventDefault(),b("email"),s){if(!o.email||!o.password){N({message:"Please enter both email and password.",type:"error"}),b(null);return}}else{if(o.password!==o.confirmPassword){N({message:"Passwords do not match.",type:"error"}),b(null);return}if(!d){N({message:"Please upload a profile photo.",type:"error"}),b(null);return}const V=["name","email","password","confirmPassword","contactNumber","universityId","studentNumber","dateOfBirth"];for(const B of V)if(!o[B]){N({message:`Please fill out all fields. ${B.replace(/([A-Z])/g," $1")} is missing.`,type:"error"}),b(null);return}}try{s?await cl.login(o.email,o.password):await cl.signUp(o.name,o.email,o.password,o.universityId,o.contactNumber,o.studentNumber,o.dateOfBirth,d),n()}catch(V){N({message:V,type:"error"})}finally{b(null)}},A=U=>{_(V=>({...V,[U]:!V[U]}))},k=x!==null;return c.jsx("div",{className:"min-h-screen bg-gray-100 flex flex-col items-center justify-center p-4",children:c.jsxs("div",{className:"max-w-md w-full",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("a",{href:"/",onClick:U=>{U.preventDefault(),e()},className:"inline-block hover:opacity-90 transition-opacity","aria-label":"Go to homepage",children:c.jsx("img",{src:"/images/hostels/unistay.png",alt:"UniStay Logo",className:"h-12 w-auto rounded-lg shadow-sm"})}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Your partner in finding the perfect student accommodation."})]}),c.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[c.jsx("h2",{className:"text-3xl font-bold text-center text-unistay-navy mb-6",children:s?"Welcome Back!":"Create Your Account"}),c.jsxs("form",{onSubmit:R,className:"space-y-4",children:[!s&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"photo-upload",className:"block text-sm font-medium text-gray-700",children:"Profile Photo"}),c.jsxs("div",{className:"mt-1 flex items-center gap-4",children:[c.jsx("span",{className:"inline-block h-16 w-16 rounded-full overflow-hidden bg-gray-100",children:m?c.jsx("img",{src:m,alt:"Profile preview",className:"h-full w-full object-cover"}):c.jsx("svg",{className:"h-full w-full text-gray-300",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M24 20.993V24H0v-2.997A14.977 14.977 0 0112.004 15c4.904 0 9.26 2.354 11.996 5.993zM16.002 8.999a4 4 0 11-8 0 4 4 0 018 0z"})})}),c.jsxs("label",{htmlFor:"photo-upload",className:"cursor-pointer bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm leading-4 font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-unistay-yellow",children:[c.jsx("span",{children:"Upload Photo"}),c.jsx("input",{id:"photo-upload",name:"photo-upload",type:"file",className:"sr-only",accept:"image/*",onChange:E,disabled:k})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),c.jsx("input",{id:"name",name:"name",type:"text",required:!0,value:o.name,onChange:C,disabled:k,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-unistay-yellow focus:border-unistay-yellow disabled:bg-gray-50"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"contactNumber",className:"block text-sm font-medium text-gray-700",children:"Contact Number"}),c.jsx("input",{id:"contactNumber",name:"contactNumber",type:"tel",required:!0,value:o.contactNumber,onChange:C,disabled:k,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-unistay-yellow focus:border-unistay-yellow disabled:bg-gray-50"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"universityId",className:"block text-sm font-medium text-gray-700",children:"University"}),c.jsxs("select",{id:"universityId",name:"universityId",required:!0,value:o.universityId,onChange:C,disabled:k,className:"mt-1 block w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-unistay-yellow focus:border-unistay-yellow disabled:bg-gray-50",children:[Rt.map(U=>c.jsx("option",{value:U.id,children:U.name},U.id)),c.jsx("option",{value:"other",children:"Other"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"studentNumber",className:"block text-sm font-medium text-gray-700",children:"Student Number"}),c.jsx("input",{id:"studentNumber",name:"studentNumber",type:"text",required:!0,value:o.studentNumber,onChange:C,disabled:k,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-unistay-yellow focus:border-unistay-yellow disabled:bg-gray-50"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"dateOfBirth",className:"block text-sm font-medium text-gray-700",children:"Date of Birth"}),c.jsx("input",{id:"dateOfBirth",name:"dateOfBirth",type:"date",required:!0,value:o.dateOfBirth,onChange:C,disabled:k,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-unistay-yellow focus:border-unistay-yellow disabled:bg-gray-50"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),c.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:o.email,onChange:C,disabled:k,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-unistay-yellow focus:border-unistay-yellow disabled:bg-gray-50"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),c.jsxs("div",{className:"relative mt-1",children:[c.jsx("input",{id:"password",name:"password",type:w.password?"text":"password",autoComplete:s?"current-password":"new-password",required:!0,value:o.password,onChange:C,disabled:k,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-unistay-yellow focus:border-unistay-yellow disabled:bg-gray-50 pr-10"}),c.jsx("button",{type:"button",onClick:()=>A("password"),className:"absolute inset-y-0 right-0 px-3 flex items-center text-gray-400 hover:text-gray-600","aria-label":w.password?"Hide password":"Show password",children:c.jsx("i",{className:`fas ${w.password?"fa-eye-slash":"fa-eye"}`})})]})]}),!s&&c.jsxs("div",{children:[c.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),c.jsxs("div",{className:"relative mt-1",children:[c.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:w.confirmPassword?"text":"password",autoComplete:"new-password",required:!0,value:o.confirmPassword,onChange:C,disabled:k,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-unistay-yellow focus:border-unistay-yellow disabled:bg-gray-50 pr-10"}),c.jsx("button",{type:"button",onClick:()=>A("confirmPassword"),className:"absolute inset-y-0 right-0 px-3 flex items-center text-gray-400 hover:text-gray-600","aria-label":w.confirmPassword?"Hide password":"Show password",children:c.jsx("i",{className:`fas ${w.confirmPassword?"fa-eye-slash":"fa-eye"}`})})]})]}),c.jsx("div",{className:"pt-2",children:c.jsx("button",{type:"submit",disabled:k,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-full shadow-sm text-lg font-bold text-unistay-navy bg-unistay-yellow hover:bg-yellow-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 transition-all duration-300 disabled:bg-yellow-400/70 disabled:cursor-not-allowed",children:x==="email"?c.jsx(Ze,{color:"navy"}):s?"Sign In":"Create Account"})})]}),c.jsxs("p",{className:"mt-6 text-center text-sm text-gray-600",children:[s?"Don't have an account? ":"Already have an account? ",c.jsx("button",{onClick:()=>{k||a(!s)},className:"font-medium text-unistay-navy hover:text-unistay-yellow disabled:text-gray-400",disabled:k,children:s?"Sign up":"Sign in"})]})]})]})})},Dy={async compressImage(n,e=1920,s=.78){return new Promise((a,o)=>{const l=new FileReader;l.onload=d=>{const f=new Image;f.onload=()=>{let m=f.width,p=f.height;m>e&&(p=Math.round(p*e/m),m=e);const x=document.createElement("canvas");x.width=m,x.height=p;const b=x.getContext("2d");if(!b){o(new Error("Failed to get canvas context"));return}b.drawImage(f,0,0,m,p);const w=n.name.split(".").pop()?.toLowerCase()||"jpg";let _="image/jpeg",N=s;w==="png"?_="image/png":w==="webp"?_="image/webp":w==="avif"&&(_="image/avif",N=s),x.toBlob(C=>{if(!C){o(new Error("Failed to create blob from canvas"));return}if(C.size<n.size){const E=new File([C],n.name,{type:_,lastModified:Date.now()});a(E)}else a(n)},_,N)},f.onerror=()=>{o(new Error("Failed to load image"))},f.src=d.target?.result},l.onerror=()=>{o(new Error("Failed to read file"))},l.readAsDataURL(n)})},async compressMultipleImages(n,e=1920,s=.78){return Promise.all(n.map(a=>this.compressImage(a,e,s)))},getFileSizeString(n){if(n===0)return"0 Bytes";const e=1024,s=["Bytes","KB","MB"],a=Math.floor(Math.log(n)/Math.log(e));return Math.round(n/Math.pow(e,a)*100)/100+" "+s[a]},getCompressionStats(n,e){const s=n-e,a=Math.round(s/n*100);return{originalSize:this.getFileSizeString(n),compressedSize:this.getFileSizeString(e),saved:this.getFileSizeString(s),percentReduction:a}}};function Py(n){switch(n){case"news":return"news_uploads";default:return"uploads"}}function m2(n){return n==="news"?"":n}const Ht={async uploadImage(n,e,s){try{if(!n||!(n instanceof File))throw new Error("Invalid file provided");if(!n.type.startsWith("image/"))throw new Error("File must be an image");const a=5*1024*1024;if(n.size>a)throw new Error("File size must be less than 5MB");const o=n.name.split(".").pop()?.toLowerCase();if(!o||!["jpg","jpeg","png","gif","webp","avif"].includes(o))throw new Error("Invalid file type. Supported types: jpg, jpeg, png, gif, webp, avif");let l=n;try{const C=n.size;l=await Dy.compressImage(n,1920,.78);const E=l.size;if(E<C){const R=Dy.getCompressionStats(C,E)}}catch{}const d=new Date().getTime(),f=Math.random().toString(36).substring(2),m=`${d}-${f}.${o}`,p=m2(e),x=s?`${p}/${s}/${m}`:`${p}/${m}`,b=Py(e),{data:w,error:_}=await ee.storage.from(b).upload(x,l,{cacheControl:"3600",upsert:!0,contentType:l.type});if(_)throw new Error(`Failed to upload image: ${_.message}`);if(!w?.path)throw new Error("Upload succeeded but no path returned");const{data:{publicUrl:N}}=ee.storage.from(b).getPublicUrl(w.path);if(!N)throw new Error("Failed to get public URL for uploaded file");return N}catch(a){const o=a instanceof Error?a.message:"Unknown upload error";throw new Error(o)}},async uploadMultipleImages(n,e,s){const a=n.map(o=>this.uploadImage(o,e,s));return Promise.all(a)},async deleteImage(n,e){try{const s=Py(e),a=n.split("/"),o=a.indexOf(s);if(o===-1)throw new Error("Invalid storage URL format");const l=a.slice(o+1).join("/");if(!l)throw new Error("Invalid image path");if(e!=="news"&&!l.startsWith(e+"/"))throw new Error(`Image path does not match content type ${e}`);const{error:d}=await ee.storage.from(s).remove([l]);if(d)throw new Error(`Failed to delete image: ${d.message}`)}catch(s){const a=s instanceof Error?s.message:"Unknown deletion error";throw new Error(a)}}},_e=n=>c.jsx("input",{...n,className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-unistay-yellow focus:border-unistay-yellow"}),oa=n=>{const{className:e,...s}=n,a="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-unistay-yellow focus:border-unistay-yellow",o=e?`${a} ${e}`:a;return c.jsx("textarea",{...s,rows:4,className:o})},xv=n=>c.jsx("select",{...n,className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-unistay-yellow focus:border-unistay-yellow"}),vt=({children:n,onClick:e,className:s="bg-unistay-navy text-white hover:bg-opacity-90",type:a="button",disabled:o=!1,loading:l=!1})=>c.jsx("button",{type:a,onClick:e,disabled:o||l,className:`px-4 py-2 font-semibold rounded-md transition-all duration-200 disabled:bg-opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2 ${s}`,children:l?c.jsx(Ze,{color:s.includes("text-unistay-navy")?"navy":"white",size:"sm"}):n}),Oy=({icon:n,onClick:e,colorClass:s="text-gray-500 hover:text-unistay-navy",loading:a=!1})=>c.jsx("button",{onClick:e,disabled:a,className:`p-1 ${s} transition-colors disabled:text-gray-400 disabled:cursor-not-allowed w-6 h-6 flex items-center justify-center`,children:a?c.jsx(Ze,{color:"navy",size:"sm"}):c.jsx("i",{className:`fas ${n}`})}),p2=({icon:n,title:e,value:s})=>c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg flex items-center gap-6 transform hover:-translate-y-1 transition-transform duration-300",children:[c.jsx("div",{className:"bg-unistay-yellow/20 text-unistay-navy rounded-full h-16 w-16 flex items-center justify-center flex-shrink-0",children:c.jsx("i",{className:`fas ${n} text-3xl`})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-500 font-semibold",children:e}),c.jsx("p",{className:"text-4xl font-extrabold text-unistay-navy",children:s})]})]}),g2=({stats:n,isLoading:e})=>{if(e)return c.jsx("div",{className:"flex justify-center items-center h-64",children:c.jsx(Ze,{size:"lg"})});const s=[{icon:"fa-hotel",title:"Total Hostels",value:n.hostels},{icon:"fa-users",title:"Roommate Profiles",value:n.roommateProfiles},{icon:"fa-newspaper",title:"News Articles",value:n.news},{icon:"fa-calendar-alt",title:"Upcoming Events",value:n.events},{icon:"fa-briefcase",title:"Job Listings",value:n.jobs}];return c.jsxs("div",{children:[c.jsx("h2",{className:"text-3xl font-bold text-unistay-navy mb-6",children:"Dashboard Overview"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map((a,o)=>c.jsx("div",{className:"animate-fade-in-up",style:{animationDelay:`${o*100}ms`},children:c.jsx(p2,{...a})},a.title))})]})},y2=({item:n,onSubmit:e,onCancel:s,isSubmitting:a})=>{const[o,l]=G.useState({title:n?.title||"",description:n?.description||"",source:n?.source||"",featured:n?.featured||!1,images:n?.imageUrl?[{file:null,previewUrl:n.imageUrl}]:[],inlineImages:[]}),[d,f]=G.useState(!1),[m,p]=G.useState(null),x=A=>{const{name:k,value:U}=A.target;l(V=>({...V,[k]:U}))},b=A=>{const k=document.querySelector('textarea[name="description"]');if(!k){alert("Cannot find text area");return}k.focus();const U=k.selectionStart,V=k.selectionEnd,B=k.value.substring(U,V);if(!B&&A!=="break"){alert("Please select text to format");return}let H="";A==="bold"?H=`**${B}**`:A==="italic"?H=`*${B}*`:A==="break"&&(H=`

`);const W=k.value.substring(0,U)+H+k.value.substring(V);l(Y=>({...Y,description:W})),setTimeout(()=>{if(k.focus(),k.selectionStart=U+H.length,k.selectionEnd=U+H.length,A==="break"){const Y=k.style.backgroundColor;k.style.backgroundColor="#fff3cd",setTimeout(()=>{k.style.backgroundColor=Y},300)}},0)},w=A=>{(A.ctrlKey||A.metaKey)&&A.key==="Enter"?(A.preventDefault(),b("break")):(A.ctrlKey||A.metaKey)&&A.key==="b"?(A.preventDefault(),b("bold")):(A.ctrlKey||A.metaKey)&&A.key==="i"&&(A.preventDefault(),b("italic"))},_=A=>{const k=document.querySelector('textarea[name="description"]');if(!k){alert("Please focus on the article text area first");return}k.focus();const U=k.selectionStart,V=`
[IMAGE_${A}]
`,B=k.value.substring(0,U)+V+k.value.substring(U);l(H=>({...H,description:B})),p(A),setTimeout(()=>p(null),2e3),setTimeout(()=>{k.focus(),k.selectionStart=U+V.length,k.selectionEnd=U+V.length;const H=k.style.backgroundColor;k.style.backgroundColor="#d1ecf1",setTimeout(()=>{k.style.backgroundColor=H},400)},0)},N=A=>{const k=[];return A.split(/(\[IMAGE_\d+\])/).forEach((V,B)=>{if(V.match(/\[IMAGE_\d+\]/)){const H=parseInt(V.match(/\d+/)?.[0]||"0");o.inlineImages?.[H]&&k.push(c.jsx("div",{className:"my-4 flex justify-center",children:c.jsx("img",{src:o.inlineImages[H].previewUrl,alt:`Inline image ${H+1}`,className:"max-w-full h-auto rounded-lg shadow-md max-h-96"})},`inline-img-${B}`))}else V.split(`

`).filter(W=>W.trim()).forEach((W,Y)=>{if(W.trim()){let J=W.replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>").replace(/\*([^*]+)\*/g,"<em>$1</em>");k.push(c.jsx("p",{className:"mb-4",dangerouslySetInnerHTML:{__html:J}},`p-${B}-${Y}`))}})}),k.length>0?k:c.jsx("p",{className:"text-gray-400",children:"Preview will appear here..."})},C=(A,k=!1)=>{const U=A.target.files;U&&Array.from(U).forEach(V=>{const B=URL.createObjectURL(V);l(k?H=>({...H,inlineImages:[...H.inlineImages||[],{file:V,previewUrl:B}]}):H=>({...H,images:[...H.images,{file:V,previewUrl:B}]}))})},E=(A,k=!1)=>{l(k?U=>({...U,inlineImages:(U.inlineImages||[]).filter((V,B)=>B!==A)}):U=>({...U,images:U.images.filter((V,B)=>B!==A)}))},R=async A=>{if(A.preventDefault(),o.images.length===0){alert("Please upload at least one featured image");return}try{const k=o.images.filter(B=>B.file);let U=n?.imageUrl;if(k.length>0){const B=k.map(J=>J.file),H=new Date().getTime(),W=`${n?.id||H}`;if(U=(await Ht.uploadMultipleImages(B,"news",W))[0],n?.id&&n.imageUrl)try{await Ht.deleteImage(n.imageUrl,"news")}catch{}}let V=o.description;if(o.inlineImages&&o.inlineImages.length>0){const B=[];if(o.inlineImages.forEach((H,W)=>{H.file&&B.push({file:H.file,originalIndex:W})}),B.length>0){const H=B.map(X=>X.file),W=new Date().getTime(),Y=`${n?.id||W}`,J=await Ht.uploadMultipleImages(H,"news",Y),Z={};B.forEach((X,pe)=>{Z[X.originalIndex]=J[pe]}),V=V.replace(/\[IMAGE_(\d+)\]/g,(X,pe)=>{const ke=parseInt(pe),oe=Z[ke];return oe?`[INLINE_IMAGE:${oe}]`:X})}else o.inlineImages.length>0&&(V=V.replace(/\[IMAGE_(\d+)\]/g,(H,W)=>{const Y=parseInt(W),J=o.inlineImages[Y];return J?.previewUrl&&J.previewUrl.startsWith("http")?`[INLINE_IMAGE:${J.previewUrl}]`:H}))}e({...o,description:V,imageUrl:U,timestamp:new Date().toISOString(),images:void 0,inlineImages:void 0})}catch{alert("Failed to upload images. Please try again.")}};return c.jsxs("form",{onSubmit:R,className:"space-y-4 p-4 bg-gray-50 rounded-lg",children:[c.jsx(_e,{name:"title",value:o.title,onChange:x,placeholder:"Title",required:!0}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Article Content"}),c.jsxs("div",{className:"flex gap-2 items-center flex-wrap bg-white p-3 rounded border border-gray-300 shadow-sm",children:[c.jsxs("button",{type:"button",onClick:()=>b("bold"),className:"px-3 py-1 bg-unistay-yellow text-unistay-navy rounded hover:bg-yellow-400 font-bold transition-colors flex items-center gap-2",title:"Make selected text bold (Ctrl+B)",children:[c.jsx("i",{className:"fas fa-bold"})," Bold"]}),c.jsxs("button",{type:"button",onClick:()=>b("italic"),className:"px-3 py-1 bg-unistay-yellow text-unistay-navy rounded hover:bg-yellow-400 font-bold transition-colors flex items-center gap-2",title:"Make selected text italic (Ctrl+I)",children:[c.jsx("i",{className:"fas fa-italic"})," Italic"]}),c.jsx("div",{className:"border-l border-gray-300 h-6"}),c.jsxs("button",{type:"button",onClick:()=>b("break"),className:"px-3 py-1 bg-green-500 hover:bg-green-600 text-white rounded transition-colors font-semibold flex items-center gap-2",title:"Insert a new paragraph (Ctrl+Enter)",children:[c.jsx("i",{className:"fas fa-enter"})," New Paragraph"]}),c.jsxs("div",{className:"ml-auto text-xs text-gray-500 italic",children:[" Shortcuts: ",c.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"Ctrl+B"})," bold  ",c.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"Ctrl+I"})," italic  ",c.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"Ctrl+Enter"})," new paragraph"]})]}),c.jsxs("button",{type:"button",onClick:()=>f(!d),className:"text-sm text-unistay-yellow hover:text-unistay-navy transition-colors font-semibold flex items-center gap-2",children:[d?c.jsx("i",{className:"fas fa-eye text-green-500"}):c.jsx("i",{className:"fas fa-eye-slash text-gray-400"}),d?"Preview ON":"Preview OFF"]})]}),c.jsx(oa,{name:"description",value:o.description,onChange:x,onKeyDown:w,placeholder:"Write your article here... Use **text** for bold, *text* for italic. Press Ctrl+Enter for new paragraph.",required:!0,className:"!border-2 !border-gray-300 !p-3 !rounded-md !text-sm !font-mono focus:!border-unistay-yellow focus:!ring-2 focus:!ring-unistay-yellow/50"}),d&&c.jsxs("div",{className:"p-4 bg-white border border-gray-300 rounded-lg",children:[c.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Preview"}),c.jsx("div",{className:"text-gray-700 space-y-2",children:N(o.description)})]}),c.jsxs("div",{className:"space-y-4 p-4 bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-300 rounded-lg shadow-md",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("h3",{className:"font-bold text-gray-800 text-lg flex items-center gap-2",children:[c.jsx("i",{className:"fas fa-images text-blue-600"}),"Inline Images (Optional)"]}),c.jsx("span",{className:"text-xs bg-blue-600 text-white px-3 py-1 rounded-full font-semibold",children:"Click to Insert at Cursor"})]}),c.jsx("p",{className:"text-sm text-gray-700 mb-3 italic",children:" Click the cursor in your article text above, then click an image below to place it exactly where you want."}),m!==null&&c.jsxs("div",{className:"p-3 bg-green-100 border-2 border-green-400 rounded-lg text-green-800 font-semibold flex items-center gap-2 animate-pulse",children:[c.jsx("i",{className:"fas fa-check-circle"}),"Image #",m+1," inserted at cursor position! Check preview to see it."]}),c.jsx(_e,{type:"file",accept:"image/*",multiple:!0,onChange:A=>C(A,!0),className:"w-full border-2 border-blue-300 focus:border-blue-600"}),o.inlineImages&&o.inlineImages.length>0&&c.jsxs("div",{className:"space-y-3 mt-4",children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700",children:[c.jsx("i",{className:"fas fa-mouse-pointer text-blue-600"}),o.inlineImages.length," image",o.inlineImages.length!==1?"s":""," ready to insert:"]}),c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:o.inlineImages.map((A,k)=>c.jsxs("div",{className:"relative group",children:[c.jsxs("div",{onClick:()=>_(k),className:"relative h-40 overflow-hidden rounded-lg cursor-pointer shadow-lg transform transition-all hover:scale-105 hover:shadow-xl border-2 border-blue-300 hover:border-blue-600",children:[c.jsx("img",{src:A.previewUrl,alt:`Inline ${k+1}`,className:"w-full h-full object-cover transition-opacity group-hover:opacity-70"}),c.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 flex flex-col items-center justify-center transition-all gap-2",children:[c.jsxs("span",{className:"text-white font-bold text-lg bg-blue-600 px-4 py-2 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity shadow-lg flex items-center gap-2",children:[c.jsx("i",{className:"fas fa-plus"})," Insert"]}),c.jsx("span",{className:"text-white text-xs font-semibold opacity-0 group-hover:opacity-100 transition-opacity",children:"at cursor position"})]})]}),c.jsx("button",{type:"button",onClick:()=>E(k,!0),className:"absolute -top-3 -right-3 bg-red-500 text-white p-2 rounded-full shadow-lg hover:bg-red-600 transition-all hover:scale-110 border-2 border-white",title:"Remove this image",children:c.jsx("i",{className:"fas fa-trash text-xs"})}),c.jsxs("div",{className:"mt-2 text-xs font-semibold text-center text-blue-700 bg-blue-100 py-1 rounded",children:["#",k+1]})]},k))})]}),(!o.inlineImages||o.inlineImages.length===0)&&c.jsxs("div",{className:"py-8 text-center text-gray-600 border-2 border-dashed border-blue-300 rounded-lg bg-white",children:[c.jsx("i",{className:"fas fa-image text-4xl text-blue-300 mb-3 block"}),c.jsx("p",{className:"font-semibold",children:"No images uploaded yet"}),c.jsx("p",{className:"text-sm mt-1",children:"Upload images above to add them to your article"})]})]}),c.jsxs("div",{className:"space-y-4 p-4 bg-white border border-gray-300 rounded-lg",children:[c.jsxs("h3",{className:"font-semibold text-gray-700",children:[c.jsx("i",{className:"fas fa-image mr-2 text-unistay-yellow"}),"Featured Image (Required)"]}),c.jsx(_e,{type:"file",accept:"image/*",onChange:A=>C(A,!1),className:"w-full",required:o.images.length===0}),o.images.length>0&&c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:o.images.map((A,k)=>c.jsxs("div",{className:"relative group",children:[c.jsx("img",{src:A.previewUrl,alt:`Featured ${k+1}`,className:"w-full h-32 object-cover rounded-lg"}),c.jsx("button",{type:"button",onClick:()=>E(k,!1),className:"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx("i",{className:"fas fa-times"})})]},k))})]}),c.jsx(_e,{name:"source",value:o.source,onChange:x,placeholder:"Source",required:!0}),c.jsxs("div",{className:"flex items-center my-4",children:[c.jsx("input",{id:"featured",name:"featured",type:"checkbox",checked:o.featured,onChange:x,className:"h-4 w-4 text-unistay-yellow focus:ring-unistay-yellow border-gray-300 rounded"}),c.jsx("label",{htmlFor:"featured",className:"ml-2 text-sm font-medium text-gray-700",children:"Set as Featured News"})]}),c.jsxs("div",{className:"flex gap-2 justify-end",children:[c.jsx(vt,{onClick:s,className:"bg-gray-200 text-gray-800 hover:bg-gray-300",children:"Cancel"}),c.jsxs(vt,{type:"submit",loading:a,children:[n?"Update":"Add"," News"]})]})]})},v2=({item:n,onSubmit:e,onCancel:s,isSubmitting:a})=>{const o=N=>N?new Date(N).toISOString().split("T")[0]:"",[l,d]=G.useState({title:n?.title||"",dateInput:n?o(n.date):"",location:n?.location||"",price:n?.price||"Free Entry",description:n?.description||"",contacts:n?.contacts||[""],phone:n?.phone||"",email:n?.email||"",time:n?.time||"",images:n?.imageUrl?[{file:null,previewUrl:n.imageUrl}]:[]}),f=N=>{const{name:C,value:E}=N.target;d(R=>({...R,[C]:E}))},m=N=>{const C=N.target.files;C&&Array.from(C).forEach(E=>{const R=URL.createObjectURL(E);d(A=>({...A,images:[...A.images,{file:E,previewUrl:R}]}))})},p=N=>{d(C=>({...C,images:C.images.filter((E,R)=>R!==N)}))},x=async N=>{if(N.preventDefault(),l.images.length===0){alert("Please upload at least one image");return}try{const C=l.images.map(V=>V.file),E=new Date().getTime(),R=`${n?.id||E}`,A=await Ht.uploadMultipleImages(C,"events",R);if(n?.id&&n.imageUrl)try{await Ht.deleteImage(n.imageUrl,"events")}catch{}const k=new Date(`${l.dateInput}T12:00:00`),U={...l,date:k.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),day:k.toLocaleDateString("en-US",{day:"2-digit"}),month:k.toLocaleDateString("en-US",{month:"short"}).toUpperCase(),imageUrl:A[0],price:l.price||"Free Entry",description:l.description?.trim(),contacts:l.contacts?.filter(V=>V.trim()),phone:l.phone?.trim(),email:l.email?.trim(),time:l.time,images:void 0};delete U.dateInput,e(U)}catch{alert("Failed to upload images. Please try again.")}},b=()=>{d(N=>({...N,contacts:[...N.contacts||[],""]}))},w=N=>{d(C=>({...C,contacts:C.contacts?.filter((E,R)=>R!==N)||[]}))},_=(N,C)=>{const E=[...l.contacts||[]];E[N]=C,d(R=>({...R,contacts:E}))};return c.jsxs("form",{onSubmit:x,className:"space-y-4 p-4 bg-gray-50 rounded-lg",children:[c.jsx(_e,{name:"title",value:l.title,onChange:f,placeholder:"Title",required:!0}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(_e,{name:"dateInput",type:"date",value:l.dateInput,onChange:f,required:!0}),c.jsx(_e,{name:"time",type:"time",value:l.time,onChange:f,placeholder:"Time",required:!0})]}),c.jsx(_e,{name:"location",value:l.location,onChange:f,placeholder:"Location",required:!0}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c.jsxs("div",{className:"relative",children:[c.jsx(_e,{name:"price",value:l.price,onChange:f,placeholder:"Entrance Fee (e.g., 10000 or 'Free Entry')"}),c.jsx("button",{type:"button",onClick:()=>d(N=>({...N,price:"Free Entry"})),className:"absolute right-2 top-1/2 -translate-y-1/2 text-sm text-unistay-yellow hover:text-unistay-navy",children:"Set as Free"})]})}),c.jsx(oa,{name:"description",value:l.description,onChange:f,placeholder:"Event Description",required:!0}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"font-semibold text-gray-700",children:"Contact Information"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(_e,{name:"phone",value:l.phone,onChange:f,placeholder:"Contact Phone"}),c.jsx(_e,{name:"email",type:"email",value:l.email,onChange:f,placeholder:"Contact Email"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("label",{className:"text-sm text-gray-700",children:"Contact Persons"}),c.jsxs("button",{type:"button",onClick:b,className:"text-sm text-unistay-yellow hover:text-unistay-navy transition-colors",children:[c.jsx("i",{className:"fas fa-plus mr-1"}),"Add Contact"]})]}),l.contacts?.map((N,C)=>c.jsxs("div",{className:"flex gap-2",children:[c.jsx(_e,{value:N,onChange:E=>_(C,E.target.value),placeholder:"Contact Person Name"}),c.jsx("button",{type:"button",onClick:()=>w(C),className:"text-red-500 hover:text-red-700",children:c.jsx("i",{className:"fas fa-times"})})]},C))]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx(_e,{type:"file",accept:"image/*",onChange:m,className:"w-full",required:l.images.length===0}),l.images.length>0&&c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:l.images.map((N,C)=>c.jsxs("div",{className:"relative group",children:[c.jsx("img",{src:N.previewUrl,alt:`Preview ${C+1}`,className:"w-full h-32 object-cover rounded-lg"}),c.jsx("button",{type:"button",onClick:()=>p(C),className:"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx("i",{className:"fas fa-times"})})]},C))})]}),c.jsxs("div",{className:"flex gap-2 justify-end pt-4 border-t",children:[c.jsx(vt,{onClick:s,className:"bg-gray-200 text-gray-800 hover:bg-gray-300",children:"Cancel"}),c.jsxs(vt,{type:"submit",loading:a,children:[n?"Update":"Add"," Event"]})]})]})},x2=({item:n,onSubmit:e,onCancel:s,isSubmitting:a})=>{const[o,l]=G.useState({title:n?.title||"",deadline:n?.deadline||"",company:n?.company||"",images:[]}),d=x=>{l(b=>({...b,[x.target.name]:x.target.value}))},f=x=>{const b=x.target.files;b&&Array.from(b).forEach(w=>{const _=URL.createObjectURL(w);l(N=>({...N,images:[...N.images,{file:w,previewUrl:_}]}))})},m=x=>{l(b=>({...b,images:b.images.filter((w,_)=>_!==x)}))},p=async x=>{if(x.preventDefault(),o.images.length===0){alert("Please upload at least one image");return}try{const b=o.images.map(C=>C.file),w=new Date().getTime(),_=`${n?.id||w}`,N=await Ht.uploadMultipleImages(b,"jobs",_);if(n?.id&&n.imageUrl)try{const C=n.imageUrl.split("/").slice(-2).join("/");await Ht.deleteImage(C,"jobs")}catch{}e({...o,imageUrl:N[0],images:void 0})}catch{alert("Failed to upload images. Please try again.")}};return c.jsxs("form",{onSubmit:p,className:"space-y-4 p-4 bg-gray-50 rounded-lg",children:[c.jsx(_e,{name:"title",value:o.title,onChange:d,placeholder:"Title",required:!0}),c.jsx(_e,{name:"deadline",value:o.deadline,onChange:d,placeholder:"Deadline (e.g., July 15th)",required:!0}),c.jsx(_e,{name:"company",value:o.company,onChange:d,placeholder:"Company",required:!0}),c.jsxs("div",{className:"space-y-4",children:[c.jsx(_e,{type:"file",accept:"image/*",onChange:f,className:"w-full",required:o.images.length===0}),o.images.length>0&&c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:o.images.map((x,b)=>c.jsxs("div",{className:"relative group",children:[c.jsx("img",{src:x.previewUrl,alt:`Preview ${b+1}`,className:"w-full h-32 object-cover rounded-lg"}),c.jsx("button",{type:"button",onClick:()=>m(b),className:"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx("i",{className:"fas fa-times"})})]},b))})]}),c.jsxs("div",{className:"flex gap-2 justify-end",children:[c.jsx(vt,{onClick:s,className:"bg-gray-200 text-gray-800 hover:bg-gray-300",children:"Cancel"}),c.jsxs(vt,{type:"submit",loading:a,children:[n?"Update":"Add"," Job"]})]})]})},b2=({item:n,onSubmit:e,onCancel:s,isSubmitting:a})=>{const[o,l]=G.useState({title:n?.title||"",description:n?.description||"",link:n?.link||"",imageUrl:n?.imageUrl||"",imageUrls:n?.imageUrls||[],images:n?.imageUrl?[{file:null,previewUrl:n.imageUrl}]:[],active:n?.active??!0,discount:n?.discount||0}),d=x=>{const{name:b,value:w,type:_}=x.target;l(_==="checkbox"?N=>({...N,[b]:x.target.checked}):_==="number"?N=>({...N,[b]:w?parseInt(w,10):0}):N=>({...N,[b]:w}))},f=x=>{const b=x.target.files;b&&Array.from(b).forEach(w=>{const _=URL.createObjectURL(w);l(N=>({...N,images:[...N.images||[],{file:w,previewUrl:_}]}))})},m=x=>{l(b=>({...b,images:(b.images||[]).filter((w,_)=>_!==x)}))},p=async x=>{if(x.preventDefault(),(o.images||[]).length===0){alert("Please upload at least one image");return}try{const b=(o.images||[]).map(C=>C.file),w=new Date().getTime(),_=`${n?.id||w}`,N=await Ht.uploadMultipleImages(b,"news",_);if(n?.id&&n.imageUrl)try{await Ht.deleteImage(n.imageUrl,"news")}catch{}e({...o,imageUrl:N[0],imageUrls:N,timestamp:new Date().toISOString(),images:void 0})}catch{alert("Failed to upload images")}};return c.jsxs("form",{onSubmit:p,className:"space-y-4 p-4 bg-gray-50 rounded-lg",children:[c.jsx(_e,{name:"title",value:o.title,onChange:d,placeholder:"Title",required:!0}),c.jsx(oa,{name:"description",value:o.description,onChange:d,placeholder:"Short description"}),c.jsx(_e,{name:"link",value:o.link,onChange:d,placeholder:"External link (optional)"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Discount Percentage (%)"}),c.jsx(_e,{type:"number",name:"discount",min:"0",max:"100",value:o.discount||"",onChange:d,placeholder:"e.g., 20"})]})}),c.jsxs("div",{className:"space-y-4 p-4 bg-white border border-gray-300 rounded-lg",children:[c.jsxs("h3",{className:"font-semibold text-gray-700",children:[c.jsx("i",{className:"fas fa-images mr-2 text-unistay-yellow"}),"Deal Images (Multiple)"]}),c.jsx(_e,{type:"file",accept:"image/*",multiple:!0,onChange:f,className:"w-full",required:(o.images||[]).length===0}),(o.images||[]).length>0&&c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:o.images.map((x,b)=>c.jsxs("div",{className:"relative group",children:[c.jsx("img",{src:x.previewUrl,alt:`Preview ${b+1}`,className:"w-full h-32 object-cover rounded-lg"}),c.jsx("button",{type:"button",onClick:()=>m(b),className:"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx("i",{className:"fas fa-times"})}),c.jsxs("div",{className:"mt-1 text-xs text-center text-gray-600",children:["Image ",b+1]})]},b))})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{id:"active",name:"active",type:"checkbox",checked:!!o.active,onChange:d,className:"h-4 w-4 text-unistay-yellow"}),c.jsx("label",{htmlFor:"active",className:"text-sm",children:"Active"})]}),c.jsxs("div",{className:"flex gap-2 justify-end",children:[c.jsx(vt,{onClick:s,className:"bg-gray-200 text-gray-800 hover:bg-gray-300",children:"Cancel"}),c.jsxs(vt,{type:"submit",loading:a,children:[n?"Update":"Add"," Deal"]})]})]})},w2=({item:n,onSubmit:e,onCancel:s,isSubmitting:a,universities:o=[]})=>{const[l,d]=G.useState({name:n?.name||"",major:n?.major||"",bio:n?.bio||"",imageUrl:n?.imageUrl||"",gender:n?.gender||"other",universityId:n?.universityId||(o.length>0?o[0].id:"")}),[f,m]=G.useState(null),p=w=>{const{name:_,value:N}=w.target;d(C=>({...C,[_]:N}))},x=w=>{const _=w.target.files;if(!_||_.length===0)return;const N=_[0];m(N);const C=URL.createObjectURL(N);d(E=>({...E,imageUrl:C}))},b=async w=>{w.preventDefault();try{let _=l.imageUrl;f&&(_=(await Ht.uploadMultipleImages([f],"news",`${n?.id||Date.now()}`))[0]),e({...l,imageUrl:_,date:new Date().toLocaleDateString(),votes:n&&n.votes||0})}catch{alert("Failed to upload image.")}};return c.jsxs("form",{onSubmit:b,className:"space-y-4 p-4 bg-gray-50 rounded-lg",children:[c.jsx(_e,{name:"name",value:l.name,onChange:p,placeholder:"Full name",required:!0}),c.jsx(_e,{name:"major",value:l.major,onChange:p,placeholder:"Major / Course"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"University"}),c.jsxs(xv,{name:"universityId",value:l.universityId||"",onChange:p,required:!0,children:[c.jsx("option",{value:"",children:"Select a university"}),o?.map(w=>c.jsx("option",{value:w.id,children:w.name},w.id))]})]}),c.jsx(oa,{name:"bio",value:l.bio,onChange:p,placeholder:"Short bio / reason for nomination"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Gender"}),c.jsx("div",{className:"flex gap-6",children:["female","male","other"].map(w=>c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"gender",value:w,checked:l.gender===w,onChange:_=>d(N=>({...N,gender:_.target.value})),className:"h-4 w-4 text-unistay-yellow focus:ring-unistay-yellow border-gray-300"}),c.jsx("span",{className:"text-sm text-gray-700 capitalize",children:w==="female"?" Woman Crush Wednesday":w==="male"?" Man Crush Monday":"Other"})]},w))})]}),c.jsxs("div",{children:[c.jsx(_e,{type:"file",accept:"image/*",onChange:x}),l.imageUrl&&c.jsx("img",{src:l.imageUrl,alt:"preview",className:"w-32 h-32 object-cover rounded-md mt-2"})]}),c.jsxs("div",{className:"flex gap-2 justify-end",children:[c.jsx(vt,{onClick:s,className:"bg-gray-200 text-gray-800 hover:bg-gray-300",children:"Cancel"}),c.jsx(vt,{type:"submit",loading:a,children:n?"Update":"Nominate"})]})]})},_2=({item:n,onSubmit:e,onCancel:s,isSubmitting:a})=>{const[o,l]=$e.useState(n||{title:"",description:"",category:"lost",imageUrl:"",postedBy:"",phone:"",email:"",location:""}),d=m=>{if(m.preventDefault(),!o.title.trim()||!o.description.trim()||!o.postedBy.trim()||!o.phone.trim()||!o.imageUrl){alert("Please fill all required fields");return}e(o)},f=async m=>{const p=m.target.files?.[0];if(p)try{const x=await Ht.uploadMultipleImages([p],"news","lostfound");x.length>0&&l(b=>({...b,imageUrl:x[0]}))}catch{alert("Failed to upload image")}};return c.jsxs("form",{onSubmit:d,className:"space-y-4",children:[c.jsx("div",{children:c.jsx(_e,{label:"Title *",placeholder:"e.g., Blue Backpack Lost in Library",value:o.title,onChange:m=>l(p=>({...p,title:m.target.value}))})}),c.jsx("div",{children:c.jsx(oa,{label:"Description *",placeholder:"Describe the item in detail...",value:o.description,onChange:m=>l(p=>({...p,description:m.target.value})),rows:4})}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),c.jsx("div",{className:"space-y-2",children:["lost","found"].map(m=>c.jsxs("label",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"radio",name:"category",value:m,checked:o.category===m,onChange:p=>l(x=>({...x,category:p.target.value})),className:"h-4 w-4 text-unistay-yellow focus:ring-unistay-yellow border-gray-300"}),c.jsx("span",{className:"text-sm text-gray-700 capitalize",children:m==="lost"?" Lost Item":" Found Item"})]},m))})]}),c.jsx("div",{children:c.jsx(_e,{label:"Location (Optional)",placeholder:"e.g., Library, Near Gate A",value:o.location||"",onChange:m=>l(p=>({...p,location:m.target.value}))})})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx("div",{children:c.jsx(_e,{label:"Contact Name *",placeholder:"Your name",value:o.postedBy,onChange:m=>l(p=>({...p,postedBy:m.target.value}))})}),c.jsx("div",{children:c.jsx(_e,{label:"Phone Number *",placeholder:"e.g., +256 700 000000",value:o.phone,onChange:m=>l(p=>({...p,phone:m.target.value}))})})]}),c.jsx("div",{children:c.jsx(_e,{label:"Email (Optional)",type:"email",placeholder:"your.email@example.com",value:o.email||"",onChange:m=>l(p=>({...p,email:m.target.value}))})}),c.jsxs("div",{children:[c.jsx(_e,{type:"file",accept:"image/*",onChange:f}),o.imageUrl&&c.jsx("img",{src:o.imageUrl,alt:"preview",className:"w-32 h-32 object-cover rounded-md mt-2"})]}),c.jsxs("div",{className:"flex gap-2 justify-end",children:[c.jsx(vt,{onClick:s,className:"bg-gray-200 text-gray-800 hover:bg-gray-300",children:"Cancel"}),c.jsx(vt,{type:"submit",loading:a,children:n?"Update":"Post"})]})]})},S2=({item:n,onSubmit:e,onCancel:s,universities:a,isSubmitting:o})=>{const d=a.find(N=>/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(N.id))?.id||"123e4567-e89b-12d3-a456-426614174001",[f,m]=G.useState({name:n?.name||"",location:n?.location||"",priceRange:n?.priceRange||"",images:n?.images||[],rating:n?.rating||4,universityId:n?.universityId||d,description:n?.description||"",amenities:n?.amenities||[],isRecommended:n?.isRecommended||!1}),p=N=>{const C=N.target.files;C&&Array.from(C).forEach(E=>{const R=URL.createObjectURL(E);m(A=>({...A,images:[...A.images||[],{file:E,previewUrl:R}]}))})},x=N=>{m(C=>({...C,images:(C.images||[]).filter((E,R)=>R!==N)}))},b=N=>{const{name:C,value:E,type:R}=N.target,A=N.target.checked;m(k=>({...k,[C]:R==="checkbox"?A:E}))},w=N=>{const C=(f.amenities||[]).filter((E,R)=>R!==N);m(E=>({...E,amenities:C}))},_=async N=>{if(N.preventDefault(),!f.images||f.images.length===0){alert("Please upload at least one image");return}try{const C=f.images.map(U=>U.file),E=new Date().getTime(),R=`${n?.id||E}`,A=await Ht.uploadMultipleImages(C,"hostels",R);if(n?.id&&n.imageUrls){const U=new Set(n.imageUrls),V=new Set(A),B=n.imageUrls.filter(H=>!V.has(H));await Promise.all(B.map(async H=>{try{await Ht.deleteImage(H,"hostels")}catch{}}))}const k={...f,rating:f.rating,imageUrl:A[0],imageUrls:A,images:void 0};e(k)}catch{alert("Failed to upload images. Please try again.")}};return c.jsxs("form",{onSubmit:_,className:"space-y-6 p-4 bg-gray-50 rounded-lg",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(_e,{name:"name",value:f.name,onChange:b,placeholder:"Hostel Name",required:!0}),c.jsxs("div",{className:"space-y-4",children:[c.jsx(_e,{type:"file",multiple:!0,accept:"image/*",onChange:p,className:"w-full",required:(f.images?.length||0)===0}),f.images&&f.images.length>0&&c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 mt-4",children:f.images.map((N,C)=>c.jsxs("div",{className:"relative group",children:[c.jsx("img",{src:N.previewUrl,alt:`Preview ${C+1}`,className:"w-full h-32 object-cover rounded-lg"}),c.jsx("button",{type:"button",onClick:()=>x(C),className:"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx("i",{className:"fas fa-times"})})]},C))})]}),c.jsx(_e,{name:"location",value:f.location,onChange:b,placeholder:"Location",required:!0}),c.jsx(_e,{name:"priceRange",value:f.priceRange,onChange:b,placeholder:"Price Range (e.g., 800K - 1.4M)",required:!0}),c.jsx(_e,{name:"rating",type:"number",step:"0.1",min:"0",max:"5",value:f.rating,onChange:b,placeholder:"Rating",required:!0}),c.jsx(xv,{name:"universityId",value:f.universityId,onChange:b,children:a.map(N=>c.jsx("option",{value:N.id,children:N.name},N.id))})]}),c.jsx(oa,{name:"description",value:f.description,onChange:b,placeholder:"Description",required:!0}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold mb-2",children:"Amenities"}),c.jsx("div",{className:"mb-3",children:(()=>{const N=[{name:"Wifi",icon:"fas fa-wifi"},{name:"Swimming Pool",icon:"fas fa-water"},{name:"Laundry",icon:"fas fa-tshirt"},{name:"Parking",icon:"fas fa-parking"},{name:"Canteen",icon:"fa fa-shopping-bag"},{name:"Security",icon:"fas fa-shield-alt"},{name:"Restaurant",icon:"fas fa-utensils"},{name:"Study Area",icon:"fas fa-book"},{name:"TV",icon:"fas fa-tv"},{name:"Shuttle",icon:"fas fa-bus"},{name:"Girls Only",icon:"fa fa-female"},{name:"Boys Only",icon:"fa fa-male"},{name:"Mixed",icon:"fa fa-users"},{name:"Gym",icon:"fa fa-dumbbell"}],C=R=>(f.amenities||[]).some(A=>A.name===R),E=R=>{const A=f.amenities||[],k=A.findIndex(U=>U.name===R.name);if(k>=0){const U=A.filter((V,B)=>B!==k);m({...f,amenities:U})}else m({...f,amenities:[...A,{name:R.name,icon:R.icon}]})};return c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2",children:N.map(R=>c.jsxs("button",{type:"button",onClick:()=>E(R),className:`flex items-center gap-3 p-2 rounded-md border transition-colors text-sm text-gray-700 ${C(R.name)?"bg-unistay-yellow text-unistay-navy border-unistay-yellow":"bg-white hover:bg-gray-50"}`,children:[c.jsx("i",{className:`${R.icon} w-5 text-lg`}),c.jsx("span",{children:R.name})]},R.name))})})()}),c.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:(f.amenities||[]).map((N,C)=>c.jsxs("div",{className:"flex items-center gap-2 bg-white border rounded-full px-3 py-1 text-sm shadow-sm",children:[c.jsx("i",{className:`${N.icon} text-sm`}),c.jsx("span",{className:"whitespace-nowrap",children:N.name}),c.jsx("button",{type:"button",onClick:()=>w(C),className:"ml-1 text-red-500 hover:text-red-700",children:c.jsx("i",{className:"fas fa-times"})})]},`${N.name}-${C}`))}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(_e,{id:"customAmenityName",placeholder:"Custom amenity (e.g., Rooftop)"}),c.jsxs(vt,{onClick:()=>{const N=document.getElementById("customAmenityName");if(!N)return;const C=N.value.trim();C&&(m({...f,amenities:[...f.amenities||[],{name:C,icon:"fas fa-check"}]}),N.value="")},className:"bg-unistay-yellow text-unistay-navy hover:bg-yellow-400",children:[c.jsx("i",{className:"fas fa-plus mr-2"}),"Add Amenity"]})]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{id:"isRecommended",name:"isRecommended",type:"checkbox",checked:f.isRecommended,onChange:b,className:"h-4 w-4 text-unistay-yellow focus:ring-unistay-yellow border-gray-300 rounded"}),c.jsx("label",{htmlFor:"isRecommended",className:"ml-2 text-sm font-medium text-gray-700",children:"Mark as Recommended"})]}),c.jsxs("div",{className:"flex gap-2 justify-end pt-4 border-t",children:[c.jsx(vt,{onClick:s,className:"bg-gray-200 text-gray-800 hover:bg-gray-300",children:"Cancel"}),c.jsxs(vt,{type:"submit",loading:o,children:[n?"Update":"Add"," Hostel"]})]})]})},N2=({item:n,onCancel:e,isSubmitting:s=!1})=>{if(!n)return c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-gray-500",children:"Select a message to view details"})});const a=o=>{try{return new Date(o).toLocaleString()}catch{return o}};return c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:c.jsxs("p",{className:"text-sm text-blue-700",children:[c.jsx("strong",{children:"Note:"})," Contact messages are read-only. Use the delete button to remove messages."]})}),c.jsxs("div",{className:"flex items-center gap-4 bg-white p-4 rounded-lg shadow-sm",children:[c.jsx("div",{className:"h-12 w-12 rounded-full bg-unistay-navy text-white flex items-center justify-center font-bold text-lg",children:n.name?n.name.split(" ").map(o=>o[0]).slice(0,2).join(""):"U"}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-lg font-semibold text-unistay-navy",children:n.name}),c.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${n.read?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:n.read?" Read":" Unread"})]}),c.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[c.jsx("a",{href:`mailto:${n.email}`,className:"hover:underline",children:n.email}),c.jsx("span",{className:"mx-2",children:""}),c.jsx("a",{href:`tel:${n.phone}`,className:"hover:underline",children:n.phone})]})]})]}),c.jsx("div",{className:"flex flex-col gap-4",children:c.jsxs("div",{className:"max-w-3xl",children:[c.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"Subject"}),c.jsx("div",{className:"mb-4 text-base font-medium text-unistay-navy",children:n.subject}),c.jsx("div",{className:"flex",children:c.jsx("div",{className:"rounded-lg bg-gray-100 p-4 shadow-sm max-w-3xl text-gray-800",children:c.jsx("p",{className:"whitespace-pre-wrap",children:n.message})})}),c.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Submitted: ",a(n.timestamp)]})]})}),c.jsx("div",{className:"flex gap-2 justify-end pt-4 border-t",children:c.jsx(vt,{onClick:e,className:"bg-gray-200 text-gray-800 hover:bg-gray-300",children:"Close"})})]})};function C2({title:n,items:e,handler:s,columns:a,FormComponent:o,universities:l=[],onDataChange:d}){const[f,m]=G.useState(null),[p,x]=G.useState(!1),[b,w]=G.useState(!1),[_,N]=G.useState(null),[C,E]=G.useState(0),[R,A]=G.useState(""),{notify:k}=vs(),U=n==="Manage Hostels"?10:e.length,V=n==="Manage Hostels"?e.filter(oe=>oe.name?.toLowerCase().includes(R.toLowerCase())||oe.location?.toLowerCase().includes(R.toLowerCase())):e,B=Math.ceil(V.length/U),H=V.slice(C*U,(C+1)*U),W=oe=>{m(oe),x(!1)},Y=async oe=>{if(window.confirm("Are you sure you want to delete this item?")){N(oe);try{await s.remove(oe),k({message:"Item deleted successfully!",type:"success"}),d()}catch(D){k({message:D,type:"error"})}finally{N(null)}}},J=()=>{m(null),x(!0)},Z=()=>{m(null),x(!1)},X=oe=>{A(oe.target.value),E(0)},ke={onSubmit:async oe=>{w(!0);try{oe.id?(await s.update(oe.id,oe),k({message:"Item updated successfully!",type:"success"})):(await s.add(oe),k({message:"Item added successfully!",type:"success"})),d(),Z()}catch(D){k({message:D,type:"error"})}finally{w(!1)}},onCancel:Z,item:f,isSubmitting:b,...l.length>0&&{universities:l}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-unistay-navy",children:n}),c.jsxs(vt,{onClick:J,className:"bg-unistay-yellow text-unistay-navy hover:bg-yellow-400",disabled:b||_!==null,children:[c.jsx("i",{className:"fas fa-plus mr-2"}),"Add New"]})]}),n==="Manage Hostels"&&c.jsxs("div",{className:"bg-white shadow rounded-lg p-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("i",{className:"fas fa-search text-gray-400 text-lg"}),c.jsx("input",{type:"text",placeholder:"Search by hostel name or location...",value:R,onChange:X,className:"flex-1 p-2 border border-gray-300 rounded-md focus:ring-unistay-yellow focus:border-unistay-yellow outline-none"}),R&&c.jsx("button",{onClick:()=>A(""),className:"px-3 py-2 text-gray-500 hover:text-gray-700 transition-colors",children:c.jsx("i",{className:"fas fa-times"})})]}),R&&c.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:["Found ",V.length," hostel",V.length!==1?"s":""]})]}),(p||f)&&c.jsx(o,{...ke}),n==="Manage Hostels"&&R&&V.length===0&&c.jsxs("div",{className:"bg-white shadow rounded-lg p-8 text-center",children:[c.jsx("i",{className:"fas fa-search text-4xl text-gray-300 mb-4"}),c.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No hostels found"}),c.jsx("p",{className:"text-gray-500",children:"No hostels match your search query. Try different keywords."})]}),H.length>0&&c.jsx("div",{className:"bg-white shadow rounded-lg overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{className:"bg-gray-50 border-b",children:c.jsxs("tr",{children:[a.map(oe=>c.jsx("th",{className:"p-4 font-semibold text-sm",children:oe.header},oe.header)),c.jsx("th",{className:"p-4 font-semibold text-sm text-right",children:"Actions"})]})}),c.jsx("tbody",{children:H.map(oe=>c.jsxs("tr",{onClick:()=>W(oe),className:"border-b last:border-b-0 hover:bg-gray-50 cursor-pointer",children:[a.map(D=>c.jsx("td",{className:"p-4 text-sm text-gray-700 align-top",children:typeof oe[D.accessor]=="boolean"?oe[D.accessor]?c.jsx("span",{className:"flex items-center justify-center",children:c.jsx("i",{className:"fas fa-star text-unistay-yellow"})}):c.jsx("span",{className:"flex items-center justify-center",children:c.jsx("i",{className:"fas fa-minus text-gray-300"})}):D.accessor==="discount"&&oe[D.accessor]?`${oe[D.accessor]}% OFF`:oe[D.accessor]},D.accessor)),c.jsx("td",{className:"p-4 text-right",children:c.jsxs("div",{className:"flex gap-3 justify-end",children:[c.jsx(Oy,{icon:"fa-pencil-alt",onClick:D=>{D.stopPropagation(),W(oe)}}),c.jsx(Oy,{icon:"fa-trash",onClick:D=>{D.stopPropagation(),Y(oe.id)},colorClass:"text-red-500 hover:text-red-700",loading:_===oe.id})]})})]},oe.id))})]})}),n==="Manage Hostels"&&B>1&&c.jsxs("div",{className:"flex items-center justify-center gap-4 mt-6",children:[c.jsxs("button",{onClick:()=>E(Math.max(0,C-1)),disabled:C===0,className:"px-4 py-2 bg-unistay-navy text-white rounded-lg hover:bg-opacity-90 disabled:bg-gray-300 disabled:cursor-not-allowed transition-all flex items-center gap-2",children:[c.jsx("i",{className:"fas fa-chevron-left"}),"Previous"]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("span",{className:"text-sm font-semibold text-gray-700",children:["Page ",c.jsx("span",{className:"text-unistay-navy",children:C+1})," of ",c.jsx("span",{className:"text-unistay-navy",children:B})]}),c.jsxs("span",{className:"text-sm text-gray-500",children:["(Showing ",H.length," of ",V.length," item",V.length!==1?"s":"",")"]})]}),c.jsxs("button",{onClick:()=>E(Math.min(B-1,C+1)),disabled:C===B-1,className:"px-4 py-2 bg-unistay-navy text-white rounded-lg hover:bg-opacity-90 disabled:bg-gray-300 disabled:cursor-not-allowed transition-all flex items-center gap-2",children:["Next",c.jsx("i",{className:"fas fa-chevron-right"})]})]})]})}const T2=({items:n=[],handler:e,onDataChange:s})=>{const[a,o]=$e.useState(null),{notify:l}=vs(),d=async(m,p)=>{o(m);try{await e.approve(m,p),l("Confession approved!","success"),s?.()}catch{l("Failed to approve confession","error")}finally{o(null)}},f=async m=>{o(m);try{await e.reject(m),l("Confession rejected","success"),s?.()}catch{l("Failed to reject confession","error")}finally{o(null)}};return n.length===0?c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[c.jsx("i",{className:"fas fa-check-circle text-6xl text-green-500 mb-4"}),c.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"All Clear!"}),c.jsx("p",{className:"text-gray-600",children:"No pending confessions to moderate."})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:["Pending Confessions (",n.length,")"]}),n.map(m=>c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-purple-500",children:[c.jsxs("div",{className:"mb-4",children:[c.jsx("p",{className:"text-gray-800 italic text-lg mb-3",children:m.content}),c.jsx("div",{className:"flex items-center justify-between text-sm text-gray-500",children:c.jsxs("span",{children:[c.jsx("i",{className:"fas fa-clock mr-2"}),new Date(m.timestamp).toLocaleString()]})})]}),c.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[c.jsxs("button",{onClick:()=>d(m.id,"admin@unistay.com"),disabled:a===m.id,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2 font-semibold",children:[a===m.id?c.jsx(Ze,{color:"white",size:"sm"}):c.jsx("i",{className:"fas fa-check"}),"Approve"]}),c.jsxs("button",{onClick:()=>f(m.id),disabled:a===m.id,className:"flex-1 bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2 font-semibold",children:[a===m.id?c.jsx(Ze,{color:"white",size:"sm"}):c.jsx("i",{className:"fas fa-times"}),"Reject"]})]})]},m.id))]})},E2=({onExitAdminMode:n,content:e,onDataChange:s})=>{const[a,o]=G.useState("Dashboard"),[l,d]=G.useState({hostels:0,news:0,events:0,jobs:0,roommateProfiles:0}),[f,m]=G.useState(!0);G.useEffect(()=>{(async()=>{if(a==="Dashboard"){m(!0);try{const[_,N,C,E,R]=await Promise.all([Ad.getCounts(),kd.getCounts(),jd.getCounts(),Rd.getCounts(),Xr.getCounts()]);d({hostels:_,news:N,events:C,jobs:E,roommateProfiles:R})}catch{d({hostels:0,news:0,events:0,jobs:0,roommateProfiles:0})}finally{m(!1)}}})()},[a]);const p={Hostels:{title:"Manage Hostels",items:[...e.hostels.items].reverse(),handler:e.hostels.handler,columns:[{header:"Name",accessor:"name"},{header:"University",accessor:"universityId"},{header:"Price Range",accessor:"priceRange"},{header:"Recommended",accessor:"isRecommended"}],FormComponent:S2,universities:e.hostels.universities},News:{title:"Manage News",items:[...e.news.items].sort((w,_)=>new Date(_.timestamp||0).getTime()-new Date(w.timestamp||0).getTime()),handler:e.news.handler,columns:[{header:"Title",accessor:"title"},{header:"Source",accessor:"source"},{header:"Featured",accessor:"featured"}],FormComponent:y2},Events:{title:"Manage Events",items:[...e.events.items].sort((w,_)=>{const N=new Date(w.date||0).getTime();return new Date(_.date||0).getTime()-N}),handler:e.events.handler,columns:[{header:"Title",accessor:"title"},{header:"Date",accessor:"date"},{header:"Location",accessor:"location"}],FormComponent:v2},Jobs:{title:"Manage Jobs",items:e.jobs.items,handler:e.jobs.handler,columns:[{header:"Title",accessor:"title"},{header:"Company",accessor:"company"},{header:"Deadline",accessor:"deadline"}],FormComponent:x2},Deals:{title:"Manage Student Deals",items:e.studentDeals?.items||[],handler:e.studentDeals?.handler,columns:[{header:"Title",accessor:"title"},{header:"Discount",accessor:"discount"},{header:"Active",accessor:"active"},{header:"Link",accessor:"link"}],FormComponent:b2,universities:e.hostels.universities},Spotlights:{title:"Manage Student Spotlights",items:[...e.spotlights?.items||[]].sort((w,_)=>new Date(_.date||0).getTime()-new Date(w.date||0).getTime()),handler:e.spotlights?.handler,columns:[{header:"Name",accessor:"name"},{header:"Major",accessor:"major"},{header:"University",accessor:"universityId"},{header:"Gender",accessor:"gender"},{header:"Votes",accessor:"votes"}],FormComponent:w2,universities:e.hostels.universities},LostFound:{title:"Manage Lost & Found",items:e.lostFound?.items||[],handler:e.lostFound?.handler,columns:[{header:"Title",accessor:"title"},{header:"Category",accessor:"category"},{header:"Posted By",accessor:"postedBy"},{header:"Phone",accessor:"phone"},{header:"Date",accessor:"timestamp"}],FormComponent:_2},ContactMessages:{title:"Contact Form Submissions",items:e.contactMessages?.items||[],handler:e.contactMessages?.handler,columns:[{header:"Name",accessor:"name"},{header:"Email",accessor:"email"},{header:"Subject",accessor:"subject"},{header:"Status",accessor:"read"},{header:"Date",accessor:"timestamp"}],FormComponent:N2},Confessions:{title:"Moderate Confessions",items:e.pendingConfessions?.items||[],handler:e.pendingConfessions?.handler,columns:[{header:"Content",accessor:"content"},{header:"Submitted",accessor:"timestamp"},{header:"Actions",accessor:"actions"}],FormComponent:null,isPendingView:!0}},x={Dashboard:"fa-tachometer-alt",Hostels:"fa-hotel",News:"fa-newspaper",Events:"fa-calendar-alt",Jobs:"fa-briefcase",Deals:"fa-tags",Spotlights:"fa-star",LostFound:"fa-search",ContactMessages:"fa-envelope",Confessions:"fa-user-secret"},b=["Dashboard","Hostels","News","Events","Jobs","Deals","Spotlights","LostFound","ContactMessages","Confessions"];return c.jsxs("div",{className:"flex min-h-screen bg-gray-100",children:[c.jsxs("aside",{className:"w-16 md:w-64 bg-unistay-navy text-white flex flex-col p-3 md:p-4",children:[c.jsxs("div",{className:"text-center py-3 mb-6",children:[c.jsx("i",{className:"fas fa-user-shield text-xl md:hidden","aria-hidden":"true"}),c.jsx("h1",{className:"hidden md:block text-3xl font-extrabold",children:"Admin"})]}),c.jsx("nav",{className:"flex-grow",children:b.map(w=>c.jsxs("button",{onClick:()=>o(w),className:`w-full text-left py-3 my-1 rounded-lg transition-colors flex items-center gap-3 px-2 md:px-4 justify-center md:justify-start ${a===w?"bg-unistay-yellow text-unistay-navy font-bold":"hover:bg-white/10"}`,children:[c.jsx("i",{className:`fas ${x[w]} w-5 text-center`}),c.jsx("span",{className:"hidden md:inline",children:w})]},w))}),c.jsx("div",{className:"pt-4 border-t border-white/20",children:c.jsxs("button",{onClick:n,className:"w-full text-left py-3 my-1 rounded-lg transition-colors flex items-center gap-3 px-2 md:px-4 justify-center md:justify-start hover:bg-white/10",children:[c.jsx("i",{className:"fas fa-arrow-left w-5 text-center"}),c.jsx("span",{className:"hidden md:inline",children:"Back to Site"})]})})]}),c.jsx("main",{className:"flex-1 p-8 overflow-y-auto",children:a==="Dashboard"?c.jsx(g2,{stats:l,isLoading:f}):a==="Confessions"?c.jsx(T2,{items:p[a].items,handler:p[a].handler,onDataChange:s}):c.jsx(C2,{...p[a],onDataChange:s})})]})},A2=({userId:n,allProfiles:e,universities:s,onRequestHandled:a})=>{const[o,l]=G.useState([]),[d,f]=G.useState(!0),[m,p]=G.useState(null),{notify:x}=vs();G.useEffect(()=>{b()},[n]);const b=async()=>{f(!0);try{const E=await co.getReceivedRequests(n);l(E)}catch(E){E?.message?.includes("connection_requests")||E?.message?.includes("relation")?l([]):x({message:"Failed to load connection requests",type:"error"})}finally{f(!1)}},w=async(E,R)=>{p(E);try{await co.acceptRequest(E,R,n),x({message:"Connection request accepted! You are now roomies!",type:"success"}),l(A=>A.filter(k=>k.id!==E)),a?.()}catch{x({message:"Failed to accept connection request",type:"error"})}finally{p(null)}},_=async E=>{p(E);try{await co.rejectRequest(E),x({message:"Connection request declined",type:"success"}),l(R=>R.filter(A=>A.id!==E)),a?.()}catch{x({message:"Failed to decline connection request",type:"error"})}finally{p(null)}},N=E=>e.find(R=>R.id===E),C=E=>{if(!E)return"Unknown";const R=s.find(A=>A.id===E);return R?R.name:"Unknown"};return d?c.jsx("div",{className:"flex justify-center py-8",children:c.jsx(Ze,{size:"md"})}):o.length===0?c.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[c.jsx("i",{className:"fas fa-heart text-4xl text-gray-300 mb-3"}),c.jsx("p",{className:"text-gray-600 font-semibold",children:"No connection requests yet"}),c.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"When someone sends you a roommate request, it will appear here"})]}):c.jsx("div",{className:"space-y-4",children:o.map(E=>{const R=N(E.senderId);return R?c.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 border-l-4 border-unistay-yellow hover:shadow-xl transition-shadow",children:c.jsxs("div",{className:"flex flex-col sm:flex-row gap-6",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx(vn,{src:R.imageUrl||`https://picsum.photos/seed/${R.name.toLowerCase()}/100/100`,alt:R.name,className:"h-24 w-24 rounded-full object-cover shadow-md",loading:"lazy"})}),c.jsxs("div",{className:"flex-grow",children:[c.jsxs("div",{className:"mb-3",children:[c.jsxs("h3",{className:"text-xl font-bold text-unistay-navy",children:[R.name,", ",R.age]}),c.jsx("p",{className:"text-sm text-gray-600",children:C(R.universityId)})]}),c.jsxs("p",{className:"text-gray-700 font-semibold mb-2",children:[R.course,"  Year ",R.yearOfStudy]}),R.bio&&c.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:R.bio}),c.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 mb-3",children:[c.jsxs("div",{className:"bg-gray-50 rounded p-2",children:[c.jsx("p",{className:"text-gray-500 text-xs",children:"Budget"}),c.jsxs("p",{className:"font-semibold text-unistay-navy text-sm",children:["UGX ",(R.budget||0).toLocaleString()]})]}),c.jsxs("div",{className:"bg-gray-50 rounded p-2",children:[c.jsx("p",{className:"text-gray-500 text-xs",children:"Schedule"}),c.jsx("p",{className:"font-semibold text-unistay-navy text-sm",children:R.studySchedule})]}),c.jsxs("div",{className:"bg-gray-50 rounded p-2",children:[c.jsx("p",{className:"text-gray-500 text-xs",children:"Cleanliness"}),c.jsx("p",{className:"font-semibold text-unistay-navy text-sm",children:R.cleanliness})]}),c.jsxs("div",{className:"bg-gray-50 rounded p-2",children:[c.jsx("p",{className:"text-gray-500 text-xs",children:"Lease"}),c.jsx("p",{className:"font-semibold text-unistay-navy text-sm",children:R.leaseDuration})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[R.isSmoker?c.jsx("span",{className:"bg-red-100 text-red-700 text-xs font-semibold px-2.5 py-1 rounded-full",children:"Smoker"}):c.jsx("span",{className:"bg-green-100 text-green-700 text-xs font-semibold px-2.5 py-1 rounded-full",children:"Non-Smoker"}),c.jsx("span",{className:"bg-blue-100 text-blue-700 text-xs font-semibold px-2.5 py-1 rounded-full",children:R.drinksAlcohol}),c.jsx("span",{className:"bg-purple-100 text-purple-700 text-xs font-semibold px-2.5 py-1 rounded-full",children:R.guestFrequency})]}),c.jsxs("p",{className:"text-xs text-gray-500 mb-4",children:["Requested on ",new Date(E.createdAt).toLocaleDateString()]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>w(E.id,E.senderId),disabled:m===E.id,className:"flex-1 bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:m===E.id?c.jsxs(c.Fragment,{children:[c.jsx(Ze,{color:"white",size:"sm"}),"Processing..."]}):c.jsxs(c.Fragment,{children:[c.jsx("i",{className:"fas fa-check"}),"Accept"]})}),c.jsx("button",{onClick:()=>_(E.id),disabled:m===E.id,className:"flex-1 bg-red-200 hover:bg-red-300 text-red-700 font-bold py-2 px-4 rounded-lg transition-colors disabled:bg-gray-300 disabled:text-gray-600 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:m===E.id?c.jsxs(c.Fragment,{children:[c.jsx(Ze,{color:"red",size:"sm"}),"Processing..."]}):c.jsxs(c.Fragment,{children:[c.jsx("i",{className:"fas fa-times"}),"Decline"]})})]})]})]})},E.id):null})})},Qr=({icon:n,label:e,value:s})=>c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 flex items-center gap-4",children:[c.jsx("div",{className:"bg-unistay-yellow/20 text-unistay-navy rounded-full h-12 w-12 flex items-center justify-center flex-shrink-0",children:c.jsx("i",{className:`fas ${n} text-xl`})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-500",children:e}),c.jsx("p",{className:"text-lg font-bold text-unistay-navy truncate",children:s})]})]}),k2=({user:n,savedHostels:e,onSignOut:s,onToggleSaveHostel:a,profile:o,universities:l,onNavigate:d,onDataChange:f,confessions:m=[],confessionHandler:p,allProfiles:x=[]})=>{const[b,w]=G.useState(!1),[_,N]=G.useState(""),[C,E]=G.useState(!1),R=G.useRef(null),{notify:A}=vs(),k=H=>{if(!H)return"Not Set";const W=l.find(Y=>Y.id===H);return W?W.name:"Unknown University"},U=()=>{R.current?.click()},V=async H=>{const W=H.target.files?.[0];if(!(!W||!n)){w(!0);try{await cl.updateProfilePhoto(n.id,W),A({message:"Profile photo updated successfully!",type:"success"}),f()}catch(Y){A({message:Y,type:"error"})}finally{w(!1),R.current&&(R.current.value="")}}},B=async H=>{if(H.preventDefault(),!(!_.trim()||!p)){E(!0);try{await p.add(_.trim()),N(""),A({message:"Your confession has been posted anonymously!",type:"success"})}catch{A({message:"Failed to post confession",type:"error"})}finally{E(!1)}}};return c.jsxs("div",{className:"bg-gray-100 min-h-screen",children:[c.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-40",children:c.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between h-20",children:[c.jsx("h1",{className:"text-3xl font-bold text-unistay-navy",children:"My Profile"}),c.jsxs("button",{onClick:()=>d("main"),className:"font-semibold text-unistay-navy hover:text-unistay-yellow transition-colors flex items-center gap-2",children:[c.jsx("i",{className:"fas fa-arrow-left"}),"Back to Home"]})]})}),c.jsxs("main",{className:"max-w-5xl mx-auto p-4 sm:p-6 lg:p-8 pt-8",children:[c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 animate-fade-in-up",children:[c.jsxs("div",{className:"lg:col-span-1 space-y-8",children:[c.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 text-center",children:[c.jsx("input",{type:"file",ref:R,onChange:V,className:"hidden",accept:"image/png, image/jpeg",disabled:b}),c.jsxs("div",{className:"relative w-32 h-32 mx-auto mb-4 group",children:[c.jsx("button",{onClick:U,disabled:b,className:"w-full h-full rounded-full bg-unistay-yellow flex items-center justify-center font-bold text-unistay-navy text-5xl disabled:cursor-not-allowed","aria-label":"Change profile photo",children:o?.imageUrl?c.jsx("img",{src:o.imageUrl,alt:n.name||"",className:"w-full h-full rounded-full object-cover"}):n.name?.charAt(0).toUpperCase()}),b?c.jsx("div",{className:"absolute inset-0 bg-black/60 rounded-full flex items-center justify-center",children:c.jsx(Ze,{color:"white",size:"lg"})}):c.jsx("div",{className:"absolute inset-0 bg-black/60 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",onClick:U,children:c.jsx("i",{className:"fas fa-camera text-white text-3xl"})})]}),c.jsx("h2",{className:"text-2xl font-bold text-unistay-navy",children:n.name}),c.jsx("p",{className:"text-gray-500",children:n.email}),o?c.jsxs("div",{className:"mt-6 space-y-3",children:[c.jsxs("button",{onClick:()=>d("roommateMatch"),className:"w-full bg-unistay-yellow text-unistay-navy font-bold py-2 px-6 rounded-full hover:bg-yellow-400 transition-colors flex items-center justify-center gap-2",children:[c.jsx("i",{className:"fas fa-users"}),"Find a Roommate"]}),c.jsxs("button",{onClick:()=>d("roommateFinder"),className:"w-full bg-gray-200 text-unistay-navy font-bold py-2 px-6 rounded-full hover:bg-gray-300 transition-colors flex items-center justify-center gap-2",children:[c.jsx("i",{className:"fas fa-edit"}),"Edit Profile"]})]}):c.jsx("button",{onClick:()=>d("roommateFinder"),className:"mt-6 w-full bg-unistay-navy text-white font-bold py-2 px-6 rounded-full hover:bg-opacity-90 transition-colors",children:"Create Roommate Profile"})]}),c.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[c.jsx("h3",{className:"text-xl font-bold text-unistay-navy mb-4",children:"Account"}),c.jsxs("button",{onClick:s,className:"w-full text-left px-4 py-3 text-red-600 hover:bg-red-50 rounded-lg transition-colors flex items-center gap-3",children:[c.jsx("i",{className:"fas fa-sign-out-alt w-5"}),"Logout"]})]})]}),c.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[c.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[c.jsx("h3",{className:"text-xl font-bold text-unistay-navy mb-4",children:"My Student Details"}),o?c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsx(Qr,{icon:"fa-university",label:"University",value:k(o?.universityId)}),c.jsx(Qr,{icon:"fa-book",label:"Course",value:o.course||"Not Set"}),c.jsx(Qr,{icon:"fa-calendar-day",label:"Year of Study",value:o.yearOfStudy?.toString()||"Not Set"}),c.jsx(Qr,{icon:"fa-wallet",label:"Budget",value:`UGX ${o.budget?.toLocaleString()||"0"}`})]}):c.jsxs("div",{className:"text-center py-8",children:[c.jsx("i",{className:"fas fa-user-graduate text-4xl text-gray-300 mb-4"}),c.jsx("p",{className:"text-gray-600",children:"You haven't created a roommate profile yet."}),c.jsx("button",{onClick:()=>d("roommateFinder"),className:"mt-4 font-bold text-unistay-navy hover:text-unistay-yellow",children:"Create one now to find matches!"})]})]}),c.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[c.jsx("h3",{className:"text-xl font-bold text-unistay-navy mb-4",children:"Quick Links"}),c.jsxs("div",{className:"space-y-3",children:[o&&c.jsxs("button",{onClick:()=>d("roommateMatch"),className:"flex items-center justify-between w-full p-4 rounded-lg hover:bg-unistay-yellow/10 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("i",{className:"fas fa-heart text-unistay-navy"}),c.jsx("span",{className:"font-semibold",children:"Find a Roommate"})]}),c.jsx("i",{className:"fas fa-chevron-right text-gray-400"})]}),c.jsxs("button",{onClick:()=>d("roommateFinder"),className:"flex items-center justify-between w-full p-4 rounded-lg hover:bg-unistay-yellow/10 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("i",{className:"fas fa-users text-unistay-navy"}),c.jsx("span",{className:"font-semibold",children:o?"Edit Roommate Profile":"Create Roommate Profile"})]}),c.jsx("i",{className:"fas fa-chevron-right text-gray-400"})]}),e.length>0?c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"flex items-center justify-between px-4",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("i",{className:"fas fa-heart text-unistay-navy"}),c.jsxs("span",{className:"font-semibold",children:["Saved Hostels (",e.length,")"]})]})}),c.jsx("div",{className:"space-y-2 px-4",children:e.map(H=>c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border hover:bg-gray-50",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-unistay-navy",children:H.name}),c.jsx("p",{className:"text-sm text-gray-600",children:H.priceRange})]}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("button",{onClick:()=>a(H.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-full",title:"Remove from saved",children:c.jsx("i",{className:"fas fa-heart"})})})]},H.id))})]}):c.jsx("div",{className:"flex items-center justify-between w-full p-4 rounded-lg hover:bg-gray-50 transition-colors",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("i",{className:"far fa-heart text-unistay-navy"}),c.jsx("span",{className:"font-semibold",children:"No Saved Hostels"})]})}),c.jsxs("button",{className:"flex items-center justify-between w-full p-4 rounded-lg hover:bg-gray-50 transition-colors cursor-not-allowed opacity-60",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("i",{className:"fas fa-file-alt text-unistay-navy"}),c.jsx("span",{className:"font-semibold",children:"My Job Applications"})]}),c.jsx("i",{className:"fas fa-chevron-right text-gray-400"})]})]})]})]})]}),o&&c.jsx("div",{className:"mt-8 space-y-8",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[c.jsx("div",{className:"flex items-center justify-between mb-6",children:c.jsxs("h3",{className:"text-xl font-bold text-unistay-navy flex items-center gap-2",children:[c.jsx("i",{className:"fas fa-heart text-red-500"}),"Roommate Connection Requests"]})}),c.jsx(A2,{userId:n.id,allProfiles:x,universities:l,onRequestHandled:f})]})}),c.jsxs("div",{className:"mt-8 space-y-8",children:[c.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[c.jsx("h3",{className:"text-xl font-bold text-unistay-navy mb-4",children:" Share an Anonymous Confession"}),c.jsxs("form",{onSubmit:B,className:"space-y-4",children:[c.jsx("textarea",{value:_,onChange:H=>N(H.target.value),placeholder:"Share your thoughts anonymously... Keep it positive and respectful! You can use emojis ",maxLength:250,rows:4,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-unistay-yellow focus:border-transparent resize-none font-sans",disabled:C}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("span",{className:"text-xs text-gray-500",children:[_.length,"/250 characters"]}),c.jsx("button",{type:"submit",disabled:!_.trim()||C,className:"bg-unistay-navy text-white font-bold py-2 px-6 rounded-lg hover:bg-opacity-90 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center gap-2",children:C?c.jsxs(c.Fragment,{children:[c.jsx(Ze,{color:"white",size:"sm"}),"Posting..."]}):c.jsxs(c.Fragment,{children:[c.jsx("i",{className:"fas fa-paper-plane"}),"Post Confession"]})})]})]})]}),m.length>0&&c.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[c.jsx("h3",{className:"text-xl font-bold text-unistay-navy mb-4",children:"Recent Confessions"}),c.jsx("div",{className:"space-y-4",children:m.slice(0,5).map(H=>c.jsxs("div",{className:"p-4 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg shadow-sm hover:shadow-md transition-shadow border border-purple-200",children:[c.jsx("p",{className:"text-gray-800 italic",children:H.content}),c.jsxs("div",{className:"flex items-center justify-between mt-3",children:[c.jsxs("span",{className:"text-xs text-gray-500",children:[new Date(H.timestamp).toLocaleDateString(),"  ",new Date(H.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),c.jsx("div",{className:"flex items-center gap-4",children:c.jsxs("button",{className:"text-sm text-purple-600 hover:text-purple-800 transition-colors flex items-center gap-1",children:[c.jsx("i",{className:"fas fa-heart"})," ",H.reactions]})})]})]},H.id))})]})]})]})]})},j2=()=>{const{notifications:n,removeNotification:e}=vs(),s={success:"fa-check-circle",error:"fa-exclamation-circle",info:"fa-info-circle"},a={success:"bg-green-500",error:"bg-red-500",info:"bg-blue-500"};return c.jsxs("div",{className:"fixed top-5 right-5 z-[200] w-full max-w-sm space-y-3",children:[n.map(o=>c.jsxs("div",{className:`relative flex items-start gap-4 p-4 rounded-lg shadow-2xl text-white ${a[o.type]}`,style:{animation:"slideInLeft 0.3s ease-out forwards"},children:[c.jsx("div",{className:"flex-shrink-0 pt-0.5",children:c.jsx("i",{className:`fas ${s[o.type]} text-xl`})}),c.jsx("div",{className:"flex-1",children:c.jsx("p",{className:"font-bold text-sm leading-snug",children:o.message})}),c.jsx("button",{onClick:()=>e(o.id),className:"p-1 rounded-full hover:bg-white/20 transition-colors","aria-label":"Close notification",children:c.jsx("i",{className:"fas fa-times text-sm"})})]},o.id)),c.jsx("style",{children:`
          @keyframes slideInLeft {
            from { 
              opacity: 0; 
              transform: translateX(100%); 
            }
            to { 
              opacity: 1; 
              transform: translateX(0); 
            }
          }
      `})]})},R2=()=>{const n=G.useRef(null),e=G.useRef(null),s=G.useRef(null),a=G.useRef(null),[o,l]=G.useState("main"),[d,f]=G.useState(Rt[0]),[m,p]=G.useState(null),[x,b]=G.useState(null),[w,_]=G.useState(null),[N,C]=G.useState(null),[E,R]=G.useState(!1),[A,k]=G.useState(!0),[U,V]=G.useState(()=>{try{const K=localStorage.getItem("unistay_saved_hostels");return K?new Set(JSON.parse(K)):new Set}catch{return new Set}}),[B,H]=G.useState([]),[W,Y]=G.useState([]),[J,Z]=G.useState([]),[X,pe]=G.useState([]),[ke,oe]=G.useState([]),[D,Q]=G.useState([]),[de,Oe]=G.useState([]),[Me,dt]=G.useState([{id:"1",title:"Pizza Hut Discount",description:"Get 30% off on your first order with student ID",discount:30,imageUrl:"https://images.unsplash.com/photo-1604068549290-dea0e4a305ca?w=400&h=300&fit=crop",postedBy:"John Doe",timestamp:new Date(Date.now()-7200*1e3).toISOString()},{id:"2",title:"Gym Membership Special",description:"Student gym membership at half price for 3 months",discount:50,imageUrl:"https://images.unsplash.com/photo-1534438327276-14e5300c3a48?w=400&h=300&fit=crop",postedBy:"Jane Smith",timestamp:new Date(Date.now()-3600*1e3).toISOString()},{id:"3",title:"Movie Tickets",description:"Student discount on weekday movie tickets",discount:25,imageUrl:"https://images.unsplash.com/photo-1598899134739-24c46f58b8c0?w=400&h=300&fit=crop",postedBy:"Admin",timestamp:new Date(Date.now()-14400*1e3).toISOString()}]),[Be,Ne]=G.useState([{id:"1",title:"Lost: Blue Backpack",description:"Lost near the library on Monday. Contains laptop and textbooks.",category:"lost",imageUrl:"https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=400&h=300&fit=crop",postedBy:"Sarah Johnson",phone:"+234 (0) 810 123 4567",timestamp:new Date(Date.now()-1440*60*1e3).toISOString()},{id:"2",title:"Found: Black Wallet",description:"Found in the cafeteria. Contains ID and some cards. Contact to claim.",category:"found",imageUrl:"https://images.unsplash.com/photo-1548036328-c9fa89d128fa?w=400&h=300&fit=crop",postedBy:"Michael Chen",phone:"+234 (0) 805 987 6543",timestamp:new Date(Date.now()-360*60*1e3).toISOString()}]),[Qe,Gt]=G.useState([]),[nn,sn]=G.useState([]),[Ys,an]=G.useState([]),ot=K=>{if(K==null)return 0;if(typeof K=="number")return K;if(Array.isArray(K))return K.every(re=>typeof re=="number")?K.reduce((re,te)=>re+te,0):K.length;if(typeof K=="string")try{const re=JSON.parse(K);return ot(re)}catch{const te=parseInt(K,10);return Number.isNaN(te)?0:te}return typeof K=="object"&&"length"in K&&typeof K.length=="number"?K.length:0},Ks={add:async K=>{const re={...K,id:`lostfound-${Date.now()}`,timestamp:new Date().toISOString()};Ne(te=>[re,...te])},update:async K=>{Ne(re=>re.map(te=>te.id===K.id?{...te,...K}:te))},remove:async K=>{Ne(re=>re.filter(te=>te.id!==K))}};G.useEffect(()=>{lw({rootMargin:"50px"});let K=!0;const re=async()=>{try{const{data:{session:et}}=await ee.auth.getSession(),me=ll(et?.user||null);if(K){C(me),R(me?.email==="admin@unistay.com"||me?.email==="victorbaguma34@gmail.com"),me||(V(new Set),H([])),await on();try{const fe=await en.getApproved();if(K){const St=fe.map(Le=>({id:Le.id,content:Le.content,timestamp:Le.timestamp,likes:ot(Le.likes),dislikes:ot(Le.dislikes),comments:[],userLikeStatus:null}));sn(St)}}catch{}if(me?.email==="admin@unistay.com"||me?.email==="victorbaguma34@gmail.com"||me?.email==="drilebaroy33@gmail.com")try{const fe=await en.getPending();if(K){const St=fe.map(Le=>({id:Le.id,content:Le.content,timestamp:Le.timestamp,likes:ot(Le.likes),dislikes:ot(Le.dislikes),comments:[],userLikeStatus:null}));an(St)}}catch{}k(!1)}}catch{K&&k(!1)}},{data:{subscription:te}}=ee.auth.onAuthStateChange(async(et,me)=>{const fe=ll(me?.user||null);K&&(C(fe),R(fe?.email==="admin@unistay.com"||fe?.email==="victorbaguma34@gmail.com"||fe?.email==="drilebaroy33@gmail.com"),fe||(V(new Set),H([])))});return re(),()=>{K=!1,te.unsubscribe()}},[]);const xs=$e.useRef(null),Qs=$e.useRef(null);$e.useEffect(()=>(xs.current=so.subscribeConfessions(K=>{try{const re=K.eventType||K.event||K.type,te=K.new||K.record||K;if(!te)return;if(re==="INSERT"||K.eventType==="INSERT")te.is_approved===!0||te.isApproved===!0?sn(me=>[{id:te.id,content:te.content,timestamp:te.timestamp,likes:ot(te.likes),dislikes:ot(te.dislikes),comments:[],userLikeStatus:null},...me]):an(me=>[{id:te.id,content:te.content,timestamp:te.timestamp,likes:ot(te.likes),dislikes:ot(te.dislikes),comments:[],userLikeStatus:null},...me]);else if(re==="UPDATE")te.is_approved===!0||te.isApproved===!0?(sn(me=>me.some(fe=>fe.id===te.id)?me.map(fe=>fe.id===te.id?{...fe,likes:ot(te.likes),dislikes:ot(te.dislikes)}:fe):[{id:te.id,content:te.content,timestamp:te.timestamp,likes:ot(te.likes),dislikes:ot(te.dislikes),comments:[],userLikeStatus:null},...me]),an(me=>me.filter(fe=>fe.id!==te.id))):sn(me=>me.map(fe=>fe.id===te.id?{...fe,likes:ot(te.likes),dislikes:ot(te.dislikes)}:fe));else if(re==="DELETE"){const et=K.old?.id||K.record?.id||te.id;sn(me=>me.filter(fe=>fe.id!==et)),an(me=>me.filter(fe=>fe.id!==et))}}catch{}}),Qs.current=so.subscribeComments(K=>{try{const re=K.new||K.record||K,te=K.eventType||K.event||K.type;if(!re)return;if(te==="INSERT"){const et=re.confession_id||re.confessionId;sn(me=>me.map(fe=>fe.id===et?{...fe,comments:[...fe.comments||[],{id:re.id,content:re.content,userName:re.user_name||re.userName,timestamp:re.timestamp}]}:fe))}}catch{}}),()=>{xs.current&&xs.current(),Qs.current&&Qs.current()}),[]),G.useEffect(()=>{try{localStorage.setItem("unistay_saved_hostels",JSON.stringify(Array.from(U)))}catch{}},[U]),G.useEffect(()=>{if(N&&!A&&B.length===0){const K=D.find(te=>te.id===N?.id),re=[];J.length>0&&re.push({id:`notif-news-${J[0].id}`,type:"news",message:`New article posted: "${J[0].title}"`,timestamp:new Date(new Date().getTime()-1e3*60*3),read:!1}),ke.length>0&&re.push({id:`notif-job-${ke[0].id}`,type:"job",message:`New opportunity: ${ke[0].title} at ${ke[0].company}`,timestamp:new Date(new Date().getTime()-1e3*60*60*1),read:!1}),D.length>1&&K&&re.push({id:`notif-roommate-${Date.now()}`,type:"roommate",message:"You have new potential roommate matches!",timestamp:new Date(new Date().getTime()-1e3*60*60*5),read:!1}),H(re.sort((te,et)=>et.timestamp.getTime()-te.timestamp.getTime()))}},[N,A,J,ke,D]),G.useEffect(()=>{if(A)return;const K=new URLSearchParams(window.location.search),re=K.get("view"),te=K.get("articleId");if(re)if(re==="newsArticle"&&te&&J.length>0){const et=J.find(me=>me.id===te);et&&(b(et),l("newsArticle"),window.scrollTo(0,0))}else l(re),window.scrollTo(0,0)},[A,J]);const on=async()=>{const[K,re,te,et,me,fe,St,Le]=await Promise.all([Ad.getAll(),kd.getAll(),jd.getAll(),Rd.getAll(),Xr.getAll(),fo.getAll(),Ln.getAll(),P0.getAll()]);Y(K),Z(re),pe(te),oe(et),Q(me),Oe(fe),Gt(St),dt(Le)},Xs=K=>p(K),ra=()=>p(null),yl=async K=>{await Xr.set(K);const re=await Xr.getAll();Q(re)},Ie=K=>{const re=(te,et)=>{const me=new URLSearchParams(window.location.search);te?me.set("view",te):me.delete("view"),te!=="newsArticle"&&me.delete("articleId");const fe=me.toString()?`${window.location.pathname}?${me.toString()}`:window.location.pathname;window.history.replaceState(null,"",fe)};K==="admin"&&E?(l("admin"),re("admin")):K==="spotlight"?o==="main"?(s.current?.scrollIntoView({behavior:"smooth"}),re("main")):(l("main"),setTimeout(()=>{s.current?.scrollIntoView({behavior:"smooth"})},100),re("main")):K!=="admin"&&(l(K),re(K),window.scrollTo(0,0))},la=K=>{_(K),Ie("service")},Ws=K=>{if(!N){Ie("auth");return}V(re=>{const te=new Set(re);return te.has(K)?te.delete(K):te.add(K),te})},ca=()=>{Ie("main")},bo=async()=>{await cl.logout(),Ie("auth")},vl=()=>{H(K=>K.map(re=>({...re,read:!0})))},xt=()=>{n.current&&n.current.scrollIntoView({behavior:"smooth",block:"start"})},xl=()=>{if(a.current){a.current.scrollIntoView({behavior:"smooth",block:"start"});return}o!=="main"&&(l("main"),setTimeout(()=>{a.current?.scrollIntoView({behavior:"smooth",block:"start"})},150))},wo=()=>{e.current&&e.current.scrollIntoView({behavior:"smooth",block:"start"})},_o=()=>{const K=document.getElementById("services");if(K){K.scrollIntoView({behavior:"smooth",block:"start"});return}o!=="main"&&(l("main"),setTimeout(()=>{document.getElementById("services")?.scrollIntoView({behavior:"smooth",block:"start"})},150))};if(A)return c.jsx("div",{className:"flex items-center justify-center h-screen bg-unistay-bg",children:c.jsx(Ze,{size:"lg"})});const Zs=o==="main";return c.jsx(Q1,{children:c.jsxs("div",{className:`bg-white font-sans antialiased ${Zs?"pt-20":""}`,children:[c.jsx(tw,{}),c.jsx(j2,{}),c.jsx(aw,{onNavigate:Ie,currentView:o,user:N,isAdmin:E,onLogout:bo,notifications:B,onMarkNotificationsAsRead:vl,onScrollToContact:xt,onScrollToSpotlight:xl,onScrollToServices:_o}),c.jsxs("main",{children:[o==="main"&&c.jsxs(c.Fragment,{children:[c.jsx(ow,{hostels:W,onHostelSelect:Xs}),c.jsx(mw,{universities:Rt,selectedUniversity:d,onSelectUniversity:f,hostels:W,onViewHostel:Xs,savedHostelIds:U,onToggleSave:Ws}),c.jsx(B0,{ref:s,news:J,events:X,jobs:ke,universities:Rt,onNavigateToBlog:()=>Ie("blog"),onNavigateToEvents:()=>Ie("events"),onNavigateToJobs:()=>Ie("jobs"),user:N,onNavigate:Ie,deals:Me,lostItems:Be,studentSpotlights:Qe,confessions:nn,studentDealsRef:e,studentSpotlightRef:a,confessionHandler:so}),c.jsx($1,{services:J1,selectedUniversity:d,onServiceSelect:la})]}),o==="blog"&&c.jsx(c2,{news:J,onNavigateHome:()=>Ie("main")}),o==="newsArticle"&&c.jsx(yd,{news:x,onNavigateHome:()=>{b(null),Ie("blog")}}),o==="events"&&c.jsx(u2,{events:X,onNavigateHome:()=>Ie("main")}),o==="jobs"&&c.jsx(f2,{jobs:ke,onNavigateHome:()=>Ie("main")}),o==="roommateFinder"&&N&&c.jsx(o2,{currentUser:N,currentUserProfile:D.find(K=>K.id===N.id)||null,onProfileUpdate:yl,profiles:D,universities:Rt,onNavigateHome:()=>Ie("main"),onNavigateToProfile:()=>Ie("profile")}),o==="roommateMatch"&&N&&c.jsx(l2,{currentUser:D.find(K=>K.id===N.id)||null,profiles:D,universities:Rt,onNavigateHome:()=>Ie("main"),onNavigateToProfile:()=>Ie("profile")}),o==="auth"&&c.jsx(h2,{onAuthSuccess:ca,onNavigateHome:()=>Ie("main")}),o==="admin"&&E&&c.jsx(E2,{onExitAdminMode:()=>Ie("main"),content:{hostels:{items:W,handler:zS,universities:Rt},news:{items:J,handler:FS},events:{items:X,handler:$S},jobs:{items:ke,handler:JS},roommateProfiles:{items:D},contactMessages:{items:de,handler:X1},spotlights:{items:Qe,handler:GS},lostFound:{items:Be,handler:Ks},studentDeals:{items:Me,handler:YS},pendingConfessions:{items:Ys,handler:so}},onDataChange:on}),o==="profile"&&N&&c.jsx(k2,{user:N,profile:D.find(K=>K.id===N.id),onNavigate:Ie,onSignOut:bo,universities:Rt,onDataChange:on,savedHostels:Array.from(U).map(K=>W.find(re=>re.id===K)).filter(Boolean),onToggleSaveHostel:Ws,confessions:nn,confessionHandler:so,allProfiles:D}),o==="service"&&w&&c.jsx(K1,{service:w,university:d,onNavigateHome:()=>Ie("main")})]}),m&&c.jsx(e2,{hostel:m,onClose:ra}),o!=="admin"&&o!=="auth"&&o!=="roommateFinder"&&o!=="roommateMatch"&&o!=="profile"&&o!=="newsArticle"&&o!=="service"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{ref:n,children:c.jsx(W1,{})}),c.jsx(Z1,{onNavigateToRoommateFinder:()=>Ie("roommateFinder"),onNavigateToBlog:()=>Ie("blog"),onNavigateToAuth:()=>Ie("auth"),onNavigateToHostels:()=>Ie("main"),onScrollToContact:xt,onScrollToDeals:wo,user:N})]})]})})},bv=document.getElementById("root");if(!bv)throw new Error("Could not find root element to mount to");const M2=Fb.createRoot(bv);M2.render(c.jsx($e.StrictMode,{children:c.jsx(R2,{})}));
